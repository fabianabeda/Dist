"use strict";var rne=Object.defineProperty,sne=Object.defineProperties,one=Object.getOwnPropertyDescriptors,Cz=Object.getOwnPropertySymbols,ane=Object.prototype.hasOwnProperty,lne=Object.prototype.propertyIsEnumerable,Ez=(et,ve,P)=>ve in et?rne(et,ve,{enumerable:!0,configurable:!0,writable:!0,value:P}):et[ve]=P,Dz=(et,ve)=>{for(var P in ve||(ve={}))ane.call(ve,P)&&Ez(et,P,ve[P]);if(Cz)for(var P of Cz(ve))lne.call(ve,P)&&Ez(et,P,ve[P]);return et},xz=(et,ve)=>sne(et,one(ve));(self.webpackChunkat_angular_menu=self.webpackChunkat_angular_menu||[]).push([[179],{2011:(et,ve,P)=>{P.d(ve,{hO:()=>qe,xv:()=>he,Dh:()=>ce,GT:()=>me,cc:()=>Te,on:()=>q,pX:()=>oe});var c=P(5e3),te=P(127),L=P(5813);et=P.hmd(et);const de=["ngOnDestroy"],oe=(xe,We,Qe,Se={})=>new Proxy(xe,{get:(be,Ce)=>Qe.runOutsideAngular(()=>{var He;if(xe[Ce])return(null===(He=null==Se?void 0:Se.spy)||void 0===He?void 0:He.get)&&Se.spy.get(Ce,xe[Ce]),xe[Ce];if(de.indexOf(Ce)>-1)return()=>{};const Ge=We.toPromise().then(z=>{const H=z&&z[Ce];return"function"==typeof H?H.bind(z):H&&H.then?H.then(X=>Qe.run(()=>X)):Qe.run(()=>H)});return new Proxy(()=>{},{get:(z,H)=>Ge[H],apply:(z,H,X)=>Ge.then(ue=>{var se;const Me=ue&&ue(...X);return(null===(se=null==Se?void 0:Se.spy)||void 0===se?void 0:se.apply)&&Se.spy.apply(Ce,X,Me),Me})})})}),me=(xe,We)=>{We.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(Se=>{Object.defineProperty(xe.prototype,Se,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,Se))})})};class ie{constructor(We){return We}}const ce=new c.OlP("angularfire2.app.options"),he=new c.OlP("angularfire2.app.name");function q(xe,We,Qe){const be="object"==typeof Qe&&Qe||{};be.name=be.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const He=te.Z.apps.filter(Ge=>Ge&&Ge.name===be.name)[0]||We.runOutsideAngular(()=>te.Z.initializeApp(xe,be));try{JSON.stringify(xe)!==JSON.stringify(He.options)&&$("error",`${He.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ge){}return new ie(He)}const $=(xe,...We)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[xe](...We)},re={provide:ie,useFactory:q,deps:[ce,c.R0b,[new c.FiY,he]]};let qe=(()=>{class xe{constructor(Qe){te.Z.registerVersion("angularfire",L.q4.full,"core"),te.Z.registerVersion("angularfire",L.q4.full,"app-compat"),te.Z.registerVersion("angular",c.q4F.full,Qe.toString())}static initializeApp(Qe,Se){return{ngModule:xe,providers:[{provide:ce,useValue:Qe},{provide:he,useValue:Se}]}}}return xe.\u0275fac=function(Qe){return new(Qe||xe)(c.LFG(c.Lbi))},xe.\u0275mod=c.oAB({type:xe}),xe.\u0275inj=c.cJS({providers:[re]}),xe})();function Te(xe,We,Qe,Se,be){const[,Ce,He]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===xe)||[];if(Ce)return function Pe(xe,We){try{return xe.toString()===We.toString()}catch(Qe){return xe===We}}(be,He)||(pe("error",`${We} was already initialized on the ${Qe} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:be,was:He})),Ce;{const Ge=Se();return globalThis.\u0275AngularfireInstanceCache.push([xe,Ge,be]),Ge}}const Ue=!!et.hot,pe=(xe,...We)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[xe](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(et,ve,P)=>{P.d(ve,{q4:()=>Br,iC:()=>bi,HU:()=>oc,vb:()=>sc,JM:()=>Cg});var c=P(5e3),te=P(5867),L=P(5861),de=P(9681),oe=P(2090),me=P(4859),ie=P(1877),ce=P(8766);const he="@firebase/installations",q="0.5.9",re=`w:${q}`,qe="FIS_v2",We=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qe(S){return S instanceof oe.ZR&&S.code.includes("request-failed")}function Se({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function be(S){return{token:S.token,requestStatus:2,expiresIn:ue(S.expiresIn),creationTime:Date.now()}}function Ce(S,A){return He.apply(this,arguments)}function He(){return(He=(0,L.Z)(function*(S,A){const U=(yield A.json()).error;return We.create("request-failed",{requestName:S,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Ge({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function z(S,{refreshToken:A}){const k=Ge(S);return k.append("Authorization",function se(S){return`${qe} ${S}`}(A)),k}function H(S){return X.apply(this,arguments)}function X(){return(X=(0,L.Z)(function*(S){const A=yield S();return A.status>=500&&A.status<600?S():A})).apply(this,arguments)}function ue(S){return Number(S.replace("s","000"))}function Me(S,A){return ae.apply(this,arguments)}function ae(){return(ae=(0,L.Z)(function*({appConfig:S,heartbeatServiceProvider:A},{fid:k}){const U=Se(S),J=Ge(S),le=A.getImmediate({optional:!0});if(le){const Ct=yield le.getHeartbeatsHeader();Ct&&J.append("x-firebase-client",Ct)}const je={method:"POST",headers:J,body:JSON.stringify({fid:k,authVersion:qe,appId:S.appId,sdkVersion:re})},At=yield H(()=>fetch(U,je));if(At.ok){const Ct=yield At.json();return{fid:Ct.fid||k,registrationStatus:2,refreshToken:Ct.refreshToken,authToken:be(Ct.authToken)}}throw yield Ce("Create Installation",At)})).apply(this,arguments)}function _t(S){return new Promise(A=>{setTimeout(A,S)})}const Nn=/^[cdef][\w-]{21}$/;function xt(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const k=function Rn(S){return function Ot(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Nn.test(k)?k:""}catch(S){return""}}function Xt(S){return`${S.appName}!${S.appId}`}const ci=new Map;function an(S,A){const k=Xt(S);Vt(k,A),function Kr(S,A){const k=function Si(){return!ur&&"BroadcastChannel"in self&&(ur=new BroadcastChannel("[Firebase] FID Change"),ur.onmessage=S=>{Vt(S.data.key,S.data.fid)}),ur}();k&&k.postMessage({key:S,fid:A}),function Ni(){0===ci.size&&ur&&(ur.close(),ur=null)}()}(k,A)}function Vt(S,A){const k=ci.get(S);if(k)for(const U of k)U(A)}let ur=null;const Ji="firebase-installations-store";let Qr=null;function yt(){return Qr||(Qr=(0,ce.X3)("firebase-installations-database",1,{upgrade:(S,A)=>{0===A&&S.createObjectStore(Ji)}})),Qr}function dr(S,A){return kn.apply(this,arguments)}function kn(){return(kn=(0,L.Z)(function*(S,A){const k=Xt(S),J=(yield yt()).transaction(Ji,"readwrite"),le=J.objectStore(Ji),Fe=yield le.get(k);return yield le.put(A,k),yield J.done,(!Fe||Fe.fid!==A.fid)&&an(S,A.fid),A})).apply(this,arguments)}function Ln(S){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,L.Z)(function*(S){const A=Xt(S),U=(yield yt()).transaction(Ji,"readwrite");yield U.objectStore(Ji).delete(A),yield U.done})).apply(this,arguments)}function er(S,A){return ui.apply(this,arguments)}function ui(){return(ui=(0,L.Z)(function*(S,A){const k=Xt(S),J=(yield yt()).transaction(Ji,"readwrite"),le=J.objectStore(Ji),Fe=yield le.get(k),je=A(Fe);return void 0===je?yield le.delete(k):yield le.put(je,k),yield J.done,je&&(!Fe||Fe.fid!==je.fid)&&an(S,je.fid),je})).apply(this,arguments)}function Bn(S){return hr.apply(this,arguments)}function hr(){return(hr=(0,L.Z)(function*(S){let A;const k=yield er(S.appConfig,U=>{const J=Eo(U),le=zt(S,J);return A=le.registrationPromise,le.installationEntry});return""===k.fid?{installationEntry:yield A}:{installationEntry:k,registrationPromise:A}})).apply(this,arguments)}function Eo(S){return Do(S||{fid:xt(),registrationStatus:0})}function zt(S,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(We.create("app-offline"))};const k={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},U=function ot(S,A){return bt.apply(this,arguments)}(S,k);return{installationEntry:k,registrationPromise:U}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:Ai(S)}:{installationEntry:A}}function bt(){return(bt=(0,L.Z)(function*(S,A){try{const k=yield Me(S,A);return dr(S.appConfig,k)}catch(k){throw Qe(k)&&409===k.customData.serverCode?yield Ln(S.appConfig):yield dr(S.appConfig,{fid:A.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Ai(S){return fr.apply(this,arguments)}function fr(){return(fr=(0,L.Z)(function*(S){let A=yield Ht(S.appConfig);for(;1===A.registrationStatus;)yield _t(100),A=yield Ht(S.appConfig);if(0===A.registrationStatus){const{installationEntry:k,registrationPromise:U}=yield Bn(S);return U||k}return A})).apply(this,arguments)}function Ht(S){return er(S,A=>{if(!A)throw We.create("installation-not-found");return Do(A)})}function Do(S){return function Ii(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Ti(S,A){return j.apply(this,arguments)}function j(){return(j=(0,L.Z)(function*({appConfig:S,heartbeatServiceProvider:A},k){const U=Y(S,k),J=z(S,k),le=A.getImmediate({optional:!0});if(le){const Ct=yield le.getHeartbeatsHeader();Ct&&J.append("x-firebase-client",Ct)}const je={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:re,appId:S.appId}})},At=yield H(()=>fetch(U,je));if(At.ok)return be(yield At.json());throw yield Ce("Generate Auth Token",At)})).apply(this,arguments)}function Y(S,{fid:A}){return`${Se(S)}/${A}/authTokens:generate`}function K(S){return De.apply(this,arguments)}function De(){return(De=(0,L.Z)(function*(S,A=!1){let k;const U=yield er(S.appConfig,le=>{if(!St(le))throw We.create("not-registered");const Fe=le.authToken;if(!A&&mn(Fe))return le;if(1===Fe.requestStatus)return k=W(S,A),le;{if(!navigator.onLine)throw We.create("app-offline");const je=ti(le);return k=tt(S,je),je}});return k?yield k:U.authToken})).apply(this,arguments)}function W(S,A){return ne.apply(this,arguments)}function ne(){return(ne=(0,L.Z)(function*(S,A){let k=yield Re(S.appConfig);for(;1===k.authToken.requestStatus;)yield _t(100),k=yield Re(S.appConfig);const U=k.authToken;return 0===U.requestStatus?K(S,A):U})).apply(this,arguments)}function Re(S){return er(S,A=>{if(!St(A))throw We.create("not-registered");return function Li(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function tt(S,A){return gt.apply(this,arguments)}function gt(){return(gt=(0,L.Z)(function*(S,A){try{const k=yield Ti(S,A),U=Object.assign(Object.assign({},A),{authToken:k});return yield dr(S.appConfig,U),k}catch(k){if(!Qe(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const U=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield dr(S.appConfig,U)}else yield Ln(S.appConfig);throw k}})).apply(this,arguments)}function St(S){return void 0!==S&&2===S.registrationStatus}function mn(S){return 2===S.requestStatus&&!function Et(S){const A=Date.now();return A<S.creationTime||S.creationTime+S.expiresIn<A+36e5}(S)}function ti(S){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:A})}function Ga(){return(Ga=(0,L.Z)(function*(S){const A=S,{installationEntry:k,registrationPromise:U}=yield Bn(A);return U?U.catch(console.error):K(A).catch(console.error),k.fid})).apply(this,arguments)}function $a(){return($a=(0,L.Z)(function*(S,A=!1){const k=S;return yield ni(k),(yield K(k,A)).token})).apply(this,arguments)}function ni(S){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,L.Z)(function*(S){const{registrationPromise:A}=yield Bn(S);A&&(yield A)})).apply(this,arguments)}function Xo(S){return We.create("missing-app-config-values",{valueName:S})}const nr="installations",ht=S=>{const A=S.getProvider("app").getImmediate(),k=function yi(S){if(!S||!S.options)throw Xo("App Configuration");if(!S.name)throw Xo("App Name");const A=["projectId","apiKey","appId"];for(const k of A)if(!S.options[k])throw Xo(k);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(A);return{app:A,appConfig:k,heartbeatServiceProvider:(0,de._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},ln=S=>{const A=S.getProvider("app").getImmediate(),k=(0,de._getProvider)(A,nr).getImmediate();return{getId:()=>function jl(S){return Ga.apply(this,arguments)}(k),getToken:J=>function Hl(S){return $a.apply(this,arguments)}(k,J)}};(function ir(){(0,de._registerComponent)(new me.wA(nr,ht,"PUBLIC")),(0,de._registerComponent)(new me.wA("installations-internal",ln,"PRIVATE"))})(),(0,de.registerVersion)(he,q),(0,de.registerVersion)(he,q,"esm2017");const Xr="@firebase/remote-config",Vn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ug{constructor(A,k,U,J){this.client=A,this.storage=k,this.storageCache=U,this.logger=J}isCachedDataFresh(A,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-k,J=U<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${J}.`),J}fetch(A){var k=this;return(0,L.Z)(function*(){const[U,J]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(J&&k.isCachedDataFresh(A.cacheMaxAgeMillis,U))return J;A.eTag=J&&J.eTag;const le=yield k.client.fetch(A),Fe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Fe.push(k.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Fe),le})()}}function id(S=navigator){return S.languages&&S.languages[0]||S.language}class Mi{constructor(A,k,U,J,le,Fe){this.firebaseInstallations=A,this.sdkVersion=k,this.namespace=U,this.projectId=J,this.apiKey=le,this.appId=Fe}fetch(A){var k=this;return(0,L.Z)(function*(){const[U,J]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Fe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},At={sdk_version:k.sdkVersion,app_instance_id:U,app_instance_id_token:J,app_id:k.appId,language_code:id()},Ct={method:"POST",headers:je,body:JSON.stringify(At)},$t=fetch(Fe,Ct),wt=new Promise((Is,yr)=>{A.signal.addEventListener(()=>{const Id=new Error("The operation was aborted.");Id.name="AbortError",yr(Id)})});let Hi;try{yield Promise.race([$t,wt]),Hi=yield $t}catch(Is){let yr="fetch-client-network";throw"AbortError"===Is.name&&(yr="fetch-timeout"),Vn.create(yr,{originalErrorMessage:Is.message})}let pi=Hi.status;const fo=Hi.headers.get("ETag")||void 0;let po,Ci;if(200===Hi.status){let Is;try{Is=yield Hi.json()}catch(yr){throw Vn.create("fetch-client-parse",{originalErrorMessage:yr.message})}po=Is.entries,Ci=Is.state}if("INSTANCE_STATE_UNSPECIFIED"===Ci?pi=500:"NO_CHANGE"===Ci?pi=304:("NO_TEMPLATE"===Ci||"EMPTY_CONFIG"===Ci)&&(po={}),304!==pi&&200!==pi)throw Vn.create("fetch-status",{httpStatus:pi});return{status:pi,eTag:fo,config:po}})()}}class dg{constructor(A,k){this.client=A,this.storage=k}fetch(A){var k=this;return(0,L.Z)(function*(){const U=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(A,U)})()}attemptFetch(A,{throttleEndTimeMillis:k,backoffCount:U}){var J=this;return(0,L.Z)(function*(){yield function Js(S,A){return new Promise((k,U)=>{const J=Math.max(A-Date.now(),0),le=setTimeout(k,J);S.addEventListener(()=>{clearTimeout(le),U(Vn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,k);try{const le=yield J.client.fetch(A);return yield J.storage.deleteThrottleMetadata(),le}catch(le){if(!function rd(S){if(!(S instanceof oe.ZR&&S.customData))return!1;const A=Number(S.customData.httpStatus);return 429===A||500===A||503===A||504===A}(le))throw le;const Fe={throttleEndTimeMillis:Date.now()+(0,oe.$s)(U),backoffCount:U+1};return yield J.storage.setThrottleMetadata(Fe),J.attemptFetch(A,Fe)}})()}}class sd{constructor(A,k,U,J,le){this.app=A,this._client=k,this._storageCache=U,this._storage=J,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bc(S,A){const k=S.target.error||void 0;return Vn.create(A,{originalErrorMessage:k&&k.message})}const eo="app_namespace_store";class gg{constructor(A,k,U,J=function pg(){return new Promise((S,A)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=U=>{A(Bc(U,"storage-open"))},k.onsuccess=U=>{S(U.target.result)},k.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(eo,{keyPath:"compositeKey"})}}catch(k){A(Vn.create("storage-open",{originalErrorMessage:k}))}})}()){this.appId=A,this.appName=k,this.namespace=U,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var k=this;return(0,L.Z)(function*(){const U=yield k.openDbPromise;return new Promise((J,le)=>{const je=U.transaction([eo],"readonly").objectStore(eo),At=k.createCompositeKey(A);try{const Ct=je.get(At);Ct.onerror=$t=>{le(Bc($t,"storage-get"))},Ct.onsuccess=$t=>{const wt=$t.target.result;J(wt?wt.value:void 0)}}catch(Ct){le(Vn.create("storage-get",{originalErrorMessage:Ct&&Ct.message}))}})})()}set(A,k){var U=this;return(0,L.Z)(function*(){const J=yield U.openDbPromise;return new Promise((le,Fe)=>{const At=J.transaction([eo],"readwrite").objectStore(eo),Ct=U.createCompositeKey(A);try{const $t=At.put({compositeKey:Ct,value:k});$t.onerror=wt=>{Fe(Bc(wt,"storage-set"))},$t.onsuccess=()=>{le()}}catch($t){Fe(Vn.create("storage-set",{originalErrorMessage:$t&&$t.message}))}})})()}delete(A){var k=this;return(0,L.Z)(function*(){const U=yield k.openDbPromise;return new Promise((J,le)=>{const je=U.transaction([eo],"readwrite").objectStore(eo),At=k.createCompositeKey(A);try{const Ct=je.delete(At);Ct.onerror=$t=>{le(Bc($t,"storage-delete"))},Ct.onsuccess=()=>{J()}}catch(Ct){le(Vn.create("storage-delete",{originalErrorMessage:Ct&&Ct.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class ad{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,L.Z)(function*(){const k=A.storage.getLastFetchStatus(),U=A.storage.getLastSuccessfulFetchTimestampMillis(),J=A.storage.getActiveConfig(),le=yield k;le&&(A.lastFetchStatus=le);const Fe=yield U;Fe&&(A.lastSuccessfulFetchTimestampMillis=Fe);const je=yield J;je&&(A.activeConfig=je)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function ql(){return ld.apply(this,arguments)}function ld(){return(ld=(0,L.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(S){return!1}})).apply(this,arguments)}!function ea(){(0,de._registerComponent)(new me.wA("remote-config",function S(A,{instanceIdentifier:k}){const U=A.getProvider("app").getImmediate(),J=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Vn.create("registration-window");if(!(0,oe.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:le,apiKey:Fe,appId:je}=U.options;if(!le)throw Vn.create("registration-project-id");if(!Fe)throw Vn.create("registration-api-key");if(!je)throw Vn.create("registration-app-id");const At=new gg(je,U.name,k=k||"firebase"),Ct=new ad(At),$t=new ie.Yd(Xr);$t.logLevel=ie.in.ERROR;const wt=new Mi(J,de.SDK_VERSION,k,le,Fe,je),Hi=new dg(wt,At),pi=new ug(Hi,At,Ct,$t),fo=new sd(U,pi,Ct,At,$t);return function dn(S){const A=(0,oe.m9)(S);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(fo),fo},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(Xr,"0.3.8"),(0,de.registerVersion)(Xr,"0.3.8","esm2017")}();const cd="/firebase-messaging-sw.js",Ri="/firebase-cloud-messaging-push-scope",Ao="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ta="google.c.a.c_id",ud="google.c.a.c_l",Zh="google.c.a.ts",bs="google.c.a.e";var na=(()=>{return(S=na||(na={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",na;var S})();function Ui(S){const A=new Uint8Array(S);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function dd(S){const k=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(k),J=new Uint8Array(U.length);for(let le=0;le<U.length;++le)J[le]=U.charCodeAt(le);return J}const On="fcm_token_details_db",gr="fcm_token_object_Store";function Vc(S){return hd.apply(this,arguments)}function hd(){return hd=(0,L.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(On))return null;let A=null;return(yield(0,ce.X3)(On,5,{upgrade:(U=(0,L.Z)(function*(J,le,Fe,je){var At;if(le<2||!J.objectStoreNames.contains(gr))return;const Ct=je.objectStore(gr),$t=yield Ct.index("fcmSenderId").get(S);if(yield Ct.clear(),$t)if(2===le){const wt=$t;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;A={token:wt.fcmToken,createTime:null!==(At=wt.createTime)&&void 0!==At?At:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:Ui(wt.vapidKey)}}}else if(3===le){const wt=$t;A={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Ui(wt.auth),p256dh:Ui(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Ui(wt.vapidKey)}}}else if(4===le){const wt=$t;A={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Ui(wt.auth),p256dh:Ui(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Ui(wt.vapidKey)}}}}),function(le,Fe,je,At){return U.apply(this,arguments)})})).close(),yield(0,ce.Lj)(On),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),Uc(A)?A:null;var U}),hd.apply(this,arguments)}function Uc(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:A}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const is="firebase-messaging-store";let Qh=null;function cn(){return Qh||(Qh=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(S,A)=>{0===A&&S.createObjectStore(is)}})),Qh}function Ka(S){return To.apply(this,arguments)}function To(){return(To=(0,L.Z)(function*(S){const A=vi(S),U=yield(yield cn()).transaction(is).objectStore(is).get(A);if(U)return U;{const J=yield Vc(S.appConfig.senderId);if(J)return yield tn(S,J),J}})).apply(this,arguments)}function tn(S,A){return Za.apply(this,arguments)}function Za(){return(Za=(0,L.Z)(function*(S,A){const k=vi(S),J=(yield cn()).transaction(is,"readwrite");return yield J.objectStore(is).put(A,k),yield J.done,A})).apply(this,arguments)}function Wl(S){return to.apply(this,arguments)}function to(){return(to=(0,L.Z)(function*(S){const A=vi(S),U=(yield cn()).transaction(is,"readwrite");yield U.objectStore(is).delete(A),yield U.done})).apply(this,arguments)}function vi({appConfig:S}){return S.appId}const Dn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function rs(S,A){return wi.apply(this,arguments)}function wi(){return(wi=(0,L.Z)(function*(S,A){const k=yield ra(S),U=sa(A),J={method:"POST",headers:k,body:JSON.stringify(U)};let le;try{le=yield(yield fetch(ss(S.appConfig),J)).json()}catch(Fe){throw Dn.create("token-subscribe-failed",{errorInfo:Fe})}if(le.error)throw Dn.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw Dn.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function Mo(S,A){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,L.Z)(function*(S,A){const k=yield ra(S),U=sa(A.subscriptionOptions),J={method:"PATCH",headers:k,body:JSON.stringify(U)};let le;try{le=yield(yield fetch(`${ss(S.appConfig)}/${A.token}`,J)).json()}catch(Fe){throw Dn.create("token-update-failed",{errorInfo:Fe})}if(le.error)throw Dn.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw Dn.create("token-update-no-token");return le.token})).apply(this,arguments)}function Qa(S,A){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,L.Z)(function*(S,A){const U={method:"DELETE",headers:yield ra(S)};try{const le=yield(yield fetch(`${ss(S.appConfig)}/${A}`,U)).json();if(le.error)throw Dn.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(J){throw Dn.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function ss({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function ra(S){return mt.apply(this,arguments)}function mt(){return(mt=(0,L.Z)(function*({appConfig:S,installations:A}){const k=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function sa({p256dh:S,auth:A,endpoint:k,vapidKey:U}){const J={web:{endpoint:k,auth:A,p256dh:S}};return U!==Ao&&(J.web.applicationPubKey=U),J}const Yl=6048e5;function Xa(S){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,L.Z)(function*(S){const A=yield yn(S.swRegistration,S.vapidKey),k={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:A.endpoint,auth:Ui(A.getKey("auth")),p256dh:Ui(A.getKey("p256dh"))},U=yield Ka(S.firebaseDependencies);if(U){if(Ro(U.subscriptionOptions,k))return Date.now()>=U.createTime+Yl?zc(S,{token:U.token,createTime:Date.now(),subscriptionOptions:k}):U.token;try{yield Qa(S.firebaseDependencies,U.token)}catch(J){console.warn(J)}return Lt(S.firebaseDependencies,k)}return Lt(S.firebaseDependencies,k)})).apply(this,arguments)}function Ja(S){return $c.apply(this,arguments)}function $c(){return($c=(0,L.Z)(function*(S){const A=yield Ka(S.firebaseDependencies);A&&(yield Qa(S.firebaseDependencies,A.token),yield Wl(S.firebaseDependencies));const k=yield S.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function zc(S,A){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,L.Z)(function*(S,A){try{const k=yield Mo(S.firebaseDependencies,A),U=Object.assign(Object.assign({},A),{token:k,createTime:Date.now()});return yield tn(S.firebaseDependencies,U),k}catch(k){throw yield Ja(S),k}})).apply(this,arguments)}function Lt(S,A){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,L.Z)(function*(S,A){const U={token:yield rs(S,A),createTime:Date.now(),subscriptionOptions:A};return yield tn(S,U),U.token})).apply(this,arguments)}function yn(S,A){return oa.apply(this,arguments)}function oa(){return(oa=(0,L.Z)(function*(S,A){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:dd(A)})})).apply(this,arguments)}function Ro(S,A){return A.vapidKey===S.vapidKey&&A.endpoint===S.endpoint&&A.auth===S.auth&&A.p256dh===S.p256dh}function mr(S){const A={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function el(S,A){if(!A.notification)return;S.notification={};const k=A.notification.title;k&&(S.notification.title=k);const U=A.notification.body;U&&(S.notification.body=U);const J=A.notification.image;J&&(S.notification.image=J)}(A,S),function qc(S,A){!A.data||(S.data=A.data)}(A,S),function mg(S,A){if(!A.fcmOptions)return;S.fcmOptions={};const k=A.fcmOptions.link;k&&(S.fcmOptions.link=k);const U=A.fcmOptions.analytics_label;U&&(S.fcmOptions.analyticsLabel=U)}(A,S),A}function Zl(S){return"object"==typeof S&&!!S&&ta in S}function tl(S,A){const k=[];for(let U=0;U<S.length;U++)k.push(S.charAt(U)),U<A.length&&k.push(A.charAt(U));return k.join("")}function jn(S){return Dn.create("missing-app-config-values",{valueName:S})}tl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),tl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Es{constructor(A,k,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Ql(S){if(!S||!S.options)throw jn("App Configuration Object");if(!S.name)throw jn("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:k}=S;for(const U of A)if(!k[U])throw jn(U);return{appName:S.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:J,installations:k,analyticsProvider:U}}_delete(){return Promise.resolve()}}function nl(S){return no.apply(this,arguments)}function no(){return(no=(0,L.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(cd,{scope:Ri}),S.swRegistration.update().catch(()=>{})}catch(A){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function Nr(S,A){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,L.Z)(function*(S,A){if(!A&&!S.swRegistration&&(yield nl(S)),A||!S.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");S.swRegistration=A}})).apply(this,arguments)}function Xl(S,A){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,L.Z)(function*(S,A){A?S.vapidKey=A:S.vapidKey||(S.vapidKey=Ao)})).apply(this,arguments)}function il(){return(il=(0,L.Z)(function*(S,A){if(!navigator)throw Dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dn.create("permission-blocked");return yield Xl(S,null==A?void 0:A.vapidKey),yield Nr(S,null==A?void 0:A.serviceWorkerRegistration),Xa(S)})).apply(this,arguments)}function aa(S,A,k){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,L.Z)(function*(S,A,k){const U=rl(A);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:k[ta],message_name:k[ud],message_time:k[Zh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function rl(S){switch(S){case na.NOTIFICATION_CLICKED:return"notification_open";case na.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Zc(){return(Zc=(0,L.Z)(function*(S,A){const k=A.data;if(!k.isFirebaseMessaging)return;S.onMessageHandler&&k.messageType===na.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(mr(k)):S.onMessageHandler.next(mr(k)));const U=k.data;Zl(U)&&"1"===U[bs]&&(yield aa(S,k.messageType,U))})).apply(this,arguments)}const la="@firebase/messaging",fd=S=>{const A=new Es(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function _g(S,A){return Zc.apply(this,arguments)}(A,k)),A},ca=S=>{const A=S.getProvider("messaging").getImmediate();return{getToken:U=>function Jl(S,A){return il.apply(this,arguments)}(A,U)}};function ua(){return os.apply(this,arguments)}function os(){return(os=(0,L.Z)(function*(){try{yield(0,oe.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function pd(){(0,de._registerComponent)(new me.wA("messaging",fd,"PUBLIC")),(0,de._registerComponent)(new me.wA("messaging-internal",ca,"PRIVATE")),(0,de.registerVersion)(la,"0.9.13"),(0,de.registerVersion)(la,"0.9.13","esm2017")}();const gd="analytics",yg="firebase_id",Ds="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",da="https://www.googletagmanager.com/gtag/js",fi=new ie.Yd("@firebase/analytics");function ef(S){return Promise.all(S.map(A=>A.catch(k=>k)))}function ko(S,A){const k=document.createElement("script");k.src=`${da}?l=${S}&id=${A}`,k.async=!0,document.head.appendChild(k)}function _d(S,A,k,U,J,le){return tc.apply(this,arguments)}function tc(){return(tc=(0,L.Z)(function*(S,A,k,U,J,le){const Fe=U[J];try{if(Fe)yield A[Fe];else{const At=(yield ef(k)).find(Ct=>Ct.measurementId===J);At&&(yield A[At.appId])}}catch(je){fi.error(je)}S("config",J,le)})).apply(this,arguments)}function io(S,A,k,U,J){return ro.apply(this,arguments)}function ro(){return(ro=(0,L.Z)(function*(S,A,k,U,J){try{let le=[];if(J&&J.send_to){let Fe=J.send_to;Array.isArray(Fe)||(Fe=[Fe]);const je=yield ef(k);for(const At of Fe){const Ct=je.find(wt=>wt.measurementId===At),$t=Ct&&A[Ct.appId];if(!$t){le=[];break}le.push($t)}}0===le.length&&(le=Object.values(A)),yield Promise.all(le),S("event",U,J||{})}catch(le){fi.error(le)}})).apply(this,arguments)}function ha(){const S=window.document.getElementsByTagName("script");for(const A of Object.values(S))if(A.src&&A.src.includes(da))return A;return null}const ze=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),so=new class Sn{constructor(A={},k=1e3){this.throttleMetadata=A,this.intervalMillis=k}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,k){this.throttleMetadata[A]=k}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Hn(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Qt(S){return An.apply(this,arguments)}function An(){return(An=(0,L.Z)(function*(S){var A;const{appId:k,apiKey:U}=S,J={method:"GET",headers:Hn(U)},le=Ds.replace("{app-id}",k),Fe=yield fetch(le,J);if(200!==Fe.status&&304!==Fe.status){let je="";try{const At=yield Fe.json();(null===(A=At.error)||void 0===A?void 0:A.message)&&(je=At.error.message)}catch(At){}throw ze.create("config-fetch-failed",{httpStatus:Fe.status,responseMessage:je})}return Fe.json()})).apply(this,arguments)}function Be(S){return fa.apply(this,arguments)}function fa(){return(fa=(0,L.Z)(function*(S,A=so,k){const{appId:U,apiKey:J,measurementId:le}=S.options;if(!U)throw ze.create("no-app-id");if(!J){if(le)return{measurementId:le,appId:U};throw ze.create("no-api-key")}const Fe=A.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new tf;return setTimeout((0,L.Z)(function*(){je.abort()}),void 0!==k?k:6e4),oo({appId:U,apiKey:J,measurementId:le},Fe,je,A)})).apply(this,arguments)}function oo(S,A,k){return ls.apply(this,arguments)}function ls(){return(ls=(0,L.Z)(function*(S,{throttleEndTimeMillis:A,backoffCount:k},U,J=so){const{appId:le,measurementId:Fe}=S;try{yield nc(U,A)}catch(je){if(Fe)return fi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${je.message}]`),{appId:le,measurementId:Fe};throw je}try{const je=yield Qt(S);return J.deleteThrottleMetadata(le),je}catch(je){if(!yd(je)){if(J.deleteThrottleMetadata(le),Fe)return fi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${je.message}]`),{appId:le,measurementId:Fe};throw je}const At=503===Number(je.customData.httpStatus)?(0,oe.$s)(k,J.intervalMillis,30):(0,oe.$s)(k,J.intervalMillis),Ct={throttleEndTimeMillis:Date.now()+At,backoffCount:k+1};return J.setThrottleMetadata(le,Ct),fi.debug(`Calling attemptFetch again in ${At} millis`),oo(S,Ct,U,J)}})).apply(this,arguments)}function nc(S,A){return new Promise((k,U)=>{const J=Math.max(A-Date.now(),0),le=setTimeout(k,J);S.addEventListener(()=>{clearTimeout(le),U(ze.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function yd(S){if(!(S instanceof oe.ZR&&S.customData))return!1;const A=Number(S.customData.httpStatus);return 429===A||500===A||503===A||504===A}class tf{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function vd(){return ao.apply(this,arguments)}function ao(){return(ao=(0,L.Z)(function*(){if(!(0,oe.hl)())return fi.warn(ze.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(S){return fi.warn(ze.create("indexeddb-unavailable",{errorInfo:S}).message),!1}return!0})).apply(this,arguments)}function rr(){return(rr=(0,L.Z)(function*(S,A,k,U,J,le,Fe){var je;const At=Be(S);At.then(pi=>{k[pi.measurementId]=pi.appId,S.options.measurementId&&pi.measurementId!==S.options.measurementId&&fi.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${pi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pi=>fi.error(pi)),A.push(At);const Ct=vd().then(pi=>{if(pi)return U.getId()}),[$t,wt]=yield Promise.all([At,Ct]);ha()||ko(le,$t.measurementId),J("js",new Date);const Hi=null!==(je=null==Fe?void 0:Fe.config)&&void 0!==je?je:{};return Hi.origin="firebase",Hi.update=!0,null!=wt&&(Hi[yg]=wt),J("config",$t.measurementId,Hi),$t.measurementId})).apply(this,arguments)}class Fo{constructor(A){this.app=A}_delete(){return delete ki[this.app.options.appId],Promise.resolve()}}let ki={},wd=[];const pa={};let Xc,Lr,Po="dataLayer",Cn=!1;function Jc(S,A,k){!function No(){const S=[];if((0,oe.ru)()&&S.push("This is a browser extension environment."),(0,oe.zI)()||S.push("Cookies are not available."),S.length>0){const A=S.map((U,J)=>`(${J+1}) ${U}`).join(" "),k=ze.create("invalid-analytics-context",{errorInfo:A});fi.warn(k.message)}}();const U=S.options.appId;if(!U)throw ze.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw ze.create("no-api-key");fi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ki[U])throw ze.create("already-exists",{id:U});if(!Cn){!function ec(S){let A=[];Array.isArray(window[S])?A=window[S]:window[S]=A}(Po);const{wrappedGtag:le,gtagCore:Fe}=function vg(S,A,k,U,J){let le=function(...Fe){window[U].push(arguments)};return window[J]&&"function"==typeof window[J]&&(le=window[J]),window[J]=function Qc(S,A,k,U){function le(){return(le=(0,L.Z)(function*(Fe,je,At){try{"event"===Fe?yield io(S,A,k,je,At):"config"===Fe?yield _d(S,A,k,U,je,At):S("set",je)}catch(Ct){fi.error(Ct)}})).apply(this,arguments)}return function J(Fe,je,At){return le.apply(this,arguments)}}(le,S,A,k),{gtagCore:le,wrappedGtag:window[J]}}(ki,wd,pa,Po,"gtag");Lr=le,Xc=Fe,Cn=!0}return ki[U]=function Oo(S,A,k,U,J,le,Fe){return rr.apply(this,arguments)}(S,wd,pa,A,Xc,Po,k),new Fo(S)}function ma(){return(ma=(0,L.Z)(function*(S,A,k,U,J){if(J&&J.global)S("event",k,U);else{const le=yield A;S("event",k,Object.assign(Object.assign({},U),{send_to:le}))}})).apply(this,arguments)}function oy(){return bd.apply(this,arguments)}function bd(){return(bd=(0,L.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(S){return!1}})).apply(this,arguments)}const Ed="@firebase/analytics";!function xd(){(0,de._registerComponent)(new me.wA(gd,(A,{options:k})=>Jc(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,de._registerComponent)(new me.wA("analytics-internal",function S(A){try{const k=A.getProvider(gd).getImmediate();return{logEvent:(U,J,le)=>function Cd(S,A,k,U){S=(0,oe.m9)(S),function xs(S,A,k,U,J){return ma.apply(this,arguments)}(Lr,ki[S.app.options.appId],A,k,U).catch(J=>fi.error(J))}(k,U,J,le)}}catch(k){throw ze.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,de.registerVersion)(Ed,"0.7.9"),(0,de.registerVersion)(Ed,"0.7.9","esm2017")}();var hl=P(4408),Gn=P(7565);const Bo=new class tu extends Gn.v{}(class ay extends hl.o{constructor(A,k){super(A,k),this.scheduler=A,this.work=k}schedule(A,k=0){return k>0?super.schedule(A,k):(this.delay=k,this.state=A,this.scheduler.flush(this),this)}execute(A,k){return k>0||this.closed?super.execute(A,k):this._execute(A,k)}requestAsyncId(A,k,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(A,k,U):A.flush(this)}});var Sd=P(4986),en=P(8505),Zn=P(9468),ji=P(5363);const Br=new c.GfV("7.3.0"),rn="__angularfire_symbol__analyticsIsSupportedValue",ya="__angularfire_symbol__analyticsIsSupported",uo="__angularfire_symbol__remoteConfigIsSupportedValue",_r="__angularfire_symbol__remoteConfigIsSupported",En="__angularfire_symbol__messagingIsSupportedValue",cs="__angularfire_symbol__messagingIsSupported";function Cg(S,A,k){if(A){if(1===A.length)return A[0];const le=A.filter(Fe=>Fe.app===k);if(1===le.length)return le[0]}return k.container.getProvider(S).getImmediate({optional:!0})}globalThis[ya]||(globalThis[ya]=oy().then(S=>globalThis[rn]=S).catch(()=>globalThis[rn]=!1)),globalThis[cs]||(globalThis[cs]=ua().then(S=>globalThis[En]=S).catch(()=>globalThis[En]=!1)),globalThis[_r]||(globalThis[_r]=ql().then(S=>globalThis[uo]=S).catch(()=>globalThis[uo]=!1));const sc=(S,A)=>{const k=A?[A]:(0,te.C6)(),U=[];return k.forEach(J=>{J.container.getProvider(S).instances.forEach(Fe=>{U.includes(Fe)||U.push(Fe)})}),U};function ho(){}class Ad{constructor(A,k=Bo){this.zone=A,this.delegate=k}now(){return this.delegate.now()}schedule(A,k,U){const J=this.zone;return this.delegate.schedule(function(Fe){J.runGuarded(()=>{A.apply(this,[Fe])})},k,U)}}class iu{constructor(A){this.zone=A,this.task=null}call(A,k){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ho,{},ho,ho)),k.pipe((0,en.b)({next:U,complete:U,error:U})).subscribe(A).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let oc=(()=>{class S{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Ad(Zone.current)),this.insideAngular=k.run(()=>new Ad(Zone.current,Sd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(k){return new(k||S)(c.LFG(c.R0b))},S.\u0275prov=c.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function us(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function bi(S){return us(),function As(S){return function(k){return(k=k.lift(new iu(S.ngZone))).pipe((0,Zn.R)(S.outsideAngular),(0,ji.Q)(S.insideAngular))}}(us())(S)}},2090:(et,ve,P)=>{P.d(ve,{BH:()=>qe,LL:()=>ae,ZR:()=>Me,gQ:()=>Ji,zI:()=>X,hu:()=>te,g5:()=>L,US:()=>me,tV:()=>he,h$:()=>ie,L:()=>ce,$s:()=>Ht,r3:()=>cr,Sg:()=>Te,ne:()=>Qr,p$:()=>q,vZ:()=>ur,ZB:()=>$,gK:()=>er,pd:()=>Ys,m9:()=>Ti,z$:()=>Pe,GJ:()=>an,jU:()=>xe,ru:()=>We,d:()=>Se,xb:()=>Vt,w1:()=>be,hl:()=>z,uI:()=>Ue,UG:()=>pe,Yr:()=>He,b$:()=>Qe,G6:()=>Ge,Mn:()=>Ce,w9:()=>ci,cI:()=>Nn,UI:()=>Kr,xO:()=>Ni,zd:()=>Zr,DV:()=>Jt,ug:()=>zt,dS:()=>Eo,Pz:()=>it,Dv:()=>Ks,Wj:()=>Bn,lb:()=>hr,eu:()=>H});const te=function(j,Y){if(!j)throw L(Y)},L=function(j){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+j)},de=function(j){const Y=[];let K=0;for(let De=0;De<j.length;De++){let W=j.charCodeAt(De);W<128?Y[K++]=W:W<2048?(Y[K++]=W>>6|192,Y[K++]=63&W|128):55296==(64512&W)&&De+1<j.length&&56320==(64512&j.charCodeAt(De+1))?(W=65536+((1023&W)<<10)+(1023&j.charCodeAt(++De)),Y[K++]=W>>18|240,Y[K++]=W>>12&63|128,Y[K++]=W>>6&63|128,Y[K++]=63&W|128):(Y[K++]=W>>12|224,Y[K++]=W>>6&63|128,Y[K++]=63&W|128)}return Y},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,Y){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let W=0;W<j.length;W+=3){const ne=j[W],Re=W+1<j.length,tt=Re?j[W+1]:0,gt=W+2<j.length,St=gt?j[W+2]:0;let ti=(15&tt)<<2|St>>6,Li=63&St;gt||(Li=64,Re||(ti=64)),De.push(K[ne>>2],K[(3&ne)<<4|tt>>4],K[ti],K[Li])}return De.join("")},encodeString(j,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(j):this.encodeByteArray(de(j),Y)},decodeString(j,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(j):function(j){const Y=[];let K=0,De=0;for(;K<j.length;){const W=j[K++];if(W<128)Y[De++]=String.fromCharCode(W);else if(W>191&&W<224){const ne=j[K++];Y[De++]=String.fromCharCode((31&W)<<6|63&ne)}else if(W>239&&W<365){const gt=((7&W)<<18|(63&j[K++])<<12|(63&j[K++])<<6|63&j[K++])-65536;Y[De++]=String.fromCharCode(55296+(gt>>10)),Y[De++]=String.fromCharCode(56320+(1023&gt))}else{const ne=j[K++],Re=j[K++];Y[De++]=String.fromCharCode((15&W)<<12|(63&ne)<<6|63&Re)}}return Y.join("")}(this.decodeStringToByteArray(j,Y))},decodeStringToByteArray(j,Y){this.init_();const K=Y?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let W=0;W<j.length;){const ne=K[j.charAt(W++)],tt=W<j.length?K[j.charAt(W)]:0;++W;const St=W<j.length?K[j.charAt(W)]:64;++W;const Et=W<j.length?K[j.charAt(W)]:64;if(++W,null==ne||null==tt||null==St||null==Et)throw Error();De.push(ne<<2|tt>>4),64!==St&&(De.push(tt<<4&240|St>>2),64!==Et&&De.push(St<<6&192|Et))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ie=function(j){const Y=de(j);return me.encodeByteArray(Y,!0)},ce=function(j){return ie(j).replace(/\./g,"")},he=function(j){try{return me.decodeString(j,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function q(j){return $(void 0,j)}function $(j,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return Y}for(const K in Y)!Y.hasOwnProperty(K)||!re(K)||(j[K]=$(j[K],Y[K]));return j}function re(j){return"__proto__"!==j}class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,K)=>{this.resolve=Y,this.reject=K})}wrapCallback(Y){return(K,De)=>{K?this.reject(K):this.resolve(De),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(K):Y(K,De))}}}function Te(j,Y){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=Y||"demo-project",W=j.iat||0,ne=j.sub||j.user_id;if(!ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:W,exp:W+3600,auth_time:W,sub:ne,user_id:ne,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Re)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function xe(){return"object"==typeof self&&self.self===self}function We(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){return Pe().indexOf("Electron/")>=0}function be(){const j=Pe();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ce(){return Pe().indexOf("MSAppHost/")>=0}function He(){return!1}function Ge(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return"object"==typeof indexedDB}function H(){return new Promise((j,Y)=>{try{let K=!0;const De="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(De);W.onsuccess=()=>{W.result.close(),K||self.indexedDB.deleteDatabase(De),j(!0)},W.onupgradeneeded=()=>{K=!1},W.onerror=()=>{var ne;Y((null===(ne=W.error)||void 0===ne?void 0:ne.message)||"")}}catch(K){Y(K)}})}function X(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Me extends Error{constructor(Y,K,De){super(K),this.code=Y,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,Me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(Y,K,De){this.service=Y,this.serviceName=K,this.errors=De}create(Y,...K){const De=K[0]||{},W=`${this.service}/${Y}`,ne=this.errors[Y],Re=ne?function _t(j,Y){return j.replace(Ot,(K,De)=>{const W=Y[De];return null!=W?String(W):`<${De}?>`})}(ne,De):"Error";return new Me(W,`${this.serviceName}: ${Re} (${W}).`,De)}}const Ot=/\{\$([^}]+)}/g;function Nn(j){return JSON.parse(j)}function it(j){return JSON.stringify(j)}const xt=function(j){let Y={},K={},De={},W="";try{const ne=j.split(".");Y=Nn(he(ne[0])||""),K=Nn(he(ne[1])||""),W=ne[2],De=K.d||{},delete K.d}catch(ne){}return{header:Y,claims:K,data:De,signature:W}},ci=function(j){const K=xt(j).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},an=function(j){const Y=xt(j).claims;return"object"==typeof Y&&!0===Y.admin};function cr(j,Y){return Object.prototype.hasOwnProperty.call(j,Y)}function Jt(j,Y){if(Object.prototype.hasOwnProperty.call(j,Y))return j[Y]}function Vt(j){for(const Y in j)if(Object.prototype.hasOwnProperty.call(j,Y))return!1;return!0}function Kr(j,Y,K){const De={};for(const W in j)Object.prototype.hasOwnProperty.call(j,W)&&(De[W]=Y.call(K,j[W],W,j));return De}function ur(j,Y){if(j===Y)return!0;const K=Object.keys(j),De=Object.keys(Y);for(const W of K){if(!De.includes(W))return!1;const ne=j[W],Re=Y[W];if(Si(ne)&&Si(Re)){if(!ur(ne,Re))return!1}else if(ne!==Re)return!1}for(const W of De)if(!K.includes(W))return!1;return!0}function Si(j){return null!==j&&"object"==typeof j}function Ni(j){const Y=[];for(const[K,De]of Object.entries(j))Array.isArray(De)?De.forEach(W=>{Y.push(encodeURIComponent(K)+"="+encodeURIComponent(W))}):Y.push(encodeURIComponent(K)+"="+encodeURIComponent(De));return Y.length?"&"+Y.join("&"):""}function Zr(j){const Y={};return j.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[W,ne]=De.split("=");Y[decodeURIComponent(W)]=decodeURIComponent(ne)}}),Y}function Ys(j){const Y=j.indexOf("?");if(!Y)return"";const K=j.indexOf("#",Y);return j.substring(Y,K>0?K:void 0)}class Ji{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Y=1;Y<this.blockSize;++Y)this.pad_[Y]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Y,K){K||(K=0);const De=this.W_;if("string"==typeof Y)for(let Et=0;Et<16;Et++)De[Et]=Y.charCodeAt(K)<<24|Y.charCodeAt(K+1)<<16|Y.charCodeAt(K+2)<<8|Y.charCodeAt(K+3),K+=4;else for(let Et=0;Et<16;Et++)De[Et]=Y[K]<<24|Y[K+1]<<16|Y[K+2]<<8|Y[K+3],K+=4;for(let Et=16;Et<80;Et++){const ti=De[Et-3]^De[Et-8]^De[Et-14]^De[Et-16];De[Et]=4294967295&(ti<<1|ti>>>31)}let St,mn,W=this.chain_[0],ne=this.chain_[1],Re=this.chain_[2],tt=this.chain_[3],gt=this.chain_[4];for(let Et=0;Et<80;Et++){Et<40?Et<20?(St=tt^ne&(Re^tt),mn=1518500249):(St=ne^Re^tt,mn=1859775393):Et<60?(St=ne&Re|tt&(ne|Re),mn=2400959708):(St=ne^Re^tt,mn=3395469782);const ti=(W<<5|W>>>27)+St+gt+mn+De[Et]&4294967295;gt=tt,tt=Re,Re=4294967295&(ne<<30|ne>>>2),ne=W,W=ti}this.chain_[0]=this.chain_[0]+W&4294967295,this.chain_[1]=this.chain_[1]+ne&4294967295,this.chain_[2]=this.chain_[2]+Re&4294967295,this.chain_[3]=this.chain_[3]+tt&4294967295,this.chain_[4]=this.chain_[4]+gt&4294967295}update(Y,K){if(null==Y)return;void 0===K&&(K=Y.length);const De=K-this.blockSize;let W=0;const ne=this.buf_;let Re=this.inbuf_;for(;W<K;){if(0===Re)for(;W<=De;)this.compress_(Y,W),W+=this.blockSize;if("string"==typeof Y){for(;W<K;)if(ne[Re]=Y.charCodeAt(W),++Re,++W,Re===this.blockSize){this.compress_(ne),Re=0;break}}else for(;W<K;)if(ne[Re]=Y[W],++Re,++W,Re===this.blockSize){this.compress_(ne),Re=0;break}}this.inbuf_=Re,this.total_+=K}digest(){const Y=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let W=this.blockSize-1;W>=56;W--)this.buf_[W]=255&K,K/=256;this.compress_(this.buf_);let De=0;for(let W=0;W<5;W++)for(let ne=24;ne>=0;ne-=8)Y[De]=this.chain_[W]>>ne&255,++De;return Y}}function Qr(j,Y){const K=new yt(j,Y);return K.subscribe.bind(K)}class yt{constructor(Y,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{Y(this)}).catch(De=>{this.error(De)})}next(Y){this.forEachObserver(K=>{K.next(Y)})}error(Y){this.forEachObserver(K=>{K.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,K,De){let W;if(void 0===Y&&void 0===K&&void 0===De)throw new Error("Missing Observer.");W=function kn(j,Y){if("object"!=typeof j||null===j)return!1;for(const K of Y)if(K in j&&"function"==typeof j[K])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:K,complete:De},void 0===W.next&&(W.next=Ln),void 0===W.error&&(W.error=Ln),void 0===W.complete&&(W.complete=Ln);const ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch(Re){}}),this.observers.push(W),ne}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,Y)}sendOne(Y,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{K(this.observers[Y])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ln(){}const Ks=function(j,Y,K,De){let W;if(De<Y?W="at least "+Y:De>K&&(W=0===K?"none":"no more than "+K),W)throw new Error(j+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+W+".")};function er(j,Y){return`${j} failed: ${Y} argument `}function Bn(j,Y,K,De){if((!De||K)&&"function"!=typeof K)throw new Error(er(j,Y)+"must be a valid function.")}function hr(j,Y,K,De){if((!De||K)&&("object"!=typeof K||null===K))throw new Error(er(j,Y)+"must be a valid context object.")}const Eo=function(j){const Y=[];let K=0;for(let De=0;De<j.length;De++){let W=j.charCodeAt(De);if(W>=55296&&W<=56319){const ne=W-55296;De++,te(De<j.length,"Surrogate pair missing trail surrogate."),W=65536+(ne<<10)+(j.charCodeAt(De)-56320)}W<128?Y[K++]=W:W<2048?(Y[K++]=W>>6|192,Y[K++]=63&W|128):W<65536?(Y[K++]=W>>12|224,Y[K++]=W>>6&63|128,Y[K++]=63&W|128):(Y[K++]=W>>18|240,Y[K++]=W>>12&63|128,Y[K++]=W>>6&63|128,Y[K++]=63&W|128)}return Y},zt=function(j){let Y=0;for(let K=0;K<j.length;K++){const De=j.charCodeAt(K);De<128?Y++:De<2048?Y+=2:De>=55296&&De<=56319?(Y+=4,K++):Y+=3}return Y};function Ht(j,Y=1e3,K=2){const De=Y*Math.pow(K,j),W=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+W)}function Ti(j){return j&&j._delegate?j._delegate:j}},1238:(et,ve,P)=>{var c=P(5e3);let te=null;function L(){return te}const ie=new c.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function he(){return(0,c.LFG)($)}()},providedIn:"platform"}),n})();const q=new c.OlP("Location Initialized");let $=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){re()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){re()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function qe(){return new $((0,c.LFG)(ie))}()},providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function xe(n){const e=(0,c.LFG)(ie).location;return new Qe((0,c.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const We=new c.OlP("appBaseHref");let Qe=(()=>{class n extends pe{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ue(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const l=this.prepareExternalUrl(r+Ue(s));this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){const l=this.prepareExternalUrl(r+Ue(s));this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(We,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends pe{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Te(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let l=this.prepareExternalUrl(r+Ue(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){let l=this.prepareExternalUrl(r+Ue(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(We,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n{constructor(t,i){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Pe(Ge(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ue(i))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Te,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(c.LFG(pe),c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ce(){return new be((0,c.LFG)(pe),(0,c.LFG)(ce))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}function Jo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let Or=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Qs{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let di=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,l)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Qs(r.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,l),So(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{So(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function So(n,e){n.context.$implicit=e.item}let Un=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new dn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$l("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$l("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class dn{constructor(){this.$implicit=null,this.ngIf=null}}function $l(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}class qa{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Vi=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Fr=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new qa(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(Vi,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),bs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Io="browser";function On(n){return n===Io}function pr(n){return"server"===n}let Uc=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new ia((0,c.LFG)(ie),window)}),n})();class ia{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function is(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=jc(this.window.history)||jc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function jc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class cn{}class To extends class Ka extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){te||(te=n)}(new To)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Za(){return tn=tn||document.querySelector("base"),tn?tn.getAttribute("href"):null}();return null==t?null:function to(n){Wl=Wl||document.createElement("a"),Wl.setAttribute("href",n);const e=Wl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){tn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Jo(document.cookie,e)}}let Wl,tn=null;const vi=new c.OlP("TRANSITION_ID"),Dn=[{provide:c.ip1,useFactory:function Hc(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const i=L(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[vi,ie,c.zs3],multi:!0}];class rs{static init(){(0,c.VLi)(new rs)}addToWindow(e){c.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(i=>{const r=c.dqk.getAllAngularTestabilities();let s=r.length,l=!1;const d=function(g){l=l||g,s--,0==s&&i(l)};r.forEach(function(g){g.whenStable(d)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let wi=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Mo=new c.OlP("EventManagerPlugins");let Cs=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const l=r[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Mo),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Qa{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=L().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Pr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ss=(()=>{class n extends Pr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,r.push(i.appendChild(l))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(ra),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ra))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function ra(n){L().remove(n)}const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sa=/%COMP%/g;function Ae(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Ae(n,r,t):(r=r.replace(sa,n),t.push(r))}return t}function Lt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let yn=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new oa(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case c.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new el(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case c.ifc.ShadowDom:return new qc(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Ae(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Cs),c.LFG(ss),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class oa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=mt[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=mt[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,i,r&c.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lt(i)):this.eventManager.addEventListener(e,t,Lt(i))}}class el extends oa{constructor(e,t,i,r){super(e),this.component=i;const s=Ae(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function $c(n){return"_ngcontent-%COMP%".replace(sa,n)}(r+"-"+i.id),this.hostAttr=function zc(n){return"_nghost-%COMP%".replace(sa,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class qc extends oa{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ae(r.id,r.styles,[]);for(let l=0;l<s.length;l++){const d=document.createElement("style");d.textContent=s[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let mg=(()=>{class n extends Qa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Zl=["alt","control","meta","shift"],Ql={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Es={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let nl=(()=>{class n extends Qa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let l="";if(Zl.forEach(g=>{const y=i.indexOf(g);y>-1&&(i.splice(y,1),l+=g+".")}),l+=s,0!=i.length||0===s.length)return null;const d={};return d.domEventName=r,d.fullKey=l,d}static getEventFullKey(t){let i="",r=function no(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&jn.hasOwnProperty(e)&&(e=jn[e]))}return Ql[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Zl.forEach(s=>{s!=r&&Es[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Jl=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Io},{provide:c.g9A,useValue:function Nr(){To.makeCurrent(),rs.init()},multi:!0},{provide:ie,useFactory:function Xl(){return(0,c.RDi)(document),document},deps:[]}]),il=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Wc(){return new c.qLn},deps:[]},{provide:Mo,useClass:mg,multi:!0,deps:[ie,c.R0b,c.Lbi]},{provide:Mo,useClass:nl,multi:!0,deps:[ie]},{provide:yn,useClass:yn,deps:[Cs,ss,c.AFp]},{provide:c.FYo,useExisting:yn},{provide:Pr,useExisting:ss},{provide:ss,useClass:ss,deps:[ie]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:Cs,useClass:Cs,deps:[Mo,c.R0b]},{provide:cn,useClass:wi,deps:[]}];let aa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:vi,useExisting:c.AFp},Dn]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:il,imports:[bs,c.hGG]}),n})();"undefined"!=typeof window&&window;let io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let i=null;return i=t?new(t||n):c.LFG(Qc),i},providedIn:"root"}),n})(),Qc=(()=>{class n extends io{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case c.q3G.NONE:return i;case c.q3G.HTML:return(0,c.qzn)(i,"HTML")?(0,c.z3N)(i):(0,c.EiD)(this._doc,String(i)).toString();case c.q3G.STYLE:return(0,c.qzn)(i,"Style")?(0,c.z3N)(i):i;case c.q3G.SCRIPT:if((0,c.qzn)(i,"Script"))return(0,c.z3N)(i);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.yhl)(i),(0,c.qzn)(i,"URL")?(0,c.z3N)(i):(0,c.mCW)(String(i));case c.q3G.RESOURCE_URL:if((0,c.qzn)(i,"ResourceURL"))return(0,c.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function ro(n){return new Qc(n.get(ie))}(c.LFG(c.zs3)),i},providedIn:"root"}),n})();var ha=P(3269),gn=P(8996);function ze(...n){const e=(0,ha.yG)(n);return(0,gn.D)(n,e)}var xn=P(8306),Kn=P(5577),Sn=P(576);function so(n,e){return(0,Sn.m)(e)?(0,Kn.z)(n,e,1):(0,Kn.z)(n,1)}var Hn=P(4482),Qt=P(5403);function An(n,e){return(0,Hn.e)((t,i)=>{let r=0;t.subscribe((0,Qt.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}var Be=P(4004);class fa{}class oo{}class ls{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),l=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ls?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ls;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ls?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(d=>-1===s.indexOf(d)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class nc{encodeKey(e){return ao(e)}encodeValue(e){return ao(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tf=/%(\d[a-f0-9])/gi,vd={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ao(n){return encodeURIComponent(n).replace(tf,(e,t)=>{var i;return null!==(i=vd[t])&&void 0!==i?i:e})}function Oo(n){return`${n}`}class rr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new nc,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yd(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[l,d]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],g=t.get(l)||[];g.push(d),t.set(l,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new rr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Oo(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(Oo(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ki{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function pa(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Po(n){return"undefined"!=typeof Blob&&n instanceof Blob}function ga(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Lr{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function wd(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ls),this.context||(this.context=new ki),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+l}}else this.params=new rr,this.urlWithParams=t}serializeBody(){return null===this.body?null:pa(this.body)||Po(this.body)||ga(this.body)||function Xc(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof rr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ga(this.body)?null:Po(this.body)?this.body.type||null:pa(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof rr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,E=e.params||this.params;const x=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((M,F)=>M.set(F,e.setHeaders[F]),y)),e.setParams&&(E=Object.keys(e.setParams).reduce((M,F)=>M.set(F,e.setParams[F]),E)),new Lr(i,r,l,{params:E,headers:y,context:x,reportProgress:g,responseType:s,withCredentials:d})}}var Cn=(()=>((Cn=Cn||{})[Cn.Sent=0]="Sent",Cn[Cn.UploadProgress=1]="UploadProgress",Cn[Cn.ResponseHeader=2]="ResponseHeader",Cn[Cn.DownloadProgress=3]="DownloadProgress",Cn[Cn.Response=4]="Response",Cn[Cn.User=5]="User",Cn))();class al{constructor(e,t=200,i="OK"){this.headers=e.headers||new ls,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class No extends al{constructor(e={}){super(e),this.type=Cn.ResponseHeader}clone(e={}){return new No({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Jc extends al{constructor(e={}){super(e),this.type=Cn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Jc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class xs extends al{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ma(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let lo=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Lr)s=t;else{let g,y;g=r.headers instanceof ls?r.headers:new ls(r.headers),r.params&&(y=r.params instanceof rr?r.params:new rr({fromObject:r.params})),s=new Lr(t,i,void 0!==r.body?r.body:null,{headers:g,context:r.context,params:y,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const l=ze(s).pipe(so(g=>this.handler.handle(g)));if(t instanceof Lr||"events"===r.observe)return l;const d=l.pipe(An(g=>g instanceof Jc));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,Be.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return d.pipe((0,Be.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return d.pipe((0,Be.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return d.pipe((0,Be.U)(g=>g.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new rr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,ma(r,i))}post(t,i,r={}){return this.request("POST",t,ma(r,i))}put(t,i,r={}){return this.request("PUT",t,ma(r,i))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(fa))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class ll{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Lo=new c.OlP("HTTP_INTERCEPTORS");let cl=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const In=/^\)\]\}',?\n/;let bg=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new xn.y(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((F,B)=>r.setRequestHeader(F,B.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const F=t.detectContentTypeHeader();null!==F&&r.setRequestHeader("Content-Type",F)}if(t.responseType){const F=t.responseType.toLowerCase();r.responseType="json"!==F?F:"text"}const s=t.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const F=r.statusText||"OK",B=new ls(r.getAllResponseHeaders()),Q=function wg(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return l=new No({headers:B,status:r.status,statusText:F,url:Q}),l},g=()=>{let{headers:F,status:B,statusText:Q,url:ye}=d(),Oe=null;204!==B&&(Oe=void 0===r.response?r.responseText:r.response),0===B&&(B=Oe?200:0);let Ze=B>=200&&B<300;if("json"===t.responseType&&"string"==typeof Oe){const ct=Oe;Oe=Oe.replace(In,"");try{Oe=""!==Oe?JSON.parse(Oe):null}catch(st){Oe=ct,Ze&&(Ze=!1,Oe={error:st,text:Oe})}}Ze?(i.next(new Jc({body:Oe,headers:F,status:B,statusText:Q,url:ye||void 0})),i.complete()):i.error(new xs({error:Oe,headers:F,status:B,statusText:Q,url:ye||void 0}))},y=F=>{const{url:B}=d(),Q=new xs({error:F,status:r.status||0,statusText:r.statusText||"Unknown Error",url:B||void 0});i.error(Q)};let E=!1;const x=F=>{E||(i.next(d()),E=!0);let B={type:Cn.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(B.total=F.total),"text"===t.responseType&&!!r.responseText&&(B.partialText=r.responseText),i.next(B)},M=F=>{let B={type:Cn.UploadProgress,loaded:F.loaded};F.lengthComputable&&(B.total=F.total),i.next(B)};return r.addEventListener("load",g),r.addEventListener("error",y),r.addEventListener("timeout",y),r.addEventListener("abort",y),t.reportProgress&&(r.addEventListener("progress",x),null!==s&&r.upload&&r.upload.addEventListener("progress",M)),r.send(s),i.next({type:Cn.Sent}),()=>{r.removeEventListener("error",y),r.removeEventListener("abort",y),r.removeEventListener("load",g),r.removeEventListener("timeout",y),t.reportProgress&&(r.removeEventListener("progress",x),null!==s&&r.upload&&r.upload.removeEventListener("progress",M)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(cn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const nf=new c.OlP("XSRF_COOKIE_NAME"),Cd=new c.OlP("XSRF_HEADER_NAME");class Ed{}let Dd=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Jo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie),c.LFG(c.Lbi),c.LFG(nf))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),xd=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ed),c.LFG(Cd))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),hl=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(Lo,[]);this.chain=i.reduceRight((r,s)=>new ll(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(oo),c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),tu=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:xd,useClass:cl}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:nf,useValue:t.cookieName}:[],t.headerName?{provide:Cd,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[xd,{provide:Lo,useExisting:xd,multi:!0},{provide:Ed,useClass:Dd},{provide:nf,useValue:"XSRF-TOKEN"},{provide:Cd,useValue:"X-XSRF-TOKEN"}]}),n})(),Bo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[lo,{provide:fa,useClass:hl},bg,{provide:oo,useExisting:bg}],imports:[[tu.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var en=P(8505),Zn=P(8421);function ji(n){return(0,Hn.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,Qt.x)(t,void 0,void 0,l=>{s=(0,Zn.Xf)(n(l,ji(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Br(n,e){const t=(0,Sn.m)(n)?n:()=>n,i=r=>r.error(t());return new xn.y(e?r=>e.schedule(i,0,r):i)}function rn(n){return null!=n&&"false"!=`${n}`}function uo(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function _r(n){return Array.isArray(n)?n:[n]}function En(n){return null==n?"":"string"==typeof n?n:`${n}px`}function cs(n){return n instanceof c.SBq?n.nativeElement:n}var ft=P(7579),rc=P(1144);const{isArray:va}=Array;function sc(n){return(0,Be.U)(e=>function Cg(n,e){return va(e)?n(...e):n(e)}(n,e))}const ho=["addListener","removeListener"],Ad=["addEventListener","removeEventListener"],iu=["on","off"];function oc(n,e,t,i){if((0,Sn.m)(t)&&(i=t,t=void 0),i)return oc(n,e,t).pipe(sc(i));const[r,s]=function Vo(n){return(0,Sn.m)(n.addEventListener)&&(0,Sn.m)(n.removeEventListener)}(n)?Ad.map(l=>d=>n[l](e,d,t)):function ac(n){return(0,Sn.m)(n.addListener)&&(0,Sn.m)(n.removeListener)}(n)?ho.map(us(n,e)):function Ss(n){return(0,Sn.m)(n.on)&&(0,Sn.m)(n.off)}(n)?iu.map(us(n,e)):[];if(!r&&(0,rc.z)(n))return(0,Kn.z)(l=>oc(l,e,t))((0,Zn.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new xn.y(l=>{const d=(...g)=>l.next(1<g.length?g:g[0]);return r(d),()=>s(d)})}function us(n,e){return t=>i=>n[t](e,i)}var Eg=P(4408),bi=P(727);const As={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=As;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new bi.w0(()=>null==t?void 0:t(r))},requestAnimationFrame(...n){const{delegate:e}=As;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=As;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var ru=P(7565);new class S extends ru.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class wa extends Eg.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=As.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(As.cancelAnimationFrame(t),e._scheduled=void 0)}});let J,U=1;const le={};function Fe(n){return n in le&&(delete le[n],!0)}const je={setImmediate(n){const e=U++;return le[e]=!0,J||(J=Promise.resolve()),J.then(()=>Fe(e)&&n()),e},clearImmediate(n){Fe(n)}},{setImmediate:Ct,clearImmediate:$t}=je,wt={setImmediate(...n){const{delegate:e}=wt;return((null==e?void 0:e.setImmediate)||Ct)(...n)},clearImmediate(n){const{delegate:e}=wt;return((null==e?void 0:e.clearImmediate)||$t)(n)},delegate:void 0},fo=new class pi extends ru.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Hi extends Eg.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=wt.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(wt.clearImmediate(t),e._scheduled=void 0)}});var Ci=P(4986),yr=P(3532);function Td(n=0,e,t=Ci.P){let i=-1;return null!=e&&((0,yr.K)(e)?t=e:i=e),new xn.y(r=>{let s=function Id(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function su(n,e=Ci.z){return function Is(n){return(0,Hn.e)((e,t)=>{let i=!1,r=null,s=null,l=!1;const d=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const y=r;r=null,t.next(y)}l&&t.complete()},g=()=>{s=null,l&&t.complete()};e.subscribe((0,Qt.x)(t,y=>{i=!0,r=y,s||(0,Zn.Xf)(n(y)).subscribe(s=(0,Qt.x)(t,d,g))},()=>{l=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>Td(n,e))}let fl;try{fl="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){fl=!1}let ba,Gi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?On(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fl)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pl=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function lc(){if(ba)return ba;if("object"!=typeof document||!document)return ba=new Set(pl),ba;let n=document.createElement("input");return ba=new Set(pl.filter(e=>(n.setAttribute("type",e),n.type===e))),ba}let ou,gl,sf;function cc(n){return function Dg(){if(null==ou&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ou=!0}))}finally{ou=ou||!1}return ou}()?n:!!n.capture}function cy(){if(null==gl){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return gl=!1,gl;if("scrollBehavior"in document.documentElement.style)gl=!0;else{const n=Element.prototype.scrollTo;gl=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return gl}function ml(n){return n.composedPath?n.composedPath()[0]:n.target}function lf(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const EC=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function kd(){return(0,c.f3M)(ie)}}),lu=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let _l=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new c.vpe,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function xg(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?lu.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(EC,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ds=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),Sg=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new ft.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new xn.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(su(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ze()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(An(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=cs(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>oc(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(Gi),c.LFG(ie,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Od=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new ft.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(su(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Gi),c.LFG(c.R0b),c.LFG(ie,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),uf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ds,cf],ds,cf]}),n})();class Fd{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class dc extends Fd{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class Pd extends Fd{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class TC extends Fd{constructor(e){super(),this.element=e instanceof c.SBq?e.nativeElement:e}}class Nd{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof dc?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Pd?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof TC?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class df extends Nd{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=l=>{const d=l.element,g=this._document.createComment("dom-portal");d.parentNode.insertBefore(g,d),this.outletElement.appendChild(d),this._attachedPortal=l,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(d,g)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let _y=(()=>{class n extends Nd{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new c.vpe,this.attachDomPortal=s=>{const l=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(d,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(l,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),l=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=t,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c._Vd),c.Y36(c.s_b),c.Y36(ie))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[c.qOj]}),n})(),Mg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();var vr=P(6451),sr=P(5698),Bd=P(5032);function vn(n){return(0,Hn.e)((e,t)=>{(0,Zn.Xf)(n).subscribe((0,Qt.x)(t,()=>t.complete(),Bd.Z)),!t.closed&&e.subscribe(t)})}const cu=cy();class hf{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=En(-this._previousScrollPosition.left),e.style.top=En(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",l=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),cu&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),cu&&(i.scrollBehavior=s,r.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class Tn{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Rg{enable(){}disable(){}attach(){}}function ff(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function Vd(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class pf{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();ff(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let wy=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Rg,this.close=l=>new Tn(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new hf(this._viewportRuler,this._document),this.reposition=l=>new pf(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Sg),c.LFG(Od),c.LFG(c.R0b),c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class gf{constructor(e){if(this.scrollStrategy=new Rg,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class Ud{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class uu{constructor(e,t,i,r,s,l,d,g,y){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=l,this._document=d,this._location=g,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new ft.x,this._attachments=new ft.x,this._detachments=new ft.x,this._locationChanges=bi.w0.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new ft.x,this._outsidePointerEvents=new ft.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,sr.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=En(this._config.width),e.height=En(this._config.height),e.minWidth=En(this._config.minWidth),e.minHeight=En(this._config.minHeight),e.maxWidth=En(this._config.maxWidth),e.maxHeight=En(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const r=_r(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(vn((0,vr.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let $i=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||lf()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),lf()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie),c.LFG(Gi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jd="cdk-overlay-connected-position-bounding-box",kg=/([A-Za-z%]+)$/;class mf{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ft.x,this._resizeSubscription=bi.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(jd),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let l;for(let d of this._preferredPositions){let g=this._getOriginPoint(e,r,d),y=this._getOverlayPoint(g,t,d),E=this._getOverlayFit(y,t,i,d);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,g);this._canFitWithFlexibleDimensions(E,y,i)?s.push({position:d,origin:g,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(g,d)}):(!l||l.overlayFit.visibleArea<E.visibleArea)&&(l={overlayFit:E,overlayPoint:y,originPoint:g,position:d,overlayRect:t})}if(s.length){let d=null,g=-1;for(const y of s){const E=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);E>g&&(g=E,d=y)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Mn(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(jd),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;r="start"==i.originX?l:d}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=du(t);let{x:l,y:d}=e,g=this._getOffset(r,"x"),y=this._getOffset(r,"y");g&&(l+=g),y&&(d+=y);let M=0-d,F=d+s.height-i.height,B=this._subtractOverflows(s.width,0-l,l+s.width-i.width),Q=this._subtractOverflows(s.height,M,F),ye=B*Q;return{visibleArea:ye,isCompletelyWithinViewport:s.width*s.height===ye,fitsInViewportVertically:Q===s.height,fitsInViewportHorizontally:B==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,l=Da(this._overlayRef.getConfig().minHeight),d=Da(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=d&&d<=s;return(e.fitsInViewportVertically||null!=l&&l<=r)&&y}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=du(t),s=this._viewportRect,l=Math.max(e.x+r.width-s.width,0),d=Math.max(e.y+r.height-s.height,0),g=Math.max(s.top-i.top-e.y,0),y=Math.max(s.left-i.left-e.x,0);let E=0,x=0;return E=r.width<=s.width?y||-l:e.x<this._viewportMargin?s.left-i.left-e.x:0,x=r.height<=s.height?g||-d:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:E,y:x},{x:e.x+E,y:e.y+x}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Ud(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,l,d,E,x,M;if("top"===t.overlayY)l=e.y,s=i.height-l+this._viewportMargin;else if("bottom"===t.overlayY)d=i.height-e.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const F=Math.min(i.bottom-e.y+i.top,e.y),B=this._lastBoundingBoxSize.height;s=2*F,l=e.y-F,s>B&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-B/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)M=i.width-e.x+this._viewportMargin,E=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)x=e.x,E=i.right-e.x;else{const F=Math.min(i.right-e.x+i.left,e.x),B=this._lastBoundingBoxSize.width;E=2*F,x=e.x-F,E>B&&!this._isInitialRender&&!this._growAfterOpen&&(x=e.x-B/2)}return{top:l,left:x,bottom:d,right:M,width:E,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;r.height=En(i.height),r.top=En(i.top),r.bottom=En(i.bottom),r.width=En(i.width),r.left=En(i.left),r.right=En(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=En(s)),l&&(r.maxWidth=En(l))}this._lastBoundingBoxSize=i,Mn(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Mn(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Mn(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(r){const E=this._viewportRuler.getViewportScrollPosition();Mn(i,this._getExactOverlayY(t,e,E)),Mn(i,this._getExactOverlayX(t,e,E))}else i.position="static";let d="",g=this._getOffset(t,"x"),y=this._getOffset(t,"y");g&&(d+=`translateX(${g}px) `),y&&(d+=`translateY(${y}px)`),i.transform=d.trim(),l.maxHeight&&(r?i.maxHeight=En(l.maxHeight):s&&(i.maxHeight="")),l.maxWidth&&(r?i.maxWidth=En(l.maxWidth):s&&(i.maxWidth="")),Mn(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=En(s.y),r}_getExactOverlayX(e,t,i){let l,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=En(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Vd(e,i),isOriginOutsideView:ff(e,i),isOverlayClipped:Vd(t,i),isOverlayOutsideView:ff(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&_r(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof c.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Mn(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Da(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(kg);return t&&"px"!==t?null:parseFloat(e)}return n||null}function du(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Og="cdk-global-overlay-wrapper";class _f{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Og),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:l,maxHeight:d}=i,g=!("100%"!==r&&"100vw"!==r||l&&"100%"!==l&&"100vw"!==l),y=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d);e.position=this._cssPosition,e.marginLeft=g?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,g?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Og),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Fg=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new _f}flexibleConnectedTo(t){return new mf(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Od),c.LFG(ie),c.LFG(Gi),c.LFG($i))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wr=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hc=(()=>{class n extends wr{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const d=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pg=(()=>{class n extends wr{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=ml(s)},this._clickListener=s=>{const l=ml(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const g=this._attachedOverlays.slice();for(let y=g.length-1;y>-1;y--){const E=g[y];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(l)||E.overlayElement.contains(d))break;const x=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>x.next(s)):x.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie),c.LFG(Gi),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ng=0,xa=(()=>{class n{constructor(t,i,r,s,l,d,g,y,E,x,M){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=d,this._ngZone=g,this._document=y,this._directionality=E,this._location=x,this._outsideClickDispatcher=M}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),l=new gf(t);return l.direction=l.direction||this._directionality.value,new uu(s,i,r,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Ng++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(c.z2F)),new df(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(wy),c.LFG($i),c.LFG(c._Vd),c.LFG(Fg),c.LFG(hc),c.LFG(c.zs3),c.LFG(c.R0b),c.LFG(ie),c.LFG(_l),c.LFG(be),c.LFG(Pg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Bg={provide:new c.OlP("cdk-connected-overlay-scroll-strategy"),deps:[xa],useFactory:function mo(n){return()=>n.scrollStrategies.reposition()}};let Vg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[xa,Bg],imports:[[ds,Mg,uf],uf]}),n})();class Ei extends ft.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function ZC(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function QC(n,e=Ci.z){return(0,Hn.e)((t,i)=>{let r=null,s=null,l=null;const d=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function g(){const y=l+n,E=e.now();if(E<y)return r=this.schedule(void 0,y-E),void i.add(r);d()}t.subscribe((0,Qt.x)(i,y=>{s=y,l=e.now(),r||(r=e.schedule(g,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}function Py(n){return An((e,t)=>n<=t)}var pu=P(4671);function Ny(n,e=pu.y){return n=null!=n?n:Ly,(0,Hn.e)((t,i)=>{let r,s=!0;t.subscribe((0,Qt.x)(i,l=>{const d=e(l);(s||!n(r,d))&&(s=!1,r=d,i.next(l))}))})}function Ly(n,e){return n===e}class XC extends class By{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ft.x,this._typeaheadSubscription=bi.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new ft.x,this.change=new ft.x,e instanceof c.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,en.b)(t=>this._pressedLetters.push(t)),QC(e),An(()=>this._pressedLetters.length>0),(0,Be.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,l=i[s];if(!this._skipPredicateFn(l)&&0===l.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||ZC(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof c.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function Af(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Qg(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Xg=new c.OlP("cdk-input-modality-detector-options"),PI={ignoreKeys:[18,17,224,91,16]},If=cc({passive:!0,capture:!0});let s0=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Ei(null),this._lastTouchMs=0,this._onKeydown=l=>{var d,g;(null===(g=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===g?void 0:g.some(y=>y===l.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ml(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Af(l)?"keyboard":"mouse"),this._mostRecentTarget=ml(l))},this._onTouchstart=l=>{Qg(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ml(l))},this._options=Object.assign(Object.assign({},PI),s),this.modalityDetected=this._modality.pipe(Py(1)),this.modalityChanged=this.modalityDetected.pipe(Ny()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,If),r.addEventListener("mousedown",this._onMousedown,If),r.addEventListener("touchstart",this._onTouchstart,If)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,If),document.removeEventListener("mousedown",this._onMousedown,If),document.removeEventListener("touchstart",this._onTouchstart,If))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Gi),c.LFG(c.R0b),c.LFG(ie),c.LFG(Xg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const o0=new c.OlP("liveAnnouncerElement",{providedIn:"root",factory:function NI(){return null}}),a0=new c.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let l0=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,l;return 1===i.length&&"number"==typeof i[0]?l=i[0]:[s,l]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==l&&r&&(l=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>new Promise(d=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,d(),"number"==typeof l&&(this._previousTimeout=setTimeout(()=>this.clear(),l))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t;clearTimeout(this._previousTimeout),null===(t=this._liveElement)||void 0===t||t.remove(),this._liveElement=null}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(o0,8),c.LFG(c.R0b),c.LFG(ie),c.LFG(a0,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ts=new c.OlP("cdk-focus-monitor-default-options"),Jg=cc({passive:!0,capture:!0});let Hy=(()=>{class n{constructor(t,i,r,s,l){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ft.x,this._rootNodeFocusAndBlurListener=d=>{const g=ml(d),y="focus"===d.type?this._onFocus:this._onBlur;for(let E=g;E;E=E.parentElement)y.call(this,d,E)},this._document=s,this._detectionMode=(null==l?void 0:l.detectionMode)||0}monitor(t,i=!1){const r=cs(t);if(!this._platform.isBrowser||1!==r.nodeType)return ze(null);const s=function af(n){if(function Rd(){if(null==sf){const n="undefined"!=typeof document?document.head:null;sf=!(!n||!n.createShadowRoot&&!n.attachShadow)}return sf}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),l=this._elementInfo.get(r);if(l)return i&&(l.checkChildren=!0),l.subject;const d={checkChildren:i,subject:new ft.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const i=cs(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=cs(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,g])=>this._originChanged(d,i,g)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=ml(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Jg),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Jg)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(vn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Jg),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Jg),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(Gi),c.LFG(s0),c.LFG(ie,8),c.LFG(Ts,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LI="cdk-high-contrast-black-on-white",Gy="cdk-high-contrast-white-on-black",c0="cdk-high-contrast-active";let BI=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(c0),t.remove(LI),t.remove(Gy),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(c0),t.add(LI)):2===i&&(t.add(c0),t.add(Gy))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Gi),c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $y{}const vl="*";function em(n,e){return{type:7,name:n,definitions:e,options:{}}}function mu(n,e=null){return{type:4,styles:e,timings:n}}function zy(n,e=null){return{type:2,steps:n,options:e}}function _o(n){return{type:6,styles:n,offset:null}}function Tf(n,e,t){return{type:0,name:n,styles:e,options:t}}function _u(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function jI(n){Promise.resolve(null).then(n)}class $d{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){jI(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class h0{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?jI(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++i==s&&this._onDestroy()}),l.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Kt=!1;function f0(n){return new c.vHH(3e3,Kt)}function D0(){return"undefined"!=typeof window&&void 0!==window.document}function gc(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Cl(n){switch(n.length){case 0:return new $d;case 1:return n[0];default:return new h0(n)}}function x0(n,e,t,i,r={},s={}){const l=[],d=[];let g=-1,y=null;if(i.forEach(E=>{const x=E.offset,M=x==g,F=M&&y||{};Object.keys(E).forEach(B=>{let Q=B,ye=E[B];if("offset"!==B)switch(Q=e.normalizePropertyName(Q,l),ye){case"!":ye=r[B];break;case vl:ye=s[B];break;default:ye=e.normalizeStyleValue(B,Q,ye,l)}F[Q]=ye}),M||d.push(F),y=F,g=x}),l.length)throw function w0(n){return new c.vHH(3502,Kt)}();return d}function tv(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&mc(t,"start",n)));break;case"done":n.onDone(()=>i(t&&mc(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&mc(t,"destroy",n)))}}function mc(n,e,t){const i=t.totalTime,s=nv(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function nv(n,e,t,i,r="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!l}}function Ms(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function S0(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let iv=(n,e)=>!1,yo=(n,e,t)=>[],im=null;function rm(n){const e=n.parentNode||n.host;return e===im?null:e}(gc()||"undefined"!=typeof Element)&&(D0()?(im=(()=>document.documentElement)(),iv=(n,e)=>{for(;e;){if(e===n)return!0;e=rm(e)}return!1}):iv=(n,e)=>n.contains(e),yo=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let _c=null,I0=!1;function T0(n){_c||(_c=function JI(){return"undefined"!=typeof document?document.body:null}()||{},I0=!!_c.style&&"WebkitAppearance"in _c.style);let e=!0;return _c.style&&!function A0(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in _c.style,!e&&I0&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in _c.style)),e}const M0=iv,rv=yo;let sv=(()=>{class n{validateStyleProperty(t){return T0(t)}matchesElement(t,i){return!1}containsElement(t,i){return M0(t,i)}getParentElement(t){return rm(t)}query(t,i,r){return rv(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,l,d=[],g){return new $d(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ov=(()=>{class n{}return n.NOOP=new sv,n})();const Rf="ng-enter",sm="ng-leave",kf="ng-trigger",Of=".ng-trigger",nT="ng-animating",Rs=".ng-animating";function qd(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:R0(parseFloat(e[1]),e[2])}function R0(n,e){return"s"===e?1e3*n:n}function Ff(n,e,t){return n.hasOwnProperty("duration")?n:function k0(n,e,t){let r,s=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(f0()),{duration:0,delay:0,easing:""};r=R0(parseFloat(d[1]),d[2]);const g=d[3];null!=g&&(s=R0(parseFloat(g),d[4]));const y=d[5];y&&(l=y)}else r=n;if(!t){let d=!1,g=e.length;r<0&&(e.push(function HI(){return new c.vHH(3100,Kt)}()),d=!0),s<0&&(e.push(function tm(){return new c.vHH(3101,Kt)}()),d=!0),d&&e.splice(g,0,f0())}return{duration:r,delay:s,easing:l}}(n,e,t)}function yu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function vu(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else yu(n,t);return t}function av(n,e,t){return t?e+":"+t+";":""}function om(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=av(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=av(0,rT(t),n.style[t]));n.setAttribute("style",e)}function Ia(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=yc(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),gc()&&om(n))}function El(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=yc(t);n.style[i]=""}),gc()&&om(n))}function Pf(n){return Array.isArray(n)?1==n.length?n[0]:zy(n):n}const lv=new RegExp("{{\\s*(.+?)\\s*}}","g");function F0(n){let e=[];if("string"==typeof n){let t;for(;t=lv.exec(n);)e.push(t[1]);lv.lastIndex=0}return e}function am(n,e,t){const i=n.toString(),r=i.replace(lv,(s,l)=>{let d=e[l];return e.hasOwnProperty(l)||(t.push(function GI(n){return new c.vHH(3003,Kt)}()),d=""),d.toString()});return r==i?n:r}function lm(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const cm=/-+([a-z0-9])/g;function yc(n){return n.replace(cm,(...e)=>e[1].toUpperCase())}function rT(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ks(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Yy(n){return new c.vHH(3004,Kt)}()}}function um(n,e){return window.getComputedStyle(n)[e]}function Wd(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Yd(n,e,t){if(":"==n[0]){const g=function Kd(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function WI(n){return new c.vHH(3016,Kt)}()),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function nm(n){return new c.vHH(3015,Kt)}()),e;const r=i[1],s=i[2],l=i[3];e.push(bu(r,l));"<"==s[0]&&!("*"==r&&"*"==l)&&e.push(bu(l,r))}(i,t,e)):t.push(n),t}const xl=new Set(["true","1"]),Sl=new Set(["false","0"]);function bu(n,e){const t=xl.has(n)||Sl.has(n),i=xl.has(e)||Sl.has(e);return(r,s)=>{let l="*"==n||n==r,d="*"==e||e==s;return!l&&t&&"boolean"==typeof r&&(l=r?xl.has(n):Sl.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?xl.has(e):Sl.has(e)),l&&d}}const Zd=new RegExp("s*:selfs*,?","g");function hm(n,e,t,i){return new N0(n).build(e,t,i)}class N0{constructor(e){this._driver=e}build(e,t,i){const r=new V0(t);this._resetContextStyleTimingState(r);const s=ks(this,Pf(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function p0(){return new c.vHH(3006,Kt)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const g=d,y=g.name;y.toString().split(/\s*,\s*/).forEach(E=>{g.name=E,s.push(this.visitState(g,t))}),g.name=y}else if(1==d.type){const g=this.visitTransition(d,t);i+=g.queryCount,r+=g.depCount,l.push(g)}else t.errors.push(function $I(){return new c.vHH(3007,Kt)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,l=r||{};i.styles.forEach(d=>{if(Lf(d)){const g=d;Object.keys(g).forEach(y=>{F0(g[y]).forEach(E=>{l.hasOwnProperty(E)||s.add(E)})})}}),s.size&&(lm(s.values()),t.errors.push(function zI(n,e){return new c.vHH(3008,Kt)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=ks(this,Pf(e.animation),t);return{type:1,matchers:Wd(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Eu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>ks(this,i,t)),options:Eu(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(l=>{t.currentTime=i;const d=ks(this,l,t);return r=Math.max(r,t.currentTime),d});return t.currentTime=r,{type:3,steps:s,options:Eu(e.options)}}visitAnimate(e,t){const i=function j0(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return fm(Ff(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=fm(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||Ff(i,e),fm(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:_o({});if(5==s.type)r=this.visitKeyframes(s,t);else{let l=e.styles,d=!1;if(!l){d=!0;const y={};i.easing&&(y.easing=i.easing),l=_o(y)}t.currentTime+=i.duration+i.delay;const g=this.visitStyle(l,t);g.isEmptyStep=d,r=g}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(l=>{"string"==typeof l?l==vl?i.push(l):t.errors.push(function Zy(n){return new c.vHH(3002,Kt)}()):i.push(l)}):i.push(e.styles);let r=!1,s=null;return i.forEach(l=>{if(Lf(l)){const d=l,g=d.easing;if(g&&(s=g,delete d.easing),!r)for(let y in d)if(d[y].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete l[d],void t.unsupportedCSSPropertiesFound.add(d);const g=t.collectedStyles[t.currentQuerySelector],y=g[d];let E=!0;y&&(s!=r&&s>=y.startTime&&r<=y.endTime&&(t.errors.push(function qI(n,e,t,i,r){return new c.vHH(3010,Kt)}()),E=!1),s=y.startTime),E&&(g[d]={startTime:s,endTime:r}),t.options&&function iT(n,e,t){const i=e.params||{},r=F0(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function Wy(n){return new c.vHH(3001,Kt)}())})}(l[d],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function g0(){return new c.vHH(3011,Kt)}()),i;let s=0;const l=[];let d=!1,g=!1,y=0;const E=e.steps.map(Oe=>{const Ze=this._makeStyleAst(Oe,t);let ct=null!=Ze.offset?Ze.offset:function U0(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Lf(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(Lf(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ze.styles),st=0;return null!=ct&&(s++,st=Ze.offset=ct),g=g||st<0||st>1,d=d||st<y,y=st,l.push(st),Ze});g&&t.errors.push(function m0(){return new c.vHH(3012,Kt)}()),d&&t.errors.push(function _0(){return new c.vHH(3200,Kt)}());const x=e.steps.length;let M=0;s>0&&s<x?t.errors.push(function y0(){return new c.vHH(3202,Kt)}()):0==s&&(M=1/(x-1));const F=x-1,B=t.currentTime,Q=t.currentAnimateTimings,ye=Q.duration;return E.forEach((Oe,Ze)=>{const ct=M>0?Ze==F?1:M*Ze:l[Ze],st=ct*ye;t.currentTime=B+Q.delay+st,Q.duration=st,this._validateStyleAst(Oe,t),Oe.offset=ct,i.styles.push(Oe)}),i}visitReference(e,t){return{type:8,animation:ks(this,Pf(e.animation),t),options:Eu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Eu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Eu(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function L0(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Zd,"")),n=n.replace(/@\*/g,Of).replace(/@\w+/g,t=>Of+"-"+t.substr(1)).replace(/:animating/g,Rs),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Ms(t.collectedStyles,t.currentQuerySelector,{});const d=ks(this,Pf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:Eu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function v0(){return new c.vHH(3013,Kt)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Ff(e.timings,t.errors,!0);return{type:12,animation:ks(this,Pf(e.animation),t),timings:i,options:null}}}class V0{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Lf(n){return!Array.isArray(n)&&"object"==typeof n}function Eu(n){return n?(n=yu(n)).params&&(n.params=function B0(n){return n?yu(n):null}(n.params)):n={},n}function fm(n,e,t){return{duration:n,delay:e,easing:t}}function uv(n,e,t,i,r,s,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:l,subTimeline:d}}class Bf{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const aT=new RegExp(":enter","g"),lT=new RegExp(":leave","g");function pm(n,e,t,i,r,s={},l={},d,g,y=[]){return(new cT).buildKeyframes(n,e,t,i,r,s,l,d,g,y)}class cT{buildKeyframes(e,t,i,r,s,l,d,g,y,E=[]){y=y||new Bf;const x=new $0(e,t,y,r,s,E,[]);x.options=g,x.currentTimeline.setStyles([l],null,x.errors,g),ks(this,i,x);const M=x.timelines.filter(F=>F.containsAnimation());if(Object.keys(d).length){let F;for(let B=M.length-1;B>=0;B--){const Q=M[B];if(Q.element===t){F=Q;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([d],null,x.errors,g)}return M.length?M.map(F=>F.buildKeyframes()):[uv(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const l=null!=i.duration?qd(i.duration):null,d=null!=i.delay?qd(i.delay):null;return 0!==l&&e.forEach(g=>{const y=t.appendInstructionToTimeline(g,l,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ks(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=gm);const l=qd(s.delay);r.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>ks(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?qd(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),ks(this,l,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Ff(t.params?am(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,d=t.createSubContext().currentTimeline;d.easing=i.easing,e.styles.forEach(g=>{d.forwardTime((g.offset||0)*s),d.setStyles(g.styles,g.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?qd(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=gm);let l=i;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=d.length;let g=null;d.forEach((y,E)=>{t.currentQueryIndex=E;const x=t.createSubContext(e.options,y);s&&x.delayNextStep(s),y===t.element&&(g=x.currentTimeline),ks(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),d=l*(t.currentQueryTotal-1);let g=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":g=d-g;break;case"full":g=i.currentStaggerTime}const E=t.currentTimeline;g&&E.delayNextStep(g);const x=E.currentTime;ks(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-x+(r.startTime-i.currentTimeline.startTime)}}const gm={};class $0{constructor(e,t,i,r,s,l,d,g){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=gm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new mm(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=qd(i.duration)),null!=i.delay&&(r.delay=qd(i.delay));const s=i.params;if(s){let l=r.params;l||(l=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=am(s[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new $0(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=gm,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new dv(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,l){let d=[];if(r&&d.push(this.element),e.length>0){e=(e=e.replace(aT,"."+this._enterClassName)).replace(lT,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),d.push(...y)}return!s&&0==d.length&&l.push(function bl(n){return new c.vHH(3014,Kt)}()),d}}class mm{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new mm(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||vl,this._currentKeyframe[t]=vl}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},l=function uT(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=vl})):vu(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(l).forEach(d=>{const g=am(l[d],s,i);this._pendingStyles[d]=g,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:vl),this._updateStyle(d,g)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,g)=>{const y=vu(d,!0);Object.keys(y).forEach(E=>{const x=y[E];"!"==x?e.add(E):x==vl&&t.add(E)}),i||(y.offset=g/this.duration),r.push(y)});const s=e.size?lm(e.values()):[],l=t.size?lm(t.values()):[];if(i){const d=r[0],g=yu(d);d.offset=0,g.offset=1,r=[d,g]}return uv(this.element,r,s,l,this.duration,this.startTime,this.easing,!1)}}class dv extends mm{constructor(e,t,i,r,s,l,d=!1){super(e,t,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=i+t,d=t/l,g=vu(e[0],!1);g.offset=0,s.push(g);const y=vu(e[0],!1);y.offset=_m(d),s.push(y);const E=e.length-1;for(let x=1;x<=E;x++){let M=vu(e[x],!1);M.offset=_m((t+M.offset*i)/l),s.push(M)}i=l,t=0,r="",e=s}return uv(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function _m(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class z0{}class dT extends z0{normalizePropertyName(e,t){return yc(e)}normalizeStyleValue(e,t,i,r){let s="";const l=i.toString().trim();if(q0[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function Ky(n,e){return new c.vHH(3005,Kt)}())}return l+s}}const q0=(()=>function O1(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function W0(n,e,t,i,r,s,l,d,g,y,E,x,M){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:l,timelines:d,queriedElements:g,preStyleProps:y,postStyleProps:E,totalTime:x,errors:M}}const wc={};class Y0{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function K0(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],l=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):l}build(e,t,i,r,s,l,d,g,y,E){const x=[],M=this.ast.options&&this.ast.options.params||wc,B=this.buildStyles(i,d&&d.params||wc,x),Q=g&&g.params||wc,ye=this.buildStyles(r,Q,x),Oe=new Set,Ze=new Map,ct=new Map,st="void"===r,Nt={params:Object.assign(Object.assign({},M),Q)},jt=E?[]:pm(e,t,this.ast.animation,s,l,B,ye,Nt,y,x);let pn=0;if(jt.forEach(Ju=>{pn=Math.max(Ju.duration+Ju.delay,pn)}),x.length)return W0(t,this._triggerName,i,r,st,B,ye,[],[],Ze,ct,pn,x);jt.forEach(Ju=>{const ed=Ju.element,yz=Ms(Ze,ed,{});Ju.preStyleProps.forEach(ag=>yz[ag]=!0);const wC=Ms(ct,ed,{});Ju.postStyleProps.forEach(ag=>wC[ag]=!0),ed!==t&&Oe.add(ed)});const qs=lm(Oe.values());return W0(t,this._triggerName,i,r,st,B,ye,jt,qs,Ze,ct,pn)}}class hT{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=yu(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!=l&&(r[s]=l)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const l=s;Object.keys(l).forEach(d=>{let g=l[d];g.length>1&&(g=am(g,r,t));const y=this.normalizer.normalizePropertyName(d,t);g=this.normalizer.normalizeStyleValue(d,y,g,t),i[y]=g})}}),i}}class ym{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new hT(r.style,r.options&&r.options.params||{},i)}),hv(this.states,"true","1"),hv(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Y0(e,r,this.states))}),this.fallbackTransition=function fT(n,e,t){return new Y0(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(l=>l.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function hv(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const pT=new Bf;class gT{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=hm(this._driver,t,i,[]);if(i.length)throw function Xy(n){return new c.vHH(3503,Kt)}();this._animations[e]=s}_buildPlayer(e,t,i){const r=e.element,s=x0(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let l;const d=new Map;if(s?(l=pm(this._driver,t,s,Rf,sm,{},{},i,pT,r),l.forEach(E=>{const x=Ms(d,E.element,{});E.postStyleProps.forEach(M=>x[M]=null)})):(r.push(function Mf(){return new c.vHH(3300,Kt)}()),l=[]),r.length)throw function KI(n){return new c.vHH(3504,Kt)}();d.forEach((E,x)=>{Object.keys(E).forEach(M=>{E[M]=this._driver.computeStyle(x,M,vl)})});const y=Cl(l.map(E=>{const x=d.get(E.element);return this._buildPlayer(E,{},x)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function Jy(n){return new c.vHH(3301,Kt)}();return t}listen(e,t,i,r){const s=nv(t,"","","");return tv(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const Q0="ng-animate-queued",fv="ng-animate-disabled",eE=[],vm={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},F1={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fs="__ng_removed";class pv{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function bm(n){return null!=n?n:null}(i?e.value:e),i){const s=yu(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const wm="void",Du=new pv(wm);class tE{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ur(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function b0(n,e){return new c.vHH(3302,Kt)}();if(null==i||0==i.length)throw function C0(n){return new c.vHH(3303,Kt)}();if(!function mv(n){return"start"==n||"done"==n}(i))throw function E0(n,e){return new c.vHH(3400,Kt)}();const s=Ms(this._elementListeners,e,[]),l={name:t,phase:i,callback:r};s.push(l);const d=Ms(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(Ur(e,kf),Ur(e,kf+"-"+t),d[t]=Du),()=>{this._engine.afterFlush(()=>{const g=s.indexOf(l);g>=0&&s.splice(g,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function ZI(n){return new c.vHH(3401,Kt)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),l=new Vf(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Ur(e,kf),Ur(e,kf+"-"+t),this._engine.statesByElement.set(e,d={}));let g=d[t];const y=new pv(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&g&&y.absorbOptions(g.options),d[t]=y,g||(g=Du),y.value!==wm&&g.value===y.value){if(!function rE(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(g.params,y.params)){const Q=[],ye=s.matchStyles(g.value,g.params,Q),Oe=s.matchStyles(y.value,y.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{El(e,ye),Ia(e,Oe)})}return}const M=Ms(this._engine.playersByElement,e,[]);M.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==t&&Q.queued&&Q.destroy()});let F=s.matchTransition(g.value,y.value,e,y.params),B=!1;if(!F){if(!r)return;F=s.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:F,fromState:g,toState:y,player:l,isFallbackTransition:B}),B||(Ur(e,Q0),l.onStart(()=>{bc(e,Q0)})),l.onDone(()=>{let Q=this.players.indexOf(l);Q>=0&&this.players.splice(Q,1);const ye=this._engine.playersByElement.get(e);if(ye){let Oe=ye.indexOf(l);Oe>=0&&ye.splice(Oe,1)}}),this.players.push(l),M.push(l),l}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,Of,!0);i.forEach(r=>{if(r[fs])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(l=>l.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const d=[];if(Object.keys(s).forEach(g=>{if(l.set(g,s[g].value),this._triggers[g]){const y=this.trigger(e,g,wm,r);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),i&&Cl(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const l=s.name;if(r.has(l))return;r.add(l);const g=this._triggers[l].fallbackTransition,y=i[l]||Du,E=new pv(wm),x=new Vf(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:g,fromState:y,toState:E,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let l=e;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[fs];(!s||s===vm)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ur(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,l=this._elementListeners.get(s);l&&l.forEach(d=>{if(d.name==i.triggerName){const g=nv(s,i.triggerName,i.fromState.value,i.toState.value);g._data=e,tv(i.player,d.phase,g,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class gv{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new tE(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let l=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const g=r.get(d);if(g){const y=i.indexOf(g);i.splice(y+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}}else for(let d=s;d>=0;d--)if(this.driver.containsElement(i[d].hostElement,t)){i.splice(d+1,0,e),l=!0;break}l||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const l=i[r[s]].namespaceId;if(l){const d=this._fetchNamespace(l);d&&t.add(d)}}}return t}trigger(e,t,i,r){if(xu(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!xu(t))return;const s=t[fs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ur(e,fv)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),bc(e,fv))}removeNode(e,t,i,r){if(xu(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[fs]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return xu(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Of,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Rs,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Cl(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[fs];if(i&&i.setForRemoval){if(e[fs]=vm,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(fv))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Ur(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Cl(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function ev(n){return new c.vHH(3402,Kt)}()}_flushAnimations(e,t){const i=new Bf,r=[],s=new Map,l=[],d=new Map,g=new Map,y=new Map,E=new Set;this.disabledNodes.forEach(dt=>{E.add(dt);const Dt=this.driver.query(dt,".ng-animate-queued",!0);for(let Rt=0;Rt<Dt.length;Rt++)E.add(Dt[Rt])});const x=this.bodyNode,M=Array.from(this.statesByElement.keys()),F=Uf(M,this.collectedEnterElements),B=new Map;let Q=0;F.forEach((dt,Dt)=>{const Rt=Rf+Q++;B.set(Dt,Rt),dt.forEach(un=>Ur(un,Rt))});const ye=[],Oe=new Set,Ze=new Set;for(let dt=0;dt<this.collectedLeaveElements.length;dt++){const Dt=this.collectedLeaveElements[dt],Rt=Dt[fs];Rt&&Rt.setForRemoval&&(ye.push(Dt),Oe.add(Dt),Rt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(un=>Oe.add(un)):Ze.add(Dt))}const ct=new Map,st=Uf(M,Array.from(Oe));st.forEach((dt,Dt)=>{const Rt=sm+Q++;ct.set(Dt,Rt),dt.forEach(un=>Ur(un,Rt))}),e.push(()=>{F.forEach((dt,Dt)=>{const Rt=B.get(Dt);dt.forEach(un=>bc(un,Rt))}),st.forEach((dt,Dt)=>{const Rt=ct.get(Dt);dt.forEach(un=>bc(un,Rt))}),ye.forEach(dt=>{this.processLeaveNode(dt)})});const Nt=[],jt=[];for(let dt=this._namespaceList.length-1;dt>=0;dt--)this._namespaceList[dt].drainQueuedTransitions(t).forEach(Rt=>{const un=Rt.player,Rr=Rt.element;if(Nt.push(un),this.collectedEnterElements.length){const Ws=Rr[fs];if(Ws&&Ws.setForMove){if(Ws.previousTriggersValues&&Ws.previousTriggersValues.has(Rt.triggerName)){const lg=Ws.previousTriggersValues.get(Rt.triggerName),Yh=this.statesByElement.get(Rt.element);Yh&&Yh[Rt.triggerName]&&(Yh[Rt.triggerName].value=lg)}return void un.destroy()}}const Lc=!x||!this.driver.containsElement(x,Rr),Qo=ct.get(Rr),Wh=B.get(Rr),_i=this._buildInstruction(Rt,i,Wh,Qo,Lc);if(_i.errors&&_i.errors.length)return void jt.push(_i);if(Lc)return un.onStart(()=>El(Rr,_i.fromStyles)),un.onDestroy(()=>Ia(Rr,_i.toStyles)),void r.push(un);if(Rt.isFallbackTransition)return un.onStart(()=>El(Rr,_i.fromStyles)),un.onDestroy(()=>Ia(Rr,_i.toStyles)),void r.push(un);const bz=[];_i.timelines.forEach(Ws=>{Ws.stretchStartingKeyframe=!0,this.disabledNodes.has(Ws.element)||bz.push(Ws)}),_i.timelines=bz,i.append(Rr,_i.timelines),l.push({instruction:_i,player:un,element:Rr}),_i.queriedElements.forEach(Ws=>Ms(d,Ws,[]).push(un)),_i.preStyleProps.forEach((Ws,lg)=>{const Yh=Object.keys(Ws);if(Yh.length){let cg=g.get(lg);cg||g.set(lg,cg=new Set),Yh.forEach(qN=>cg.add(qN))}}),_i.postStyleProps.forEach((Ws,lg)=>{const Yh=Object.keys(Ws);let cg=y.get(lg);cg||y.set(lg,cg=new Set),Yh.forEach(qN=>cg.add(qN))})});if(jt.length){const dt=[];jt.forEach(Dt=>{dt.push(function QI(n,e){return new c.vHH(3505,Kt)}())}),Nt.forEach(Dt=>Dt.destroy()),this.reportError(dt)}const pn=new Map,qs=new Map;l.forEach(dt=>{const Dt=dt.element;i.has(Dt)&&(qs.set(Dt,Dt),this._beforeAnimationBuild(dt.player.namespaceId,dt.instruction,pn))}),r.forEach(dt=>{const Dt=dt.element;this._getPreviousPlayers(Dt,!1,dt.namespaceId,dt.triggerName,null).forEach(un=>{Ms(pn,Dt,[]).push(un),un.destroy()})});const Ju=ye.filter(dt=>Cm(dt,g,y)),ed=new Map;nE(ed,this.driver,Ze,y,vl).forEach(dt=>{Cm(dt,g,y)&&Ju.push(dt)});const wC=new Map;F.forEach((dt,Dt)=>{nE(wC,this.driver,new Set(dt),g,"!")}),Ju.forEach(dt=>{const Dt=ed.get(dt),Rt=wC.get(dt);ed.set(dt,Object.assign(Object.assign({},Dt),Rt))});const ag=[],vz=[],wz={};l.forEach(dt=>{const{element:Dt,player:Rt,instruction:un}=dt;if(i.has(Dt)){if(E.has(Dt))return Rt.onDestroy(()=>Ia(Dt,un.toStyles)),Rt.disabled=!0,Rt.overrideTotalTime(un.totalTime),void r.push(Rt);let Rr=wz;if(qs.size>1){let Qo=Dt;const Wh=[];for(;Qo=Qo.parentNode;){const _i=qs.get(Qo);if(_i){Rr=_i;break}Wh.push(Qo)}Wh.forEach(_i=>qs.set(_i,Rr))}const Lc=this._buildAnimation(Rt.namespaceId,un,pn,s,wC,ed);if(Rt.setRealPlayer(Lc),Rr===wz)ag.push(Rt);else{const Qo=this.playersByElement.get(Rr);Qo&&Qo.length&&(Rt.parentPlayer=Cl(Qo)),r.push(Rt)}}else El(Dt,un.fromStyles),Rt.onDestroy(()=>Ia(Dt,un.toStyles)),vz.push(Rt),E.has(Dt)&&r.push(Rt)}),vz.forEach(dt=>{const Dt=s.get(dt.element);if(Dt&&Dt.length){const Rt=Cl(Dt);dt.setRealPlayer(Rt)}}),r.forEach(dt=>{dt.parentPlayer?dt.syncPlayerEvents(dt.parentPlayer):dt.destroy()});for(let dt=0;dt<ye.length;dt++){const Dt=ye[dt],Rt=Dt[fs];if(bc(Dt,sm),Rt&&Rt.hasAnimation)continue;let un=[];if(d.size){let Lc=d.get(Dt);Lc&&Lc.length&&un.push(...Lc);let Qo=this.driver.query(Dt,Rs,!0);for(let Wh=0;Wh<Qo.length;Wh++){let _i=d.get(Qo[Wh]);_i&&_i.length&&un.push(..._i)}}const Rr=un.filter(Lc=>!Lc.destroyed);Rr.length?iE(this,Dt,Rr):this.processLeaveNode(Dt)}return ye.length=0,ag.forEach(dt=>{this.players.push(dt),dt.onDone(()=>{dt.destroy();const Dt=this.players.indexOf(dt);this.players.splice(Dt,1)}),dt.play()}),ag}elementContainsData(e,t){let i=!1;const r=t[fs];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const g=!s||s==wm;d.forEach(y=>{y.queued||!g&&y.triggerName!=r||l.push(y)})}}return(i||r)&&(l=l.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),l}_beforeAnimationBuild(e,t,i){const s=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const y=g.element,E=y!==s,x=Ms(i,y,[]);this._getPreviousPlayers(y,E,l,d,t.toState).forEach(F=>{const B=F.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),F.destroy(),x.push(F)})}El(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,l){const d=t.triggerName,g=t.element,y=[],E=new Set,x=new Set,M=t.timelines.map(B=>{const Q=B.element;E.add(Q);const ye=Q[fs];if(ye&&ye.removedBeforeQueried)return new $d(B.duration,B.delay);const Oe=Q!==g,Ze=function _v(n){const e=[];return yv(n,e),e}((i.get(Q)||eE).map(pn=>pn.getRealPlayer())).filter(pn=>!!pn.element&&pn.element===Q),ct=s.get(Q),st=l.get(Q),Nt=x0(0,this._normalizer,0,B.keyframes,ct,st),jt=this._buildPlayer(B,Nt,Ze);if(B.subTimeline&&r&&x.add(Q),Oe){const pn=new Vf(e,d,Q);pn.setRealPlayer(jt),y.push(pn)}return jt});y.forEach(B=>{Ms(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function yT(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,B.element,B))}),E.forEach(B=>Ur(B,nT));const F=Cl(M);return F.onDestroy(()=>{E.forEach(B=>bc(B,nT)),Ia(g,t.toStyles)}),x.forEach(B=>{Ms(r,B,[]).push(F)}),F}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new $d(e.duration,e.delay)}}class Vf{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new $d,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>tv(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ms(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function xu(n){return n&&1===n.nodeType}function vT(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function nE(n,e,t,i,r){const s=[];t.forEach(g=>s.push(vT(g)));const l=[];i.forEach((g,y)=>{const E={};g.forEach(x=>{const M=E[x]=e.computeStyle(y,x,r);(!M||0==M.length)&&(y[fs]=F1,l.push(y))}),n.set(y,E)});let d=0;return t.forEach(g=>vT(g,s[d++])),l}function Uf(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const r=new Set(e),s=new Map;function l(d){if(!d)return 1;let g=s.get(d);if(g)return g;const y=d.parentNode;return g=t.has(y)?y:r.has(y)?1:l(y),s.set(d,g),g}return e.forEach(d=>{const g=l(d);1!==g&&t.get(g).push(d)}),t}function Ur(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function bc(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function iE(n,e,t){Cl(t).onDone(()=>n.processLeaveNode(e))}function yv(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof h0?yv(i.players,e):e.push(i)}}function Cm(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class Qd{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new gv(e,t,i),this._timelineEngine=new gT(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const l=e+"-"+r;let d=this._triggerCache[l];if(!d){const g=[],E=hm(this._driver,s,g,[]);if(g.length)throw function Qy(n,e){return new c.vHH(3404,Kt)}();d=function Z0(n,e,t){return new ym(n,e,t)}(r,E,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,r,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,l]=S0(i);this._timelineEngine.command(s,t,l,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[l,d]=S0(i);return this._timelineEngine.listen(l,t,d,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let sE=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ia(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ia(this._element,this._initialStyles),this._endStyles&&(Ia(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(El(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(El(this._element,this._endStyles),this._endStyles=null),Ia(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Em(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];vv(r)&&(e=e||{},e[r]=n[r])}return e}function vv(n){return"display"===n||"position"===n}class wv{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:um(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class bT{validateStyleProperty(e){return T0(e)}matchesElement(e,t){return!1}containsElement(e,t){return M0(e,t)}getParentElement(e){return rm(e)}query(e,t,i){return rv(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,l=[]){const g={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(g.easing=s);const y={},E=l.filter(M=>M instanceof wv);(function Nf(n,e){return 0===n||0===e})(i,r)&&E.forEach(M=>{let F=M.currentSnapshot;Object.keys(F).forEach(B=>y[B]=F[B])}),t=function sT(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],l=[];if(i.forEach(d=>{s.hasOwnProperty(d)||l.push(d),s[d]=t[d]}),l.length)for(var r=1;r<e.length;r++){let d=e[r];l.forEach(function(g){d[g]=um(n,g)})}}return e}(e,t=t.map(M=>vu(M,!1)),y);const x=function wT(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Em(e[0]),e.length>1&&(i=Em(e[e.length-1]))):e&&(t=Em(e)),t||i?new sE(n,t,i):null}(e,t);return new wv(e,t,g,x)}}let oE=(()=>{class n extends $y{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?zy(t):t;return Dm(this._renderer,null,i,"register",[r]),new aE(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class aE extends class VI{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new lE(this._id,e,t||{},this._renderer)}}class lE{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Dm(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Dm(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const bv="@.disabled";let cE=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,l)=>{const d=null==l?void 0:l.parentNode(s);d&&l.removeChild(d,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let E=this._rendererCache.get(s);return E||(E=new Cv("",s,this.engine),this._rendererCache.set(s,E)),E}const l=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const g=E=>{Array.isArray(E)?E.forEach(g):this.engine.registerTrigger(l,d,t,E.name,E)};return i.data.animation.forEach(g),new uE(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,d]=s;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(Qd),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Cv{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==bv?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class uE extends Cv{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==bv?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function dE(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),l="";return"@"!=s.charAt(0)&&([s,l]=function hE(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(e,t,i)}}let fE=(()=>{class n extends Qd{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ie),c.LFG(ov),c.LFG(z0))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Xd=new c.OlP("AnimationModuleType"),Ev=[{provide:$y,useClass:oE},{provide:z0,useFactory:function P1(){return new dT}},{provide:Qd,useClass:fE},{provide:c.FYo,useFactory:function CT(n,e,t){return new cE(n,e,t)},deps:[yn,Qd,c.R0b]}],pE=[{provide:ov,useFactory:()=>new bT},{provide:Xd,useValue:"BrowserAnimations"},...Ev],Oi=[{provide:ov,useClass:sv},{provide:Xd,useValue:"NoopAnimations"},...Ev];let gE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Oi:pE}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:pE,imports:[aa]}),n})();const ST=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function mE(){return!0}});let zi=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!lf()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(BI),c.LFG(ST,8),c.LFG(ie))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ds],ds]}),n})();function $o(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=rn(e)}}}function Dv(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function vE(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=rn(e)}}}function zo(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new ft.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let xv=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class CE{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Sm={enterDuration:225,exitDuration:150},Gf=cc({passive:!0}),Av=["mousedown","touchstart"],Iv=["mouseup","mouseleave","touchend","touchcancel"];class EE{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=cs(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},Sm),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const l=i.radius||function xE(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),d=e-r.left,g=t-r.top,y=s.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=d-l+"px",E.style.top=g-l+"px",E.style.height=2*l+"px",E.style.width=2*l+"px",null!=i.color&&(E.style.backgroundColor=i.color),E.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(E),function DE(n){window.getComputedStyle(n).getPropertyValue("opacity")}(E),E.style.transform="scale(1)";const x=new CE(this,E,i);return x.state=0,this._activeRipples.add(x),i.persistent||(this._mostRecentTransientRipple=x),this._runTimeoutOutsideZone(()=>{const M=x===this._mostRecentTransientRipple;x.state=1,!i.persistent&&(!M||!this._isPointerDown)&&x.fadeOut()},y),x}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},Sm),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=cs(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Av))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Iv),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=Af(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Qg(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Gf)})})}_removeTriggerEvents(){this._triggerElement&&(Av.forEach(e=>{this._triggerElement.removeEventListener(e,this,Gf)}),this._pointerUpEventsRegistered&&Iv.forEach(e=>{this._triggerElement.removeEventListener(e,this,Gf)}))}}const SE=new c.OlP("mat-ripple-global-options");let Im=(()=>{class n{constructor(t,i,r,s,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new EE(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(Gi),c.Y36(SE,8),c.Y36(Xd,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&c.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),AE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[zi],zi]}),n})();const RT=["mat-button",""],kT=["*"],TE=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],ME=Dv($o(vE(class{constructor(n){this._elementRef=n}})));let Jd=(()=>{class n extends ME{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of TE)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Hy),c.Y36(Xd,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&c.Gf(Im,5),2&t){let r;c.iGM(r=c.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(c.uIk("disabled",i.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:RT,ngContentSelectors:kT,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(c.F$t(),c.TgZ(0,"span",0),c.Hsn(1),c.qZA(),c._UZ(2,"span",1)(3,"span",2)),2&t&&(c.xp6(2),c.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),c.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Im],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),Tm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[AE,zi],zi]}),n})();const{isArray:RE}=Array,{getPrototypeOf:kE,prototype:Tv,keys:Mv}=Object;function Cc(n){if(1===n.length){const e=n[0];if(RE(e))return{args:e,keys:null};if(function PT(n){return n&&"object"==typeof n&&kE(n)===Tv}(e)){const t=Mv(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function OE(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var eh=P(9672);function Mm(...n){const e=(0,ha.yG)(n),t=(0,ha.jO)(n),{args:i,keys:r}=Cc(n);if(0===i.length)return(0,gn.D)([],e);const s=new xn.y(function Rv(n,e,t=pu.y){return i=>{NT(e,()=>{const{length:r}=n,s=new Array(r);let l=r,d=r;for(let g=0;g<r;g++)NT(e,()=>{const y=(0,gn.D)(n[g],e);let E=!1;y.subscribe((0,Qt.x)(i,x=>{s[g]=x,E||(E=!0,d--),d||i.next(t(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,e,r?l=>OE(r,l):pu.y));return t?s.pipe(sc(t)):s}function NT(n,e,t){n?(0,eh.f)(t,n,e):e()}var $f=P(8189);function Rm(...n){return function FE(){return(0,$f.J)(1)}()((0,gn.D)(n,(0,ha.yG)(n)))}function at(...n){const e=(0,ha.yG)(n);return(0,Hn.e)((t,i)=>{(e?Rm(n,t,e):Rm(n,t)).subscribe(i)})}const PE=new Set;let th,km=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Om}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function LT(n){if(!PE.has(n))try{th||(th=document.createElement("style"),th.setAttribute("type","text/css"),document.head.appendChild(th)),th.sheet&&(th.sheet.insertRule(`@media ${n} {body{ }}`,0),PE.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Gi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Om(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let zf=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new ft.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Qn(_r(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=Mm(Qn(_r(t)).map(l=>this._registerQuery(l).observable));return s=Rm(s.pipe((0,sr.q)(1)),s.pipe(Py(1),QC(0))),s.pipe((0,Be.U)(l=>{const d={matches:!1,breakpoints:{}};return l.forEach(({matches:g,query:y})=>{d.matches=d.matches||g,d.breakpoints[y]=g}),d}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new xn.y(l=>{const d=g=>this._zone.run(()=>l.next(g));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(at(i),(0,Be.U)(({matches:l})=>({query:t,matches:l})),vn(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(km),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qn(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function NE(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",2)(1,"button",3),c.NdJ("click",function(){return c.CHM(t),c.oxw().action()}),c._uU(2),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(2),c.Oqu(t.data.action)}}function BT(n,e){}const LE=new c.OlP("MatSnackBarData");class nh{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const BE=Math.pow(2,31)-1;class Fm{constructor(e,t){this._overlayRef=t,this._afterDismissed=new ft.x,this._afterOpened=new ft.x,this._onAction=new ft.x,this._dismissedByAction=!1,this.containerInstance=e,this.onAction().subscribe(()=>this.dismiss()),e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,BE))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let VE=(()=>{class n{constructor(t,i){this.snackBarRef=t,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Fm),c.Y36(LE))},n.\u0275cmp=c.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,i){1&t&&(c.TgZ(0,"span",0),c._uU(1),c.qZA(),c.YNc(2,NE,3,1,"div",1)),2&t&&(c.xp6(1),c.Oqu(i.data.message),c.xp6(1),c.Q6J("ngIf",i.hasAction))},directives:[Jd,Un],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();const VT={snackBarState:em("state",[Tf("void, hidden",_o({transform:"scale(0.8)",opacity:0})),Tf("visible",_o({transform:"scale(1)",opacity:1})),_u("* => visible",mu("150ms cubic-bezier(0, 0, 0.2, 1)")),_u("* => void, * => hidden",mu("75ms cubic-bezier(0.4, 0.0, 1, 1)",_o({opacity:0})))])};let UT=(()=>{class n extends Nd{constructor(t,i,r,s,l){super(),this._ngZone=t,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=l,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new ft.x,this._onExit=new ft.x,this._onEnter=new ft.x,this._animationState="void",this.attachDomPortal=d=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(d)),this._live="assertive"!==l.politeness||l.announcementMessage?"off"===l.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:i,toState:r}=t;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,sr.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>t.classList.add(r)):t.classList.add(i)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),i.appendChild(t),null==r||r.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.R0b),c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(Gi),c.Y36(nh))},n.\u0275cmp=c.Xpm({type:n,selectors:[["snack-bar-container"]],viewQuery:function(t,i){if(1&t&&c.Gf(_y,7),2&t){let r;c.iGM(r=c.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,i){1&t&&c.WFA("@state.done",function(s){return i.onAnimationEnd(s)}),2&t&&c.d8E("@state",i._animationState)},features:[c.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(c.TgZ(0,"div",0),c.YNc(1,BT,0,0,"ng-template",1),c.qZA(),c._UZ(2,"div")),2&t&&(c.xp6(2),c.uIk("aria-live",i._live)("role",i._role))},directives:[_y],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[VT.snackBarState]}}),n})(),UE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vg,Mg,bs,Tm,zi],zi]}),n})();const ih=new c.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function jT(){return new nh}});let HT=(()=>{class n{constructor(t,i,r,s,l,d){this._overlay=t,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=l,this._defaultConfig=d,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,i){return this._attach(t,i)}openFromTemplate(t,i){return this._attach(t,i)}open(t,i="",r){const s=Object.assign(Object.assign({},this._defaultConfig),r);return s.data={message:t,action:i},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,i){const s=c.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:nh,useValue:i}]}),l=new dc(this.snackBarContainerComponent,i.viewContainerRef,s),d=t.attach(l);return d.instance.snackBarConfig=i,d.instance}_attach(t,i){const r=Object.assign(Object.assign(Object.assign({},new nh),this._defaultConfig),i),s=this._createOverlay(r),l=this._attachSnackBarContainer(s,r),d=new Fm(l,s);if(t instanceof c.Rgc){const g=new Pd(t,null,{$implicit:r.data,snackBarRef:d});d.instance=l.attachTemplatePortal(g)}else{const g=this._createInjector(r,d),y=new dc(t,void 0,g),E=l.attachComponentPortal(y);d.instance=E.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(vn(s.detachments())).subscribe(g=>{s.overlayElement.classList.toggle(this.handsetCssClass,g.matches)}),r.announcementMessage&&l._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(d,r),this._openedSnackBarRef=d,this._openedSnackBarRef}_animateSnackBar(t,i){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),i.duration&&i.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(i.duration))}_createOverlay(t){const i=new gf;i.direction=t.direction;let r=this._overlay.position().global();const s="rtl"===t.direction,l="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,d=!l&&"center"!==t.horizontalPosition;return l?r.left("0"):d?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(t,i){return c.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:Fm,useValue:i},{provide:LE,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xa),c.LFG(l0),c.LFG(c.zs3),c.LFG(zf),c.LFG(n,12),c.LFG(ih))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),GT=(()=>{class n extends HT{constructor(t,i,r,s,l,d){super(t,i,r,s,l,d),this.simpleSnackBarComponent=VE,this.snackBarContainerComponent=UT,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xa),c.LFG(l0),c.LFG(c.zs3),c.LFG(zf),c.LFG(n,12),c.LFG(ih))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:UE}),n})(),qf=(()=>{class n{constructor(t){this.snackBar=t}success(t){this.abrirSnackBar(t,["success"])}info(t){this.abrirSnackBar(t,["info"])}warning(t){this.abrirSnackBar(t,["warning"])}error(t){this.abrirSnackBar(t,["error"])}abrirSnackBar(t,i){const r=new nh;r.politeness="assertive",r.duration=5e3,r.panelClass=i,this.snackBar.open(t,"x",r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(GT))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jE=(()=>{class n{constructor(t){this.mensagemService=t}intercept(t,i){return i.handle(t).pipe((0,en.b)(r=>{}),ji(r=>this.trataRespostaErro(r)))}trataRespostaErro(t){return t instanceof xs&&401!==t.status&&this.mensagemService.error(`Erro: ${t.status} - ${t.message}`),Br(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(qf))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),HE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:Lo,useClass:jE,multi:!0}],imports:[[bs]]}),n})();function kv(...n){const e=(0,ha.jO)(n),{args:t,keys:i}=Cc(n),r=new xn.y(s=>{const{length:l}=t;if(!l)return void s.complete();const d=new Array(l);let g=l,y=l;for(let E=0;E<l;E++){let x=!1;(0,Zn.Xf)(t[E]).subscribe((0,Qt.x)(s,M=>{x||(x=!0,y--),d[E]=M},()=>g--,void 0,()=>{(!g||!x)&&(y||s.next(i?OE(i,d):d),s.complete())}))}});return e?r.pipe(sc(e)):r}function GE(n){return(0,Hn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Au=P(3099);const Wf=["*"];let Pm;function Yf(n){var e;return(null===(e=function $T(){if(void 0===Pm&&(Pm=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(Pm=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Pm}())||void 0===e?void 0:e.createHTML(n))||n}function Ov(n){return Error(`Unable to find icon with the name "${n}"`)}function Fv(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function zE(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Ec{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let Nm=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Ec(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const l=this._sanitizer.sanitize(c.q3G.HTML,r);if(!l)throw zE(r);const d=Yf(l);return this._addSvgIconConfig(t,i,new Ec("",d,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Ec(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(c.q3G.HTML,i);if(!s)throw zE(i);const l=Yf(s);return this._addSvgIconSetConfig(t,new Ec("",l,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,t);if(!i)throw Fv(t);const r=this._cachedIconsByUrl.get(i);return r?ze(Pv(r)):this._loadSvgIconFromConfig(new Ec(t,null)).pipe((0,en.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,Be.U)(s=>Pv(s)))}getNamedSvgIcon(t,i=""){const r=qT(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const l=this._iconSetConfigs.get(i);return l?this._getSvgFromIconSetConfigs(t,l):Br(Ov(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?ze(Pv(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Be.U)(i=>Pv(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?ze(r):kv(i.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(ji(d=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(c.q3G.RESOURCE_URL,l.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(y)),ze(null)})))).pipe((0,Be.U)(()=>{const l=this._extractIconWithNameFromAnySet(t,i);if(!l)throw Ov(t);return l}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(l,t,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,en.b)(i=>t.svgText=i),(0,Be.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?ze(null):this._fetchIcon(t).pipe((0,en.b)(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const l=s.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,r);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),r);const d=this._svgElementFromString(Yf("<svg></svg>"));return d.appendChild(l),this._setSvgAttributes(d,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Yf("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:l,value:d}=r[s];"id"!==l&&i.setAttribute(l,d)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:s}=t,l=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function $E(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,r);if(!d)throw Fv(r);const g=this._inProgressUrlFetches.get(d);if(g)return g;const y=this._httpClient.get(d,{responseType:"text",withCredentials:l}).pipe((0,Be.U)(E=>Yf(E)),GE(()=>this._inProgressUrlFetches.delete(d)),(0,Au.B)());return this._inProgressUrlFetches.set(d,y),y}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(qT(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return uL(s)?new Ec(s.url,null,s.options):new Ec(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(lo,8),c.LFG(io),c.LFG(ie,8),c.LFG(c.qLn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Pv(n){return n.cloneNode(!0)}function qT(n,e){return n+":"+e}function uL(n){return!(!n.url||!n.options)}const qE=Dv(class{constructor(n){this._elementRef=n}}),Lm=new c.OlP("mat-icon-location",{providedIn:"root",factory:function WT(){const n=(0,c.f3M)(ie),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),WE=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],YE=WE.map(n=>`[${n}]`).join(", "),Kf=/^url\(['"]?#(.*?)['"]?\)$/;let YT=(()=>{class n extends qE{constructor(t,i,r,s,l){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=l,this._inline=!1,this._currentIconFetch=bi.w0.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=rn(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(l=>{s.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(YE),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)WE.forEach(l=>{const d=i[s],g=d.getAttribute(l),y=g?g.match(Kf):null;if(y){let E=r.get(d);E||(E=[],r.set(d,E)),E.push({name:l,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe((0,sr.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Nm),c.$8M("aria-hidden"),c.Y36(Lm),c.Y36(c.qLn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(c.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),c.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[c.qOj],ngContentSelectors:Wf,decls:1,vars:0,template:function(t,i){1&t&&(c.F$t(),c.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),KE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[zi],zi]}),n})();function qi(n,e){return(0,Hn.e)((t,i)=>{let r=null,s=0,l=!1;const d=()=>l&&!r&&i.complete();t.subscribe((0,Qt.x)(i,g=>{null==r||r.unsubscribe();let y=0;const E=s++;(0,Zn.Xf)(n(g,E)).subscribe(r=(0,Qt.x)(i,x=>i.next(e?e(g,x,E,y++):x),()=>{r=null,d()}))},()=>{l=!0,d()}))})}function Nv(n,e){return e?t=>Rm(e.pipe((0,sr.q)(1),function KT(){return(0,Hn.e)((n,e)=>{n.subscribe((0,Qt.x)(e,Bd.Z))})}()),t.pipe(Nv(n))):(0,Kn.z)((t,i)=>n(t,i).pipe((0,sr.q)(1),function ZT(n){return(0,Be.U)(()=>n)}(t)))}function ZE(n,e=Ci.z){const t=Td(n,e);return Nv(()=>t)}const QT=["mat-menu-item",""];function rh(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",2),c._UZ(1,"polygon",3),c.qZA())}const QE=["*"];function XE(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",0),c.NdJ("keydown",function(r){return c.CHM(t),c.oxw()._handleKeydown(r)})("click",function(){return c.CHM(t),c.oxw().closed.emit("click")})("@transformMenu.start",function(r){return c.CHM(t),c.oxw()._onAnimationStart(r)})("@transformMenu.done",function(r){return c.CHM(t),c.oxw()._onAnimationDone(r)}),c.TgZ(1,"div",1),c.Hsn(2),c.qZA()()}if(2&n){const t=c.oxw();c.Q6J("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),c.uIk("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const Bm={transformMenu:em("transformMenu",[Tf("void",_o({opacity:0,transform:"scale(0.8)"})),_u("void => enter",mu("120ms cubic-bezier(0, 0, 0.2, 1)",_o({opacity:1,transform:"scale(1)"}))),_u("* => void",mu("100ms 25ms linear",_o({opacity:0})))]),fadeInItems:em("fadeInItems",[Tf("showing",_o({opacity:1})),_u("void => *",[_o({opacity:0}),mu("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},JE=new c.OlP("MatMenuContent"),Lv=new c.OlP("MAT_MENU_PANEL"),tM=vE($o(class{}));let sh=(()=>{class n extends tM{constructor(t,i,r,s,l){var d;super(),this._elementRef=t,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=l,this.role="menuitem",this._hovered=new ft.x,this._focused=new ft.x,this._highlighted=!1,this._triggersSubmenu=!1,null===(d=null==s?void 0:s.addItem)||void 0===d||d.call(s,this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t;const i=this._elementRef.nativeElement.cloneNode(!0),r=i.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<r.length;s++)r[s].remove();return(null===(t=i.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(t){var i;this._highlighted=t,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(ie),c.Y36(Hy),c.Y36(Lv,8),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,i){1&t&&c.NdJ("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&t&&(c.uIk("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),c.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[c.qOj],attrs:QT,ngContentSelectors:QE,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,i){1&t&&(c.F$t(),c.Hsn(0),c._UZ(1,"div",0),c.YNc(2,rh,2,0,"svg",1)),2&t&&(c.xp6(1),c.Q6J("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),c.xp6(1),c.Q6J("ngIf",i._triggersSubmenu))},directives:[Im,Un],encapsulation:2,changeDetection:0}),n})();const tD=new c.OlP("mat-menu-default-options",{providedIn:"root",factory:function nD(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let nM=0,Zf=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new c.n_E,this._tabSubscription=bi.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new ft.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new c.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+nM++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=rn(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=rn(t)}set panelClass(t){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new XC(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(at(this._directDescendantItems),qi(t=>(0,vr.T)(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{var i;const r=this._keyManager;if("enter"===this._panelAnimationState&&(null===(i=r.activeItem)||void 0===i?void 0:i._hasFocus())){const s=t.toArray(),l=Math.max(0,Math.min(s.length-1,r.activeItemIndex||0));s[l]&&!s[l].disabled?r.setActiveItem(l):r.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(at(this._directDescendantItems),qi(i=>(0,vr.T)(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const i=t.keyCode,r=this._keyManager;switch(i){case 27:ZC(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this.lazyContent?this._ngZone.onStable.pipe((0,sr.q)(1)).subscribe(()=>this._focusFirstItem(t)):this._focusFirstItem(t)}_focusFirstItem(t){const i=this._keyManager;if(i.setFocusOrigin(t).setFirstItemActive(),!i.activeItem&&this._directDescendantItems.length){let r=this._directDescendantItems.first._getHostElement().parentElement;for(;r;){if("menu"===r.getAttribute("role")){r.focus();break}r=r.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const i=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(l=>l.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,i=this.yPosition){var r;const s=this._classList;s["mat-menu-before"]="before"===t,s["mat-menu-after"]="after"===t,s["mat-menu-above"]="above"===i,s["mat-menu-below"]="below"===i,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(at(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(tD),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,contentQueries:function(t,i,r){if(1&t&&(c.Suo(r,JE,5),c.Suo(r,sh,5),c.Suo(r,sh,4)),2&t){let s;c.iGM(s=c.CRH())&&(i.lazyContent=s.first),c.iGM(s=c.CRH())&&(i._allItems=s),c.iGM(s=c.CRH())&&(i.items=s)}},viewQuery:function(t,i){if(1&t&&c.Gf(c.Rgc,5),2&t){let r;c.iGM(r=c.CRH())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),iM=(()=>{class n extends Zf{constructor(t,i,r,s){super(t,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(tD),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,i){2&t&&c.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[c._Bn([{provide:Lv,useExisting:n}]),c.qOj],ngContentSelectors:QE,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,i){1&t&&(c.F$t(),c.YNc(0,XE,3,6,"ng-template"))},directives:[Or],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[Bm.transformMenu,Bm.fadeInItems]},changeDetection:0}),n})();const iD=new c.OlP("mat-menu-scroll-strategy"),sM={provide:iD,deps:[xa],useFactory:function rM(n){return()=>n.scrollStrategies.reposition()}},sD=cc({passive:!0});let oD=(()=>{class n{constructor(t,i,r,s,l,d,g,y,E){this._overlay=t,this._element=i,this._viewContainerRef=r,this._menuItemInstance=d,this._dir=g,this._focusMonitor=y,this._ngZone=E,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=bi.w0.EMPTY,this._hoverSubscription=bi.w0.EMPTY,this._menuCloseSubscription=bi.w0.EMPTY,this._handleTouchStart=x=>{Qg(x)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new c.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new c.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=l instanceof Zf?l:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,sD),d&&(d._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,sD),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),i=t.getConfig(),r=i.positionStrategy;this._setPosition(r),i.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Zf&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(vn(this.menu.close)).subscribe(()=>{r.withLockedPosition(!1).reapplyLastPosition(),r.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof Zf?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(An(r=>"void"===r.toState),(0,sr.q)(1),vn(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i.lazyContent&&i.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,i=this.menu.parentMenu;for(;i;)t++,i=i.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new gf({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(i=>{const r="start"===i.connectionPair.overlayX?"after":"before",s="top"===i.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(r,s)):this.menu.setPositionClasses(r,s)})}_setPosition(t){let[i,r]="before"===this.menu.xPosition?["end","start"]:["start","end"],[s,l]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[d,g]=[s,l],[y,E]=[i,r],x=0;this.triggersSubmenu()?(E=i="before"===this.menu.xPosition?"start":"end",r=y="end"===i?"start":"end",x="bottom"===s?8:-8):this.menu.overlapTrigger||(d="top"===s?"bottom":"top",g="top"===l?"bottom":"top"),t.withPositions([{originX:i,originY:d,overlayX:y,overlayY:s,offsetY:x},{originX:r,originY:d,overlayX:E,overlayY:s,offsetY:x},{originX:i,originY:g,overlayX:y,overlayY:l,offsetY:-x},{originX:r,originY:g,overlayX:E,overlayY:l,offsetY:-x}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:ze(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(An(l=>l!==this._menuItemInstance),An(()=>this._menuOpen)):ze();return(0,vr.T)(t,r,s,i)}_handleMousedown(t){Af(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const i=t.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(An(t=>t===this._menuItemInstance&&!t.disabled),ZE(0,fo)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Zf&&this.menu._isAnimating?this.menu._animationDone.pipe((0,sr.q)(1),ZE(0,fo),vn(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new Pd(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xa),c.Y36(c.SBq),c.Y36(c.s_b),c.Y36(iD),c.Y36(Lv,8),c.Y36(sh,10),c.Y36(_l,8),c.Y36(Hy),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,i){1&t&&c.NdJ("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&t&&c.uIk("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),aD=(()=>{class n extends oD{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[c.qOj]}),n})(),oM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[sM],imports:[[bs,zi,AE,Vg],cf,zi]}),n})();const Qf=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function lD(n){return new xn.y(e=>{(0,Zn.Xf)(n()).subscribe(e)})}var Iu=P(515);function cD(){return(0,Hn.e)((n,e)=>{let t=null;n._refCount++;const i=(0,Qt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class Bv extends xn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Hn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Qt.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bi.w0.EMPTY)}return e}refCount(){return cD()(this)}}function Vv(n,e,t,i,r){return(s,l)=>{let d=t,g=e,y=0;s.subscribe((0,Qt.x)(l,E=>{const x=y++;g=d?n(g,E,x):(d=!0,E),i&&l.next(g)},r&&(()=>{d&&l.next(g),l.complete()})))}}function Dc(n,e){return(0,Hn.e)(Vv(n,e,arguments.length>=2,!0))}function Xf(n){return n<=0?()=>Iu.E:(0,Hn.e)((e,t)=>{let i=[];e.subscribe((0,Qt.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function uD(n=lM){return(0,Hn.e)((e,t)=>{let i=!1;e.subscribe((0,Qt.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function lM(){return new Qf}function Vm(n){return(0,Hn.e)((e,t)=>{let i=!1;e.subscribe((0,Qt.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function xc(n,e){const t=arguments.length>=2;return i=>i.pipe(n?An((r,s)=>n(r,s,i)):pu.y,(0,sr.q)(1),t?Vm(e):uD(()=>new Qf))}class Il{constructor(e,t){this.id=e,this.url=t}}class Um extends Il{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jf extends Il{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Uv extends Il{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gL extends Il{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uM extends Il{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jm extends Il{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dM extends Il{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class oh extends Il{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ep extends Il{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dD{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hM{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hD{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fM{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pM{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gM{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fD{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gt="primary";class pD{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Sc(n){return new pD(n)}const tp="ngNavigationCancelingError";function Tu(n){const e=Error("NavigationCancelingError: "+n);return e[tp]=!0,e}function gD(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const l=i[s],d=n[s];if(l.startsWith(":"))r[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ma(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!_D(n[r],e[r]))return!1;return!0}function _D(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Hm(n){return Array.prototype.concat.apply([],n)}function yD(n){return n.length>0?n[n.length-1]:null}function or(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ra(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,gn.D)(Promise.resolve(n)):ze(n)}const vD={exact:function bD(n,e,t){if(!Ru(n.segments,e.segments)||!np(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!bD(n.children[i],e.children[i],t))return!1;return!0},subset:jv},Mu={exact:function wD(n,e){return Ma(n,e)},subset:function mL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_D(n[t],e[t]))},ignored:()=>!0};function _M(n,e,t){return vD[t.paths](n.root,e.root,t.matrixParams)&&Mu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function jv(n,e,t){return yM(n,e,e.segments,t)}function yM(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Ru(r,t)||e.hasChildren()||!np(r,t,i))}if(n.segments.length===t.length){if(!Ru(n.segments,t)||!np(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!jv(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ru(n.segments,r)&&np(n.segments,r,i)&&n.children[Gt])&&yM(n.children[Gt],e,s,i)}}function np(n,e,t){return e.every((i,r)=>Mu[t](n[r].parameters,i.parameters))}class Tl{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sc(this.queryParams)),this._queryParamMap}toString(){return bM.serialize(this)}}class qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,or(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gm(this)}}class ip{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Sc(this.parameters)),this._parameterMap}toString(){return Gv(this)}}function Ru(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class CD{}class ED{parse(e){const t=new $v(e);return new Tl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${rp(e.root,!0)}`,i=function xD(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${sp(t)}=${sp(r)}`).join("&"):`${sp(t)}=${sp(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function DD(n){return encodeURI(n)}(e.fragment)}`:""}`}}const bM=new ED;function Gm(n){return n.segments.map(e=>Gv(e)).join("/")}function rp(n,e){if(!n.hasChildren())return Gm(n);if(e){const t=n.children[Gt]?rp(n.children[Gt],!1):"",i=[];return or(n.children,(r,s)=>{s!==Gt&&i.push(`${s}:${rp(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function wM(n,e){let t=[];return or(n.children,(i,r)=>{r===Gt&&(t=t.concat(e(i,r)))}),or(n.children,(i,r)=>{r!==Gt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Gt?[rp(n.children[Gt],!1)]:[`${r}:${rp(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${Gm(n)}/${t[0]}`:`${Gm(n)}/(${t.join("//")})`}}function lh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sp(n){return lh(n).replace(/%3B/gi,";")}function $m(n){return lh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function op(n){return decodeURIComponent(n)}function Hv(n){return op(n.replace(/\+/g,"%20"))}function Gv(n){return`${$m(n.path)}${function CM(n){return Object.keys(n).map(e=>`;${$m(e)}=${$m(n[e])}`).join("")}(n.parameters)}`}const EM=/^[^\/()?;=#]+/;function zm(n){const e=n.match(EM);return e?e[0]:""}const DM=/^[^=?&#]+/,ap=/^[^&#]+/;class $v{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Gt]=new qt(e,t)),i}parseSegment(){const e=zm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ip(op(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zm(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=zm(this.remaining);r&&(i=r,this.capture(i))}e[op(t)]=op(i)}parseQueryParam(e){const t=function xM(n){const e=n.match(DM);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const l=function SM(n){const e=n.match(ap);return e?e[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=Hv(t),s=Hv(i);if(e.hasOwnProperty(r)){let l=e[r];Array.isArray(l)||(l=[l],e[r]=l),l.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=zm(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Gt);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[Gt]:new qt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class qo{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=zv(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=zv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ch(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ch(e,this._root).map(t=>t.value)}}function zv(n,e){if(n===e.value)return e;for(const t of e.children){const i=zv(n,t);if(i)return i}return null}function ch(n,e){if(n===e.value)return[e];for(const t of e.children){const i=ch(n,t);if(i.length)return i.unshift(e),i}return[]}class Fs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function uh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class SD extends qo{constructor(e,t){super(e),this.snapshot=t,cp(this,e)}toString(){return this.snapshot.toString()}}function AD(n,e){const t=function qm(n,e){const l=new lp([],{},{},"",{},Gt,e,null,n.root,-1,{});return new qv("",new Fs(l,[]))}(n,e),i=new Ei([new ip("",{})]),r=new Ei({}),s=new Ei({}),l=new Ei({}),d=new Ei(""),g=new ka(i,r,l,d,s,Gt,e,t.root);return g.snapshot=t.root,new SD(new Fs(g,[]),t)}class ka{constructor(e,t,i,r,s,l,d,g){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Be.U)(e=>Sc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Be.U)(e=>Sc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ID(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function AM(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class lp{constructor(e,t,i,r,s,l,d,g,y,E,x){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=E,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Sc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qv extends qo{constructor(e,t){super(t),this.url=e,cp(this,t)}toString(){return Wv(this._root)}}function cp(n,e){e.value._routerState=n,e.children.forEach(t=>cp(n,t))}function Wv(n){const e=n.children.length>0?` { ${n.children.map(Wv).join(", ")} } `:"";return`${n.value}${e}`}function Yv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ma(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ma(e.params,t.params)||n.params.next(t.params),function mD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ma(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ma(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Kv(n,e){const t=Ma(n.params,e.params)&&function vM(n,e){return Ru(n,e)&&n.every((t,i)=>Ma(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Kv(n.parent,e.parent))}function ku(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Zv(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ku(n,i,r);return ku(n,i)})}(n,e,t);return new Fs(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>ku(n,d)),l}}const i=function TD(n){return new ka(new Ei(n.url),new Ei(n.params),new Ei(n.queryParams),new Ei(n.fragment),new Ei(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>ku(n,s));return new Fs(i,r)}}function dh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function up(n){return"object"==typeof n&&null!=n&&n.outlets}function Xv(n,e,t,i,r){let s={};if(i&&or(i,(d,g)=>{s[g]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),n===e)return new Tl(t,s,r);const l=MD(n,e,t);return new Tl(l,s,r)}function MD(n,e,t){const i={};return or(n.children,(r,s)=>{i[s]=r===e?t:MD(r,e,t)}),new qt(n.segments,i)}class RD{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&dh(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(up);if(r&&r!==yD(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class dp{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function Jv(n,e,t){if(n||(n=new qt([],{})),0===n.segments.length&&n.hasChildren())return Wm(n,e,t);const i=function ND(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const l=n.segments[r],d=t[i];if(up(d))break;const g=`${d}`,y=i<t.length-1?t[i+1]:null;if(r>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!LD(g,y,l))return s;i+=2}else{if(!LD(g,{},l))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new qt(n.segments.slice(0,i.pathIndex),{});return s.children[Gt]=new qt(n.segments.slice(i.pathIndex),n.children),Wm(s,0,r)}return i.match&&0===r.length?new qt(n.segments,{}):i.match&&!n.hasChildren()?Ym(n,e,t):i.match?Wm(n,0,r):Ym(n,e,t)}function Wm(n,e,t){if(0===t.length)return new qt(n.segments,{});{const i=function PD(n){return up(n[0])?n[0].outlets:{[Gt]:n}}(t),r={};return or(i,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[l]=Jv(n.children[l],e,s))}),or(n.children,(s,l)=>{void 0===i[l]&&(r[l]=s)}),new qt(n.segments,r)}}function Ym(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(up(s)){const g=IM(s.outlets);return new qt(i,g)}if(0===r&&dh(t[0])){i.push(new ip(n.segments[e].path,ew(t[0]))),r++;continue}const l=up(s)?s.outlets[Gt]:`${s}`,d=r<t.length-1?t[r+1]:null;l&&d&&dh(d)?(i.push(new ip(l,ew(d))),r+=2):(i.push(new ip(l,{})),r++)}return new qt(i,{})}function IM(n){const e={};return or(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=Ym(new qt([],{}),0,t))}),e}function ew(n){const e={};return or(n,(t,i)=>e[i]=`${t}`),e}function LD(n,e,t){return n==t.path&&Ma(e,t.parameters)}class hh{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Yv(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=uh(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,r[l],i),delete r[l]}),or(r,(s,l)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=uh(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);if(i&&i.outlet){const l=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=uh(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=uh(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new gM(s.value.snapshot))}),e.children.length&&this.forwardEvent(new fM(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(Yv(r),r===s)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Yv(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=function TM(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),g=d?d.module.componentFactoryResolver:null;l.attachRef=null,l.route=r,l.resolver=g,l.outlet&&l.outlet.activateWith(r,g),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,i)}}class tw{constructor(e,t){this.routes=e,this.module=t}}function Ou(n){return"function"==typeof n}function Fu(n){return n instanceof Tl}const fp=Symbol("INITIAL_VALUE");function Pu(){return qi(n=>Mm(n.map(e=>e.pipe((0,sr.q)(1),at(fp)))).pipe(Dc((e,t)=>{let i=!1;return t.reduce((r,s,l)=>r!==fp?r:(s===fp&&(i=!0),i||!1!==s&&l!==t.length-1&&!Fu(s)?r:s),e)},fp),An(e=>e!==fp),(0,Be.U)(e=>Fu(e)?e:!0===e),(0,sr.q)(1)))}class VD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fh,this.attachRef=null}}class fh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new VD,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ph=(()=>{class n{constructor(t,i,r,s,l){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=s||Gt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,g=new iw(t,d,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(fh),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class iw{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===ka?this.route:e===fh?this.childContexts:this.parent.get(e,t)}}let kM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&c._UZ(0,"router-outlet")},directives:[ph],encapsulation:2}),n})();function rw(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];OM(i,UD(e,i))}}function OM(n,e){n.children&&rw(n.children,e)}function UD(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function gh(n){const e=n.children&&n.children.map(gh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=kM),t}function Ps(n){return n.outlet||Gt}function jD(n,e){const t=n.filter(i=>Ps(i)===e);return t.push(...n.filter(i=>Ps(i)!==e)),t}const Km={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mh(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Km):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||gD)(t,n,e);if(!s)return Object.assign({},Km);const l={};or(s.posParams,(g,y)=>{l[y]=g.path});const d=s.consumed.length>0?Object.assign(Object.assign({},l),s.consumed[s.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function sw(n,e,t,i,r="corrected"){if(t.length>0&&function HD(n,e,t){return t.some(i=>Zm(n,e,i)&&Ps(i)!==Gt)}(n,t,i)){const l=new qt(e,function PM(n,e,t,i){const r={};r[Gt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ps(s)!==Gt){const l=new qt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,r[Ps(s)]=l}return r}(n,e,i,new qt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function GD(n,e,t){return t.some(i=>Zm(n,e,i))}(n,t,i)){const l=new qt(n.segments,function FM(n,e,t,i,r,s){const l={};for(const d of i)if(Zm(n,t,d)&&!r[Ps(d)]){const g=new qt([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[Ps(d)]=g}return Object.assign(Object.assign({},r),l)}(n,e,t,i,n.children,r));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new qt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Zm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ow(n,e,t,i){return!!(Ps(n)===i||i!==Gt&&Zm(e,t,n))&&("**"===n.path||mh(e,n,t).matched)}function aw(n,e,t){return 0===e.length&&!n.children[t]}class Qm{constructor(e){this.segmentGroup=e||null}}class $D{constructor(e){this.urlTree=e}}function _h(n){return Br(new Qm(n))}function zD(n){return Br(new $D(n))}class KD{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=sw(this.urlTree.root,[],[],this.config).segmentGroup,t=new qt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Gt).pipe((0,Be.U)(s=>this.createUrlTree(lw(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ji(s=>{if(s instanceof $D)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Qm?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Gt).pipe((0,Be.U)(r=>this.createUrlTree(lw(r),e.queryParams,e.fragment))).pipe(ji(r=>{throw r instanceof Qm?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new qt([],{[Gt]:e}):e;return new Tl(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,Be.U)(s=>new qt([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,gn.D)(r).pipe(so(s=>{const l=i.children[s],d=jD(t,s);return this.expandSegmentGroup(e,d,l,s).pipe((0,Be.U)(g=>({segment:g,outlet:s})))}),Dc((s,l)=>(s[l.outlet]=l.segment,s),{}),function cM(n,e){const t=arguments.length>=2;return i=>i.pipe(n?An((r,s)=>n(r,s,i)):pu.y,Xf(1),t?Vm(e):uD(()=>new Qf))}())}expandSegment(e,t,i,r,s,l){return(0,gn.D)(i).pipe(so(d=>this.expandSegmentAgainstRoute(e,t,i,d,r,s,l).pipe(ji(y=>{if(y instanceof Qm)return ze(null);throw y}))),xc(d=>!!d),ji((d,g)=>{if(d instanceof Qf||"EmptyError"===d.name)return aw(t,r,s)?ze(new qt([],{})):_h(t);throw d}))}expandSegmentAgainstRoute(e,t,i,r,s,l,d){return ow(r,t,s,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l):_h(t):_h(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?zD(s):this.lineralizeSegments(i,s).pipe((0,Kn.z)(l=>{const d=new qt(l,{});return this.expandSegment(e,d,t,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){const{matched:d,consumedSegments:g,remainingSegments:y,positionalParamSegments:E}=mh(t,r,s);if(!d)return _h(t);const x=this.applyRedirectCommands(g,r.redirectTo,E);return r.redirectTo.startsWith("/")?zD(x):this.lineralizeSegments(r,x).pipe((0,Kn.z)(M=>this.expandSegment(e,t,i,M.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?ze(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe((0,Be.U)(x=>(i._loadedConfig=x,new qt(r,{})))):ze(new qt(r,{}));const{matched:l,consumedSegments:d,remainingSegments:g}=mh(t,i,r);return l?this.getChildConfig(e,i,r).pipe((0,Kn.z)(E=>{const x=E.module,M=E.routes,{segmentGroup:F,slicedSegments:B}=sw(t,d,g,M),Q=new qt(F.segments,F.children);if(0===B.length&&Q.hasChildren())return this.expandChildren(x,M,Q).pipe((0,Be.U)(ct=>new qt(d,ct)));if(0===M.length&&0===B.length)return ze(new qt(d,{}));const ye=Ps(i)===s;return this.expandSegment(x,Q,M,B,ye?Gt:s,!0).pipe((0,Be.U)(Ze=>new qt(d.concat(Ze.segments),Ze.children)))})):_h(t)}getChildConfig(e,t,i){return t.children?ze(new tw(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ze(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe((0,Kn.z)(r=>r?this.configLoader.load(e.injector,t).pipe((0,Be.U)(s=>(t._loadedConfig=s,s))):function WD(n){return Br(Tu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ze(new tw([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;return r&&0!==r.length?ze(r.map(l=>{const d=e.get(l);let g;if(function nw(n){return n&&Ou(n.canLoad)}(d))g=d.canLoad(t,i);else{if(!Ou(d))throw new Error("Invalid CanLoad guard");g=d(t,i)}return Ra(g)})).pipe(Pu(),(0,en.b)(l=>{if(!Fu(l))return;const d=Tu(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw d.url=l,d}),(0,Be.U)(l=>!0===l)):ze(!0)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ze(i);if(r.numberOfChildren>1||!r.children[Gt])return Br(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));r=r.children[Gt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Tl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return or(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=t[d]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let l={};return or(t.children,(d,g)=>{l[g]=this.createSegmentGroup(e,d,i,r)}),new qt(s,l)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function lw(n){const e={};for(const i of Object.keys(n.children)){const s=lw(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function NM(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new qt(n.segments.concat(e.segments),e.children)}return n}(new qt(n.segments,e))}class cw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class uw{constructor(e,t){this.component=e,this.route=t}}function vL(n,e,t){const i=n._root;return Xm(i,e?e._root:null,t,[i.value])}function dw(n,e,t){const i=function bL(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function Xm(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=uh(e);return n.children.forEach(l=>{(function CL(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const g=function EL(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ru(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ru(n.url,e.url)||!Ma(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kv(n,e)||!Ma(n.queryParams,e.queryParams);default:return!Kv(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);g?r.canActivateChecks.push(new cw(i)):(s.data=l.data,s._resolvedData=l._resolvedData),Xm(n,e,s.component?d?d.children:null:t,i,r),g&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new uw(d.outlet.component,l))}else l&&Ac(e,d,r),r.canActivateChecks.push(new cw(i)),Xm(n,null,s.component?d?d.children:null:t,i,r)})(l,s[l.value.outlet],t,i.concat([l.value]),r),delete s[l.value.outlet]}),or(s,(l,d)=>Ac(l,t.getContext(d),r)),r}function Ac(n,e,t){const i=uh(n),r=n.value;or(i,(s,l)=>{Ac(s,r.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new uw(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class ex{}function pw(n){return new xn.y(e=>e.error(n))}class tx{constructor(e,t,i,r,s,l){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=l}recognize(){const e=sw(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Gt);if(null===t)return null;const i=new lp([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Fs(i,t),s=new qv(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=ID(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const l=t.children[s],d=jD(e,s),g=this.processSegmentGroup(d,l,s);if(null===g)return null;i.push(...g)}const r=VM(i);return function LM(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const l=this.processSegmentAgainstRoute(s,t,i,r);if(null!==l)return l}return aw(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!ow(e,t,i,r))return null;let s,l=[],d=[];if("**"===e.path){const F=i.length>0?yD(i).parameters:{};s=new lp(i,F,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ix(e),Ps(e),e.component,e,UM(t),nx(t)+i.length,rx(e))}else{const F=mh(t,e,i);if(!F.matched)return null;l=F.consumedSegments,d=F.remainingSegments,s=new lp(l,F.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ix(e),Ps(e),e.component,e,UM(t),nx(t)+l.length,rx(e))}const g=function gw(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:E}=sw(t,l,d,g.filter(F=>void 0===F.redirectTo),this.relativeLinkResolution);if(0===E.length&&y.hasChildren()){const F=this.processChildren(g,y);return null===F?null:[new Fs(s,F)]}if(0===g.length&&0===E.length)return[new Fs(s,[])];const x=Ps(e)===r,M=this.processSegment(g,y,E,x?Gt:r);return null===M?null:[new Fs(s,M)]}}function BM(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function VM(n){const e=[],t=new Set;for(const i of n){if(!BM(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=VM(i.children);e.push(new Fs(i.value,r))}return e.filter(i=>!t.has(i))}function UM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function nx(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function ix(n){return n.data||{}}function rx(n){return n.resolve||{}}function vo(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function pp(n){return qi(e=>{const t=n(e);return t?(0,gn.D)(t).pipe((0,Be.U)(()=>e)):ze(e)})}class _w extends class zM{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Jm=new c.OlP("ROUTES");class yw{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe((0,Be.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=s.create(e);return new tw(Hm(l.injector.get(Jm,void 0,c.XFs.Self|c.XFs.Optional)).map(gh),l)}),ji(s=>{throw t._loader$=void 0,s}));return t._loader$=new Bv(r,()=>new ft.x).pipe(cD()),t._loader$}loadModuleFactory(e){return Ra(e()).pipe((0,Kn.z)(t=>t instanceof c.YKP?ze(t):(0,gn.D)(this.compiler.compileModuleAsync(t))))}}class sx{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ox(n){throw n}function WM(n,e,t){return e.parse("/")}function ax(n,e){return ze(null)}const vw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cr=(()=>{class n{constructor(t,i,r,s,l,d,g){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ft.x,this.errorHandler=ox,this.malformedUriErrorHandler=WM,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ax,afterPreactivation:ax},this.urlHandlingStrategy=new sx,this.routeReuseStrategy=new _w,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(c.h0i),this.console=l.get(c.c2e);const x=l.get(c.R0b);this.isNgZoneEnabled=x instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function ah(){return new Tl(new qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new yw(l,d,M=>this.triggerEvent(new dD(M)),M=>this.triggerEvent(new hM(M))),this.routerState=AD(this.currentUrlTree,this.rootComponentType),this.transitions=new Ei({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(An(r=>0!==r.id),(0,Be.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),qi(r=>{let s=!1,l=!1;return ze(r).pipe((0,en.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qi(d=>{const g=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return lx(d.source)&&(this.browserUrlTree=d.extractedUrl),ze(d).pipe(qi(x=>{const M=this.transitions.getValue();return i.next(new Um(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),M!==this.transitions.getValue()?Iu.E:Promise.resolve(x)}),function yL(n,e,t,i){return qi(r=>function YD(n,e,t,i,r){return new KD(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,Be.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,en.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function AL(n,e,t,i,r){return(0,Kn.z)(s=>function SL(n,e,t,i,r="emptyOnly",s="legacy"){try{const l=new tx(n,e,t,i,r,s).recognize();return null===l?pw(new ex):ze(l)}catch(l){return pw(l)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe((0,Be.U)(l=>Object.assign(Object.assign({},s),{targetSnapshot:l}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,en.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(F,x)}this.browserUrlTree=x.urlAfterRedirects}const M=new uM(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);i.next(M)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:F,source:B,restoredState:Q,extras:ye}=d,Oe=new Um(M,this.serializeUrl(F),B,Q);i.next(Oe);const Ze=AD(F,this.rootComponentType).snapshot;return ze(Object.assign(Object.assign({},d),{targetSnapshot:Ze,urlAfterRedirects:F,extras:Object.assign(Object.assign({},ye),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),Iu.E}),pp(d=>{const{targetSnapshot:g,id:y,extractedUrl:E,rawUrl:x,extras:{skipLocationChange:M,replaceUrl:F}}=d;return this.hooks.beforePreactivation(g,{navigationId:y,appliedUrlTree:E,rawUrlTree:x,skipLocationChange:!!M,replaceUrl:!!F})}),(0,en.b)(d=>{const g=new jm(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),(0,Be.U)(d=>Object.assign(Object.assign({},d),{guards:vL(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function DL(n,e){return(0,Kn.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?ze(Object.assign(Object.assign({},t),{guardsResult:!0})):function ZD(n,e,t,i){return(0,gn.D)(n).pipe((0,Kn.z)(r=>function JD(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ze(s.map(d=>{const g=dw(d,e,r);let y;if(function RM(n){return n&&Ou(n.canDeactivate)}(g))y=Ra(g.canDeactivate(n,e,t,i));else{if(!Ou(g))throw new Error("Invalid CanDeactivate guard");y=Ra(g(n,e,t,i))}return y.pipe(xc())})).pipe(Pu()):ze(!0)}(r.component,r.route,t,e,i)),xc(r=>!0!==r,!0))}(l,i,r,n).pipe((0,Kn.z)(d=>d&&function hp(n){return"boolean"==typeof n}(d)?function hw(n,e,t,i){return(0,gn.D)(e).pipe(so(r=>Rm(function XD(n,e){return null!==n&&e&&e(new hD(n)),ze(!0)}(r.route.parent,i),function QD(n,e){return null!==n&&e&&e(new pM(n)),ze(!0)}(r.route,i),function fw(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function wL(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>lD(()=>ze(l.guards.map(g=>{const y=dw(g,l.node,t);let E;if(function BD(n){return n&&Ou(n.canActivateChild)}(y))E=Ra(y.canActivateChild(i,n));else{if(!Ou(y))throw new Error("Invalid CanActivateChild guard");E=Ra(y(i,n))}return E.pipe(xc())})).pipe(Pu())));return ze(s).pipe(Pu())}(n,r.path,t),function xL(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ze(!0);const r=i.map(s=>lD(()=>{const l=dw(s,e,t);let d;if(function MM(n){return n&&Ou(n.canActivate)}(l))d=Ra(l.canActivate(e,n));else{if(!Ou(l))throw new Error("Invalid CanActivate guard");d=Ra(l(e,n))}return d.pipe(xc())}));return ze(r).pipe(Pu())}(n,r.route,t))),xc(r=>!0!==r,!0))}(i,s,n,e):ze(d)),(0,Be.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,en.b)(d=>{if(Fu(d.guardsResult)){const y=Tu(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const g=new dM(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(g)}),An(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),pp(d=>{if(d.guards.canActivateChecks.length)return ze(d).pipe((0,en.b)(g=>{const y=new oh(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),qi(g=>{let y=!1;return ze(g).pipe(function jM(n,e){return(0,Kn.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ze(t);let s=0;return(0,gn.D)(r).pipe(so(l=>function mw(n,e,t,i){return function HM(n,e,t,i){const r=vo(n);if(0===r.length)return ze({});const s={};return(0,gn.D)(r).pipe((0,Kn.z)(l=>function GM(n,e,t,i){const r=dw(n,e,i);return Ra(r.resolve?r.resolve(e,t):r(e,t))}(n[l],e,t,i).pipe((0,en.b)(d=>{s[l]=d}))),Xf(1),(0,Kn.z)(()=>vo(s).length===r.length?ze(s):Iu.E))}(n._resolve,n,e,i).pipe((0,Be.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),ID(n,t).resolve),null)))}(l.route,i,n,e)),(0,en.b)(()=>s++),Xf(1),(0,Kn.z)(l=>s===r.length?ze(t):Iu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,en.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,en.b)(g=>{const y=new ep(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}))}),pp(d=>{const{targetSnapshot:g,id:y,extractedUrl:E,rawUrl:x,extras:{skipLocationChange:M,replaceUrl:F}}=d;return this.hooks.afterPreactivation(g,{navigationId:y,appliedUrlTree:E,rawUrlTree:x,skipLocationChange:!!M,replaceUrl:!!F})}),(0,Be.U)(d=>{const g=function _L(n,e,t){const i=ku(n,e._root,t?t._root:void 0);return new SD(i,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:g})}),(0,en.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,Be.U)(i=>(new hh(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,en.b)({next(){s=!0},complete(){s=!0}}),GE(()=>{var d;s||l||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===r.id&&(this.currentNavigation=null)}),ji(d=>{if(l=!0,function mM(n){return n&&n[tp]}(d)){const g=Fu(d.url);g||(this.navigated=!0,this.restoreHistory(r,!0));const y=new Uv(r.id,this.serializeUrl(r.extractedUrl),d.message);i.next(y),g?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),x={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||lx(r.source)};this.scheduleNavigation(E,"imperative",null,x,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const g=new gL(r.id,this.serializeUrl(r.extractedUrl),d);i.next(g);try{r.resolve(this.errorHandler(d))}catch(y){r.reject(y)}}return Iu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},l=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(l){const g=Object.assign({},l);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(s.state=g)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,i,l,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){rw(t),this.config=t.map(gh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:g}=i,y=r||this.routerState.root,E=g?this.currentUrlTree.fragment:l;let x=null;switch(d){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=s||null}return null!==x&&(x=this.removeEmptyProps(x)),function Qv(n,e,t,i,r){if(0===t.length)return Xv(e.root,e.root,e.root,i,r);const s=function kD(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new RD(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return or(s.outlets,(g,y)=>{d[y]="string"==typeof g?g.split("/"):g}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===l?(s.split("/").forEach((d,g)=>{0==g&&"."===d||(0==g&&""===d?t=!0:".."===d?e++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new RD(t,e,i)}(t);if(s.toRoot())return Xv(e.root,e.root,new qt([],{}),i,r);const l=function OD(n,e,t){if(n.isAbsolute)return new dp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new dp(s,s===e.root,0)}const i=dh(n.commands[0])?0:1;return function FD(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new dp(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),d=l.processChildren?Wm(l.segmentGroup,l.index,s.commands):Jv(l.segmentGroup,l.index,s.commands);return Xv(e.root,l.segmentGroup,d,i,r)}(y,this.currentUrlTree,t,x,null!=E?E:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Fu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function IL(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},vw):!1===i?Object.assign({},Wo):i,Fu(t))return _M(this.currentUrlTree,t,r);const s=this.parseUrl(t);return _M(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Jf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,l){var d,g;if(this.disposed)return Promise.resolve(!1);let y,E,x;l?(y=l.resolve,E=l.reject,x=l.promise):x=new Promise((B,Q)=>{y=B,E=Q});const M=++this.navigationId;let F;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),F=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):F=0,this.setTransition({id:M,targetPageId:F,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:y,reject:E,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(B=>Promise.reject(B))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===l?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new Uv(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function lx(n){return"imperative"!==n}let gp=(()=>{class n{constructor(t,i,r,s,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=l,this.commands=null,this.onChanges=new ft.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:yh(this.skipLocationChange),replaceUrl:yh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:yh(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Cr),c.Y36(ka),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&c.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function yh(n){return""===n||!!n}class KM{}class bw{preload(e,t){return ze(null)}}let dx=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new yw(r,i,g=>t.triggerEvent(new dD(g)),g=>t.triggerEvent(new hM(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(An(t=>t instanceof Jf),so(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const l=s._loadedConfig;r.push(this.processRoutes(l.module,l.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return(0,gn.D)(r).pipe((0,$f.J)(),(0,Be.U)(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?ze(i._loadedConfig):this.loader.load(t.injector,i)).pipe((0,Kn.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Cr),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(KM))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Cw=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Um?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jf&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fD&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new fD(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ml=new c.OlP("ROUTER_CONFIGURATION"),e_=new c.OlP("ROUTER_FORROOT_GUARD"),hx=[be,{provide:CD,useClass:ED},{provide:Cr,useFactory:function TL(n,e,t,i,r,s,l={},d,g){const y=new Cr(null,n,e,t,i,r,Hm(s));return d&&(y.urlHandlingStrategy=d),g&&(y.routeReuseStrategy=g),function px(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,y),l.enableTracing&&y.events.subscribe(E=>{var x,M;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(M=console.groupEnd)||void 0===M||M.call(console)}),y},deps:[CD,fh,be,c.zs3,c.Sil,Jm,Ml,[class qM{},new c.FiY],[class $M{},new c.FiY]]},fh,{provide:ka,useFactory:function tR(n){return n.routerState.root},deps:[Cr]},dx,bw,class ux{preload(e,t){return t().pipe(ji(()=>ze(null)))}},{provide:Ml,useValue:{enableTracing:!1}}];function QM(){return new c.PXZ("Router",Cr)}let t_=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[hx,eR(t),{provide:e_,useFactory:JM,deps:[[Cr,new c.FiY,new c.tp0]]},{provide:Ml,useValue:i||{}},{provide:pe,useFactory:XM,deps:[ce,[new c.tBr(We),new c.FiY],Ml]},{provide:Cw,useFactory:fx,deps:[Cr,Uc,Ml]},{provide:KM,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:bw},{provide:c.PXZ,multi:!0,useFactory:QM},[Ew,{provide:c.ip1,multi:!0,useFactory:nR,deps:[Ew]},{provide:iR,useFactory:ML,deps:[Ew]},{provide:c.tb,multi:!0,useExisting:iR}]]}}static forChild(t){return{ngModule:n,providers:[eR(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(e_,8),c.LFG(Cr,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function fx(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Cw(n,e,t)}function XM(n,e,t={}){return t.useHash?new Se(n,e):new Qe(n,e)}function JM(n){return"guarded"}function eR(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:Jm,multi:!0,useValue:n}]}let Ew=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ft.x}appInitializer(){return this.injector.get(q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(d=>i=d),s=this.injector.get(Cr),l=this.injector.get(Ml);return"disabled"===l.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?ze(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(Ml),r=this.injector.get(dx),s=this.injector.get(Cw),l=this.injector.get(Cr),d=this.injector.get(c.z2F);t===d.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&l.initialNavigation(),r.setUpPreloading(),s.init(),l.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function nR(n){return n.appInitializer.bind(n)}function ML(n){return n.bootstrapListener.bind(n)}const iR=new c.OlP("Router Initializer");let kL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[bs,oM,Tm,t_]]}),n})(),rR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[bs]]}),n})();const n_=["*",[["mat-card-footer"]]],sR=["*","mat-card-footer"],oR=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],gx=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let i_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),r_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),s_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-card-footer"]],hostAttrs:[1,"mat-card-footer"]}),n})(),_x=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Xd,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,i){2&t&&c.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:sR,decls:2,vars:0,template:function(t,i){1&t&&(c.F$t(n_),c.Hsn(0),c.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),cR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:gx,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,i){1&t&&(c.F$t(oR),c.Hsn(0),c.TgZ(1,"div",0),c.Hsn(2,1),c.qZA(),c.Hsn(3,2))},encapsulation:2,changeDetection:0}),n})(),uR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[zi],zi]}),n})(),xw=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yx=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=cs(t);return new xn.y(r=>{const l=this._observeElement(i).subscribe(r);return()=>{l.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new ft.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xw))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vx=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new c.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=rn(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function ya(n,e=0){return uo(n)?Number(n):e}(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(QC(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(yx),c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),dR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[xw]}),n})();const hR=["connectionContainer"],wx=["inputContainer"],Sw=["label"];function PL(n,e){1&n&&(c.ynx(0),c.TgZ(1,"div",14),c._UZ(2,"div",15)(3,"div",16)(4,"div",17),c.qZA(),c.TgZ(5,"div",18),c._UZ(6,"div",15)(7,"div",16)(8,"div",17),c.qZA(),c.BQk())}function bx(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",19),c.NdJ("cdkObserveContent",function(){return c.CHM(t),c.oxw().updateOutlineGap()}),c.Hsn(1,1),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function Aw(n,e){if(1&n&&(c.ynx(0),c.Hsn(1,2),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.BQk()),2&n){const t=c.oxw(2);c.xp6(3),c.Oqu(t._control.placeholder)}}function fR(n,e){1&n&&c.Hsn(0,3,["*ngSwitchCase","true"])}function pR(n,e){1&n&&(c.TgZ(0,"span",23),c._uU(1," *"),c.qZA())}function NL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"label",20,21),c.NdJ("cdkObserveContent",function(){return c.CHM(t),c.oxw().updateOutlineGap()}),c.YNc(2,Aw,4,1,"ng-container",12),c.YNc(3,fR,1,0,"ng-content",12),c.YNc(4,pR,2,0,"span",22),c.qZA()}if(2&n){const t=c.oxw();c.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),c.uIk("for",t._control.id)("aria-owns",t._control.id),c.xp6(2),c.Q6J("ngSwitchCase",!1),c.xp6(1),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function LL(n,e){1&n&&(c.TgZ(0,"div",24),c.Hsn(1,4),c.qZA())}function BL(n,e){if(1&n&&(c.TgZ(0,"div",25),c._UZ(1,"span",26),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function gR(n,e){if(1&n&&(c.TgZ(0,"div"),c.Hsn(1,5),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState)}}function mR(n,e){if(1&n&&(c.TgZ(0,"div",30),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.Q6J("id",t._hintLabelId),c.xp6(1),c.Oqu(t.hintLabel)}}function VL(n,e){if(1&n&&(c.TgZ(0,"div",27),c.YNc(1,mR,2,2,"div",28),c.Hsn(2,6),c._UZ(3,"div",29),c.Hsn(4,7),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState),c.xp6(1),c.Q6J("ngIf",t.hintLabel)}}const UL=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],jL=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],HL=new c.OlP("MatError"),$L={transitionMessages:em("transitionMessages",[Tf("enter",_o({opacity:1,transform:"translateY(0%)"})),_u("void => enter",[_o({opacity:0,transform:"translateY(-5px)"}),mu("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Cx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n}),n})();const u=new c.OlP("MatHint");let f=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-label"]]}),n})(),m=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const w=new c.OlP("MatPrefix"),D=new c.OlP("MatSuffix");let R=0;const ee=Dv(class{constructor(n){this._elementRef=n}},"primary"),we=new c.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Ne=new c.OlP("MatFormField");let $e=(()=>{class n extends ee{constructor(t,i,r,s,l,d,g){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=l,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ft.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+R++,this._labelId="mat-form-field-label-"+R++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==g,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=rn(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(at(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(vn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(vn(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,vr.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(at(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(at(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(vn(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,oc(this._label.nativeElement,"transitionend").pipe((0,sr.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const E=i.querySelectorAll(`${r}, ${s}`);for(let x=0;x<E.length;x++)E[x].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let l=0,d=0;const g=i.querySelectorAll(r),y=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const E=i.getBoundingClientRect();if(0===E.width&&0===E.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const x=this._getStartEnd(E),M=t.children,F=this._getStartEnd(M[0].getBoundingClientRect());let B=0;for(let Q=0;Q<M.length;Q++)B+=M[Q].offsetWidth;l=Math.abs(F-x)-5,d=B>0?.75*B+10:0}for(let E=0;E<g.length;E++)g[E].style.width=`${l}px`;for(let E=0;E<y.length;E++)y[E].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(_l,8),c.Y36(we,8),c.Y36(Gi),c.Y36(c.R0b),c.Y36(Xd,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(c.Suo(r,Cx,5),c.Suo(r,Cx,7),c.Suo(r,f,5),c.Suo(r,f,7),c.Suo(r,m,5),c.Suo(r,HL,5),c.Suo(r,u,5),c.Suo(r,w,5),c.Suo(r,D,5)),2&t){let s;c.iGM(s=c.CRH())&&(i._controlNonStatic=s.first),c.iGM(s=c.CRH())&&(i._controlStatic=s.first),c.iGM(s=c.CRH())&&(i._labelChildNonStatic=s.first),c.iGM(s=c.CRH())&&(i._labelChildStatic=s.first),c.iGM(s=c.CRH())&&(i._placeholderChild=s.first),c.iGM(s=c.CRH())&&(i._errorChildren=s),c.iGM(s=c.CRH())&&(i._hintChildren=s),c.iGM(s=c.CRH())&&(i._prefixChildren=s),c.iGM(s=c.CRH())&&(i._suffixChildren=s)}},viewQuery:function(t,i){if(1&t&&(c.Gf(hR,7),c.Gf(wx,5),c.Gf(Sw,5)),2&t){let r;c.iGM(r=c.CRH())&&(i._connectionContainerRef=r.first),c.iGM(r=c.CRH())&&(i._inputContainerRef=r.first),c.iGM(r=c.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&c.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[c._Bn([{provide:Ne,useExisting:n}]),c.qOj],ngContentSelectors:jL,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(c.F$t(UL),c.TgZ(0,"div",0)(1,"div",1,2),c.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),c.YNc(3,PL,9,0,"ng-container",3),c.YNc(4,bx,2,1,"div",4),c.TgZ(5,"div",5,6),c.Hsn(7),c.TgZ(8,"span",7),c.YNc(9,NL,5,16,"label",8),c.qZA()(),c.YNc(10,LL,2,0,"div",9),c.qZA(),c.YNc(11,BL,2,4,"div",10),c.TgZ(12,"div",11),c.YNc(13,gR,2,1,"div",12),c.YNc(14,VL,5,2,"div",13),c.qZA()()),2&t&&(c.xp6(3),c.Q6J("ngIf","outline"==i.appearance),c.xp6(1),c.Q6J("ngIf",i._prefixChildren.length),c.xp6(5),c.Q6J("ngIf",i._hasFloatingLabel()),c.xp6(1),c.Q6J("ngIf",i._suffixChildren.length),c.xp6(1),c.Q6J("ngIf","outline"!=i.appearance),c.xp6(1),c.Q6J("ngSwitch",i._getDisplayedMessages()),c.xp6(1),c.Q6J("ngSwitchCase","error"),c.xp6(1),c.Q6J("ngSwitchCase","hint"))},directives:[Un,vx,Vi,Fr],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[$L.transitionMessages]},changeDetection:0}),n})(),nt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[bs,zi,dR],zi]}),n})(),Ie=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),ut=(()=>{class n extends Ie{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Mt=new c.OlP("NgValueAccessor"),Nu={provide:Mt,useExisting:(0,c.Gpc)(()=>wh),multi:!0},Tw=new c.OlP("CompositionEventMode");let wh=(()=>{class n extends Ie{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Iw(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(Tw,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&c.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[c._Bn([Nu]),c.qOj]}),n})();function Oa(n){return null==n||0===n.length}function o_(n){return null!=n&&"number"==typeof n.length}const Wi=new c.OlP("NgValidators"),Fa=new c.OlP("NgAsyncValidators"),Mw=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rw{static min(e){return function zL(n){return e=>{if(Oa(e.value)||Oa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function qL(n){return e=>{if(Oa(e.value)||Oa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function WL(n){return Oa(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function YL(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function KL(n){return Oa(n.value)||Mw.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function ZL(n){return e=>Oa(e.value)||!o_(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function QL(n){return e=>o_(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function XL(n){if(!n)return Ex;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Oa(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return rB(e)}static composeAsync(e){return sB(e)}}function Ex(n){return null}function JL(n){return null!=n}function eB(n){const e=(0,c.QGY)(n)?(0,gn.D)(n):n;return(0,c.CqO)(e),e}function tB(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function nB(n,e){return e.map(t=>t(n))}function iB(n){return n.map(e=>function Jz(n){return!n.validate}(e)?e:t=>e.validate(t))}function rB(n){if(!n)return null;const e=n.filter(JL);return 0==e.length?null:function(t){return tB(nB(t,e))}}function _R(n){return null!=n?rB(iB(n)):null}function sB(n){if(!n)return null;const e=n.filter(JL);return 0==e.length?null:function(t){return kv(nB(t,e).map(eB)).pipe((0,Be.U)(tB))}}function yR(n){return null!=n?sB(iB(n)):null}function oB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aB(n){return n._rawValidators}function lB(n){return n._rawAsyncValidators}function vR(n){return n?Array.isArray(n)?n:[n]:[]}function Dx(n,e){return Array.isArray(n)?n.includes(e):n===e}function cB(n,e){const t=vR(e);return vR(n).forEach(r=>{Dx(t,r)||t.push(r)}),t}function uB(n,e){return vR(e).filter(t=>!Dx(n,t))}class dB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_R(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Lu extends dB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ns extends dB{get formDirective(){return null}get path(){return null}}let fB=(()=>{class n extends class hB{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Lu,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&c.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[c.qOj]}),n})();function kw(n,e){CR(n,e),e.valueAccessor.writeValue(n.value),function lq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&gB(n,e)})}(n,e),function uq(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function cq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&gB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function aq(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ax(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Tx(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ix(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function CR(n,e){const t=aB(n);null!==e.validator?n.setValidators(oB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=lB(n);null!==e.asyncValidator?n.setAsyncValidators(oB(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Ix(e._rawValidators,r),Ix(e._rawAsyncValidators,r)}function Tx(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=aB(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=lB(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return Ix(e._rawValidators,i),Ix(e._rawAsyncValidators,i),t}function gB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mB(n,e){CR(n,e)}function yB(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function xR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ow="VALID",Mx="INVALID",a_="PENDING",Fw="DISABLED";function AR(n){return(Rx(n)?n.validators:n)||null}function vB(n){return Array.isArray(n)?_R(n):n||null}function IR(n,e){return(Rx(e)?e.asyncValidators:n)||null}function wB(n){return Array.isArray(n)?yR(n):n||null}function Rx(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const bB=n=>n instanceof xB,TR=n=>n instanceof RR;function CB(n){return bB(n)?n.value:n.getRawValue()}function EB(n,e){const t=TR(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new c.vHH(1e3,"");if(!i[e])throw new c.vHH(1001,"")}function DB(n,e){TR(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new c.vHH(1002,"")})}class MR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=vB(this._rawValidators),this._composedAsyncValidatorFn=wB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ow}get invalid(){return this.status===Mx}get pending(){return this.status==a_}get disabled(){return this.status===Fw}get enabled(){return this.status!==Fw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=vB(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=wB(e)}addValidators(e){this.setValidators(cB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uB(e,this._rawAsyncValidators))}hasValidator(e){return Dx(this._rawValidators,e)}hasAsyncValidator(e){return Dx(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=a_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Fw,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ow,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ow||this.status===a_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fw:Ow}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=a_,this._hasOwnPendingAsyncValidator=!0;const t=eB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function pq(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=TR(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof mq)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Fw:this.errors?Mx:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(a_)?a_:this._anyControlsHaveStatus(Mx)?Mx:Ow}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rx(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class xB extends MR{constructor(e=null,t,i){super(AR(t),IR(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rx(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class RR extends MR{constructor(e,t,i){super(AR(t),IR(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){DB(this,e),Object.keys(e).forEach(i=>{EB(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=CB(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class mq extends MR{constructor(e,t,i){super(AR(t),IR(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){DB(this,e),e.forEach((i,r)=>{EB(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>CB(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const _q={provide:Ns,useExisting:(0,c.Gpc)(()=>kx)},Pw=(()=>Promise.resolve(null))();let kx=(()=>{class n extends Ns{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new RR({},_R(t),yR(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Pw.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),kw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Pw.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Pw.then(()=>{const i=this._findContainer(t.path),r=new RR({});mB(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Pw.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Pw.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,yB(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Wi,10),c.Y36(Fa,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&c.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([_q]),c.qOj]}),n})();const vq={provide:Lu,useExisting:(0,c.Gpc)(()=>kR)},IB=(()=>Promise.resolve(null))();let kR=(()=>{class n extends Lu{constructor(t,i,r,s,l){super(),this._changeDetectorRef=l,this.control=new xB,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function DR(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===wh?t=s:function fq(n){return Object.getPrototypeOf(n.constructor)===ut}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function ER(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){IB.then(()=>{var i;this.control.setValue(t,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;IB.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?function Sx(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ns,9),c.Y36(Wi,10),c.Y36(Fa,10),c.Y36(Mt,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([vq]),c.qOj,c.TTD]}),n})();const bq={provide:Mt,useExisting:(0,c.Gpc)(()=>OR),multi:!0};let OR=(()=>{class n extends ut{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&c.NdJ("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[c._Bn([bq]),c.qOj]}),n})(),TB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Sq={provide:Ns,useExisting:(0,c.Gpc)(()=>Ox)};let Ox=(()=>{class n extends Ns{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Tx(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return kw(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Ax(t.control||null,t,!1),xR(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,yB(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(Ax(i||null,t),bB(r)&&(kw(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);mB(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function dq(n,e){return Tx(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){CR(this.form,this),this._oldForm&&Tx(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Wi,10),c.Y36(Fa,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&c.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Sq]),c.qOj,c.TTD]}),n})(),zq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[TB]]}),n})(),qq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[zq]}),n})();const WB=cc({passive:!0});let Wq=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Iu.E;const i=cs(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new ft.x,l="cdk-text-field-autofilled",d=g=>{"cdk-text-field-autofill-start"!==g.animationName||i.classList.contains(l)?"cdk-text-field-autofill-end"===g.animationName&&i.classList.contains(l)&&(i.classList.remove(l),this._ngZone.run(()=>s.next({target:g.target,isAutofilled:!1}))):(i.classList.add(l),this._ngZone.run(()=>s.next({target:g.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,WB),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,WB)}}),s}stopMonitoring(t){const i=cs(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Gi),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Yq=new c.OlP("MAT_INPUT_VALUE_ACCESSOR"),Kq=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Zq=0;const Qq=zo(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let KB=(()=>{class n extends Qq{constructor(t,i,r,s,l,d,g,y,E,x){super(d,s,l,r),this._elementRef=t,this._platform=i,this._autofillMonitor=y,this._formField=x,this._uid="mat-input-"+Zq++,this.focused=!1,this.stateChanges=new ft.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(B=>lc().has(B)),this._iOSKeyupListener=B=>{const Q=B.target;!Q.value&&0===Q.selectionStart&&0===Q.selectionEnd&&(Q.setSelectionRange(1,1),Q.setSelectionRange(0,0))};const M=this._elementRef.nativeElement,F=M.nodeName.toLowerCase();this._inputValueAccessor=g||M,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&E.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===F,this._isTextarea="textarea"===F,this._isInFormField=!!x,this._isNativeSelect&&(this.controlType=M.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=rn(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,i,r,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(Rw.required))&&void 0!==s&&s}set required(t){this._required=rn(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&lc().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=rn(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,i;const r=(null===(i=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===i?void 0:i.call(t))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){Kq.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Gi),c.Y36(Lu,10),c.Y36(kx,8),c.Y36(Ox,8),c.Y36(xv),c.Y36(Yq,10),c.Y36(Wq),c.Y36(c.R0b),c.Y36(Ne,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&c.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(c.Ikx("disabled",i.disabled)("required",i.required),c.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),c.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[c._Bn([{provide:Cx,useExisting:n}]),c.qOj,c.TTD]}),n})(),Xq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[xv],imports:[[YB,nt,zi],YB,nt]}),n})();function VR(n){return n&&"function"==typeof n.connect}class ZB{applyChanges(e,t,i,r,s){e.forEachOperation((l,d,g)=>{let y,E;if(null==l.previousIndex){const x=i(l,d,g);y=t.createEmbeddedView(x.templateRef,x.context,x.index),E=1}else null==g?(t.remove(d),E=3):(y=t.get(d),t.move(y,g),E=2);s&&s({context:null==y?void 0:y.context,operation:E,record:l})})}detach(){}}const Nw=new c.OlP("_ViewRepeater"),tW=[[["caption"]],[["colgroup"],["col"]]],nW=["caption","colgroup, col"];function UR(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=rn(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const l_=new c.OlP("CDK_TABLE");let c_=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),u_=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),Fx=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class oW{}const aW=UR(oW);let Bu=(()=>{class n extends aW{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=rn(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(l_,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,r){if(1&t&&(c.Suo(r,c_,5),c.Suo(r,u_,5),c.Suo(r,Fx,5)),2&t){let s;c.iGM(s=c.CRH())&&(i.cell=s.first),c.iGM(s=c.CRH())&&(i.headerCell=s.first),c.iGM(s=c.CRH())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[c._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),c.qOj]}),n})();class jR{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let HR=(()=>{class n extends jR{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Bu),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[c.qOj]}),n})(),GR=(()=>{class n extends jR{constructor(t,i){var r;if(super(t,i),1===(null===(r=t._table)||void 0===r?void 0:r._elementRef.nativeElement.nodeType)){const s=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===s||"treegrid"===s?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Bu),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[c.qOj]}),n})();class JB{constructor(){this.tasks=[],this.endTasks=[]}}const $R=new c.OlP("_COALESCED_STYLE_SCHEDULER");let eV=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new ft.x}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new JB,this._getScheduleObservable().pipe(vn(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new JB;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,gn.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe((0,sr.q)(1))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),zR=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof Lw?t.headerCell.template:this instanceof Bw?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();class lW extends zR{}const cW=UR(lW);let Lw=(()=>{class n extends cW{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4),c.Y36(l_,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[c.qOj,c.TTD]}),n})();class uW extends zR{}const dW=UR(uW);let Bw=(()=>{class n extends dW{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4),c.Y36(l_,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[c.qOj,c.TTD]}),n})(),Px=(()=>{class n extends zR{constructor(t,i,r){super(t,i),this._table=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.ZZ4),c.Y36(l_,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[c.qOj]}),n})(),Vu=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),qR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&c.GkF(0,0)},directives:[Vu],encapsulation:2}),n})(),YR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&c.GkF(0,0)},directives:[Vu],encapsulation:2}),n})(),Nx=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const tV=["top","bottom","left","right"];class hW{constructor(e,t,i,r,s=!0,l=!0,d){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=l,this._positionListener=d,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const r of e)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,t)})}updateStickyColumns(e,t,i,r=!0){if(!e.length||!this._isBrowser||!t.some(M=>M)&&!i.some(M=>M))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],l=s.children.length,d=this._getCellWidths(s,r),g=this._getStickyStartColumnPositions(d,t),y=this._getStickyEndColumnPositions(d,i),E=t.lastIndexOf(!0),x=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const M="rtl"===this.direction,F=M?"right":"left",B=M?"left":"right";for(const Q of e)for(let ye=0;ye<l;ye++){const Oe=Q.children[ye];t[ye]&&this._addStickyStyle(Oe,F,g[ye],ye===E),i[ye]&&this._addStickyStyle(Oe,B,y[ye],ye===x)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===E?[]:d.slice(0,E+1).map((Q,ye)=>t[ye]?Q:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===x?[]:d.slice(x).map((Q,ye)=>i[ye+x]?Q:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const r="bottom"===i?e.slice().reverse():e,s="bottom"===i?t.slice().reverse():t,l=[],d=[],g=[];for(let E=0,x=0;E<r.length;E++){if(!s[E])continue;l[E]=x;const M=r[E];g[E]=this._isNativeHtmlTable?Array.from(M.children):[M];const F=M.getBoundingClientRect().height;x+=F,d[E]=F}const y=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var E,x;for(let M=0;M<r.length;M++){if(!s[M])continue;const F=l[M],B=M===y;for(const Q of g[M])this._addStickyStyle(Q,i,F,B)}"top"===i?null===(E=this._positionListener)||void 0===E||E.stickyHeaderRowsUpdated({sizes:d,offsets:l,elements:g}):null===(x=this._positionListener)||void 0===x||x.stickyFooterRowsUpdated({sizes:d,offsets:l,elements:g})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const r of t)e.style[r]="",e.classList.remove(this._borderCellCss[r]);tV.some(r=>-1===t.indexOf(r)&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const r of tV)e.style[r]&&(i+=t[r]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=e.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let r=0;for(let s=0;s<e.length;s++)t[s]&&(i[s]=r,r+=e[s]);return i}_getStickyEndColumnPositions(e,t){const i=[];let r=0;for(let s=e.length;s>0;s--)t[s]&&(i[s]=r,r+=e[s]);return i}}const KR=new c.OlP("CDK_SPL");let Lx=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),Bx=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),Vx=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),Ux=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),jx=(()=>{class n{constructor(t,i,r,s,l,d,g,y,E,x,M,F){this._differs=t,this._changeDetectorRef=i,this._elementRef=r,this._dir=l,this._platform=g,this._viewRepeater=y,this._coalescedStyleScheduler=E,this._viewportRuler=x,this._stickyPositioningListener=M,this._ngZone=F,this._onDestroy=new ft.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new c.vpe,this.viewChange=new Ei({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=d,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=rn(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=rn(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(vn(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),VR(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(r,s,l)=>this._getEmbeddedViewArgs(r.item,l),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&c.R0b.isInAngularZone()?this._ngZone.onStable.pipe((0,sr.q)(1),vn(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=t.length?"":"none");const s=this._headerRowDefs.map(l=>l.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(l=>l.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=t.length?"":"none");const s=this._footerRowDefs.map(l=>l.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(l=>l.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,l)=>{this._addStickyColumnStyles([s],this._headerRowDefs[l])}),this._rowDefs.forEach(s=>{const l=[];for(let d=0;d<i.length;d++)this._renderRows[d].rowDef===s&&l.push(i[d]);this._addStickyColumnStyles(l,s)}),r.forEach((s,l)=>{this._addStickyColumnStyles([s],this._footerRowDefs[l])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const l=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let d=0;d<l.length;d++){let g=l[d];const y=this._cachedRenderRowsMap.get(g.data);y.has(g.rowDef)?y.get(g.rowDef).push(g):y.set(g.rowDef,[g]),t.push(g)}}return t}_getRenderRowsForData(t,i,r){return this._getRowDefs(t,i).map(l=>{const d=r&&r.has(l)?r.get(l):[];if(d.length){const g=d.shift();return g.dataIndex=i,g}return{data:t,rowDef:l,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Hx(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=Hx(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Hx(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Hx(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(l,d)=>l||!!d.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(t,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(t){this._data=[],VR(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;VR(this.dataSource)?t=this.dataSource.connect(this):function eW(n){return!!n&&(n instanceof xn.y||(0,Sn.m)(n.lift)&&(0,Sn.m)(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=ze(this.dataSource)),this._renderChangeSubscription=t.pipe(vn(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const r=Array.from(i.columns||[]).map(d=>this._columnDefsByName.get(d)),s=r.map(d=>d.sticky),l=r.map(d=>d.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,l,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let r=0;r<t.viewContainer.length;r++){const s=t.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,t));else{let s=this._rowDefs.find(l=>l.when&&l.when(i,t))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,r,s={}){const l=t.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),l}_renderCellTemplateForItem(t,i){for(let r of this._getCellTemplates(t))Vu.mostRecentCellOutlet&&Vu.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,r=t.length;i<r;i++){const l=t.get(i).context;l.count=r,l.first=0===i,l.last=i===r-1,l.even=i%2==0,l.odd=!l.even,this.multiTemplateDataRows?(l.dataIndex=this._renderRows[i].dataIndex,l.renderIndex=i):l.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const r=this._columnDefsByName.get(i);return t.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const l of r.outlets)s.appendChild(l.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new hW(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:ze()).pipe(vn(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(t.templateRef),l=s.rootNodes[0];1===s.rootNodes.length&&(null==l?void 0:l.nodeType)===this._document.ELEMENT_NODE&&(l.setAttribute("role","row"),l.classList.add(t._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.sBO),c.Y36(c.SBq),c.$8M("role"),c.Y36(_l,8),c.Y36(ie),c.Y36(Gi),c.Y36(Nw),c.Y36($R),c.Y36(Od),c.Y36(KR,12),c.Y36(c.R0b,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,r){if(1&t&&(c.Suo(r,Nx,5),c.Suo(r,Bu,5),c.Suo(r,Px,5),c.Suo(r,Lw,5),c.Suo(r,Bw,5)),2&t){let s;c.iGM(s=c.CRH())&&(i._noDataRow=s.first),c.iGM(s=c.CRH())&&(i._contentColumnDefs=s),c.iGM(s=c.CRH())&&(i._contentRowDefs=s),c.iGM(s=c.CRH())&&(i._contentHeaderRowDefs=s),c.iGM(s=c.CRH())&&(i._contentFooterRowDefs=s)}},viewQuery:function(t,i){if(1&t&&(c.Gf(Lx,7),c.Gf(Bx,7),c.Gf(Vx,7),c.Gf(Ux,7)),2&t){let r;c.iGM(r=c.CRH())&&(i._rowOutlet=r.first),c.iGM(r=c.CRH())&&(i._headerRowOutlet=r.first),c.iGM(r=c.CRH())&&(i._footerRowOutlet=r.first),c.iGM(r=c.CRH())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&c.ekj("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[c._Bn([{provide:l_,useExisting:n},{provide:Nw,useClass:ZB},{provide:$R,useClass:eV},{provide:KR,useValue:null}])],ngContentSelectors:nW,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(c.F$t(tW),c.Hsn(0),c.Hsn(1,1),c.GkF(2,0)(3,1)(4,2)(5,3))},directives:[Bx,Lx,Ux,Vx],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function Hx(n,e){return n.concat(Array.from(e))}let pW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[uf]]}),n})();const gW=[[["caption"]],[["colgroup"],["col"]]],mW=["caption","colgroup, col"];let iV=(()=>{class n extends jx{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&c.ekj("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[c._Bn([{provide:Nw,useClass:ZB},{provide:jx,useExisting:n},{provide:l_,useExisting:n},{provide:$R,useClass:eV},{provide:KR,useValue:null}]),c.qOj],ngContentSelectors:mW,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(c.F$t(gW),c.Hsn(0),c.Hsn(1,1),c.GkF(2,0)(3,1)(4,2)(5,3))},directives:[Bx,Lx,Ux,Vx],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})(),ZR=(()=>{class n extends c_{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matCellDef",""]],features:[c._Bn([{provide:c_,useExisting:n}]),c.qOj]}),n})(),QR=(()=>{class n extends u_{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[c._Bn([{provide:u_,useExisting:n}]),c.qOj]}),n})(),XR=(()=>{class n extends Bu{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[c._Bn([{provide:Bu,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),c.qOj]}),n})(),JR=(()=>{class n extends HR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[c.qOj]}),n})(),ek=(()=>{class n extends GR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[c.qOj]}),n})(),rV=(()=>{class n extends Lw{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[c._Bn([{provide:Lw,useExisting:n}]),c.qOj]}),n})(),sV=(()=>{class n extends Px{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[c._Bn([{provide:Px,useExisting:n}]),c.qOj]}),n})(),oV=(()=>{class n extends qR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[c._Bn([{provide:qR,useExisting:n}]),c.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&c.GkF(0,0)},directives:[Vu],encapsulation:2}),n})(),aV=(()=>{class n extends YR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(n)))(i||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[c._Bn([{provide:YR,useExisting:n}]),c.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&c.GkF(0,0)},directives:[Vu],encapsulation:2}),n})(),SW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[pW,zi],zi]}),n})();class tk extends class IW extends class Jq{}{constructor(e=[]){super(),this._renderData=new Ei([]),this._filter=new Ei(""),this._internalPageChanges=new ft.x,this._renderChangesSubscription=null,this.sortingDataAccessor=(t,i)=>{const r=t[i];if(uo(r)){const s=Number(r);return s<9007199254740991?s:r}return r},this.sortData=(t,i)=>{const r=i.active,s=i.direction;return r&&""!=s?t.sort((l,d)=>{let g=this.sortingDataAccessor(l,r),y=this.sortingDataAccessor(d,r);const E=typeof g,x=typeof y;E!==x&&("number"===E&&(g+=""),"number"===x&&(y+=""));let M=0;return null!=g&&null!=y?g>y?M=1:g<y&&(M=-1):null!=g?M=1:null!=y&&(M=-1),M*("asc"==s?1:-1)}):t},this.filterPredicate=(t,i)=>{const r=Object.keys(t).reduce((l,d)=>l+t[d]+"\u25ec","").toLowerCase(),s=i.trim().toLowerCase();return-1!=r.indexOf(s)},this._data=new Ei(e),this._updateChangeSubscription()}get data(){return this._data.value}set data(e){e=Array.isArray(e)?e:[],this._data.next(e),this._renderChangesSubscription||this._filterData(e)}get filter(){return this._filter.value}set filter(e){this._filter.next(e),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(e){this._sort=e,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(e){this._paginator=e,this._updateChangeSubscription()}_updateChangeSubscription(){var e;const t=this._sort?(0,vr.T)(this._sort.sortChange,this._sort.initialized):ze(null),i=this._paginator?(0,vr.T)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):ze(null),s=Mm([this._data,this._filter]).pipe((0,Be.U)(([g])=>this._filterData(g))),l=Mm([s,t]).pipe((0,Be.U)(([g])=>this._orderData(g))),d=Mm([l,i]).pipe((0,Be.U)(([g])=>this._pageData(g)));null===(e=this._renderChangesSubscription)||void 0===e||e.unsubscribe(),this._renderChangesSubscription=d.subscribe(g=>this._renderData.next(g))}_filterData(e){return this.filteredData=null==this.filter||""===this.filter?e:e.filter(t=>this.filterPredicate(t,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(e){return this.sort?this.sortData(e.slice(),this.sort):e}_pageData(e){if(!this.paginator)return e;const t=this.paginator.pageIndex*this.paginator.pageSize;return e.slice(t,t+this.paginator.pageSize)}_updatePaginator(e){Promise.resolve().then(()=>{const t=this.paginator;if(t&&(t.length=e,t.pageIndex>0)){const i=Math.ceil(t.length/t.pageSize)-1||0,r=Math.min(t.pageIndex,i);r!==t.pageIndex&&(t.pageIndex=r,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){var e;null===(e=this._renderChangesSubscription)||void 0===e||e.unsubscribe(),this._renderChangesSubscription=null}}{}const kW={provide:c.tb,useFactory:function RW(n,e){return()=>{if(On(e)){const t=Array.from(n.querySelectorAll(`[class*=${dV}]`)),i=/\bflex-layout-.+?\b/g;t.forEach(r=>{r.classList.contains(`${dV}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[ie,c.Lbi],multi:!0},dV="flex-layout-";let ik=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[kW]}),n})();const rk={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Rl=new c.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>rk}),d_=new c.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),sk=new c.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});let MV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ik]]}),n})(),ck=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ik,ds]]}),n})(),jV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ik]]}),n})(),HK=(()=>{class n{constructor(t,i){pr(i)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,i=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:Rl,useValue:Object.assign(Object.assign({},rk),t)},{provide:sk,useValue:i,multi:!0},{provide:d_,useValue:!0}]:[{provide:Rl,useValue:Object.assign(Object.assign({},rk),t)},{provide:sk,useValue:i,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(d_),c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ck,MV,jV],ck,MV,jV]}),n})(),GK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[bs,uR,nt,Xq,qq,Tm,KE,HK,ck,SW,rR]]}),n})();class HV{constructor(e,t={}){this.id=e,this.nome=t.nome,this.cpf=t.cpf,this.mesa=t.mesa,this.horario=t.horario,this.data=t.data}}var $n=P(5813);function uk(){return(0,Hn.e)((n,e)=>{let t,i=!1;n.subscribe((0,Qt.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}var rt,Ls=P(2011),GV=(P(7092),P(3942)),Ee=P(5861),kl=P(9681),Hu=P(4859),Ol=P(1877),N=P(2090),$K="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Gu={},dk=dk||{},Pt=$K||self;function qx(){}function hk(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function jw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var fk="closure_uid_"+(1e9*Math.random()>>>0),qK=0;function WK(n,e,t){return n.call.apply(n.bind,arguments)}function YK(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Hr(n,e,t){return(Hr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?WK:YK).apply(null,arguments)}function Wx(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Gr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[r].apply(i,l)}}function bh(){this.s=this.s,this.o=this.o}var ZK={};bh.prototype.s=!1,bh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function zK(n){return Object.prototype.hasOwnProperty.call(n,fk)&&n[fk]||(n[fk]=++qK)}(this);delete ZK[n]}},bh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $V=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},zV=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&e.call(t,r[s],s,n)};function qV(n){return Array.prototype.concat.apply([],arguments)}function pk(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function Yx(n){return/^[\s\xa0]*$/.test(n)}var Vs,WV=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Bs(n,e){return-1!=n.indexOf(e)}function gk(n,e){return n<e?-1:n>e?1:0}e:{var YV=Pt.navigator;if(YV){var KV=YV.userAgent;if(KV){Vs=KV;break e}}Vs=""}function mk(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function ZV(n){const e={};for(const t in n)e[t]=n[t];return e}var QV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function XV(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<QV.length;s++)t=QV[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function _k(n){return _k[" "](n),n}_k[" "]=qx;var Kx,n,JK=Bs(Vs,"Opera"),f_=Bs(Vs,"Trident")||Bs(Vs,"MSIE"),JV=Bs(Vs,"Edge"),yk=JV||f_,e2=Bs(Vs,"Gecko")&&!(Bs(Vs.toLowerCase(),"webkit")&&!Bs(Vs,"Edge"))&&!(Bs(Vs,"Trident")||Bs(Vs,"MSIE"))&&!Bs(Vs,"Edge"),e8=Bs(Vs.toLowerCase(),"webkit")&&!Bs(Vs,"Edge");function t2(){var n=Pt.document;return n?n.documentMode:void 0}e:{var vk="",wk=(n=Vs,e2?/rv:([^\);]+)(\)|;)/.exec(n):JV?/Edge\/([\d\.]+)/.exec(n):f_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):e8?/WebKit\/(\S+)/.exec(n):JK?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(wk&&(vk=wk?wk[1]:""),f_){var bk=t2();if(null!=bk&&bk>parseFloat(vk)){Kx=String(bk);break e}}Kx=vk}var t8={};var i8=Pt.document&&f_&&(t2()||parseInt(Kx,10))||void 0,r8=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Pt.addEventListener("test",qx,e),Pt.removeEventListener("test",qx,e)}catch(t){}return n}();function gs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Hw(n,e){if(gs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(e2){e:{try{_k(e.nodeName);var r=!0;break e}catch(s){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:s8[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Hw.Z.h.call(this)}}gs.prototype.h=function(){this.defaultPrevented=!0},Gr(Hw,gs);var s8={2:"touch",3:"pen",4:"mouse"};Hw.prototype.h=function(){Hw.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gw="closure_listenable_"+(1e6*Math.random()|0),o8=0;function a8(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=r,this.key=++o8,this.ca=this.fa=!1}function Zx(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Qx(n){this.src=n,this.g={},this.h=0}function Ek(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=$V(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Zx(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Dk(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==i)return r}return-1}Qx.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=Dk(n,e,i,r);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new a8(e,this.src,s,!!i,r)).fa=t,n.push(e)),e};var xk="closure_lm_"+(1e6*Math.random()|0),Sk={};function r2(n,e,t,i,r){if(i&&i.once)return o2(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)r2(n,e[s],t,i,r);return null}return t=Mk(t),n&&n[Gw]?n.N(e,t,jw(i)?!!i.capture:!!i,r):s2(n,e,t,!1,i,r)}function s2(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var l=jw(r)?!!r.capture:!!r,d=Ik(n);if(d||(n[xk]=d=new Qx(n)),(t=d.add(e,t,i,l,s)).proxy)return t;if(i=function l8(){var e=c8;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)r8||(r=l),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(l2(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function o2(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)o2(n,e[s],t,i,r);return null}return t=Mk(t),n&&n[Gw]?n.O(e,t,jw(i)?!!i.capture:!!i,r):s2(n,e,t,!0,i,r)}function a2(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)a2(n,e[s],t,i,r);else i=jw(i)?!!i.capture:!!i,t=Mk(t),n&&n[Gw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Dk(s=n.g[e],t,i,r))&&(Zx(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Ik(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Dk(e,t,i,r)),(t=-1<n?e[n]:null)&&Ak(t))}function Ak(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Gw])Ek(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(l2(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Ik(e))?(Ek(t,n),0==t.h&&(t.src=null,e[xk]=null)):Zx(n)}}}function l2(n){return n in Sk?Sk[n]:Sk[n]="on"+n}function c8(n,e){if(n.ca)n=!0;else{e=new Hw(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&Ak(n),n=t.call(i,e)}return n}function Ik(n){return(n=n[xk])instanceof Qx?n:null}var Tk="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mk(n){return"function"==typeof n?n:(n[Tk]||(n[Tk]=function(e){return n.handleEvent(e)}),n[Tk])}function Er(){bh.call(this),this.i=new Qx(this),this.P=this,this.I=null}function $r(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new gs(e,n);else if(e instanceof gs)e.target=e.target||n;else{var r=e;XV(e=new gs(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];r=Xx(l,i,!0,e)&&r}if(r=Xx(l=e.g=n,i,!0,e)&&r,r=Xx(l,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=Xx(l=e.g=t[s],i,!1,e)&&r}function Xx(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ca&&l.capture==t){var d=l.listener,g=l.ia||l.src;l.fa&&Ek(n.i,l),r=!1!==d.call(g,i)&&r}}return r&&!i.defaultPrevented}Gr(Er,bh),Er.prototype[Gw]=!0,Er.prototype.removeEventListener=function(n,e,t,i){a2(this,n,e,t,i)},Er.prototype.M=function(){if(Er.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Zx(t[i]);delete n.g[e],n.h--}}this.I=null},Er.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Er.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var Rk=Pt.JSON.stringify;function u8(){var n=u2;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ok,c2=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new h8,n=>n.reset());class h8{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function f8(n){Pt.setTimeout(()=>{throw n},0)}function kk(n,e){Ok||function p8(){var n=Pt.Promise.resolve(void 0);Ok=function(){n.then(g8)}}(),Fk||(Ok(),Fk=!0),u2.add(n,e)}var Fk=!1,u2=new class d8{constructor(){this.h=this.g=null}add(e,t){const i=c2.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function g8(){for(var n;n=u8();){try{n.h.call(n.g)}catch(t){f8(t)}var e=c2;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Fk=!1}function Jx(n,e){Er.call(this),this.h=n||1,this.g=e||Pt,this.j=Hr(this.kb,this),this.l=Date.now()}function Pk(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Nk(n,e,t){if("function"==typeof n)t&&(n=Hr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pt.setTimeout(n,e||0)}function d2(n){n.g=Nk(()=>{n.g=null,n.i&&(n.i=!1,d2(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Gr(Jx,Er),(rt=Jx.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$r(this,"tick"),this.da&&(Pk(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){Jx.Z.M.call(this),Pk(this),delete this.g};class m8 extends bh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:d2(this)}M(){super.M(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $w(n){bh.call(this),this.h=n,this.g={}}Gr($w,bh);var h2=[];function f2(n,e,t,i){Array.isArray(t)||(t&&(h2[0]=t.toString()),t=h2);for(var r=0;r<t.length;r++){var s=r2(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function p2(n){mk(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ak(e)},n),n.g={}}function eS(){this.g=!0}function p_(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function w8(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<r.length;l++)r[l]=""}}}return Rk(t)}catch(d){return e}}(n,t)+(i?" "+i:"")})}$w.prototype.M=function(){$w.Z.M.call(this),p2(this)},$w.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},eS.prototype.Aa=function(){this.g=!1},eS.prototype.info=function(){};var yp={},g2=null;function tS(){return g2=g2||new Er}function m2(n){gs.call(this,yp.Ma,n)}function zw(n){const e=tS();$r(e,new m2(e,n))}function _2(n,e){gs.call(this,yp.STAT_EVENT,n),this.stat=e}function Us(n){const e=tS();$r(e,new _2(e,n))}function y2(n,e){gs.call(this,yp.Na,n),this.size=e}function qw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){n()},e)}yp.Ma="serverreachability",Gr(m2,gs),yp.STAT_EVENT="statevent",Gr(_2,gs),yp.Na="timingevent",Gr(y2,gs);var nS={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},v2={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Lk(){}function b2(){}Lk.prototype.h=null;var Uk,Ww={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Bk(){gs.call(this,"d")}function Vk(){gs.call(this,"c")}function iS(){}function Yw(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new $w(this),this.P=b8,this.W=new Jx(n=yk?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new C2}function C2(){this.i=null,this.g="",this.h=!1}Gr(Bk,gs),Gr(Vk,gs),Gr(iS,Lk),iS.prototype.g=function(){return new XMLHttpRequest},iS.prototype.i=function(){return{}},Uk=new iS;var b8=45e3,jk={},rS={};function Hk(n,e,t){n.K=1,n.v=cS($u(e)),n.s=t,n.U=!0,E2(n,null)}function E2(n,e){n.F=Date.now(),Kw(n),n.A=$u(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),k2(t.h,"t",i),n.C=0,t=n.l.H,n.h=new C2,n.g=tU(n.l,t?e:null,!n.s),0<n.O&&(n.L=new m8(Hr(n.Ia,n,n.g),n.O)),f2(n.V,n.g,"readystatechange",n.gb),e=n.H?ZV(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),zw(1),function _8(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var l="",d=s.split("&"),g=0;g<d.length;g++){var y=d[g].split("=");if(1<y.length){var E=y[0];y=y[1];var x=E.split("_");l=2<=x.length&&"type"==x[1]?l+(E+"=")+y+"&":l+(E+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function D2(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function x2(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=C8(n,t),r==rS){4==e&&(n.o=4,Us(14),i=!1),p_(n.j,n.m,null,"[Incomplete Response]");break}if(r==jk){n.o=4,Us(15),p_(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}p_(n.j,n.m,r,null),Gk(n,r)}D2(n)&&r!=rS&&r!=jk&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Us(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),eO(e),e.L=!0,Us(11))):(p_(n.j,n.m,t,"[Invalid Chunked Response]"),vp(n),Zw(n))}function C8(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?rS:(t=Number(e.substring(t,i)),isNaN(t)?jk:(i+=1)+t>e.length?rS:(e=e.substr(i,t),n.C=i+t,e))}function Kw(n){n.Y=Date.now()+n.P,S2(n,n.P)}function S2(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=qw(Hr(n.eb,n),e)}function sS(n){n.B&&(Pt.clearTimeout(n.B),n.B=null)}function Zw(n){0==n.l.G||n.I||Q2(n.l,n)}function vp(n){sS(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Pk(n.W),p2(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Gk(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||qk(t.i,n)))if(t.I=n.N,!n.J&&qk(t.i,n)&&3==t.G){try{var i=t.Ca.g.parse(e)}catch(y){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.ta=r[1],0<t.ta-t.U&&37500>r[2]&&t.N&&0==t.A&&!t.v&&(t.v=qw(Hr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;gS(t),fS(t)}Jk(t),Us(18)}if(1>=P2(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else Cp(t,11)}else if((n.J||t.g==n)&&gS(t),!Yx(e))for(r=t.Ca.g.parse(e),e=0;e<r.length;e++){let y=r[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const E=y[3];null!=E&&(t.ma=E,t.h.info("VER="+t.ma));const x=y[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(t.K=i=1.5*M,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const F=n.g;if(F){const B=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=i.i;!s.g&&(Bs(B,"spdy")||Bs(B,"quic")||Bs(B,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Wk(s,s.h),s.h=null))}if(i.D){const Q=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(i.sa=Q,oi(i.F,i.D,Q))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((i=t).oa=eU(i,i.H?i.la:null,i.W),l.J){N2(i.i,l);var d=l,g=i.K;g&&d.setTimeout(g),d.B&&(sS(d),Kw(d)),i.g=l}else K2(i);0<t.l.length&&pS(t)}else"stop"!=y[0]&&"close"!=y[0]||Cp(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Cp(t,7):Qk(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}zw(4)}catch(y){}}function $k(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(hk(n)||"string"==typeof n)zV(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(hk(n)||"string"==typeof n){t=[];for(var i=n.length,r=0;r<i;r++)t.push(r)}else for(r in t=[],i=0,n)t[i++]=r;i=function E8(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(hk(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}}function g_(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof g_)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}function zk(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];wp(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var r={};for(t=e=0;e<n.g.length;)wp(r,i=n.g[e])||(n.g[t++]=i,r[i]=1),e++;n.g.length=t}}function wp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=Yw.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==zu(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const E=zu(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>E)&&(3!=E||yk||this.g&&(this.h.h||this.g.ga()||$2(this.g)))){this.I||4!=E||7==e||zw(8==e||0>=x?3:2),sS(this);var t=this.g.ba();this.N=t;t:if(D2(this)){var i=$2(this.g);n="";var r=i.length,s=4==zu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vp(this),Zw(this);var l="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function y8(n,e,t,i,r,s,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.X,E,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,g=this.g;if((d=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yx(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Us(12),vp(this),Zw(this);break e}p_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gk(this,t)}this.U?(x2(this,E,l),yk&&this.i&&3==E&&(f2(this.V,this.W,"tick",this.fb),this.W.start())):(p_(this.j,this.m,l,null),Gk(this,l)),4==E&&vp(this),this.i&&!this.I&&(4==E?Q2(this.l,this):(this.i=!1,Kw(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Us(12)):(this.o=0,Us(13)),vp(this),Zw(this)}}}catch(E){}},rt.fb=function(){if(this.g){var n=zu(this.g),e=this.g.ga();this.C<e.length&&(sS(this),x2(this,n,e),this.i&&4!=n&&Kw(this))}},rt.cancel=function(){this.I=!0,vp(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function v8(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(zw(3),Us(17)),vp(this),this.o=2,Zw(this)):S2(this,this.Y-n)},(rt=g_.prototype).R=function(){zk(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return zk(this),this.g.concat()},rt.get=function(n,e){return wp(this.h,n)?this.h[n]:e},rt.set=function(n,e){wp(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var r=t[i],s=this.get(r);n.call(e,s,r,this)}};var A2=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bp(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof bp){this.g=void 0!==e?e:n.g,oS(this,n.j),this.s=n.s,aS(this,n.i),lS(this,n.m),this.l=n.l,e=n.h;var t=new Jw;t.i=e.i,e.g&&(t.g=new g_(e.g),t.h=e.h),I2(this,t),this.o=n.o}else n&&(t=String(n).match(A2))?(this.g=!!e,oS(this,t[1]||"",!0),this.s=Qw(t[2]||""),aS(this,t[3]||"",!0),lS(this,t[4]),this.l=Qw(t[5]||"",!0),I2(this,t[6]||"",!0),this.o=Qw(t[7]||"")):(this.g=!!e,this.h=new Jw(null,this.g))}function $u(n){return new bp(n)}function oS(n,e,t){n.j=t?Qw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function aS(n,e,t){n.i=t?Qw(e,!0):e}function lS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function I2(n,e,t){e instanceof Jw?(n.h=e,function k8(n,e){e&&!n.j&&(Ch(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(M2(this,i),k2(this,r,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Xw(e,M8)),n.h=new Jw(e,n.g))}function oi(n,e,t){n.h.set(e,t)}function cS(n){return oi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Qw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Xw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,A8),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function A8(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}bp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Xw(e,T2,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Xw(e,T2,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Xw(t,"/"==t.charAt(0)?T8:I8,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Xw(t,R8)),n.join("")};var T2=/[#\/\?@]/g,I8=/[#\?:]/g,T8=/[#\?]/g,M8=/[#\?@]/g,R8=/#/g;function Jw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ch(n){n.g||(n.g=new g_,n.h=0,n.i&&function D8(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function M2(n,e){Ch(n),e=m_(n,e),wp(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,wp((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&zk(n)))}function R2(n,e){return Ch(n),e=m_(n,e),wp(n.g.h,e)}function k2(n,e,t){M2(n,e),0<t.length&&(n.i=null,n.g.set(m_(n,e),pk(t)),n.h+=t.length)}function m_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function O2(n){this.l=n||F8,n=Pt.PerformanceNavigationTiming?0<(n=Pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ea&&Pt.g.Ea()&&Pt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=Jw.prototype).add=function(n,e){Ch(this),this.i=null,n=m_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){Ch(this),this.g.forEach(function(t,i){zV(t,function(r){n.call(e,r,i,this)},this)},this)},rt.T=function(){Ch(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var r=n[i],s=0;s<r.length;s++)t.push(e[i]);return t},rt.R=function(n){Ch(this);var e=[];if("string"==typeof n)R2(this,n)&&(e=qV(e,this.g.get(m_(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=qV(e,n[t])}return e},rt.set=function(n,e){return Ch(this),this.i=null,R2(this,n=m_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var l=r;""!==i[s]&&(l+="="+encodeURIComponent(String(i[s]))),n.push(l)}}return this.i=n.join("&")};var F8=10;function F2(n){return!!n.h||!!n.g&&n.g.size>=n.j}function P2(n){return n.h?1:n.g?n.g.size:0}function qk(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Wk(n,e){n.g?n.g.add(e):n.h=e}function N2(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function L2(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return pk(n.i)}function Yk(){}function P8(){this.g=new Yk}function N8(n,e,t){const i=t||"";try{$k(n,function(r,s){let l=r;jw(r)&&(l=Rk(r)),e.push(i+s+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function uS(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function eb(n){this.l=n.$b||null,this.j=n.ib||!1}function dS(n,e){Er.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Kk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}O2.prototype.cancel=function(){if(this.i=L2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Yk.prototype.stringify=function(n){return Pt.JSON.stringify(n,void 0)},Yk.prototype.parse=function(n){return Pt.JSON.parse(n,void 0)},Gr(eb,Lk),eb.prototype.g=function(){return new dS(this.l,this.j)},eb.prototype.i=function(n){return function(){return n}}({}),Gr(dS,Er);var Kk=0;function B2(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function tb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,nb(n)}function nb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=dS.prototype).open=function(n,e){if(this.readyState!=Kk)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,nb(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Pt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tb(this)),this.readyState=Kk},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,nb(this)),this.g&&(this.readyState=3,nb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Pt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;B2(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?tb(this):nb(this),3==this.readyState&&B2(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,tb(this))},rt.Ta=function(n){this.g&&(this.response=n,tb(this))},rt.ha=function(){this.g&&tb(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(dS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var B8=Pt.JSON.parse;function Yi(n){Er.call(this),this.headers=new g_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=V2,this.K=this.L=!1}Gr(Yi,Er);var V2="",V8=/^https?$/i,U8=["POST","PUT"];function H8(n){return"content-type"==n.toLowerCase()}function U2(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,j2(n),hS(n)}function j2(n){n.D||(n.D=!0,$r(n,"complete"),$r(n,"error"))}function H2(n){if(n.h&&void 0!==dk&&(!n.C[1]||4!=zu(n)||2!=n.ba()))if(n.v&&4==zu(n))Nk(n.Fa,0,n);else if($r(n,"readystatechange"),4==zu(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===d){var r=String(n.H).match(A2)[1]||null;if(!r&&Pt.self&&Pt.self.location){var s=Pt.self.location.protocol;r=s.substr(0,s.length-1)}i=!V8.test(r?r.toLowerCase():"")}t=i}if(t)$r(n,"complete"),$r(n,"success");else{n.m=6;try{var l=2<zu(n)?n.g.statusText:""}catch(g){l=""}n.j=l+" ["+n.ba()+"]",j2(n)}}finally{hS(n)}}}function hS(n,e){if(n.g){G2(n);const t=n.g,i=n.C[0]?qx:null;n.g=null,n.C=null,e||$r(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function G2(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Pt.clearTimeout(n.A),n.A=null)}function zu(n){return n.g?n.g.readyState:0}function $2(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case V2:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Zk(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=function G8(n){let e="";return mk(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):oi(n,e,t))}function ib(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function z2(n){this.za=0,this.l=[],this.h=new eS,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ib("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ib("baseRetryDelayMs",5e3,n),this.$a=ib("retryDelaySeedMs",1e4,n),this.Ya=ib("forwardChannelMaxRetries",2,n),this.ra=ib("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new O2(n&&n.concurrentRequestLimit),this.Ca=new P8,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Qk(n){if(q2(n),3==n.G){var e=n.V++,t=$u(n.F);oi(t,"SID",n.J),oi(t,"RID",e),oi(t,"TYPE","terminate"),rb(n,t),(e=new Yw(n,n.h,e,void 0)).K=2,e.v=cS($u(t)),t=!1,Pt.navigator&&Pt.navigator.sendBeacon&&(t=Pt.navigator.sendBeacon(e.v.toString(),"")),!t&&Pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=tU(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Kw(e)}J2(n)}function fS(n){n.g&&(eO(n),n.g.cancel(),n.g=null)}function q2(n){fS(n),n.u&&(Pt.clearTimeout(n.u),n.u=null),gS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Pt.clearTimeout(n.m),n.m=null)}function Xk(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&pS(n)}function pS(n){F2(n.i)||n.m||(n.m=!0,kk(n.Ha,n),n.C=0)}function W2(n,e){var t;t=e?e.m:n.V++;const i=$u(n.F);oi(i,"SID",n.J),oi(i,"RID",t),oi(i,"AID",n.U),rb(n,i),n.o&&n.s&&Zk(i,n.o,n.s),t=new Yw(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Y2(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Wk(n.i,t),Hk(t,i,e)}function rb(n,e){n.j&&$k({},function(t,i){oi(e,i,t)})}function Y2(n,e,t){t=Math.min(n.l.length,t);var i=n.j?Hr(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=r[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let d=!0;for(let g=0;g<t;g++){let y=r[g].h;const E=r[g].g;if(y-=s,0>y)s=Math.max(0,r[g].h-100),d=!1;else try{N8(E,l,"req"+y+"_")}catch(x){i&&i(E)}}if(d){i=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function K2(n){n.g||n.u||(n.Y=1,kk(n.Ga,n),n.A=0)}function Jk(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=qw(Hr(n.Ga,n),X2(n,n.A)),n.A++,0))}function eO(n){null!=n.B&&(Pt.clearTimeout(n.B),n.B=null)}function Z2(n){n.g=new Yw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=$u(n.oa);oi(e,"RID","rpc"),oi(e,"SID",n.J),oi(e,"CI",n.N?"0":"1"),oi(e,"AID",n.U),rb(n,e),oi(e,"TYPE","xmlhttp"),n.o&&n.s&&Zk(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=cS($u(e)),t.s=null,t.U=!0,E2(t,n)}function gS(n){null!=n.v&&(Pt.clearTimeout(n.v),n.v=null)}function Q2(n,e){var t=null;if(n.g==e){gS(n),eO(n),n.g=null;var i=2}else{if(!qk(n.i,e))return;t=e.D,N2(n.i,e),i=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;$r(i=tS(),new y2(i,t,e,r)),pS(n)}else K2(n);else if(3==(r=e.o)||0==r&&0<n.I||!(1==i&&function $8(n,e){return!(P2(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=qw(Hr(n.Ha,n,e),X2(n,n.C)),n.C++,0)))}(n,e)||2==i&&Jk(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:Cp(n,5);break;case 4:Cp(n,10);break;case 3:Cp(n,6);break;default:Cp(n,2)}}function X2(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Cp(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var i=Hr(n.jb,n);t||(t=new bp("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||oS(t,"https"),cS(t)),function L8(n,e){const t=new eS;if(Pt.Image){const i=new Image;i.onload=Wx(uS,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Wx(uS,t,i,"TestLoadImage: error",!1,e),i.onabort=Wx(uS,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Wx(uS,t,i,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Us(2);n.G=0,n.j&&n.j.va(e),J2(n),q2(n)}function J2(n){n.G=0,n.I=-1,n.j&&((0!=L2(n.i).length||0!=n.l.length)&&(n.i.i.length=0,pk(n.l),n.l.length=0),n.j.ua())}function eU(n,e,t){let i=function x8(n){return n instanceof bp?$u(n):new bp(n,void 0)}(t);if(""!=i.i)e&&aS(i,e+"."+i.i),lS(i,i.m);else{const r=Pt.location;i=function S8(n,e,t,i){var r=new bp(null,void 0);return n&&oS(r,n),e&&aS(r,e),t&&lS(r,t),i&&(r.l=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return n.aa&&mk(n.aa,function(r,s){oi(i,s,r)}),t=n.sa,(e=n.D)&&t&&oi(i,e,t),oi(i,"VER",n.ma),rb(n,i),i}function tU(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yi(t&&n.Ba&&!n.qa?new eb({ib:!0}):n.qa)).L=n.H,e}function nU(){}function mS(){if(f_&&!(10<=Number(i8)))throw Error("Environmental error: no available transport.")}function Yo(n,e){Er.call(this),this.g=new z2(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Yx(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yx(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new __(this)}function iU(n){Bk.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rU(){Vk.call(this),this.status=1}function __(n){this.g=n}(rt=Yi.prototype).ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Uk.g(),this.C=function w2(n){return n.h||(n.h=n.i())}(this.u?this.u:Uk),this.g.onreadystatechange=Hr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void U2(this,s)}n=t||"";const r=new g_(this.headers);i&&$k(i,function(s,l){r.set(l,s)}),i=function QK(n){e:{var e=H8;const t=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<t;r++)if(r in i&&e.call(void 0,i[r],r,n)){e=r;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(r.T()),t=Pt.FormData&&n instanceof Pt.FormData,!(0<=$V(U8,e))||i||t||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,l){this.g.setRequestHeader(l,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{G2(this),0<this.B&&((this.K=function j8(n){return f_&&function n8(){return function XK(n){var e=t8;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=WV(String(Kx)).split("."),t=WV("9").split("."),i=Math.max(e.length,t.length);for(let l=0;0==n&&l<i;l++){var r=e[l]||"",s=t[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=gk(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||gk(0==r[2].length,0==s[2].length)||gk(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hr(this.pa,this)):this.A=Nk(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){U2(this,s)}},rt.pa=function(){void 0!==dk&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$r(this,"complete"),$r(this,"abort"),hS(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hS(this,!0)),Yi.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?H2(this):this.cb())},rt.cb=function(){H2(this)},rt.ba=function(){try{return 2<zu(this)?this.g.status:-1}catch(n){return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),B8(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=z2.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new Yw(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=ZV(s),XV(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var i=this.l[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Y2(this,r,e),oi(t=$u(this.F),"RID",n),oi(t,"CVER",22),this.D&&oi(t,"X-HTTP-Session-Id",this.D),rb(this,t),this.o&&s&&Zk(t,this.o,s),Wk(this.i,r),this.Ra&&oi(t,"TYPE","init"),this.ja?(oi(t,"$req",e),oi(t,"SID","null"),r.$=!0,Hk(r,t,null)):Hk(r,t,e),this.G=2}}else 3==this.G&&(n?W2(this,n):0==this.l.length||F2(this.i)||W2(this))},rt.Ga=function(){if(this.u=null,Z2(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=qw(Hr(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Us(10),fS(this),Z2(this))},rt.ab=function(){null!=this.v&&(this.v=null,fS(this),Jk(this),Us(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Us(2)):(this.h.info("Failed to ping google.com"),Us(1))},(rt=nU.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},mS.prototype.g=function(n,e){return new Yo(n,e)},Gr(Yo,Er),Yo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),kk(Hr(n.hb,n,e))),Us(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=eU(n,null,n.W),pS(n)},Yo.prototype.close=function(){Qk(this.g)},Yo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Xk(this.g,e)}else this.v?((e={}).__data__=Rk(n),Xk(this.g,e)):Xk(this.g,n)},Yo.prototype.M=function(){this.g.j=null,delete this.j,Qk(this.g),delete this.g,Yo.Z.M.call(this)},Gr(iU,Bk),Gr(rU,Vk),Gr(__,nU),__.prototype.xa=function(){$r(this.g,"a")},__.prototype.wa=function(n){$r(this.g,new iU(n))},__.prototype.va=function(n){$r(this.g,new rU(n))},__.prototype.ua=function(){$r(this.g,"b")},mS.prototype.createWebChannel=mS.prototype.g,Yo.prototype.send=Yo.prototype.u,Yo.prototype.open=Yo.prototype.m,Yo.prototype.close=Yo.prototype.close,nS.NO_ERROR=0,nS.TIMEOUT=8,nS.HTTP_ERROR=6,v2.COMPLETE="complete",b2.EventType=Ww,Ww.OPEN="a",Ww.CLOSE="b",Ww.ERROR="c",Ww.MESSAGE="d",Er.prototype.listen=Er.prototype.N,Yi.prototype.listenOnce=Yi.prototype.O,Yi.prototype.getLastError=Yi.prototype.La,Yi.prototype.getLastErrorCode=Yi.prototype.Da,Yi.prototype.getStatus=Yi.prototype.ba,Yi.prototype.getResponseJson=Yi.prototype.Qa,Yi.prototype.getResponseText=Yi.prototype.ga,Yi.prototype.send=Yi.prototype.ea;var z8=Gu.createWebChannelTransport=function(){return new mS},q8=Gu.getStatEventTarget=function(){return tS()},tO=Gu.ErrorCode=nS,W8=Gu.EventType=v2,Y8=Gu.Event=yp,sU=Gu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},K8=Gu.FetchXmlHttpFactory=eb,_S=Gu.WebChannel=b2,Z8=Gu.XhrIo=Yi;const oU="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let y_="9.8.0";const Eh=new Ol.Yd("@firebase/firestore");function nO(){return Eh.logLevel}function Le(n,...e){if(Eh.logLevel<=Ol.in.DEBUG){const t=e.map(iO);Eh.debug(`Firestore (${y_}): ${n}`,...t)}}function Ki(n,...e){if(Eh.logLevel<=Ol.in.ERROR){const t=e.map(iO);Eh.error(`Firestore (${y_}): ${n}`,...t)}}function sb(n,...e){if(Eh.logLevel<=Ol.in.WARN){const t=e.map(iO);Eh.warn(`Firestore (${y_}): ${n}`,...t)}}function iO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${y_}) INTERNAL ASSERTION FAILED: `+n;throw Ki(e),new Error(e)}function kt(n,e){n||lt()}function Je(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends N.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class aU{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class e4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class t4{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let l=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Dr,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=l;e.enqueueRetryable((0,Ee.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},g=y=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Dr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(kt("string"==typeof i.accessToken),new aU(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new zr(e)}}class n4{constructor(e,t,i){this.type="FirstParty",this.user=zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class i4{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new n4(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r4{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=s=>{null!=s.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.p;return this.p=s.token,Le("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.p=t.token,new lU(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ko{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.I(i),this.T=i=>t.writeSequenceNumber(i))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function s4(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}Ko.A=-1;class cU{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=s4(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function Ut(n,e){return n<e?-1:n>e?1:0}function v_(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function uU(n){return n+"\0"}class Fi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fi.fromMillis(Date.now())}static fromDate(e){return Fi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Fi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Fi(0,0))}static max(){return new It(new Fi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function dU(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ep(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hU(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ob{constructor(e,t,i){void 0===t?t=0:t>e.length&&lt(),void 0===i?i=e.length-t:i>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===ob.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ob?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),l=t.get(r);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends ob{construct(e,t,i){return new sn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const o4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ar extends ob{construct(e,t,i){return new ar(e,t,i)}static isValidIdentifier(e){return o4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ar(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const d=e[r];if("\\"===d){if(r+1===e.length)throw new ke(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new ke(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,r+=2}else"`"===d?(l=!l,r++):"."!==d||l?(i+=d,r++):(s(),r++)}if(s(),l)throw new ke(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ar(t)}static emptyPath(){return new ar([])}}class w_{constructor(e){this.fields=e,e.sort(ar.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return v_(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new lr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lr.EMPTY_BYTE_STRING=new lr("");const l4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dh(n){if(kt(!!n),"string"==typeof n){let e=0;const t=l4.exec(n);if(kt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xi(n.seconds),nanos:xi(n.nanos)}}function xi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Dp(n){return"string"==typeof n?lr.fromBase64String(n):lr.fromUint8Array(n)}function rO(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fU(n){const e=n.mapValue.fields.__previous_value__;return rO(e)?fU(e):e}function ab(n){const e=Dh(n.mapValue.fields.__local_write_time__.timestampValue);return new Fi(e.seconds,e.nanos)}class c4{constructor(e,t,i,r,s,l,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=g}}class qu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qu&&e.projectId===this.projectId&&e.database===this.database}}function lb(n){return null==n}function cb(n){return 0===n&&1/n==-1/0}function pU(n){return"number"==typeof n&&Number.isInteger(n)&&!cb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(sn.fromString(e))}static fromName(e){return new Ke(sn.fromString(e).popFirst(5))}static empty(){return new Ke(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new sn(e.slice()))}}const xh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yS={nullValue:"NULL_VALUE"};function xp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rO(n)?4:yU(n)?9007199254740991:10:lt()}function Ic(n,e){if(n===e)return!0;const t=xp(n);if(t!==xp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ab(n).isEqual(ab(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Dh(i.timestampValue),l=Dh(r.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,Dp(n.bytesValue).isEqual(Dp(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return xi(i.geoPointValue.latitude)===xi(r.geoPointValue.latitude)&&xi(i.geoPointValue.longitude)===xi(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return xi(i.integerValue)===xi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=xi(i.doubleValue),l=xi(r.doubleValue);return s===l?cb(s)===cb(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return v_(n.arrayValue.values||[],e.arrayValue.values||[],Ic);case 10:return function(i,r){const s=i.mapValue.fields||{},l=r.mapValue.fields||{};if(dU(s)!==dU(l))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===l[d]||!Ic(s[d],l[d])))return!1;return!0}(n,e);default:return lt()}var r}function ub(n,e){return void 0!==(n.values||[]).find(t=>Ic(t,e))}function Sh(n,e){if(n===e)return 0;const t=xp(n),i=xp(e);if(t!==i)return Ut(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(r,s){const l=xi(r.integerValue||r.doubleValue),d=xi(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return gU(n.timestampValue,e.timestampValue);case 4:return gU(ab(n),ab(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(r,s){const l=Dp(r),d=Dp(s);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const l=r.split("/"),d=s.split("/");for(let g=0;g<l.length&&g<d.length;g++){const y=Ut(l[g],d[g]);if(0!==y)return y}return Ut(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const l=Ut(xi(r.latitude),xi(s.latitude));return 0!==l?l:Ut(xi(r.longitude),xi(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const l=r.values||[],d=s.values||[];for(let g=0;g<l.length&&g<d.length;++g){const y=Sh(l[g],d[g]);if(y)return y}return Ut(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===xh.mapValue&&s===xh.mapValue)return 0;if(r===xh.mapValue)return 1;if(s===xh.mapValue)return-1;const l=r.fields||{},d=Object.keys(l),g=s.fields||{},y=Object.keys(g);d.sort(),y.sort();for(let E=0;E<d.length&&E<y.length;++E){const x=Ut(d[E],y[E]);if(0!==x)return x;const M=Sh(l[d[E]],g[y[E]]);if(0!==M)return M}return Ut(d.length,y.length)}(n.mapValue,e.mapValue);default:throw lt()}}function gU(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=Dh(n),i=Dh(e),r=Ut(t.seconds,i.seconds);return 0!==r?r:Ut(t.nanos,i.nanos)}function b_(n){return sO(n)}function sO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Dh(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Dp(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const l of i.values||[])s?s=!1:r+=",",r+=sO(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",l=!0;for(const d of r)l?l=!1:s+=",",s+=`${d}:${sO(i.fields[d])}`;return s+"}"}(n.mapValue):lt();var e}function Sp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function oO(n){return!!n&&"integerValue"in n}function db(n){return!!n&&"arrayValue"in n}function mU(n){return!!n&&"nullValue"in n}function _U(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vS(n){return!!n&&"mapValue"in n}function hb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ep(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=hb(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hb(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yU(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function u4(n){return"nullValue"in n?yS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sp(qu.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:lt()}function d4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sp(qu.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?xh:lt()}function vU(n,e){const t=Sh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function wU(n,e){const t=Sh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ms{constructor(e){this.value=e}static empty(){return new ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!vS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hb(t)}setAll(e){let t=ar.emptyPath(),i={},r=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,i,r),i={},r=[],t=d.popLast()}l?i[d.lastSegment()]=hb(l):r.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());vS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ic(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];vS(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Ep(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new ms(hb(this.value))}}function bU(n){const e=[];return Ep(n.fields,(t,i)=>{const r=new ar([t]);if(vS(i)){const s=bU(i.mapValue).fields;if(0===s.length)e.push(r);else for(const l of s)e.push(r.child(l))}else e.push(r)}),new w_(e)}class Jn{constructor(e,t,i,r,s,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Jn(e,0,It.min(),It.min(),ms.empty(),0)}static newFoundDocument(e,t,i){return new Jn(e,1,t,It.min(),i,0)}static newNoDocument(e,t){return new Jn(e,2,t,It.min(),ms.empty(),0)}static newUnknownDocument(e,t){return new Jn(e,3,t,It.min(),ms.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wS{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function aO(n){return n.fields.find(e=>2===e.kind)}function Ap(n){return n.fields.filter(e=>2!==e.kind)}wS.UNKNOWN_ID=-1;class bS{constructor(e,t){this.fieldPath=e,this.kind=t}}class fb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fb(0,Fl.min())}}function CU(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=It.fromTimestamp(1e9===i?new Fi(t+1,0):new Fi(t,i));return new Fl(r,Ke.empty(),e)}function h4(n){return new Fl(n.readTime,n.key,-1)}class Fl{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Fl(It.min(),Ke.empty(),-1)}static max(){return new Fl(It.max(),Ke.empty(),-1)}}function EU(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}class Pi{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new Pi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new Pi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new CS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new CS(this.root,e,this.comparator,!1)}getReverseIterator(){return new CS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new CS(this.root,e,this.comparator,!0)}}class CS{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qr{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=null!=i?i:qr.RED,this.left=null!=r?r:qr.EMPTY,this.right=null!=s?s:qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new qr(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return qr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1,qr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new qr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new Pi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DU(this.data.getIterator())}getIteratorFrom(e){return new DU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zn(this.comparator);return t.data=e,t}}class DU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function C_(n){return n.hasNext()?n.getNext():void 0}class f4{constructor(e,t=null,i=[],r=[],s=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=l,this.endAt=d,this.P=null}}function xU(n,e=null,t=[],i=[],r=null,s=null,l=null){return new f4(n,e,t,i,r,s,l)}function Ip(n){const e=Je(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+b_(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),lb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>b_(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>b_(i)).join(",")),e.P=t}return e.P}function pb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!C4(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!Ic(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MU(n.startAt,e.startAt)&&MU(n.endAt,e.endAt)}function ES(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function DS(n,e){return n.filters.filter(t=>t instanceof Wr&&t.field.isEqual(e))}function SU(n,e,t){let i=yS,r=!0;for(const s of DS(n,e)){let l=yS,d=!0;switch(s.op){case"<":case"<=":l=u4(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,d=!1;break;case"!=":case"not-in":l=yS}vU({value:i,inclusive:r},{value:l,inclusive:d})<0&&(i=l,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];vU({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}function AU(n,e,t){let i=xh,r=!0;for(const s of DS(n,e)){let l=xh,d=!0;switch(s.op){case">=":case">":l=d4(s.value),d=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,d=!1;break;case"!=":case"not-in":l=xh}wU({value:i,inclusive:r},{value:l,inclusive:d})>0&&(i=l,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];wU({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}class Wr extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,i):new g4(e,t,i):"array-contains"===t?new y4(e,i):"in"===t?new v4(e,i):"not-in"===t?new w4(e,i):"array-contains-any"===t?new b4(e,i):new Wr(e,t,i)}static V(e,t,i){return"in"===t?new m4(e,i):new _4(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Sh(t,this.value)):null!==t&&xp(this.value)===xp(t)&&this.v(Sh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class g4 extends Wr{constructor(e,t,i){super(e,t,i),this.key=Ke.fromName(i.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.v(t)}}class m4 extends Wr{constructor(e,t){super(e,"in",t),this.keys=IU(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _4 extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=IU(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function IU(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Ke.fromName(i.referenceValue))}class y4 extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return db(t)&&ub(t.arrayValue,this.value)}}class v4 extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ub(this.value.arrayValue,t)}}class w4 extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(ub(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ub(this.value.arrayValue,t)}}class b4 extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!db(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ub(this.value.arrayValue,i))}}class Ah{constructor(e,t){this.position=e,this.inclusive=t}}class E_{constructor(e,t="asc"){this.field=e,this.dir=t}}function C4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function TU(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],l=n.position[r];if(i=s.field.isKeyField()?Ke.comparator(Ke.fromName(l.referenceValue),t.key):Sh(l,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function MU(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ic(n.position[t],e.position[t]))return!1;return!0}class Wu{constructor(e,t=null,i=[],r=[],s=null,l="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=g,this.D=null,this.C=null}}function RU(n,e,t,i,r,s,l,d){return new Wu(n,e,t,i,r,s,l,d)}function D_(n){return new Wu(n)}function lO(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function cO(n){for(const e of n.filters)if(e.S())return e.field;return null}function uO(n){return null!==n.collectionGroup}function x_(n){const e=Je(n);if(null===e.D){e.D=[];const t=cO(e),i=lO(e);if(null!==t&&null===i)t.isKeyField()||e.D.push(new E_(t)),e.D.push(new E_(ar.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new E_(ar.keyField(),s))}}}return e.D}function Pa(n){const e=Je(n);if(!e.C)if("F"===e.limitType)e.C=xU(e.path,e.collectionGroup,x_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of x_(e))t.push(new E_(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new Ah(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ah(e.startAt.position,e.startAt.inclusive):null;e.C=xU(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.C}function kU(n,e,t){return new Wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gb(n,e){return pb(Pa(n),Pa(e))&&n.limitType===e.limitType}function OU(n){return`${Ip(Pa(n))}|lt:${n.limitType}`}function dO(n){return`Query(target=${function p4(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${b_(i.value)}`;var i}).join(", ")}]`),lb(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>b_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>b_(t)).join(",")),`Target(${e})`}(Pa(n))}; limitType=${n.limitType})`}function hO(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):Ke.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,l){const d=TU(r,s,l);return r.inclusive?d<=0:d<0}(t.startAt,x_(t),i)||t.endAt&&!function(r,s,l){const d=TU(r,s,l);return r.inclusive?d>=0:d>0}(t.endAt,x_(t),i)));var t,i}function FU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PU(n){return(e,t)=>{let i=!1;for(const r of x_(n)){const s=D4(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function D4(n,e,t){const i=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(r,s,l){const d=s.data.field(r),g=l.data.field(r);return null!==d&&null!==g?Sh(d,g):lt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return lt()}}function NU(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cb(e)?"-0":e}}function LU(n){return{integerValue:""+n}}function BU(n,e){return pU(e)?LU(e):NU(n,e)}class xS{constructor(){this._=void 0}}function x4(n,e,t){return n instanceof S_?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof Tp?UU(n,e):n instanceof Mp?jU(n,e):function(i,r){const s=VU(i,r),l=HU(s)+HU(i.k);return oO(s)&&oO(i.k)?LU(l):NU(i.M,l)}(n,e)}function S4(n,e,t){return n instanceof Tp?UU(n,e):n instanceof Mp?jU(n,e):t}function VU(n,e){return n instanceof A_?oO(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class S_ extends xS{}class Tp extends xS{constructor(e){super(),this.elements=e}}function UU(n,e){const t=GU(e);for(const i of n.elements)t.some(r=>Ic(r,i))||t.push(i);return{arrayValue:{values:t}}}class Mp extends xS{constructor(e){super(),this.elements=e}}function jU(n,e){let t=GU(e);for(const i of n.elements)t=t.filter(r=>!Ic(r,i));return{arrayValue:{values:t}}}class A_ extends xS{constructor(e,t){super(),this.M=e,this.k=t}}function HU(n){return xi(n.integerValue||n.doubleValue)}function GU(n){return db(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class mb{constructor(e,t){this.field=e,this.transform=t}}class I4{constructor(e,t){this.version=e,this.transformResults=t}}class Zi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zi}static exists(e){return new Zi(void 0,e)}static updateTime(e){return new Zi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function SS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class AS{}function T4(n,e,t){n instanceof _b?function(i,r,s){const l=i.value.clone(),d=WU(i.fieldTransforms,r,s.transformResults);l.setAll(d),r.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Rp?function(i,r,s){if(!SS(i.precondition,r))return void r.convertToUnknownDocument(s.version);const l=WU(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(qU(i)),d.setAll(l),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fO(n,e,t){var r;n instanceof _b?function(i,r,s){if(!SS(i.precondition,r))return;const l=i.value.clone(),d=YU(i.fieldTransforms,s,r);l.setAll(d),r.convertToFoundDocument(zU(r),l).setHasLocalMutations()}(n,e,t):n instanceof Rp?function(i,r,s){if(!SS(i.precondition,r))return;const l=YU(i.fieldTransforms,s,r),d=r.data;d.setAll(qU(i)),d.setAll(l),r.convertToFoundDocument(zU(r),d).setHasLocalMutations()}(n,e,t):SS(n.precondition,r=e)&&r.convertToNoDocument(It.min())}function M4(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=VU(i.transform,r||null);null!=s&&(null==t&&(t=ms.empty()),t.set(i.field,s))}return t||null}function $U(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&v_(t,i,(r,s)=>function A4(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Tp&&i instanceof Tp||t instanceof Mp&&i instanceof Mp?v_(t.elements,i.elements,Ic):t instanceof A_&&i instanceof A_?Ic(t.k,i.k):t instanceof S_&&i instanceof S_);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}function zU(n){return n.isFoundDocument()?n.version:It.min()}class _b extends AS{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}}class Rp extends AS{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}}function qU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function WU(n,e,t){const i=new Map;kt(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],l=s.transform,d=e.data.field(s.field);i.set(s.field,S4(l,d,t[r]))}return i}function YU(n,e,t){const i=new Map;for(const r of n){const s=r.transform,l=t.data.field(r.field);i.set(r.field,x4(s,l,e))}return i}class yb extends AS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class pO extends AS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class R4{constructor(e){this.count=e}}var Qi,on;function KU(n){switch(n){default:return lt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function ZU(n){if(void 0===n)return Ki("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Qi.OK:return fe.OK;case Qi.CANCELLED:return fe.CANCELLED;case Qi.UNKNOWN:return fe.UNKNOWN;case Qi.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Qi.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Qi.INTERNAL:return fe.INTERNAL;case Qi.UNAVAILABLE:return fe.UNAVAILABLE;case Qi.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Qi.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Qi.NOT_FOUND:return fe.NOT_FOUND;case Qi.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Qi.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Qi.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Qi.ABORTED:return fe.ABORTED;case Qi.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Qi.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Qi.DATA_LOSS:return fe.DATA_LOSS;default:return lt()}}(on=Qi||(Qi={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class Ih{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ep(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return hU(this.inner)}size(){return this.innerSize}}const k4=new Pi(Ke.comparator);function Na(){return k4}const O4=new Pi(Ke.comparator);function gO(...n){let e=O4;for(const t of n)e=e.insert(t.key,t);return e}function vb(){return new Ih(n=>n.toString(),(n,e)=>n.isEqual(e))}const F4=new Pi(Ke.comparator),P4=new zn(Ke.comparator);function wn(...n){let e=P4;for(const t of n)e=e.add(t);return e}const N4=new zn(Ut);function IS(){return N4}class wb{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,bb.createSynthesizedTargetChangeForCurrentChange(e,t)),new wb(It.min(),i,IS(),Na(),wn())}}class bb{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new bb(lr.EMPTY_BYTE_STRING,t,wn(),wn(),wn())}}class TS{constructor(e,t,i,r){this.O=e,this.removedTargetIds=t,this.key=i,this.F=r}}class QU{constructor(e,t){this.targetId=e,this.$=t}}class XU{constructor(e,t,i=lr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class JU{constructor(){this.B=0,this.L=tj(),this.U=lr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=wn(),t=wn(),i=wn();return this.L.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:lt()}}),new bb(this.U,this.q,e,t,i)}J(){this.K=!1,this.L=tj()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class L4{constructor(e){this.nt=e,this.st=new Map,this.it=Na(),this.rt=ej(),this.ot=new zn(Ut)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const i=this.lt(t);switch(e.state){case 0:this.ft(t)&&i.W(e.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(e.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(t);break;case 3:this.ft(t)&&(i.et(),i.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),i.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((i,r)=>{this.ft(r)&&t(r)})}_t(e){const t=e.targetId,i=e.$.count,r=this.wt(t);if(r){const s=r.target;if(ES(s))if(0===i){const l=new Ke(s.path);this.ct(t,l,Jn.newNoDocument(l,It.min()))}else kt(1===i);else this.gt(t)!==i&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,l)=>{const d=this.wt(l);if(d){if(s.current&&ES(d.target)){const g=new Ke(d.target.path);null!==this.it.get(g)||this.It(l,g)||this.ct(l,g,Jn.newNoDocument(g,e))}s.j&&(t.set(l,s.H()),s.J())}});let i=wn();this.rt.forEach((s,l)=>{let d=!0;l.forEachWhile(g=>{const y=this.wt(g);return!y||2===y.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.it.forEach((s,l)=>l.setReadTime(e));const r=new wb(e,t,this.ot,this.it,i);return this.it=Na(),this.rt=ej(),this.ot=new zn(Ut),r}at(e,t){if(!this.ft(e))return;const i=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,i),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,i){if(!this.ft(e))return;const r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),i&&(this.it=this.it.insert(t,i))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new JU,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new zn(Ut),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new JU),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function ej(){return new Pi(Ke.comparator)}function tj(){return new Pi(Ke.comparator)}const B4={asc:"ASCENDING",desc:"DESCENDING"},V4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class U4{constructor(e,t){this.databaseId=e,this.N=t}}function Cb(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nj(n,e){return n.N?e.toBase64():e.toUint8Array()}function j4(n,e){return Cb(n,e.toTimestamp())}function xr(n){return kt(!!n),It.fromTimestamp(function(e){const t=Dh(e);return new Fi(t.seconds,t.nanos)}(n))}function mO(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ij(n){const e=sn.fromString(n);return kt(hj(e)),e}function Eb(n,e){return mO(n.databaseId,e.path)}function Tc(n,e){const t=ij(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(sj(t))}function _O(n,e){return mO(n.databaseId,e)}function rj(n){const e=ij(n);return 4===e.length?sn.emptyPath():sj(e)}function Db(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sj(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function oj(n,e,t){return{name:Eb(n,e),fields:t.value.mapValue.fields}}function aj(n,e,t){const i=Tc(n,e.name),r=xr(e.updateTime),s=new ms({mapValue:{fields:e.fields}}),l=Jn.newFoundDocument(i,r,s);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function xb(n,e){let t;if(e instanceof _b)t={update:oj(n,e.key,e.value)};else if(e instanceof yb)t={delete:Eb(n,e.key)};else if(e instanceof Rp)t={update:oj(n,e.key,e.data),updateMask:Z4(e.fieldMask)};else{if(!(e instanceof pO))return lt();t={verify:Eb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const l=s.transform;if(l instanceof S_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Tp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Mp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof A_)return{fieldPath:s.field.canonicalString(),increment:l.k};throw lt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:j4(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:lt()),t;var r}function yO(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Zi.updateTime(xr(r.updateTime)):void 0!==r.exists?Zi.exists(r.exists):Zi.none():Zi.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,l){let d=null;"setToServerValue"in l?(kt("REQUEST_TIME"===l.setToServerValue),d=new S_):"appendMissingElements"in l?d=new Tp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Mp(l.removeAllFromArray.values||[]):"increment"in l?d=new A_(s,l.increment):lt();const g=ar.fromServerFormat(l.fieldPath);return new mb(g,d)}(n,r)):[];var r;if(e.update){const r=Tc(n,e.update.name),s=new ms({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new w_((e.updateMask.fieldPaths||[]).map(y=>ar.fromServerFormat(y)));return new Rp(r,s,l,t,i)}return new _b(r,s,t,i)}if(e.delete){const r=Tc(n,e.delete);return new yb(r,t)}if(e.verify){const r=Tc(n,e.verify);return new pO(r,t)}return lt()}function lj(n,e){return{documents:[_O(n,e.path)]}}function cj(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=_O(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_O(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(g){if(0===g.length)return;const y=g.map(E=>function(x){if("=="===x.op){if(_U(x.value))return{unaryFilter:{field:I_(x.field),op:"IS_NAN"}};if(mU(x.value))return{unaryFilter:{field:I_(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(_U(x.value))return{unaryFilter:{field:I_(x.field),op:"IS_NOT_NAN"}};if(mU(x.value))return{unaryFilter:{field:I_(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:I_(x.field),op:W4(x.op),value:x.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);r&&(t.structuredQuery.where=r);const s=function(g){if(0!==g.length)return g.map(y=>{return{field:I_((E=y).field),direction:q4(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(y=e.limit,n.N||lb(y)?y:{value:y});var y,d,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function uj(n){let e=rj(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){kt(1===i);const E=t.from[0];E.allDescendants?r=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=dj(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(E=>{return new E_(T_((x=E).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let d=null;t.limit&&(d=function(E){let x;return x="object"==typeof E?E.value:E,lb(x)?null:x}(t.limit));let g=null;var E;t.startAt&&(g=new Ah((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new Ah(E.values||[],!E.before)}(t.endAt)),RU(e,r,l,s,d,"F",g,y)}function dj(n){return n?void 0!==n.unaryFilter?[K4(n)]:void 0!==n.fieldFilter?[Y4(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>dj(e)).reduce((e,t)=>e.concat(t)):lt():[]}function q4(n){return B4[n]}function W4(n){return V4[n]}function I_(n){return{fieldPath:n.canonicalString()}}function T_(n){return ar.fromServerFormat(n.fieldPath)}function Y4(n){return Wr.create(T_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function K4(n){switch(n.unaryFilter.op){case"IS_NAN":const e=T_(n.unaryFilter.field);return Wr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=T_(n.unaryFilter.field);return Wr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=T_(n.unaryFilter.field);return Wr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=T_(n.unaryFilter.field);return Wr.create(r,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function Z4(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hj(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function js(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fj(e)),e=Q4(n.get(t),e);return fj(e)}function Q4(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function fj(n){return n+"\x01\x01"}function Mc(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&lt(),n.charAt(l+1)){case"\x01":const d=n.substring(s,l);let g;0===r.length?g=d:(r+=d,g=r,r=""),i.push(g);break;case"\x10":r+=n.substring(s,l),r+="\0";break;case"\x11":r+=n.substring(s,l+1);break;default:lt()}s=l+2}return new sn(i)}const pj=["userId","batchId"];function MS(n,e){return[n,js(e)]}function gj(n,e,t){return[n,js(e),t]}const X4={},J4=["prefixPath","collectionGroup","readTime","documentId"],e5=["prefixPath","collectionGroup","documentId"],t5=["collectionGroup","readTime","prefixPath","documentId"],n5=["canonicalId","targetId"],r5=["targetId","path"],s5=["path","targetId"],o5=["collectionId","parent"],a5=["indexId","uid"],l5=["uid","sequenceNumber"],c5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],u5=["indexId","uid","orderedDocumentKey"],d5=["userId","collectionPath","documentId"],h5=["userId","collectionPath","largestBatchId"],f5=["userId","collectionGroup","largestBatchId"],mj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],p5=[...mj,"documentOverlays"],_j=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],g5=[..._j,"indexConfiguration","indexState","indexEntries"],yj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,i)=>{t(e)})}static reject(e){return new ge((t,i)=>{i(e)})}static waitFor(e){return new ge((t,i)=>{let r=0,s=0,l=!1;e.forEach(d=>{++r,d.next(()=>{++s,l&&s===r&&t()},g=>i(g))}),l=!0,s===r&&t()})}static or(e){let t=ge.resolve(!1);for(const i of e)t=t.next(r=>r?ge.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}}class RS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Dr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Sb(e,t.error)):this.At.resolve()},this.transaction.onerror=i=>{const r=vO(i.target.error);this.At.reject(new Sb(e,r))}}static open(e,t,i,r){try{return new RS(t,e.transaction(r,i))}catch(s){throw new Sb(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _5(t)}}class Pl{constructor(e,t,i){this.name=e,this.version=t,this.Pt=i,12.2===Pl.Vt((0,N.z$)())&&Ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),Op(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,N.hl)())return!1;if(Pl.St())return!0;const e=(0,N.z$)(),t=Pl.Vt(e),i=0<t&&t<10,r=Pl.Dt(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}Nt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{i(l.target.result)},s.onblocked=()=>{r(new Sb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const d=l.target.error;r("VersionError"===d.name?new ke(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new ke(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Sb(e,d))},s.onupgradeneeded=l=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.Pt.kt(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=i=>t.Mt(i)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,Ee.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.Nt(e);const g=RS.open(s.db,e,l?"readonly":"readwrite",i),y=r(g).next(E=>(g.bt(),E)).catch(E=>(g.abort(E),ge.reject(E))).toPromise();return y.catch(()=>{}),yield g.Rt,y}catch(g){const y="FirebaseError"!==g.name&&d<3;if(Le("SimpleDb","Transaction failed with error:",g.message,"Retrying:",y),s.close(),!y)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class m5{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Op(this.Ft.delete())}}class Sb extends ke{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function kp(n){return"IndexedDbTransactionError"===n.name}class _5{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Op(i)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),Op(this.store.add(e))}get(e){return Op(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),Op(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),Op(this.store.count())}qt(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.Kt(r,(l,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ge((s,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}Gt(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new ge((r,s)=>{i.onerror=l=>{s(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}Qt(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.jt=!1;const r=this.cursor(i);return this.Kt(r,(s,l,d)=>d.delete())}Wt(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.Kt(r,t)}zt(e){const t=this.cursor({});return new ge((i,r)=>{t.onerror=s=>{const l=vO(s.target.error);r(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():i()}):i()}})}Kt(e,t){const i=[];return new ge((r,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void r();const g=new m5(d),y=t(d.primaryKey,d.value,g);if(y instanceof ge){const E=y.catch(x=>(g.done(),ge.reject(x)));i.push(E)}g.isDone?r():null===g.Lt?d.continue():d.continue(g.Lt)}}).next(()=>ge.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.jt?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Op(n){return new ge((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=vO(i.target.error);t(r)}})}let wj=!1;function vO(n){const e=Pl.Vt((0,N.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wj||(wj=!0,setTimeout(()=>{throw i},0)),i}}return n}class bj extends vj{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Sr(n,e){const t=Je(n);return Pl.xt(t.Ht,e)}class wO{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&T4(s,e,i[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&fO(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&fO(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const i=e.get(t.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),wn())}isEqual(e){return this.batchId===e.batchId&&v_(this.mutations,e.mutations,(t,i)=>$U(t,i))&&v_(this.baseMutations,e.baseMutations,(t,i)=>$U(t,i))}}class bO{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){kt(e.mutations.length===i.length);let r=F4;const s=e.mutations;for(let l=0;l<s.length;l++)r=r.insert(s[l].key,i[l].version);return new bO(e,t,i,r)}}class CO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Th{constructor(e,t,i,r,s=It.min(),l=It.min(),d=lr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new Th(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Th(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Th(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Cj{constructor(e){this.Jt=e}}function Ej(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:kS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Eb(r=n.Jt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Cb(r,s.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Fp(e.version)};else{if(!e.isUnknownDocument())return lt();i.unknownDocument={path:t.path.toArray(),version:Fp(e.version)}}var r,s;return i}function kS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pp(n){const e=new Fi(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function M_(n,e){const t=(e.baseMutations||[]).map(s=>yO(n.Jt,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(s=>yO(n.Jt,s)),r=Fi.fromMillis(e.localWriteTimeMs);return new wO(e.batchId,r,t,i)}function Ab(n){const e=Pp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Pp(n.lastLimboFreeSnapshotVersion):It.min();let i;var r;return void 0!==n.query.documents?(kt(1===(r=n.query).documents.length),i=Pa(D_(rj(r.documents[0])))):i=Pa(uj(n.query)),new Th(i,n.targetId,0,n.lastListenSequenceNumber,e,t,lr.fromBase64String(n.resumeToken))}function Dj(n,e){const t=Fp(e.snapshotVersion),i=Fp(e.lastLimboFreeSnapshotVersion);let r;r=ES(e.target)?lj(n.Jt,e.target):cj(n.Jt,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ip(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function EO(n){const e=uj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?kU(e,e.limit,"L"):e}function DO(n,e){return new CO(e.largestBatchId,yO(n.Jt,e.overlayMutation))}function xj(n,e){const t=e.path.lastSegment();return[n,js(e.path.popLast()),t]}class v5{getBundleMetadata(e,t){return Sj(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Pp(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return Sj(e).put({bundleId:(i=t).id,createTime:Fp(xr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Aj(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:EO(r.bundledQuery),readTime:Pp(r.readTime)};var r})}saveNamedQuery(e,t){return Aj(e).put({name:(i=t).name,readTime:Fp(xr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Sj(n){return Sr(n,"bundles")}function Aj(n){return Sr(n,"namedQueries")}class xO{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new xO(e,t.uid||"")}getOverlay(e,t){return Ib(e).get(xj(this.userId,t)).next(i=>i?DO(this.M,i):null)}saveOverlays(e,t,i){const r=[];return i.forEach((s,l)=>{const d=new CO(t,l);r.push(this.Xt(e,d))}),ge.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(l=>r.add(js(l.getCollectionPath())));const s=[];return r.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);s.push(Ib(e).Qt("collectionPathOverlayIndex",d))}),ge.waitFor(s)}getOverlaysForCollection(e,t,i){const r=vb(),s=js(t),l=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ib(e).qt("collectionPathOverlayIndex",l).next(d=>{for(const g of d){const y=DO(this.M,g);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=vb();let l;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ib(e).Wt({index:"collectionGroupOverlayIndex",range:d},(g,y,E)=>{const x=DO(this.M,y);s.size()<r||x.largestBatchId===l?(s.set(x.getKey(),x),l=x.largestBatchId):E.done()}).next(()=>s)}Xt(e,t){return Ib(e).put(function(i,r,s){const[l,d,g]=xj(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:g,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:xb(i.Jt,s.mutation)}}(this.M,this.userId,t))}}function Ib(n){return Sr(n,"documentOverlays")}class Np{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(xi(e.integerValue));else if("doubleValue"in e){const i=xi(e.doubleValue);isNaN(i)?this.ne(t,13):(this.ne(t,15),cb(i)?t.se(0):t.se(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ne(t,20),"string"==typeof i?t.ie(i):(t.ie(`${i.seconds||""}`),t.se(i.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Dp(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?yU(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):lt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const i=e.fields||{};this.ne(t,55);for(const r of Object.keys(i))this.re(r,t),this.te(i[r],t)}he(e,t){const i=e.values||[];this.ne(t,50);for(const r of i)this.te(r,t)}ae(e,t){this.ne(t,37),Ke.fromName(e).path.forEach(i=>{this.ne(t,60),this.le(i,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function w5(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Ij(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=w5(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Np.fe=new Np;class b5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this._e(i.value),i=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.ge(i.value),i=t.next();this.ye()}pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(t<"\ud800"||"\udbff"<t)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{const r=t.codePointAt(0);this._e(240|r>>>18),this._e(128|63&r>>>12),this._e(128|63&r>>>6),this._e(128|63&r)}}this.we()}Ie(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{const r=t.codePointAt(0);this.ge(240|r>>>18),this.ge(128|63&r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r)}}this.ye()}Te(e){const t=this.Ee(e),i=Ij(t);this.Ae(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Re(e){const t=this.Ee(e),i=Ij(t);this.Ae(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class C5{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class E5{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Tb{constructor(){this.De=new b5,this.Ce=new C5(this.De),this.xe=new E5(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Lp{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Lp(this.indexId,this.documentKey,this.arrayValue,i)}}function Bp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Tj(n.arrayValue,e.arrayValue),0!==t?t:(t=Tj(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function Tj(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class D5{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const i=t;i.S()?this.Fe=i:this.Oe.push(i)}}$e(e){const t=aO(e);if(void 0!==t&&!this.Be(t))return!1;const i=Ap(e);let r=0,s=0;for(;r<i.length&&this.Be(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Fe){const l=i[r];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[s++],l))return!1;++r}for(;r<i.length;++r){const l=i[r];if(s>=this.Me.length||!this.Ue(this.Me[s++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class x5{constructor(){this.qe=new SO}addToCollectionParentIndex(e,t){return this.qe.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(Fl.min())}updateCollectionGroup(e,t,i){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class SO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new zn(sn.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new zn(sn.comparator)).toArray()}}const OS=new Uint8Array(0);class S5{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new SO,this.Ge=new Ih(i=>Ip(i),(i,r)=>pb(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const s={collectionId:i,parent:js(r)};return Mj(e).put(s)}return ge.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[uU(t),""],!1,!0);return Mj(e).qt(r).next(s=>{for(const l of s){if(l.collectionId!==t)break;i.push(Mc(l.parent))}return i})}addFieldIndex(e,t){const i=FS(e),r={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var s;return delete r.indexId,i.add(r).next()}deleteFieldIndex(e,t){const i=FS(e),r=PS(e),s=Mb(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Mb(e);let r=!0;const s=new Map;return ge.forEach(this.Qe(t),l=>this.je(e,l).next(d=>{r&&(r=!!d),s.set(l,d)})).next(()=>{if(r){let l=wn();const d=[];return ge.forEach(s,(g,y)=>{var E;Le("IndexedDbIndexManager",`Using index ${E=g,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(ct=>`${ct.fieldPath}:${ct.kind}`).join(",")}`} to execute ${Ip(t)}`);const x=function(ct,st){const Nt=aO(st);if(void 0===Nt)return null;for(const jt of DS(ct,Nt.fieldPath))switch(jt.op){case"array-contains-any":return jt.value.arrayValue.values||[];case"array-contains":return[jt.value]}return null}(y,g),M=function(ct,st){const Nt=new Map;for(const jt of Ap(st))for(const pn of DS(ct,jt.fieldPath))switch(pn.op){case"==":case"in":Nt.set(jt.fieldPath.canonicalString(),pn.value);break;case"not-in":case"!=":return Nt.set(jt.fieldPath.canonicalString(),pn.value),Array.from(Nt.values())}return null}(y,g),F=function(ct,st){const Nt=[];let jt=!0;for(const pn of Ap(st)){const qs=0===pn.kind?SU(ct,pn.fieldPath,ct.startAt):AU(ct,pn.fieldPath,ct.startAt);Nt.push(qs.value),jt&&(jt=qs.inclusive)}return new Ah(Nt,jt)}(y,g),B=function(ct,st){const Nt=[];let jt=!0;for(const pn of Ap(st)){const qs=0===pn.kind?AU(ct,pn.fieldPath,ct.endAt):SU(ct,pn.fieldPath,ct.endAt);Nt.push(qs.value),jt&&(jt=qs.inclusive)}return new Ah(Nt,jt)}(y,g),Q=this.We(g,y,F),ye=this.We(g,y,B),Oe=this.ze(g,y,M),Ze=this.He(g.indexId,x,Q,F.inclusive,ye,B.inclusive,Oe);return ge.forEach(Ze,ct=>i.Gt(ct,t.limit).next(st=>{st.forEach(Nt=>{const jt=Ke.fromSegments(Nt.documentKey);l.has(jt)||(l=l.add(jt),d.push(jt))})}))}).next(()=>d)}return ge.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,i,r,s,l,d){const g=(null!=t?t.length:1)*Math.max(i.length,s.length),y=g/(null!=t?t.length:1),E=[];for(let x=0;x<g;++x){const M=t?this.Je(t[x/y]):OS,F=this.Ye(e,M,i[x%y],r),B=this.Xe(e,M,s[x%y],l),Q=d.map(ye=>this.Ye(e,M,ye,!0));E.push(...this.createRange(F,B,Q))}return E}Ye(e,t,i,r){const s=new Lp(e,Ke.empty(),t,i);return r?s:s.ke()}Xe(e,t,i,r){const s=new Lp(e,Ke.empty(),t,i);return r?s.ke():s}je(e,t){const i=new D5(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let l=null;for(const d of s)i.$e(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let i=2;return ge.forEach(this.Qe(t),r=>this.je(e,r).next(s=>{s?0!==i&&s.fields.length<function(l){let d=new zn(ar.comparator),g=!1;for(const y of l.filters){const E=y;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?g=!0:d=d.add(E.field))}for(const y of l.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(g?1:0)}(r)&&(i=1):i=0})).next(()=>i)}Ze(e,t){const i=new Tb;for(const r of Ap(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const l=i.Ne(r.kind);Np.fe.Zt(s,l)}return i.Se()}Je(e){const t=new Tb;return Np.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const i=new Tb;return Np.fe.Zt(Sp(this.databaseId,t),i.Ne(function(r){const s=Ap(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.Se()}ze(e,t,i){if(null===i)return[];let r=[];r.push(new Tb);let s=0;for(const l of Ap(e)){const d=i[s++];for(const g of r)if(this.en(t,l.fieldPath)&&db(d))r=this.nn(r,l,d);else{const y=g.Ne(l.kind);Np.fe.Zt(d,y)}}return this.sn(r)}We(e,t,i){return this.ze(e,t,i.position)}sn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Se();return t}nn(e,t,i){const r=[...e],s=[];for(const l of i.arrayValue.values||[])for(const d of r){const g=new Tb;g.seed(d.Se()),Np.fe.Zt(l,g.Ne(t.kind)),s.push(g)}return s}en(e,t){return!!e.filters.find(i=>i instanceof Wr&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=FS(e),r=PS(e);return(t?i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.qt()).next(s=>{const l=[];return ge.forEach(s,d=>r.get([d.indexId,this.uid]).next(g=>{l.push(function(y,E){const x=E?new fb(E.sequenceNumber,new Fl(Pp(E.readTime),new Ke(Mc(E.documentKey)),E.largestBatchId)):fb.empty(),M=y.fields.map(([F,B])=>new bS(ar.fromServerFormat(F),B));return new wS(y.indexId,y.collectionGroup,M,x)}(d,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Ut(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=FS(e),s=PS(e);return this.rn(e).next(l=>r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>ge.forEach(d,g=>{return s.put({indexId:g.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:Fp((M=i).readTime),documentKey:js(M.documentKey.path),largestBatchId:M.largestBatchId});var M})))}updateIndexEntries(e,t){const i=new Map;return ge.forEach(t,(r,s)=>{const l=i.get(r.collectionGroup);return(l?ge.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),ge.forEach(d,g=>this.on(e,r,g).next(y=>{const E=this.un(s,g);return y.isEqual(E)?ge.resolve():this.an(e,s,g,y,E)}))))})}cn(e,t,i,r){return Mb(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(i,t.key),documentKey:t.key.path.toArray()})}hn(e,t,i,r){return Mb(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(i,t.key),t.key.path.toArray()])}on(e,t,i){const r=Mb(e);let s=new zn(Bp);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.tn(i,t)])},(l,d)=>{s=s.add(new Lp(i.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}un(e,t){let i=new zn(Bp);const r=this.Ze(t,e);if(null==r)return i;const s=aO(t);if(null!=s){const l=e.data.field(s.fieldPath);if(db(l))for(const d of l.arrayValue.values||[])i=i.add(new Lp(t.indexId,e.key,this.Je(d),r))}else i=i.add(new Lp(t.indexId,e.key,OS,r));return i}an(e,t,i,r,s){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,g,y,E,x){const M=d.getIterator(),F=g.getIterator();let B=C_(M),Q=C_(F);for(;B||Q;){let ye=!1,Oe=!1;if(B&&Q){const Ze=y(B,Q);Ze<0?Oe=!0:Ze>0&&(ye=!0)}else null!=B?Oe=!0:ye=!0;ye?(E(Q),Q=C_(F)):Oe?(x(B),B=C_(M)):(B=C_(M),Q=C_(F))}}(r,s,Bp,d=>{l.push(this.cn(e,t,i,d))},d=>{l.push(this.hn(e,t,i,d))}),ge.waitFor(l)}rn(e){let t=1;return PS(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((l,d)=>Bp(l,d)).filter((l,d,g)=>!d||0!==Bp(l,g[d-1]));const r=[];r.push(e);for(const l of i){const d=Bp(l,e),g=Bp(l,t);if(0===d)r[0]=e.ke();else if(d>0&&g<0)r.push(l),r.push(l.ke());else if(g>0)break}r.push(t);const s=[];for(let l=0;l<r.length;l+=2)s.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,OS,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,OS,[]]));return s}getMinOffset(e,t){let i;return ge.forEach(this.Qe(t),r=>this.je(e,r).next(s=>{s?(!i||EU(s.indexState.offset,i)<0)&&(i=s.indexState.offset):i=Fl.min()})).next(()=>i)}}function Mj(n){return Sr(n,"collectionParents")}function Mb(n){return Sr(n,"indexEntries")}function FS(n){return Sr(n,"indexConfiguration")}function PS(n){return Sr(n,"indexState")}const Rj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wo{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new wo(e,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kj(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let d=0;const g=i.Wt({range:l},(E,x,M)=>(d++,M.delete()));s.push(g.next(()=>{kt(1===d)}));const y=[];for(const E of t.mutations){const x=gj(e,E.key.path,t.batchId);s.push(r.delete(x)),y.push(E.key)}return ge.waitFor(s).next(()=>y)}function NS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}wo.DEFAULT_COLLECTION_PERCENTILE=10,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wo.DEFAULT=new wo(41943040,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wo.DISABLED=new wo(-1,0,0);class AO{constructor(e,t,i,r){this.userId=e,this.M=t,this.indexManager=i,this.referenceDelegate=r,this.ln={}}static Yt(e,t,i,r){kt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new AO(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mh(e).Wt({index:"userMutationsIndex",range:i},(r,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=R_(e),l=Mh(e);return l.add({}).next(d=>{kt("number"==typeof d);const g=new wO(d,t,i,r),y=function(M,F,B){const Q=B.baseMutations.map(Oe=>xb(M.Jt,Oe)),ye=B.mutations.map(Oe=>xb(M.Jt,Oe));return{userId:F,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:Q,mutations:ye}}(this.M,this.userId,g),E=[];let x=new zn((M,F)=>Ut(M.canonicalString(),F.canonicalString()));for(const M of r){const F=gj(this.userId,M.key.path,d);x=x.add(M.key.path.popLast()),E.push(l.put(y)),E.push(s.put(F,X4))}return x.forEach(M=>{E.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.ln[d]=g.keys()}),ge.waitFor(E).next(()=>g)})}lookupMutationBatch(e,t){return Mh(e).get(t).next(i=>i?(kt(i.userId===this.userId),M_(this.M,i)):null)}fn(e,t){return this.ln[t]?ge.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.ln[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Mh(e).Wt({index:"userMutationsIndex",range:r},(l,d,g)=>{d.userId===this.userId&&(kt(d.batchId>=i),s=M_(this.M,d)),g.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Mh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(r,s,l)=>{i=s.batchId,l.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mh(e).qt("userMutationsIndex",t).next(i=>i.map(r=>M_(this.M,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=MS(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return R_(e).Wt({range:r},(l,d,g)=>{const[y,E,x]=l,M=Mc(E);if(y===this.userId&&t.path.isEqual(M))return Mh(e).get(x).next(F=>{if(!F)throw lt();kt(F.userId===this.userId),s.push(M_(this.M,F))});g.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new zn(Ut);const r=[];return t.forEach(s=>{const l=MS(this.userId,s.path),d=IDBKeyRange.lowerBound(l),g=R_(e).Wt({range:d},(y,E,x)=>{const[M,F,B]=y,Q=Mc(F);M===this.userId&&s.path.isEqual(Q)?i=i.add(B):x.done()});r.push(g)}),ge.waitFor(r).next(()=>this.dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=MS(this.userId,i),l=IDBKeyRange.lowerBound(s);let d=new zn(Ut);return R_(e).Wt({range:l},(g,y,E)=>{const[x,M,F]=g,B=Mc(M);x===this.userId&&i.isPrefixOf(B)?B.length===r&&(d=d.add(F)):E.done()}).next(()=>this.dn(e,d))}dn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(Mh(e).get(s).next(l=>{if(null===l)throw lt();kt(l.userId===this.userId),i.push(M_(this.M,l))}))}),ge.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return kj(e.Ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ge.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return R_(e).Wt({range:i},(s,l,d)=>{if(s[0]===this.userId){const g=Mc(s[1]);r.push(g)}else d.done()}).next(()=>{kt(0===r.length)})})}containsKey(e,t){return Oj(e,this.userId,t)}wn(e){return Fj(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Oj(n,e,t){const i=MS(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let l=!1;return R_(n).Wt({range:s,jt:!0},(d,g,y)=>{const[E,x,M]=d;E===e&&x===r&&(l=!0),y.done()}).next(()=>l)}function Mh(n){return Sr(n,"mutations")}function R_(n){return Sr(n,"documentMutations")}function Fj(n){return Sr(n,"mutationQueues")}class Vp{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Vp(0)}static yn(){return new Vp(-1)}}class A5{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const i=new Vp(t.highestTargetId);return t.highestTargetId=i.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>It.fromTimestamp(new Fi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.pn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.In(e,r)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(i=>(i.targetCount+=1,this.En(t,i),this.In(e,i))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>k_(e).delete(t.targetId)).next(()=>this.pn(e)).next(i=>(kt(i.targetCount>0),i.targetCount-=1,this.In(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return k_(e).Wt((l,d)=>{const g=Ab(d);g.sequenceNumber<=t&&null===i.get(g.targetId)&&(r++,s.push(this.removeTargetData(e,g)))}).next(()=>ge.waitFor(s)).next(()=>r)}forEachTarget(e,t){return k_(e).Wt((i,r)=>{const s=Ab(r);t(s)})}pn(e){return Pj(e).get("targetGlobalKey").next(t=>(kt(null!==t),t))}In(e,t){return Pj(e).put("targetGlobalKey",t)}Tn(e,t){return k_(e).put(Dj(this.M,t))}En(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Ip(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return k_(e).Wt({range:r,index:"queryTargetsIndex"},(l,d,g)=>{const y=Ab(d);pb(t,y.target)&&(s=y,g.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=Rh(e);return t.forEach(l=>{const d=js(l.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(e,i,l))}),ge.waitFor(r)}removeMatchingKeys(e,t,i){const r=Rh(e);return ge.forEach(t,s=>{const l=js(s.path);return ge.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=Rh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Rh(e);let s=wn();return r.Wt({range:i,jt:!0},(l,d,g)=>{const y=Mc(l[1]),E=new Ke(y);s=s.add(E)}).next(()=>s)}containsKey(e,t){const i=js(t.path),r=IDBKeyRange.bound([i],[uU(i)],!1,!0);let s=0;return Rh(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},([l,d],g,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}Et(e,t){return k_(e).get(t).next(i=>i?Ab(i):null)}}function k_(n){return Sr(n,"targets")}function Pj(n){return Sr(n,"targetGlobal")}function Rh(n){return Sr(n,"targetDocuments")}function Up(n){return IO.apply(this,arguments)}function IO(){return IO=(0,Ee.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==yj)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),IO.apply(this,arguments)}function Nj([n,e],[t,i]){const r=Ut(n,t);return 0===r?Ut(e,i):r}class I5{constructor(e){this.An=e,this.buffer=new zn(Nj),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Nj(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class T5{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const i=this.Vn?3e5:6e4;Le("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,Ee.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(r){kp(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Up(r)}yield t.Sn(e)}))}}class M5{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return ge.resolve(Ko.A);const i=new I5(t);return this.Dn.forEachTarget(e,r=>i.Pn(r.sequenceNumber)).next(()=>this.Dn.xn(e,r=>i.Pn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Dn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(Rj)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rj):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let i,r,s,l,d,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),r=this.params.maximumSequenceNumbersToCollect):r=x,l=Date.now(),this.nthSequenceNumber(e,r))).next(x=>(i=x,d=Date.now(),this.removeTargets(e,i,t))).next(x=>(s=x,g=Date.now(),this.removeOrphanedDocuments(e,i))).next(x=>(y=Date.now(),nO()<=Ol.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-E}ms\n\tDetermined least recently used ${r} in `+(d-l)+`ms\n\tRemoved ${s} targets in `+(g-d)+`ms\n\tRemoved ${x} documents in `+(y-g)+`ms\nTotal Duration: ${y-E}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:x})))}}class R5{constructor(e,t){this.db=e,this.garbageCollector=new M5(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}kn(e){let t=0;return this.xn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(i,r)=>t(r))}addReference(e,t,i){return LS(e,i)}removeReference(e,t,i){return LS(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return LS(e,t)}On(e,t){return function(i,r){let s=!1;return Fj(i).zt(l=>Oj(i,l,r).next(d=>(d&&(s=!0),ge.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Mn(e,(l,d)=>{if(d<=t){const g=this.On(e,l).next(y=>{if(!y)return s++,i.getEntry(e,l).next(()=>(i.removeEntry(l,It.min()),Rh(e).delete([0,js(l.path)])))});r.push(g)}}).next(()=>ge.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return LS(e,t)}Mn(e,t){const i=Rh(e);let r,s=Ko.A;return i.Wt({index:"documentTargetsIndex"},([l,d],{path:g,sequenceNumber:y})=>{0===l?(s!==Ko.A&&t(new Ke(Mc(r)),s),s=y,r=g):s=Ko.A}).next(()=>{s!==Ko.A&&t(new Ke(Mc(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function LS(n,e){return Rh(n).put((i=n.currentSequenceNumber,{targetId:0,path:js(e.path),sequenceNumber:i}));var i}class Lj{constructor(){this.changes=new Ih(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?ge.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class k5{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return jp(e).put(i)}removeEntry(e,t,i){return jp(e).delete(function(r,s){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],kS(s),l[l.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Fn(e,i)))}getEntry(e,t){let i=Jn.newInvalidDocument(t);return jp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Rb(t))},(r,s)=>{i=this.$n(t,s)}).next(()=>i)}Bn(e,t){let i={size:0,document:Jn.newInvalidDocument(t)};return jp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Rb(t))},(r,s)=>{i={document:this.$n(t,s),size:NS(s)}}).next(()=>i)}getEntries(e,t){let i=Na();return this.Ln(e,t,(r,s)=>{const l=this.$n(r,s);i=i.insert(r,l)}).next(()=>i)}Un(e,t){let i=Na(),r=new Pi(Ke.comparator);return this.Ln(e,t,(s,l)=>{const d=this.$n(s,l);i=i.insert(s,d),r=r.insert(s,NS(l))}).next(()=>({documents:i,qn:r}))}Ln(e,t,i){if(t.isEmpty())return ge.resolve();let r=new zn(Uj);t.forEach(g=>r=r.add(g));const s=IDBKeyRange.bound(Rb(r.first()),Rb(r.last())),l=r.getIterator();let d=l.getNext();return jp(e).Wt({index:"documentKeyIndex",range:s},(g,y,E)=>{const x=Ke.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&Uj(d,x)<0;)i(d,null),d=l.getNext();d&&d.isEqual(x)&&(i(d,y),d=l.hasNext()?l.getNext():null),d?E.Ut(Rb(d)):E.done()}).next(()=>{for(;d;)i(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),kS(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jp(e).qt(IDBKeyRange.bound(r,s,!0)).next(l=>{let d=Na();for(const g of l){const y=this.$n(Ke.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,i,r){let s=Na();const l=Vj(t,i),d=Vj(t,Fl.max());return jp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(g,y,E)=>{const x=this.$n(Ke.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(x.key,x),s.size===r&&E.done()}).next(()=>s)}newChangeBuffer(e){return new O5(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Bj(e).get("remoteDocumentGlobalKey").next(t=>(kt(!!t),t))}Fn(e,t){return Bj(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const i=function y5(n,e){let t;if(e.document)t=aj(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Ke.fromSegments(e.noDocument.path),r=Pp(e.noDocument.readTime);t=Jn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const i=Ke.fromSegments(e.unknownDocument.path),r=Pp(e.unknownDocument.version);t=Jn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Fi(i[0],i[1]);return It.fromTimestamp(r)}(e.readTime)),t}(this.M,t);if(!i.isNoDocument()||!i.version.isEqual(It.min()))return i}return Jn.newInvalidDocument(e)}}class O5 extends Lj{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Ih(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new zn((s,l)=>Ut(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const d=this.Gn.get(s);if(t.push(this.Kn.removeEntry(e,s,d.readTime)),l.isValidDocument()){const g=Ej(this.Kn.M,l);r=r.add(s.path.popLast()),i+=NS(g)-d.size,t.push(this.Kn.addEntry(e,s,g))}else if(i-=d.size,this.trackRemovals){const g=Ej(this.Kn.M,l.convertToNoDocument(It.min()));t.push(this.Kn.addEntry(e,s,g))}}),r.forEach(s=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Kn.updateMetadata(e,i)),ge.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(i=>(this.Gn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:i,qn:r})=>(r.forEach((s,l)=>{this.Gn.set(s,{size:l,readTime:i.get(s).readTime})}),i))}}function Bj(n){return Sr(n,"remoteDocumentGlobal")}function jp(n){return Sr(n,"remoteDocumentsV14")}function Rb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Vj(n,e){const t=e.documentKey.path.toArray();return[n,kS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Uj(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=Ut(t[s],i[s]),r)return r;return r=Ut(t.length,i.length),r||(r=Ut(t[t.length-2],i[i.length-2]),r||Ut(t[t.length-1],i[i.length-1]))}class F5{constructor(e){this.M=e}kt(e,t,i,r){const s=new RS("createOrUpgrade",t);var d;i<1&&r>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pj,{unique:!0}),d.createObjectStore("documentMutations"),jj(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=ge.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),jj(e)),l=l.next(()=>function(d){const g=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(d,g){return g.store("mutations").qt().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pj,{unique:!0});const E=g.store("mutations"),x=y.map(M=>E.put(M));return ge.waitFor(x)})}(e,s))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(l=l.next(()=>this.Qn(s))),i<6&&r>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.jn(s)))),i<7&&r>=7&&(l=l.next(()=>this.Wn(s))),i<8&&r>=8&&(l=l.next(()=>this.zn(e,s))),i<9&&r>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(l=l.next(()=>this.Hn(s))),i<11&&r>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(l=l.next(()=>{!function(d){const g=d.createObjectStore("documentOverlays",{keyPath:d5});g.createIndex("collectionPathOverlayIndex",h5,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",f5,{unique:!1})}(e)})),i<13&&r>=13&&(l=l.next(()=>function(d){const g=d.createObjectStore("remoteDocumentsV14",{keyPath:J4});g.createIndex("documentKeyIndex",e5),g.createIndex("collectionGroupIndex",t5)}(e)).next(()=>this.Jn(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:a5}).createIndex("sequenceNumberIndex",l5,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:c5}).createIndex("documentKeyIndex",u5,{unique:!1})}(e)})),l}jn(e){let t=0;return e.store("remoteDocuments").Wt((i,r)=>{t+=NS(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Qn(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.qt().next(r=>ge.forEach(r,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.qt("userMutationsIndex",l).next(d=>ge.forEach(d,g=>{kt(g.userId===s.userId);const y=M_(this.M,g);return kj(e,s.userId,y).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Wt((l,d)=>{const g=new sn(l),y=[0,js(g)];s.push(t.get(y).next(E=>E?ge.resolve():t.put({targetId:0,path:js(g),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ge.waitFor(s))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:o5});const i=t.store("collectionParents"),r=new SO,s=l=>{if(r.add(l)){const d=l.lastSegment(),g=l.popLast();return i.put({collectionId:d,parent:js(g)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,d)=>{const g=new sn(l);return s(g.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,d,g],y)=>{const E=Mc(d);return s(E.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((i,r)=>{const s=Ab(r),l=Dj(this.M,s);return t.put(l)})}Jn(e,t){const i=t.store("remoteDocuments"),r=[];return i.Wt((s,l)=>{const d=t.store("remoteDocumentsV14"),g=(y=l,y.document?new Ke(sn.fromString(y.document.name).popFirst(5)):y.noDocument?Ke.fromSegments(y.noDocument.path):y.unknownDocument?Ke.fromSegments(y.unknownDocument.path):lt()).path.toArray();var y;const E={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(d.put(E))}).next(()=>ge.waitFor(r))}}function jj(n){n.createObjectStore("targetDocuments",{keyPath:r5}).createIndex("documentTargetsIndex",s5,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",n5,{unique:!0}),n.createObjectStore("targetGlobal")}const TO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class MO{constructor(e,t,i,r,s,l,d,g,y,E,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Yn=s,this.window=l,this.document=d,this.Xn=y,this.Zn=E,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=M=>Promise.resolve(),!MO.vt())throw new ke(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new R5(this,r),this.hs=t+"main",this.M=new Cj(g),this.ls=new Pl(this.hs,this.ts,new F5(this.M)),this.fs=new A5(this.referenceDelegate,this.M),this.ds=new k5(this.M),this._s=new v5,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===E&&Ki("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,TO);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ko(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var i=(0,Ee.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ee.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>BS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(kp(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return kb(e).get("owner").next(t=>ge.resolve(this.Ps(t)))}Vs(e){return BS(e).delete(this.clientId)}vs(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Sr(i,"clientMetadata");return r.qt().next(s=>{const l=e.Ds(s,18e5),d=s.filter(g=>-1===l.indexOf(g));return ge.forEach(d,g=>r.delete(g.clientId)).next(()=>d)})}).catch(()=>[]);if(e.ws)for(const i of t)e.ws.removeItem(e.Cs(i.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ge.resolve(!0):kb(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,TO);return!1}}return!(!this.networkEnabled||!this.inForeground)||BS(e).qt().next(i=>void 0===this.Ds(i,5e3).find(r=>{if(this.clientId!==r.clientId){const l=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new bj(t,Ko.A);return e.Rs(i).next(()=>e.Vs(i))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(i=>this.Ss(i.updateTimeMs,t)&&!this.xs(i.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>BS(e).qt().next(t=>this.Ds(t,18e5).map(i=>i.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return AO.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new S5(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return xO.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,i){Le("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=14===(l=this.ts)?g5:13===l?_j:12===l?p5:11===l?mj:void lt();var l;let d;return this.ls.runTransaction(e,r,s,g=>(d=new bj(g,this.es?this.es.next():Ko.A),"readwrite-primary"===t?this.Es(d).next(y=>!!y||this.As(d)).next(y=>{if(!y)throw Ki(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new ke(fe.FAILED_PRECONDITION,yj);return i(d)}).next(y=>this.bs(d).next(()=>y)):this.$s(d).next(()=>i(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}$s(e){return kb(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(fe.FAILED_PRECONDITION,TO)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kb(e).put("owner",t)}static vt(){return Pl.vt()}Rs(e){const t=kb(e);return t.get("owner").next(i=>this.Ps(i)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ge.resolve())}Ss(e,t){const i=Date.now();return!(e<i-t||e>i&&(Ki(`Detected an update time that is in the future: ${e} > ${i}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,N.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const i=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Le("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ki("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Ki("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kb(n){return Sr(n,"owner")}function BS(n){return Sr(n,"clientMetadata")}function RO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class P5{constructor(e,t,i){this.ds=e,this.Bs=t,this.indexManager=i}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(i=>this.Us(e,t,i))}Us(e,t,i){return this.ds.getEntry(e,t).next(r=>{for(const s of i)s.applyToLocalView(r);return r})}qs(e,t){e.forEach((i,r)=>{for(const s of t)s.applyToLocalView(r)})}Ks(e,t){return this.ds.getEntries(e,t).next(i=>this.Gs(e,i).next(()=>i))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(i=>this.qs(t,i))}Qs(e,t,i){return Ke.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.js(e,t.path):uO(t)?this.Ws(e,t,i):this.zs(e,t,i);var r}js(e,t){return this.Ls(e,new Ke(t)).next(i=>{let r=gO();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Ws(e,t,i){const r=t.collectionGroup;let s=gO();return this.indexManager.getCollectionParents(e,r).next(l=>ge.forEach(l,d=>{const g=(y=t,E=d.child(r),new Wu(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.zs(e,g,i).next(y=>{y.forEach((E,x)=>{s=s.insert(E,x)})})}).next(()=>s))}zs(e,t,i){let r;return this.ds.getAllFromCollection(e,t.path,i).next(s=>(r=s,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const l of s)for(const d of l.mutations){const g=d.key;let y=r.get(g);null==y&&(y=Jn.newInvalidDocument(g),r=r.insert(g,y)),fO(d,y,l.localWriteTime),y.isFoundDocument()||(r=r.remove(g))}}).next(()=>(r.forEach((s,l)=>{hO(t,l)||(r=r.remove(s))}),r))}}class kO{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Hs=i,this.Js=r}static Ys(e,t){let i=wn(),r=wn();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new kO(e,t.fromCache,i,r)}}class Hj{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,i,r){return this.ti(e,t).next(s=>s||this.ei(e,t,r,i)).next(s=>s||this.ni(e,t))}ti(e,t){return ge.resolve(null)}ei(e,t,i,r){return function E4(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(It.min())?this.ni(e,t):this.Zs.Ks(e,i).next(s=>{const l=this.si(t,s);return this.ii(t,l,i,r)?this.ni(e,t):(nO()<=Ol.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),dO(t)),this.ri(e,l,t,CU(r,-1)))})}si(e,t){let i=new zn(PU(e));return t.forEach((r,s)=>{hO(e,s)&&(i=i.add(s))}),i}ii(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ni(e,t){return nO()<=Ol.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",dO(t)),this.Zs.Qs(e,t,Fl.min())}ri(e,t,i,r){return this.Zs.Qs(e,i,r).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class N5{constructor(e,t,i,r){this.persistence=e,this.oi=t,this.M=r,this.ui=new Pi(Ut),this.ai=new Ih(s=>Ip(s),pb),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(i)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new P5(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Gj(n,e,t,i){return new N5(n,e,t,i)}function $j(n,e){return OO.apply(this,arguments)}function OO(){return OO=(0,Ee.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.Bs.getAllMutationBatches(i).next(s=>(r=s,t.li(e),t.Bs.getAllMutationBatches(i))).next(s=>{const l=[],d=[];let g=wn();for(const y of r){l.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of s){d.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return t.fi.Ks(i,g).next(y=>({di:y,removedBatchIds:l,addedBatchIds:d}))})})}),OO.apply(this,arguments)}function L5(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.hi.newChangeBuffer({trackRemovals:!0});return function(l,d,g,y){const E=g.batch,x=E.keys();let M=ge.resolve();return x.forEach(F=>{M=M.next(()=>y.getEntry(d,F)).next(B=>{const Q=g.docVersions.get(F);kt(null!==Q),B.version.compareTo(Q)<0&&(E.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),y.addEntry(B)))})}),M.next(()=>l.Bs.removeMutationBatch(d,E))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.Bs.performConsistencyCheck(i)).next(()=>t.fi.Ks(i,r))})}function zj(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function B5(n,e){const t=Je(n),i=e.snapshotVersion;let r=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.hi.newChangeBuffer({trackRemovals:!0});r=t.ui;const d=[];e.targetChanges.forEach((y,E)=>{const x=r.get(E);if(!x)return;d.push(t.fs.removeMatchingKeys(s,y.removedDocuments,E).next(()=>t.fs.addMatchingKeys(s,y.addedDocuments,E)));let M=x.withSequenceNumber(s.currentSequenceNumber);var F,B,Q;e.targetMismatches.has(E)?M=M.withResumeToken(lr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):y.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(y.resumeToken,i)),r=r.insert(E,M),B=M,Q=y,(0===(F=x).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0)&&d.push(t.fs.updateTargetData(s,M))});let g=Na();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),d.push(qj(s,l,e.documentUpdates).next(y=>{g=y})),!i.isEqual(It.min())){const y=t.fs.getLastRemoteSnapshotVersion(s).next(E=>t.fs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(y)}return ge.waitFor(d).next(()=>l.apply(s)).next(()=>t.fi.Gs(s,g)).next(()=>g)}).then(s=>(t.ui=r,s))}function qj(n,e,t){let i=wn();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let s=Na();return t.forEach((l,d)=>{const g=r.get(l);d.isNoDocument()&&d.version.isEqual(It.min())?(e.removeEntry(l,d.readTime),s=s.insert(l,d)):!g.isValidDocument()||d.version.compareTo(g.version)>0||0===d.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(d),s=s.insert(l,d)):Le("LocalStore","Ignoring outdated watch update for ",l,". Current version:",g.version," Watch version:",d.version)}),s})}function V5(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(i,e)))}function O_(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.fs.getTargetData(i,e).next(s=>s?(r=s,ge.resolve(r)):t.fs.allocateTargetId(i).next(l=>(r=new Th(e,l,0,i.currentSequenceNumber),t.fs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ui=t.ui.insert(i.targetId,i),t.ai.set(e,i.targetId)),i})}function F_(n,e,t){return FO.apply(this,arguments)}function FO(){return FO=(0,Ee.Z)(function*(n,e,t){const i=Je(n),r=i.ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!kp(l))throw l;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.ui=i.ui.remove(e),i.ai.delete(r.target)}),FO.apply(this,arguments)}function VS(n,e,t){const i=Je(n);let r=It.min(),s=wn();return i.persistence.runTransaction("Execute query","readonly",l=>function(d,g,y){const E=Je(d),x=E.ai.get(y);return void 0!==x?ge.resolve(E.ui.get(x)):E.fs.getTargetData(g,y)}(i,l,Pa(e)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.fs.getMatchingKeysForTargetId(l,d.targetId).next(g=>{s=g})}).next(()=>i.oi.Qs(l,e,t?r:It.min(),t?s:wn())).next(d=>(Kj(i,FU(e),d),{documents:d,_i:s})))}function Wj(n,e){const t=Je(n),i=Je(t.fs),r=t.ui.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.Et(s,e).next(l=>l?l.target:null))}function Yj(n,e){const t=Je(n),i=t.ci.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.hi.getAllFromCollectionGroup(r,e,CU(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(Kj(t,e,r),r))}function Kj(n,e,t){let i=It.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ci.set(e,i)}function PO(){return PO=(0,Ee.Z)(function*(n,e,t,i){const r=Je(n);let s=wn(),l=Na();for(const y of t){const E=e.wi(y.metadata.name);y.document&&(s=s.add(E));const x=e.mi(y);x.setReadTime(e.gi(y.metadata.readTime)),l=l.insert(E,x)}const d=r.hi.newChangeBuffer({trackRemovals:!0}),g=yield O_(r,(y=i,Pa(D_(sn.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>qj(y,d,l).next(E=>(d.apply(y),E)).next(E=>r.fs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>r.fs.addMatchingKeys(y,s,g.targetId)).next(()=>r.fi.Gs(y,E)).next(()=>E)))}),PO.apply(this,arguments)}function j5(n,e){return NO.apply(this,arguments)}function NO(){return NO=(0,Ee.Z)(function*(n,e,t=wn()){const i=yield O_(n,Pa(EO(e.bundledQuery))),r=Je(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const l=xr(e.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r._s.saveNamedQuery(s,e);const d=i.withResumeToken(lr.EMPTY_BYTE_STRING,l);return r.ui=r.ui.insert(d.targetId,d),r.fs.updateTargetData(s,d).next(()=>r.fs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.fs.addMatchingKeys(s,t,i.targetId)).next(()=>r._s.saveNamedQuery(s,e))})}),NO.apply(this,arguments)}class H5{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return ge.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var i;return this.yi.set(t.id,{id:(i=t).id,version:i.version,createTime:xr(i.createTime)}),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(i=t).name,query:EO(i.bundledQuery),readTime:xr(i.readTime)}),ge.resolve();var i}}class G5{constructor(){this.overlays=new Pi(Ke.comparator),this.Ii=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.Xt(e,t,s)}),ge.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Ii.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(i)),ge.resolve()}getOverlaysForCollection(e,t,i){const r=vb(),s=t.length+1,l=new Ke(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const g=d.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&g.largestBatchId>i&&r.set(g.getKey(),g)}return ge.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Pi((y,E)=>y-E);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let E=s.get(y.largestBatchId);null===E&&(E=vb(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=vb(),g=s.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,E)=>d.set(y,E)),!(d.size()>=r)););return ge.resolve(d)}Xt(e,t,i){if(null===i)return;const r=this.overlays.get(i.key);if(null!==r){const l=this.Ii.get(r.largestBatchId).delete(i.key);this.Ii.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new CO(t,i));let s=this.Ii.get(t);void 0===s&&(s=wn(),this.Ii.set(t,s)),this.Ii.set(t,s.add(i.key))}}class LO{constructor(){this.Ti=new zn(Ar.Ei),this.Ai=new zn(Ar.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const i=new Ar(e,t);this.Ti=this.Ti.add(i),this.Ai=this.Ai.add(i)}bi(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Pi(new Ar(e,t))}Vi(e,t){e.forEach(i=>this.removeReference(i,t))}vi(e){const t=new Ke(new sn([])),i=new Ar(t,e),r=new Ar(t,e+1),s=[];return this.Ai.forEachInRange([i,r],l=>{this.Pi(l),s.push(l.key)}),s}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ke(new sn([])),i=new Ar(t,e),r=new Ar(t,e+1);let s=wn();return this.Ai.forEachInRange([i,r],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new Ar(e,0),i=this.Ti.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Ar{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ke.comparator(e.key,t.key)||Ut(e.Ci,t.Ci)}static Ri(e,t){return Ut(e.Ci,t.Ci)||Ke.comparator(e.key,t.key)}}class $5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new zn(Ar.Ei)}checkEmpty(e){return ge.resolve(0===this.Bs.length)}addMutationBatch(e,t,i,r){const s=this.xi;this.xi++;const l=new wO(s,t,i,r);this.Bs.push(l);for(const d of r)this.Ni=this.Ni.add(new Ar(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ge.resolve(l)}lookupMutationBatch(e,t){return ge.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.Mi(t+1),s=r<0?0:r;return ge.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return ge.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ar(t,0),r=new Ar(t,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([i,r],l=>{const d=this.ki(l.Ci);s.push(d)}),ge.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new zn(Ut);return t.forEach(r=>{const s=new Ar(r,0),l=new Ar(r,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,l],d=>{i=i.add(d.Ci)})}),ge.resolve(this.Oi(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;Ke.isDocumentKey(s)||(s=s.child(""));const l=new Ar(new Ke(s),0);let d=new zn(Ut);return this.Ni.forEachWhile(g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(d=d.add(g.Ci)),!0)},l),ge.resolve(this.Oi(d))}Oi(e){const t=[];return e.forEach(i=>{const r=this.ki(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){kt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let i=this.Ni;return ge.forEach(t.mutations,r=>{const s=new Ar(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Ni=i})}_n(e){}containsKey(e,t){const i=new Ar(t,0),r=this.Ni.firstAfterOrEqual(i);return ge.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return ge.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class z5{constructor(e){this.$i=e,this.docs=new Pi(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,l=this.$i(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ge.resolve(i?i.document.mutableCopy():Jn.newInvalidDocument(t))}getEntries(e,t){let i=Na();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Jn.newInvalidDocument(r))}),ge.resolve(i)}getAllFromCollection(e,t,i){let r=Na();const s=new Ke(t.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:d,value:{document:g}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||EU(h4(g),i)<=0||(r=r.insert(g.key,g.mutableCopy()))}return ge.resolve(r)}getAllFromCollectionGroup(e,t,i,r){lt()}Bi(e,t){return ge.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new q5(this)}getSize(e){return ge.resolve(this.size)}}class q5 extends Lj{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Kn.addEntry(e,r)):this.Kn.removeEntry(i)}),ge.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class W5{constructor(e){this.persistence=e,this.Li=new Ih(t=>Ip(t),pb),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Ui=0,this.qi=new LO,this.targetCount=0,this.Ki=Vp.gn()}forEachTarget(e,t){return this.Li.forEach((i,r)=>t(r)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ui&&(this.Ui=t),ge.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Vp(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Tn(t),ge.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Li.forEach((l,d)=>{d.sequenceNumber<=t&&null===i.get(d.targetId)&&(this.Li.delete(l),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)}),ge.waitFor(s).next(()=>r)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const i=this.Li.get(t)||null;return ge.resolve(i)}addMatchingKeys(e,t,i){return this.qi.bi(t,i),ge.resolve()}removeMatchingKeys(e,t,i){this.qi.Vi(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(l=>{s.push(r.markPotentiallyOrphaned(e,l))}),ge.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qi.Di(t);return ge.resolve(i)}containsKey(e,t){return ge.resolve(this.qi.containsKey(t))}}class Y5{constructor(e,t){this.Gi={},this.overlays={},this.es=new Ko(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new W5(this),this.indexManager=new x5,this.ds=new z5(i=>this.referenceDelegate.Qi(i)),this.M=new Cj(t),this._s=new H5(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new G5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Gi[e.toKey()];return i||(i=new $5(t,this.referenceDelegate),this.Gi[e.toKey()]=i),i}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,i){Le("MemoryPersistence","Starting transaction:",e);const r=new K5(this.es.next());return this.referenceDelegate.ji(),i(r).next(s=>this.referenceDelegate.Wi(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}zi(e,t){return ge.or(Object.values(this.Gi).map(i=>()=>i.containsKey(e,t)))}}class K5 extends vj{constructor(e){super(),this.currentSequenceNumber=e}}class BO{constructor(e){this.persistence=e,this.Hi=new LO,this.Ji=null}static Yi(e){return new BO(e)}get Xi(){if(this.Ji)return this.Ji;throw lt()}addReference(e,t,i){return this.Hi.addReference(i,t),this.Xi.delete(i.toString()),ge.resolve()}removeReference(e,t,i){return this.Hi.removeReference(i,t),this.Xi.add(i.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(r=>this.Xi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xi.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Xi,i=>{const r=Ke.fromPath(i);return this.Zi(e,r).next(s=>{s||t.removeEntry(r,It.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(i=>{i?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return ge.or([()=>ge.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Zj(n,e){return`firestore_clients_${n}_${e}`}function Qj(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function VO(n,e){return`firestore_targets_${n}_${e}`}class US{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static tr(e,t,i){const r=JSON.parse(i);let s,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(s=new ke(r.error.code,r.error.message))),l?new US(e,t,r.state,s):(Ki("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ob{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static tr(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new ke(i.error.code,i.error.message))),s?new Ob(e,i.state,r):(Ki("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=IS();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=pU(i.activeTargetIds[l]),s=s.add(i.activeTargetIds[l]);return r?new jS(e,s):(Ki("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class UO{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new UO(t.clientId,t.onlineState):(Ki("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jO{constructor(){this.activeTargetIds=IS()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HO{constructor(e,t,i,r,s){this.window=e,this.Yn=t,this.persistenceKey=i,this.ir=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Pi(Ut),this.started=!1,this.cr=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=Zj(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new jO),this.dr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Fs();for(const r of t){if(r===e.ir)continue;const s=e.getItem(Zj(e.persistenceKey,r));if(s){const l=jS.tr(r,s);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.yr();const i=e.storage.getItem(e.mr);if(i){const r=e.pr(i);r&&e.Ir(r)}for(const r of e.cr)e.ur(r);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,i){this.Er(e,t,i),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(VO(this.persistenceKey,e));if(i){const r=Ob.tr(e,i);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(VO(this.persistenceKey,e))}updateQueryState(e,t,i){this.br(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Ar(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Le("SharedClientState","EVENT",i.key,i.newValue),i.key===this.hr)return void Ki("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==i.key)if(t.dr.test(i.key)){if(null==i.newValue){const r=t.vr(i.key);return t.Sr(r,null)}{const r=t.Dr(i.key,i.newValue);if(r)return t.Sr(r.clientId,r)}}else if(t._r.test(i.key)){if(null!==i.newValue){const r=t.Cr(i.key,i.newValue);if(r)return t.Nr(r)}}else if(t.wr.test(i.key)){if(null!==i.newValue){const r=t.kr(i.key,i.newValue);if(r)return t.Mr(r)}}else if(i.key===t.mr){if(null!==i.newValue){const r=t.pr(i.newValue);if(r)return t.Ir(r)}}else if(i.key===t.lr){const r=function(s){let l=Ko.A;if(null!=s)try{const d=JSON.parse(s);kt("number"==typeof d),l=d}catch(d){Ki("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(i.newValue);r!==Ko.A&&t.sequenceNumberHandler(r)}else if(i.key===t.gr){const r=t.Or(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Fr(s)))}}else t.cr.push(i)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,i){const r=new US(this.currentUser,e,t,i),s=Qj(this.persistenceKey,this.currentUser,e);this.setItem(s,r.er())}Ar(e){const t=Qj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,i){const r=VO(this.persistenceKey,e),s=new Ob(e,t,i);this.setItem(r,s.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const i=this.vr(e);return jS.tr(i,t)}Cr(e,t){const i=this._r.exec(e),r=Number(i[1]);return US.tr(new zr(void 0!==i[2]?i[2]:null),r,t)}kr(e,t){const i=this.wr.exec(e),r=Number(i[1]);return Ob.tr(r,t)}pr(e){return UO.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const i=t?this.ar.insert(e,t):this.ar.remove(e),r=this.Tr(this.ar),s=this.Tr(i),l=[],d=[];return s.forEach(g=>{r.has(g)||l.push(g)}),r.forEach(g=>{s.has(g)||d.push(g)}),this.syncEngine.Lr(l,d).then(()=>{this.ar=i})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=IS();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class Xj{constructor(){this.Ur=new jO,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,i){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new jO,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Z5{Kr(e){}shutdown(){}}class Jj{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Q5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class X5{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class J5 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,i,r,s){const l=this.ho(e,t);Le("RestConnection","Sending: ",l,i);const d={};return this.lo(d,r,s),this.fo(e,l,d,i).then(g=>(Le("RestConnection","Received: ",g),g),g=>{throw sb("RestConnection",`${e} failed with error: `,g,"url: ",l,"request:",i),g})}_o(e,t,i,r,s){return this.co(e,t,i,r,s)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+y_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}ho(e,t){return`${this.uo}/v1/${t}:${Q5[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,r){return new Promise((s,l)=>{const d=new Z8;d.listenOnce(W8.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case tO.NO_ERROR:const y=d.getResponseJson();Le("Connection","XHR received:",JSON.stringify(y)),s(y);break;case tO.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),l(new ke(fe.DEADLINE_EXCEEDED,"Request time out"));break;case tO.HTTP_ERROR:const E=d.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',E,"response text:",d.getResponseText()),E>0){const x=d.getResponseJson().error;if(x&&x.status&&x.message){const M=function(F){const B=F.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(B)>=0?B:fe.UNKNOWN}(x.status);l(new ke(M,x.message))}else l(new ke(fe.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new ke(fe.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(r);d.send(t,"POST",g,i,15)})}wo(e,t,i){const r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=z8(),l=q8(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new K8({})),this.lo(d.initMessageHeaders,t,i),(0,N.uI)()||(0,N.b$)()||(0,N.d)()||(0,N.w1)()||(0,N.Mn)()||(0,N.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const g=r.join("");Le("Connection","Creating WebChannel: "+g,d);const y=s.createWebChannel(g,d);let E=!1,x=!1;const M=new X5({Jr:B=>{x?Le("Connection","Not sending because WebChannel is closed:",B):(E||(Le("Connection","Opening WebChannel transport."),y.open(),E=!0),Le("Connection","WebChannel sending:",B),y.send(B))},Yr:()=>y.close()}),F=(B,Q,ye)=>{B.listen(Q,Oe=>{try{ye(Oe)}catch(Ze){setTimeout(()=>{throw Ze},0)}})};return F(y,_S.EventType.OPEN,()=>{x||Le("Connection","WebChannel transport opened.")}),F(y,_S.EventType.CLOSE,()=>{x||(x=!0,Le("Connection","WebChannel transport closed"),M.ro())}),F(y,_S.EventType.ERROR,B=>{x||(x=!0,sb("Connection","WebChannel transport errored:",B),M.ro(new ke(fe.UNAVAILABLE,"The operation could not be completed")))}),F(y,_S.EventType.MESSAGE,B=>{var Q;if(!x){const ye=B.data[0];kt(!!ye);const Oe=ye,Ze=Oe.error||(null===(Q=Oe[0])||void 0===Q?void 0:Q.error);if(Ze){Le("Connection","WebChannel received error:",Ze);const ct=Ze.status;let st=function(jt){const pn=Qi[jt];if(void 0!==pn)return ZU(pn)}(ct),Nt=Ze.message;void 0===st&&(st=fe.INTERNAL,Nt="Unknown error status: "+ct+" with message "+Ze.message),x=!0,M.ro(new ke(st,Nt)),y.close()}else Le("Connection","WebChannel received:",ye),M.oo(ye)}}),F(l,Y8.STAT_EVENT,B=>{B.stat===sU.PROXY?Le("Connection","Detected buffering proxy"):B.stat===sU.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.io()},0),M}}function eH(){return"undefined"!=typeof window?window:null}function HS(){return"undefined"!=typeof document?document:null}function Fb(n){return new U4(n,!0)}class GO{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Yn=e,this.timerId=t,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-i);r>0&&Le("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class tH{constructor(e,t,i,r,s,l,d,g){this.Yn=e,this.Vo=i,this.vo=r,this.So=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new GO(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ee.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var i=this;return(0,Ee.Z)(function*(){i.Uo(),i.qo(),i.No.cancel(),i.Do++,4!==e?i.No.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),i.No.Ao()):t&&t.code===fe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Ko(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Do===t&&this.Qo(i,r)},i=>{e(()=>{const r=new ke(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.jo(r)})})}Qo(e,t){const i=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{i(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(r=>{i(()=>this.jo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}jo(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eZ extends tH{constructor(e,t,i,r,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.M=s}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function G4(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:lt(),r=e.targetChange.targetIds||[],s=function(g,y){return g.N?(kt(void 0===y||"string"==typeof y),lr.fromBase64String(y||"")):(kt(void 0===y||y instanceof Uint8Array),lr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(g){const y=void 0===g.code?fe.UNKNOWN:ZU(g.code);return new ke(y,g.message||"")}(l);t=new XU(i,r,s,d||null)}else if("documentChange"in e){const i=e.documentChange,r=Tc(n,i.document.name),s=xr(i.document.updateTime),l=new ms({mapValue:{fields:i.document.fields}}),d=Jn.newFoundDocument(r,s,l);t=new TS(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const i=e.documentDelete,r=Tc(n,i.document),s=i.readTime?xr(i.readTime):It.min(),l=Jn.newNoDocument(r,s);t=new TS([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const i=e.documentRemove,r=Tc(n,i.document);t=new TS([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return lt();{const i=e.filter,s=new R4(i.count||0);t=new QU(i.targetId,s)}}var g;return t}(this.M,e),i=function(r){if(!("targetChange"in r))return It.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?It.min():s.readTime?xr(s.readTime):It.min()}(e);return this.listener.zo(t,i)}Ho(e){const t={};t.database=Db(this.M),t.addTarget=function(r,s){let l;const d=s.target;return l=ES(d)?{documents:lj(r,d)}:{query:cj(r,d)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=nj(r,s.resumeToken):s.snapshotVersion.compareTo(It.min())>0&&(l.readTime=Cb(r,s.snapshotVersion.toTimestamp())),l}(this.M,e);const i=function z4(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Lo(t)}Jo(e){const t={};t.database=Db(this.M),t.removeTarget=e,this.Lo(t)}}class tZ extends tH{constructor(e,t,i,r,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function $4(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(i,r){let s=xr(i.updateTime?i.updateTime:r);return s.isEqual(It.min())&&(s=xr(r)),new I4(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=xr(e.commitTime);return this.listener.tu(i,t)}return kt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Db(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>xb(this.M,i))};this.Lo(t)}}class nZ extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=i,this.M=r,this.su=!1}iu(){if(this.su)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So.co(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ke(fe.UNKNOWN,r.toString())})}_o(e,t,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So._o(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ke(fe.UNKNOWN,r.toString())})}terminate(){this.su=!0}}class iZ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Ki(t),this.uu=!1):Le("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class rZ{constructor(e,t,i,r,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(d=>{i.enqueueAndForget((0,Ee.Z)(function*(){var g;kh(l)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Ee.Z)(function*(y){const E=Je(y);E.wu.add(4),yield P_(E),E.yu.set("Unknown"),E.wu.delete(4),yield Pb(E)}),function(y){return g.apply(this,arguments)})(l))}))}),this.yu=new iZ(i,r)}}function Pb(n){return $O.apply(this,arguments)}function $O(){return $O=(0,Ee.Z)(function*(n){if(kh(n))for(const e of n.mu)yield e(!0)}),$O.apply(this,arguments)}function P_(n){return zO.apply(this,arguments)}function zO(){return zO=(0,Ee.Z)(function*(n){for(const e of n.mu)yield e(!1)}),zO.apply(this,arguments)}function GS(n,e){const t=Je(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),YO(t)?WO(t):L_(t).Mo()&&qO(t,e))}function Nb(n,e){const t=Je(n),i=L_(t);t._u.delete(e),i.Mo()&&nH(t,e),0===t._u.size&&(i.Mo()?i.$o():kh(t)&&t.yu.set("Unknown"))}function qO(n,e){n.pu.Z(e.targetId),L_(n).Ho(e)}function nH(n,e){n.pu.Z(e),L_(n).Jo(e)}function WO(n){n.pu=new L4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),L_(n).start(),n.yu.au()}function YO(n){return kh(n)&&!L_(n).ko()&&n._u.size>0}function kh(n){return 0===Je(n).wu.size}function iH(n){n.pu=void 0}function sZ(n){return KO.apply(this,arguments)}function KO(){return KO=(0,Ee.Z)(function*(n){n._u.forEach((e,t)=>{qO(n,e)})}),KO.apply(this,arguments)}function oZ(n,e){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,Ee.Z)(function*(n,e){iH(n),YO(n)?(n.yu.lu(e),WO(n)):n.yu.set("Unknown")}),ZO.apply(this,arguments)}function aZ(n,e,t){return QO.apply(this,arguments)}function QO(){return QO=(0,Ee.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof XU&&2===e.state&&e.cause)try{yield(i=(0,Ee.Z)(function*(r,s){const l=s.cause;for(const d of s.targetIds)r._u.has(d)&&(yield r.remoteSyncer.rejectListen(d,l),r._u.delete(d),r.pu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield $S(n,i)}else if(e instanceof TS?n.pu.ut(e):e instanceof QU?n.pu._t(e):n.pu.ht(e),!t.isEqual(It.min()))try{const i=yield zj(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const l=r.pu.yt(s);return l.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const y=r._u.get(g);y&&r._u.set(g,y.withResumeToken(d.resumeToken,s))}}),l.targetMismatches.forEach(d=>{const g=r._u.get(d);if(!g)return;r._u.set(d,g.withResumeToken(lr.EMPTY_BYTE_STRING,g.snapshotVersion)),nH(r,d);const y=new Th(g.target,d,1,g.sequenceNumber);qO(r,y)}),r.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){Le("RemoteStore","Failed to raise snapshot:",i),yield $S(n,i)}var i}),QO.apply(this,arguments)}function $S(n,e,t){return XO.apply(this,arguments)}function XO(){return XO=(0,Ee.Z)(function*(n,e,t){if(!kp(e))throw e;n.wu.add(1),yield P_(n),n.yu.set("Offline"),t||(t=()=>zj(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Pb(n)}))}),XO.apply(this,arguments)}function rH(n,e){return e().catch(t=>$S(n,t,e))}function N_(n){return JO.apply(this,arguments)}function JO(){return JO=(0,Ee.Z)(function*(n){const e=Je(n),t=Oh(e);let i=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;lZ(e);)try{const r=yield V5(e.localStore,i);if(null===r){0===e.du.length&&t.$o();break}i=r.batchId,cZ(e,r)}catch(r){yield $S(e,r)}sH(e)&&oH(e)}),JO.apply(this,arguments)}function lZ(n){return kh(n)&&n.du.length<10}function cZ(n,e){n.du.push(e);const t=Oh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function sH(n){return kh(n)&&!Oh(n).ko()&&n.du.length>0}function oH(n){Oh(n).start()}function uZ(n){return eF.apply(this,arguments)}function eF(){return eF=(0,Ee.Z)(function*(n){Oh(n).nu()}),eF.apply(this,arguments)}function dZ(n){return tF.apply(this,arguments)}function tF(){return tF=(0,Ee.Z)(function*(n){const e=Oh(n);for(const t of n.du)e.Zo(t.mutations)}),tF.apply(this,arguments)}function hZ(n,e,t){return nF.apply(this,arguments)}function nF(){return nF=(0,Ee.Z)(function*(n,e,t){const i=n.du.shift(),r=bO.from(i,e,t);yield rH(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield N_(n)}),nF.apply(this,arguments)}function fZ(n,e){return iF.apply(this,arguments)}function iF(){return iF=(0,Ee.Z)(function*(n,e){var t;e&&Oh(n).Xo&&(yield(t=(0,Ee.Z)(function*(i,r){if(KU(s=r.code)&&s!==fe.ABORTED){const l=i.du.shift();Oh(i).Fo(),yield rH(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield N_(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),sH(n)&&oH(n)}),iF.apply(this,arguments)}function aH(n,e){return rF.apply(this,arguments)}function rF(){return rF=(0,Ee.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const i=kh(t);t.wu.add(3),yield P_(t),i&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Pb(t)}),rF.apply(this,arguments)}function sF(n,e){return oF.apply(this,arguments)}function oF(){return oF=(0,Ee.Z)(function*(n,e){const t=Je(n);e?(t.wu.delete(2),yield Pb(t)):e||(t.wu.add(2),yield P_(t),t.yu.set("Unknown"))}),oF.apply(this,arguments)}function L_(n){return n.Iu||(n.Iu=function(e,t,i){const r=Je(e);return r.iu(),new eZ(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:sZ.bind(null,n),eo:oZ.bind(null,n),zo:aZ.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Fo(),YO(n)?WO(n):n.yu.set("Unknown")):(yield n.Iu.stop(),iH(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Oh(n){return n.Tu||(n.Tu=function(e,t,i){const r=Je(e);return r.iu(),new tZ(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:uZ.bind(null,n),eo:fZ.bind(null,n),eu:dZ.bind(null,n),tu:hZ.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Tu.Fo(),yield N_(n)):(yield n.Tu.stop(),n.du.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class aF{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,i,r,s){const l=Date.now()+i,d=new aF(e,t,l,r,s);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function B_(n,e){if(Ki("AsyncQueue",`${e}: ${n}`),kp(n))return new ke(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class V_{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ke.comparator(t.key,i.key):(t,i)=>Ke.comparator(t.key,i.key),this.keyedMap=gO(),this.sortedSet=new Pi(this.comparator)}static emptySet(e){return new V_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof V_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new V_;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class lH{constructor(){this.Eu=new Pi(Ke.comparator)}track(e){const t=e.doc.key,i=this.Eu.get(t);i?0!==e.type&&3===i.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==i.type?this.Eu=this.Eu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Eu=this.Eu.remove(t):1===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):lt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,i)=>{e.push(i)}),e}}class U_{constructor(e,t,i,r,s,l,d,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,i,r){const s=[];return t.forEach(l=>{s.push({type:0,doc:l})}),new U_(e,t,V_.emptySet(t),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class pZ{constructor(){this.Ru=void 0,this.listeners=[]}}class gZ{constructor(){this.queries=new Ih(e=>OU(e),gb),this.onlineState="Unknown",this.bu=new Set}}function lF(n,e){return cF.apply(this,arguments)}function cF(){return cF=(0,Ee.Z)(function*(n,e){const t=Je(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new pZ),r)try{s.Ru=yield t.onListen(i)}catch(l){const d=B_(l,`Initialization of query '${dO(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,s),s.listeners.push(e),e.Pu(t.onlineState),s.Ru&&e.Vu(s.Ru)&&hF(t)}),cF.apply(this,arguments)}function uF(n,e){return dF.apply(this,arguments)}function dF(){return dF=(0,Ee.Z)(function*(n,e){const t=Je(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),dF.apply(this,arguments)}function mZ(n,e){const t=Je(n);let i=!1;for(const r of e){const l=t.queries.get(r.query);if(l){for(const d of l.listeners)d.Vu(r)&&(i=!0);l.Ru=r}}i&&hF(t)}function _Z(n,e,t){const i=Je(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function hF(n){n.bu.forEach(e=>{e.next()})}class fF{constructor(e,t,i){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=i||{}}Vu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new U_(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=U_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class yZ{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class cH{constructor(e){this.M=e}wi(e){return Tc(this.M,e)}mi(e){return e.metadata.exists?aj(this.M,e.document,!1):Jn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return xr(e)}}class vZ{constructor(e,t,i){this.Ou=e,this.localStore=t,this.M=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uH(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=sn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new cH(this.M);for(const r of e)if(r.metadata.queries){const s=i.wi(r.metadata.name);for(const l of r.metadata.queries){const d=(t.get(l)||wn()).add(s);t.set(l,d)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function U5(n,e,t,i){return PO.apply(this,arguments)}(e.localStore,new cH(e.M),e.documents,e.Ou.id),i=e.$u(e.documents);for(const r of e.queries)yield j5(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function uH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class dH{constructor(e){this.key=e}}class hH{constructor(e){this.key=e}}class fH{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=wn(),this.mutatedKeys=wn(),this.Gu=PU(e),this.Qu=new V_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const i=t?t.zu:new lH,r=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,l=r,d=!1;const g="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((E,x)=>{const M=r.get(E),F=hO(this.query,x)?x:null,B=!!M&&this.mutatedKeys.has(M.key),Q=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let ye=!1;M&&F?M.data.isEqual(F.data)?B!==Q&&(i.track({type:3,doc:F}),ye=!0):this.Hu(M,F)||(i.track({type:2,doc:F}),ye=!0,(g&&this.Gu(F,g)>0||y&&this.Gu(F,y)<0)&&(d=!0)):!M&&F?(i.track({type:0,doc:F}),ye=!0):M&&!F&&(i.track({type:1,doc:M}),ye=!0,(g||y)&&(d=!0)),ye&&(F?(l=l.add(F),s=Q?s.add(E):s.delete(E)):(l=l.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const E="F"===this.query.limitType?l.last():l.first();l=l.delete(E.key),s=s.delete(E.key),i.track({type:1,doc:E})}return{Qu:l,zu:i,ii:d,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Au();s.sort((y,E)=>function(x,M){const F=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return F(x)-F(M)}(y.type,E.type)||this.Gu(y.doc,E.doc)),this.Ju(i);const l=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,g=d!==this.qu;return this.qu=d,0!==s.length||g?{snapshot:new U_(this.query,e.Qu,r,s,e.mutatedKeys,0===d,g,!1),Xu:l}:{Xu:l}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new lH,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=wn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new hH(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new dH(i))}),t}ta(e){this.Uu=e._i,this.Ku=wn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return U_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class wZ{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class bZ{constructor(e){this.key=e,this.na=!1}}class CZ{constructor(e,t,i,r,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.sa={},this.ia=new Ih(d=>OU(d),gb),this.ra=new Map,this.oa=new Set,this.ua=new Pi(Ke.comparator),this.aa=new Map,this.ca=new LO,this.ha={},this.la=new Map,this.fa=Vp.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function EZ(n,e){return pF.apply(this,arguments)}function pF(){return pF=(0,Ee.Z)(function*(n,e){const t=LF(n);let i,r;const s=t.ia.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.ea();else{const l=yield O_(t.localStore,Pa(e));t.isPrimaryClient&&GS(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield gF(t,e,i,"current"===d)}return r}),pF.apply(this,arguments)}function gF(n,e,t,i){return mF.apply(this,arguments)}function mF(){return mF=(0,Ee.Z)(function*(n,e,t,i){n._a=(E,x,M)=>{return(F=(0,Ee.Z)(function*(B,Q,ye,Oe){let Ze=Q.view.Wu(ye);Ze.ii&&(Ze=yield VS(B.localStore,Q.query,!1).then(({documents:Nt})=>Q.view.Wu(Nt,Ze)));const ct=Oe&&Oe.targetChanges.get(Q.targetId),st=Q.view.applyChanges(Ze,B.isPrimaryClient,ct);return SF(B,Q.targetId,st.Xu),st.snapshot}),function(B,Q,ye,Oe){return F.apply(this,arguments)})(n,E,x,M);var F};const r=yield VS(n.localStore,e,!0),s=new fH(e,r._i),l=s.Wu(r.documents),d=bb.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),g=s.applyChanges(l,n.isPrimaryClient,d);SF(n,t,g.Xu);const y=new wZ(e,t,s);return n.ia.set(e,y),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),g.snapshot}),mF.apply(this,arguments)}function DZ(n,e){return _F.apply(this,arguments)}function _F(){return _F=(0,Ee.Z)(function*(n,e){const t=Je(n),i=t.ia.get(e),r=t.ra.get(i.targetId);if(r.length>1)return t.ra.set(i.targetId,r.filter(s=>!gb(s,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield F_(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Nb(t.remoteStore,i.targetId),j_(t,i.targetId)}).catch(Up))):(j_(t,i.targetId),yield F_(t.localStore,i.targetId,!0))}),_F.apply(this,arguments)}function yF(){return yF=(0,Ee.Z)(function*(n,e,t){const i=BF(n);try{const r=yield function(s,l){const d=Je(s),g=Fi.now(),y=l.reduce((x,M)=>x.add(M.key),wn());let E;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>d.fi.Ks(x,y).next(M=>{E=M;const F=[];for(const B of l){const Q=M4(B,E.get(B.key));null!=Q&&F.push(new Rp(B.key,Q,bU(Q.value.mapValue),Zi.exists(!0)))}return d.Bs.addMutationBatch(x,g,F,l)})).then(x=>(x.applyToLocalDocumentSet(E),{batchId:x.batchId,changes:E}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,d){let g=s.ha[s.currentUser.toKey()];g||(g=new Pi(Ut)),g=g.insert(l,d),s.ha[s.currentUser.toKey()]=g}(i,r.batchId,t),yield Yu(i,r.changes),yield N_(i.remoteStore)}catch(r){const s=B_(r,"Failed to persist write");t.reject(s)}}),yF.apply(this,arguments)}function pH(n,e){return vF.apply(this,arguments)}function vF(){return vF=(0,Ee.Z)(function*(n,e){const t=Je(n);try{const i=yield B5(t.localStore,e);e.targetChanges.forEach((r,s)=>{const l=t.aa.get(s);l&&(kt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.na=!0:r.modifiedDocuments.size>0?kt(l.na):r.removedDocuments.size>0&&(kt(l.na),l.na=!1))}),yield Yu(t,i,e)}catch(i){yield Up(i)}}),vF.apply(this,arguments)}function gH(n,e,t){const i=Je(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ia.forEach((s,l)=>{const d=l.view.Pu(e);d.snapshot&&r.push(d.snapshot)}),function(s,l){const d=Je(s);d.onlineState=l;let g=!1;d.queries.forEach((y,E)=>{for(const x of E.listeners)x.Pu(l)&&(g=!0)}),g&&hF(d)}(i.eventManager,e),r.length&&i.sa.zo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function SZ(n,e,t){return wF.apply(this,arguments)}function wF(){return wF=(0,Ee.Z)(function*(n,e,t){const i=Je(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.aa.get(e),s=r&&r.key;if(s){let l=new Pi(Ke.comparator);l=l.insert(s,Jn.newNoDocument(s,It.min()));const d=wn().add(s),g=new wb(It.min(),new Map,new zn(Ut),l,d);yield pH(i,g),i.ua=i.ua.remove(s),i.aa.delete(e),AF(i)}else yield F_(i.localStore,e,!1).then(()=>j_(i,e,t)).catch(Up)}),wF.apply(this,arguments)}function AZ(n,e){return bF.apply(this,arguments)}function bF(){return bF=(0,Ee.Z)(function*(n,e){const t=Je(n),i=e.batch.batchId;try{const r=yield L5(t.localStore,e);xF(t,i,null),DF(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Yu(t,r)}catch(r){yield Up(r)}}),bF.apply(this,arguments)}function IZ(n,e,t){return CF.apply(this,arguments)}function CF(){return CF=(0,Ee.Z)(function*(n,e,t){const i=Je(n);try{const r=yield function(s,l){const d=Je(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return d.Bs.lookupMutationBatch(g,l).next(E=>(kt(null!==E),y=E.keys(),d.Bs.removeMutationBatch(g,E))).next(()=>d.Bs.performConsistencyCheck(g)).next(()=>d.fi.Ks(g,y))})}(i.localStore,e);xF(i,e,t),DF(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Yu(i,r)}catch(r){yield Up(r)}}),CF.apply(this,arguments)}function EF(){return EF=(0,Ee.Z)(function*(n,e){const t=Je(n);kh(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const l=Je(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.Bs.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===i)return void e.resolve();const r=t.la.get(i)||[];r.push(e),t.la.set(i,r)}catch(i){const r=B_(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),EF.apply(this,arguments)}function DF(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function xF(n,e,t){const i=Je(n);let r=i.ha[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.ha[i.currentUser.toKey()]=r}}function j_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ra.get(e))n.ia.delete(i),t&&n.sa.wa(i,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(i=>{n.ca.containsKey(i)||mH(n,i)})}function mH(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Nb(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),AF(n))}function SF(n,e,t){for(const i of t)i instanceof dH?(n.ca.addReference(i.key,e),MZ(n,i)):i instanceof hH?(Le("SyncEngine","Document no longer in limbo: "+i.key),n.ca.removeReference(i.key,e),n.ca.containsKey(i.key)||mH(n,i.key)):lt()}function MZ(n,e){const t=e.key,i=t.path.canonicalString();n.ua.get(t)||n.oa.has(i)||(Le("SyncEngine","New document in limbo: "+t),n.oa.add(i),AF(n))}function AF(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Ke(sn.fromString(e)),i=n.fa.next();n.aa.set(i,new bZ(t)),n.ua=n.ua.insert(t,i),GS(n.remoteStore,new Th(Pa(D_(t.path)),i,2,Ko.A))}}function Yu(n,e,t){return IF.apply(this,arguments)}function IF(){return IF=(0,Ee.Z)(function*(n,e,t){const i=Je(n),r=[],s=[],l=[];var d;i.ia.isEmpty()||(i.ia.forEach((d,g)=>{l.push(i._a(g,e,t).then(y=>{if(y){i.isPrimaryClient&&i.sharedClientState.updateQueryState(g.targetId,y.fromCache?"not-current":"current"),r.push(y);const E=kO.Ys(g.targetId,y);s.push(E)}}))}),yield Promise.all(l),i.sa.zo(r),yield(d=(0,Ee.Z)(function*(g,y){const E=Je(g);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ge.forEach(y,M=>ge.forEach(M.Hs,F=>E.persistence.referenceDelegate.addReference(x,M.targetId,F)).next(()=>ge.forEach(M.Js,F=>E.persistence.referenceDelegate.removeReference(x,M.targetId,F)))))}catch(x){if(!kp(x))throw x;Le("LocalStore","Failed to update sequence numbers: "+x)}for(const x of y){const M=x.targetId;if(!x.fromCache){const F=E.ui.get(M),Q=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);E.ui=E.ui.insert(M,Q)}}}),function(g,y){return d.apply(this,arguments)})(i.localStore,s))}),IF.apply(this,arguments)}function RZ(n,e){return TF.apply(this,arguments)}function TF(){return TF=(0,Ee.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const i=yield $j(t.localStore,e);t.currentUser=e,(r=t).la.forEach(l=>{l.forEach(d=>{d.reject(new ke(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.la.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Yu(t,i.di)}var r}),TF.apply(this,arguments)}function kZ(n,e){const t=Je(n),i=t.aa.get(e);if(i&&i.na)return wn().add(i.key);{let r=wn();const s=t.ra.get(e);if(!s)return r;for(const l of s){const d=t.ia.get(l);r=r.unionWith(d.view.ju)}return r}}function OZ(n,e){return MF.apply(this,arguments)}function MF(){return MF=(0,Ee.Z)(function*(n,e){const t=Je(n),i=yield VS(t.localStore,e.query,!0),r=e.view.ta(i);return t.isPrimaryClient&&SF(t,e.targetId,r.Xu),r}),MF.apply(this,arguments)}function FZ(n,e){return RF.apply(this,arguments)}function RF(){return RF=(0,Ee.Z)(function*(n,e){const t=Je(n);return Yj(t.localStore,e).then(i=>Yu(t,i))}),RF.apply(this,arguments)}function PZ(n,e,t,i){return kF.apply(this,arguments)}function kF(){return kF=(0,Ee.Z)(function*(n,e,t,i){const r=Je(n),s=yield function(l,d){const g=Je(l),y=Je(g.Bs);return g.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.fn(E,d).next(x=>x?g.fi.Ks(E,x):ge.resolve(null)))}(r.localStore,e);var d;null!==s?("pending"===t?yield N_(r.remoteStore):"acknowledged"===t||"rejected"===t?(xF(r,e,i||null),DF(r,e),d=e,Je(Je(r.localStore).Bs)._n(d)):lt(),yield Yu(r,s)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),kF.apply(this,arguments)}function OF(){return OF=(0,Ee.Z)(function*(n,e){const t=Je(n);if(LF(t),BF(t),!0===e&&!0!==t.da){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield _H(t,i.toArray());t.da=!0,yield sF(t.remoteStore,!0);for(const s of r)GS(t.remoteStore,s)}else if(!1===e&&!1!==t.da){const i=[];let r=Promise.resolve();t.ra.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(j_(t,l),F_(t.localStore,l,!0))),Nb(t.remoteStore,l)}),yield r,yield _H(t,i),function(s){const l=Je(s);l.aa.forEach((d,g)=>{Nb(l.remoteStore,g)}),l.ca.Si(),l.aa=new Map,l.ua=new Pi(Ke.comparator)}(t),t.da=!1,yield sF(t.remoteStore,!1)}}),OF.apply(this,arguments)}function _H(n,e,t){return FF.apply(this,arguments)}function FF(){return FF=(0,Ee.Z)(function*(n,e,t){const i=Je(n),r=[],s=[];for(const l of e){let d;const g=i.ra.get(l);if(g&&0!==g.length){d=yield O_(i.localStore,Pa(g[0]));for(const y of g){const E=i.ia.get(y),x=yield OZ(i,E);x.snapshot&&s.push(x.snapshot)}}else{const y=yield Wj(i.localStore,l);d=yield O_(i.localStore,y),yield gF(i,yH(y),l,!1)}r.push(d)}return i.sa.zo(s),r}),FF.apply(this,arguments)}function yH(n){return RU(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function LZ(n){const e=Je(n);return Je(Je(e.localStore).persistence).Fs()}function BZ(n,e,t,i){return PF.apply(this,arguments)}function PF(){return PF=(0,Ee.Z)(function*(n,e,t,i){const r=Je(n);if(r.da)return void Le("SyncEngine","Ignoring unexpected query state notification.");const s=r.ra.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield Yj(r.localStore,FU(s[0])),d=wb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Yu(r,l,d);break}case"rejected":yield F_(r.localStore,e,!0),j_(r,e,i);break;default:lt()}}),PF.apply(this,arguments)}function VZ(n,e,t){return NF.apply(this,arguments)}function NF(){return NF=(0,Ee.Z)(function*(n,e,t){const i=LF(n);if(i.da){for(const r of e){if(i.ra.has(r)){Le("SyncEngine","Adding an already active target "+r);continue}const s=yield Wj(i.localStore,r),l=yield O_(i.localStore,s);yield gF(i,yH(s),l.targetId,!1),GS(i.remoteStore,l)}for(const r of t)i.ra.has(r)&&(yield F_(i.localStore,r,!1).then(()=>{Nb(i.remoteStore,r),j_(i,r)}).catch(Up))}}),NF.apply(this,arguments)}function LF(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SZ.bind(null,e),e.sa.zo=mZ.bind(null,e.eventManager),e.sa.wa=_Z.bind(null,e.eventManager),e}function BF(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IZ.bind(null,e),e}class vH{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.M=Fb(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Gj(this.persistence,new Hj,e.initialUser,this.M)}ya(e){return new Y5(BO.Yi,this.M)}ga(e){return new Xj}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wH extends vH{constructor(e,t,i){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield t().call(i,e),yield i.Ta.initialize(i,e),yield BF(i.Ta.syncEngine),yield N_(i.Ta.remoteStore),yield i.persistence.Ts(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}Ia(e){return Gj(this.persistence,new Hj,e.initialUser,this.M)}pa(e){return new T5(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=RO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?wo.withCacheSize(this.cacheSizeBytes):wo.DEFAULT;return new MO(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,eH(),HS(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Xj}}class jZ extends wH{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield t().call(i,e);const r=i.Ta.syncEngine;i.sharedClientState instanceof HO&&(i.sharedClientState.syncEngine={$r:PZ.bind(null,r),Br:BZ.bind(null,r),Lr:VZ.bind(null,r),Fs:LZ.bind(null,r),Fr:FZ.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ts(function(){var s=(0,Ee.Z)(function*(l){yield function NZ(n,e){return OF.apply(this,arguments)}(i.Ta.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):l||i.gcScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}ga(e){const t=eH();if(!HO.vt(t))throw new ke(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=RO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new HO(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class VF{initialize(e,t){var i=this;return(0,Ee.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>gH(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=RZ.bind(null,i.syncEngine),yield sF(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new gZ}createDatastore(e){const t=Fb(e.databaseInfo.databaseId),i=new J5(e.databaseInfo);return new nZ(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=d=>gH(this.syncEngine,d,0),l=Jj.vt()?new Jj:new Z5,new rZ(t,i,r,s,l);var t,i,r,s,l}createSyncEngine(e,t){return function(i,r,s,l,d,g,y){const E=new CZ(i,r,s,l,d,g);return y&&(E.da=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const i=Je(t);Le("RemoteStore","RemoteStore shutting down."),i.wu.add(5),yield P_(i),i.gu.shutdown(),i.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bH(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class zS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class HZ{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Dr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(i=>{i&&i.Mu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Va();if(null===t)return null;const i=e.ba.decode(t),r=Number(i);isNaN(r)&&e.va(`length string (${i}) is not valid number`);const s=yield e.Sa(r);return new yZ(JSON.parse(s),t.length+r)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ee.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Sa(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const i=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class GZ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ee.Z)(function*(s,l){const d=Je(s),g=Db(d.M)+"/documents",y={documents:l.map(F=>Eb(d.M,F))},E=yield d._o("BatchGetDocuments",g,y),x=new Map;E.forEach(F=>{const B=function H4(n,e){return"found"in e?function(t,i){kt(!!i.found);const r=Tc(t,i.found.name),s=xr(i.found.updateTime),l=new ms({mapValue:{fields:i.found.fields}});return Jn.newFoundDocument(r,s,l)}(n,e):"missing"in e?function(t,i){kt(!!i.missing),kt(!!i.readTime);const r=Tc(t,i.missing),s=xr(i.readTime);return Jn.newNoDocument(r,s)}(n,e):lt()}(d.M,F);x.set(B.key.toString(),B)});const M=[];return l.forEach(F=>{const B=x.get(F.toString());kt(!!B),M.push(B)}),M}),function(s,l){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new yb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=Ke.fromPath(r);e.mutations.push(new pO(s,e.precondition(s)))}),yield(i=(0,Ee.Z)(function*(r,s){const l=Je(r),d=Db(l.M)+"/documents",g={writes:s.map(y=>xb(l.M,y))};yield l.co("Commit",d,g)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=It.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ke(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Zi.updateTime(t):Zi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new ke(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zi.updateTime(t)}return Zi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $Z{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.xa=i.maxAttempts,this.No=new GO(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ee.Z)(function*(){const t=new GZ(e.datastore),i=e.ka(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Ma(s)}))}).catch(r=>{e.Ma(r)})}))}ka(e){try{const t=this.updateFunction(e);return!lb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!KU(t)}return!1}}class zZ{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=zr.UNAUTHENTICATED,this.clientId=cU.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,Ee.Z)(function*(d){Le("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(Le("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=B_(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function CH(n,e){return UF.apply(this,arguments)}function UF(){return UF=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ee.Z)(function*(s){i.isEqual(s)||(yield $j(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),UF.apply(this,arguments)}function EH(n,e){return jF.apply(this,arguments)}function jF(){return jF=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield HF(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>aH(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>aH(e.remoteStore,s)),n.onlineComponents=e}),jF.apply(this,arguments)}function HF(n){return GF.apply(this,arguments)}function GF(){return GF=(0,Ee.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield CH(n,new vH)),n.offlineComponents}),GF.apply(this,arguments)}function qS(n){return $F.apply(this,arguments)}function $F(){return $F=(0,Ee.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield EH(n,new VF)),n.onlineComponents}),$F.apply(this,arguments)}function DH(n){return HF(n).then(e=>e.persistence)}function zF(n){return HF(n).then(e=>e.localStore)}function xH(n){return qS(n).then(e=>e.remoteStore)}function qF(n){return qS(n).then(e=>e.syncEngine)}function H_(n){return WF.apply(this,arguments)}function WF(){return WF=(0,Ee.Z)(function*(n){const e=yield qS(n),t=e.eventManager;return t.onListen=EZ.bind(null,e.syncEngine),t.onUnlisten=DZ.bind(null,e.syncEngine),t}),WF.apply(this,arguments)}function SH(n,e,t={}){const i=new Dr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,l,d,g){const y=new zS({next:x=>{s.enqueueAndForget(()=>uF(r,E));const M=x.docs.has(l);!M&&x.fromCache?g.reject(new ke(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&x.fromCache&&d&&"server"===d.source?g.reject(new ke(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(x)},error:x=>g.reject(x)}),E=new fF(D_(l.path),y,{includeMetadataChanges:!0,ku:!0});return lF(r,E)}(yield H_(n),n.asyncQueue,e,t,i)})),i.promise}function AH(n,e,t={}){const i=new Dr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,l,d,g){const y=new zS({next:x=>{s.enqueueAndForget(()=>uF(r,E)),x.fromCache&&"server"===d.source?g.reject(new ke(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),E=new fF(l,y,{includeMetadataChanges:!0,ku:!0});return lF(r,E)}(yield H_(n),n.asyncQueue,e,t,i)})),i.promise}const IH=new Map;function YF(n,e,t){if(!t)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TH(n,e,t,i){if(!0===e&&!0===i)throw new ke(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MH(n){if(!Ke.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RH(n){if(Ke.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=WS(n);throw new ke(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kH(n,e){if(e<=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class OH{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,TH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lb{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OH({}),this._settingsFrozen=!1,e instanceof qu?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ke(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qu(r.options.projectId)}(e))}get app(){if(!this._app)throw new ke(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OH(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new J8;switch(t.type){case"gapi":const i=t.client;return kt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new i4(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=IH.get(e);t&&(Le("ComponentProvider","Removing Datastore"),IH.delete(e),t.terminate())}(this),Promise.resolve()}}class ei{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ei(this.firestore,e,this._key)}}class _s{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class Rc extends _s{constructor(e,t,i){super(e,t,D_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ei(this.firestore,null,new Ke(e))}withConverter(e){return new Rc(this.firestore,e,this._path)}}function FH(n,e,...t){if(n=(0,N.m9)(n),YF("collection","path",e),n instanceof Lb){const i=sn.fromString(e,...t);return RH(i),new Rc(n,null,i)}{if(!(n instanceof ei||n instanceof Rc))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(sn.fromString(e,...t));return RH(i),new Rc(n.firestore,null,i)}}function YS(n,e,...t){if(n=(0,N.m9)(n),1===arguments.length&&(e=cU.R()),YF("doc","path",e),n instanceof Lb){const i=sn.fromString(e,...t);return MH(i),new ei(n,null,new Ke(i))}{if(!(n instanceof ei||n instanceof Rc))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(sn.fromString(e,...t));return MH(i),new ei(n.firestore,n instanceof Rc?n.converter:null,new Ke(i))}}function PH(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),(n instanceof ei||n instanceof Rc)&&(e instanceof ei||e instanceof Rc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function NH(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),n instanceof _s&&e instanceof _s&&n.firestore===e.firestore&&gb(n._query,e._query)&&n.converter===e.converter}class n7{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new GO(this,"async_queue_retry"),this.Qa=()=>{const t=HS();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=HS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=HS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Dr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!kp(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(i=>{throw this.Ua=i,this.qa=!1,Ki("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(i)),i}).then(i=>(this.qa=!1,i))));return this.Fa=t,t}enqueueAfterDelay(e,t,i){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const r=aF.createAndSchedule(this,e,t,i,s=>this.Ha(s));return this.La.push(r),r}ja(){this.Ua&&lt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function KF(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class i7{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ai extends Lb{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new n7,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||LH(this),this._firestoreClient.terminate()}}function Xi(n){return n._firestoreClient||LH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function LH(n){var e;const t=n._freezeSettings(),i=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new c4(n._databaseId,s,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new zZ(n._authCredentials,n._appCheckCredentials,n._queue,i)}function BH(n,e,t){const i=new Dr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield CH(n,t),yield EH(n,e),i.resolve()}catch(r){if(!("FirebaseError"===(s=r).name?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var s})).then(()=>i.promise)}function VH(n){if(n._initialized||n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ku{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kc(lr.fromBase64String(e))}catch(t){throw new ke(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kc(lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Hp{constructor(e){this._methodName=e}}class KS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const f7=/^__.*__$/;class p7{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Rp(e,this.data,this.fieldMask,t,this.fieldTransforms):new _b(e,this.data,t,this.fieldTransforms)}}class UH{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Rp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class ZS{constructor(e,t,i,r,s,l){this.settings=e,this.databaseId=t,this.M=i,this.ignoreUndefinedProperties=r,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new ZS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:i,ic:!1});return r.rc(e),r}oc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:i,ic:!1});return r.tc(),r}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return JS(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(jH(this.ec)&&f7.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class g7{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=i||Fb(e)}lc(e,t,i,r=!1){return new ZS({ec:e,methodName:t,hc:i,path:ar.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Gp(n){const e=n._freezeSettings(),t=Fb(n._databaseId);return new g7(n._databaseId,!!e.ignoreUndefinedProperties,t)}function QS(n,e,t,i,r,s={}){const l=n.lc(s.merge||s.mergeFields?2:0,e,t,r);JF("Data must be an object, but it was:",l,i);const d=$H(i,l);let g,y;if(s.merge)g=new w_(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const E=[];for(const x of s.mergeFields){const M=eP(e,x,t);if(!l.contains(M))throw new ke(fe.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);qH(E,M)||E.push(M)}g=new w_(E),y=l.fieldTransforms.filter(x=>g.covers(x.field))}else g=null,y=l.fieldTransforms;return new p7(new ms(d),g,y)}class Bb extends Hp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bb}}function HH(n,e,t){return new ZS({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class ZF extends Hp{_toFieldTransform(e){return new mb(e.path,new S_)}isEqual(e){return e instanceof ZF}}class m7 extends Hp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=HH(this,e,!0),i=this.fc.map(s=>$p(s,t)),r=new Tp(i);return new mb(e.path,r)}isEqual(e){return this===e}}class _7 extends Hp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=HH(this,e,!0),i=this.fc.map(s=>$p(s,t)),r=new Mp(i);return new mb(e.path,r)}isEqual(e){return this===e}}class y7 extends Hp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new A_(e.M,BU(e.M,this.dc));return new mb(e.path,t)}isEqual(e){return this===e}}function QF(n,e,t,i){const r=n.lc(1,e,t);JF("Data must be an object, but it was:",r,i);const s=[],l=ms.empty();Ep(i,(g,y)=>{const E=XS(e,g,t);y=(0,N.m9)(y);const x=r.oc(E);if(y instanceof Bb)s.push(E);else{const M=$p(y,x);null!=M&&(s.push(E),l.set(E,M))}});const d=new w_(s);return new UH(l,d,r.fieldTransforms)}function XF(n,e,t,i,r,s){const l=n.lc(1,e,t),d=[eP(e,i,t)],g=[r];if(s.length%2!=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)d.push(eP(e,s[M])),g.push(s[M+1]);const y=[],E=ms.empty();for(let M=d.length-1;M>=0;--M)if(!qH(y,d[M])){const F=d[M];let B=g[M];B=(0,N.m9)(B);const Q=l.oc(F);if(B instanceof Bb)y.push(F);else{const ye=$p(B,Q);null!=ye&&(y.push(F),E.set(F,ye))}}const x=new w_(y);return new UH(E,x,l.fieldTransforms)}function GH(n,e,t,i=!1){return $p(t,n.lc(i?4:3,e))}function $p(n,e){if(zH(n=(0,N.m9)(n)))return JF("Unsupported field value:",e,n),$H(n,e);if(n instanceof Hp)return function(t,i){if(!jH(i.ec))throw i.ac(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ac(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const l of t){let d=$p(l,i.uc(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,N.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return BU(i.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Fi.fromDate(t);return{timestampValue:Cb(i.M,r)}}if(t instanceof Fi){const r=new Fi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cb(i.M,r)}}if(t instanceof KS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof kc)return{bytesValue:nj(i.M,t._byteString)};if(t instanceof ei){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:mO(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ac(`Unsupported field value: ${WS(t)}`)}(n,e)}function $H(n,e){const t={};return hU(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ep(n,(i,r)=>{const s=$p(r,e.sc(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function zH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fi||n instanceof KS||n instanceof kc||n instanceof ei||n instanceof Hp)}function JF(n,e,t){if(!zH(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=WS(t);throw e.ac("an object"===i?n+" a custom object":n+" "+i)}var i}function eP(n,e,t){if((e=(0,N.m9)(e))instanceof Ku)return e._internalPath;if("string"==typeof e)return XS(n,e);throw JS("Field path arguments must be of type string or ",n,!1,void 0,t)}const v7=new RegExp("[~\\*/\\[\\]]");function XS(n,e,t){if(e.search(v7)>=0)throw JS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ku(...e.split("."))._internalPath}catch(i){throw JS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function JS(n,e,t,i,r){const s=i&&!i.isEmpty(),l=void 0!==r;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(s||l)&&(g+=" (found",s&&(g+=` in field ${i}`),l&&(g+=` in document ${r}`),g+=")"),new ke(fe.INVALID_ARGUMENT,d+n+g)}function qH(n,e){return n.some(t=>t.isEqual(e))}class Vb{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ei(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new w7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class w7 extends Vb{data(){return super.data()}}function eA(n,e){return"string"==typeof e?XS(n,e):e instanceof Ku?e._internalPath:e._delegate._internalPath}class zp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zu extends Vb{constructor(e,t,i,r,s,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ub(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(eA("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Ub extends Zu{data(e={}){return super.data(e)}}class Fh{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ub(this._firestore,this._userDataWriter,i.key,i,new zp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new Ub(i._firestore,i._userDataWriter,l.doc.key,l.doc,new zp(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const d=new Ub(i._firestore,i._userDataWriter,l.doc.key,l.doc,new zp(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,y=-1;return 0!==l.type&&(g=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:b7(l.type),doc:d,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function b7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function WH(n,e){return n instanceof Zu&&e instanceof Zu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fh&&e instanceof Fh&&n._firestore===e._firestore&&NH(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function YH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jb{}function Ph(n,...e){for(const t of e)n=t._apply(n);return n}class C7 extends jb{constructor(e,t,i){super(),this._c=e,this.wc=t,this.mc=i,this.type="where"}_apply(e){const t=Gp(e.firestore),i=function(r,s,l,d,g,y,E){let x;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){eG(E,y);const F=[];for(const B of E)F.push(JH(d,r,B));x={arrayValue:{values:F}}}else x=JH(d,r,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||eG(E,y),x=GH(l,"where",E,"in"===y||"not-in"===y);const M=Wr.create(g,y,x);return function(F,B){if(B.S()){const ye=cO(F);if(null!==ye&&!ye.isEqual(B.field))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ye.toString()}' and '${B.field.toString()}'`);const Oe=lO(F);null!==Oe&&tG(0,B.field,Oe)}const Q=function(ye,Oe){for(const Ze of ye.filters)if(Oe.indexOf(Ze.op)>=0)return Ze.op;return null}(F,function(ye){switch(ye){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==Q)throw new ke(fe.INVALID_ARGUMENT,Q===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${Q.toString()}' filters.`)}(r,M),M}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new _s(e.firestore,e.converter,function(r,s){const l=r.filters.concat([s]);return new Wu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),l,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class D7 extends jb{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new E_(r,s);return function(d,g){if(null===lO(d)){const y=cO(d);null!==y&&tG(0,y,g.field)}}(i,l),l}(e._query,this._c,this.gc);return new _s(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Wu(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class KH extends jb{constructor(e,t,i){super(),this.type=e,this.yc=t,this.Ic=i}_apply(e){return new _s(e.firestore,e.converter,kU(e._query,this.yc,this.Ic))}}class ZH extends jb{constructor(e,t,i){super(),this.type=e,this.Tc=t,this.Ec=i}_apply(e){const t=XH(e,this.type,this.Tc,this.Ec);return new _s(e.firestore,e.converter,(r=t,new Wu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class QH extends jb{constructor(e,t,i){super(),this.type=e,this.Tc=t,this.Ec=i}_apply(e){const t=XH(e,this.type,this.Tc,this.Ec);return new _s(e.firestore,e.converter,(r=t,new Wu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function XH(n,e,t,i){if(t[0]=(0,N.m9)(t[0]),t[0]instanceof Vb)return function(r,s,l,d,g){if(!d)throw new ke(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const E of x_(r))if(E.field.isKeyField())y.push(Sp(s,d.key));else{const x=d.data.field(E.field);if(rO(x))throw new ke(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const M=E.field.canonicalString();throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(x)}return new Ah(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Gp(n.firestore);return function(s,l,d,g,y,E){const x=s.explicitOrderBy;if(y.length>x.length)throw new ke(fe.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let F=0;F<y.length;F++){const B=y[F];if(x[F].field.isKeyField()){if("string"!=typeof B)throw new ke(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof B}`);if(!uO(s)&&-1!==B.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${B}' contains a slash.`);const Q=s.path.child(sn.fromString(B));if(!Ke.isDocumentKey(Q))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const ye=new Ke(Q);M.push(Sp(l,ye))}else{const Q=GH(d,g,B);M.push(Q)}}return new Ah(M,E)}(n._query,n.firestore._databaseId,r,e,t,i)}}function JH(n,e,t){if("string"==typeof(t=(0,N.m9)(t))){if(""===t)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uO(e)&&-1!==t.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(sn.fromString(t));if(!Ke.isDocumentKey(i))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Sp(n,new Ke(i))}if(t instanceof ei)return Sp(n,t._key);throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${WS(t)}.`)}function eG(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function tG(n,e,t){if(!t.isEqual(e))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const k7={maxAttempts:5};class tP{convertValue(e,t="none"){switch(xp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const i={};return Ep(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new KS(xi(e.latitude),xi(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=fU(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ab(e));default:return null}}convertTimestamp(e){const t=Dh(e);return new Fi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=sn.fromString(e);kt(hj(i));const r=new qu(i.get(1),i.get(3)),s=new Ke(i.popFirst(5));return r.isEqual(t)||Ki(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function tA(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class O7 extends tP{constructor(e){super(),this.firestore=e}convertBytes(e){return new kc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,t)}}class nG{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gp(e)}set(e,t,i){this._verifyNotCommitted();const r=Nh(e,this._firestore),s=tA(r.converter,t,i),l=QS(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,Zi.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=Nh(e,this._firestore);let l;return l="string"==typeof(t=(0,N.m9)(t))||t instanceof Ku?XF(this._dataReader,"WriteBatch.update",s._key,t,i,r):QF(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,Zi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nh(e,this._firestore);return this._mutations=this._mutations.concat(new yb(t._key,Zi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nh(n,e){if((n=(0,N.m9)(n)).firestore!==e)throw new ke(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class qp extends tP{constructor(e){super(),this.firestore=e}convertBytes(e){return new kc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,t)}}function iG(n,e,t){n=nn(n,ei);const i=nn(n.firestore,ai),r=tA(n.converter,e,t);return G_(i,[QS(Gp(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Zi.none())])}function rG(n,e,t,...i){n=nn(n,ei);const r=nn(n.firestore,ai),s=Gp(r);let l;return l="string"==typeof(e=(0,N.m9)(e))||e instanceof Ku?XF(s,"updateDoc",n._key,e,t,i):QF(s,"updateDoc",n._key,e),G_(r,[l.toMutation(n._key,Zi.exists(!0))])}function sG(n,...e){var t,i,r;n=(0,N.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||KF(e[l])||(s=e[l],l++);const d={includeMetadataChanges:s.includeMetadataChanges};if(KF(e[l])){const x=e[l];e[l]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[l+1]=null===(i=x.error)||void 0===i?void 0:i.bind(x),e[l+2]=null===(r=x.complete)||void 0===r?void 0:r.bind(x)}let g,y,E;if(n instanceof ei)y=nn(n.firestore,ai),E=D_(n._key.path),g={next:x=>{e[l]&&e[l](nP(y,n,x))},error:e[l+1],complete:e[l+2]};else{const x=nn(n,_s);y=nn(x.firestore,ai),E=x._query;const M=new qp(y);g={next:F=>{e[l]&&e[l](new Fh(y,M,x,F))},error:e[l+1],complete:e[l+2]},YH(n._query)}return function(x,M,F,B){const Q=new zS(B),ye=new fF(M,Q,F);return x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return lF(yield H_(x),ye)})),()=>{Q.Aa(),x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return uF(yield H_(x),ye)}))}}(Xi(y),E,d,g)}function G_(n,e){return function(t,i){const r=new Dr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function xZ(n,e,t){return yF.apply(this,arguments)}(yield qF(t),i,r)})),r.promise}(Xi(n),e)}function nP(n,e,t){const i=t.docs.get(e._key),r=new qp(n);return new Zu(n,r,e._key,i,new zp(t.hasPendingWrites,t.fromCache),e.converter)}class G7 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gp(e)}get(e){const t=Nh(e,this._firestore),i=new O7(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return lt();const s=r[0];if(s.isFoundDocument())return new Vb(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new Vb(this._firestore,i,t._key,null,t.converter);throw lt()})}set(e,t,i){const r=Nh(e,this._firestore),s=tA(r.converter,t,i),l=QS(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(e,t,i,...r){const s=Nh(e,this._firestore);let l;return l="string"==typeof(t=(0,N.m9)(t))||t instanceof Ku?XF(this._dataReader,"Transaction.update",s._key,t,i,r):QF(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=Nh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nh(e,this._firestore),i=new qp(this._firestore);return super.get(e).then(r=>new Zu(this._firestore,i,t._key,r._document,new zp(!1,!1),t.converter))}}function iP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function aG(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function lG(){if(!function a4(){return"undefined"!=typeof atob}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){y_=kl.SDK_VERSION,(0,kl._registerComponent)(new Hu.wA("firestore",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),s=new ai(r,new t4(t.getProvider("auth-internal")),new r4(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC")),(0,kl.registerVersion)(oU,"3.4.9",n),(0,kl.registerVersion)(oU,"3.4.9","esm2017")}();class Hb{constructor(e){this._delegate=e}static fromBase64String(e){return lG(),new Hb(kc.fromBase64String(e))}static fromUint8Array(e){return aG(),new Hb(kc.fromUint8Array(e))}toBase64(){return lG(),this._delegate.toBase64()}toUint8Array(){return aG(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function rP(n){return function X7(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class J7{enableIndexedDbPersistence(e,t){return function s7(n,e){VH(n=nn(n,ai));const t=Xi(n),i=n._freezeSettings(),r=new VF;return BH(t,r,new wH(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function o7(n){VH(n=nn(n,ai));const e=Xi(n),t=n._freezeSettings(),i=new VF;return BH(e,i,new jZ(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function a7(n){if(n._initialized&&!n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(i){if(!Pl.vt())return Promise.resolve();const r=i+"main";yield Pl.delete(r)}),function(i){return t.apply(this,arguments)})(RO(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class cG{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof qu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&sb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function e7(n,e,t,i={}){var r;const s=(n=nn(n,Lb))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&sb("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let l,d;if("string"==typeof i.mockUserToken)l=i.mockUserToken,d=zr.MOCK_USER;else{l=(0,N.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new ke(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new zr(g)}n._authCredentials=new e4(new aU(l,d))}}(this._delegate,e,t,i)}enableNetwork(){return function c7(n){return function qZ(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield DH(n),t=yield xH(n);return e.setNetworkEnabled(!0),function(i){const r=Je(i);return r.wu.delete(0),Pb(r)}(t)}))}(Xi(n=nn(n,ai)))}(this._delegate)}disableNetwork(){return function u7(n){return function WZ(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield DH(n),t=yield xH(n);return e.setNetworkEnabled(!1),(i=(0,Ee.Z)(function*(r){const s=Je(r);s.wu.add(0),yield P_(s),s.yu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(Xi(n=nn(n,ai)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,TH("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function l7(n){return function(e){const t=new Dr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function TZ(n,e){return EF.apply(this,arguments)}(yield qF(e),t)})),t.promise}(Xi(n=nn(n,ai)))}(this._delegate)}onSnapshotsInSync(e){return function H7(n,e){return function ZZ(n,e){const t=new zS(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield H_(n),r=t,Je(i).bu.add(r),void r.next();var i,r})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield H_(n),r=t,void Je(i).bu.delete(r);var i,r}))}}(Xi(n=nn(n,ai)),KF(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $_(this,FH(this._delegate,e))}catch(t){throw Hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new La(this,YS(this._delegate,e))}catch(t){throw Hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gs(this,function t7(n,e){if(n=nn(n,Lb),YF("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _s(n,null,(t=e,new Wu(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function $7(n,e,t){n=nn(n,ai);const i=Object.assign(Object.assign({},k7),t);return function(r){if(r.maxAttempts<1)throw new ke(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function QZ(n,e,t){const i=new Dr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const r=yield(s=n,qS(s).then(l=>l.datastore));var s;new $Z(n.asyncQueue,r,t,e,i).run()})),i.promise}(Xi(n),r=>e(new G7(n,r)),i)}(this._delegate,t=>e(new uG(this,t)))}batch(){return Xi(this._delegate),new dG(new nG(this._delegate,e=>G_(this._delegate,e)))}loadBundle(e){return function d7(n,e){const t=Xi(n=nn(n,ai)),i=new i7;return function XZ(n,e,t,i){const r=function(s,l){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,g=function(g,y){if(g instanceof Uint8Array)return bH(g,y);if(g instanceof ArrayBuffer)return bH(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new HZ(g,l);var g}(t,Fb(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function UZ(n,e,t){const i=Je(n);var r;(r=(0,Ee.Z)(function*(s,l,d){try{const g=yield l.getMetadata();if(yield function(M,F){const B=Je(M),Q=xr(F.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",ye=>B._s.getBundleMetadata(ye,F.id)).then(ye=>!!ye&&ye.createTime.compareTo(Q)>=0)}(s.localStore,g))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(M=g).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);d._updateProgress(uH(g));const y=new vZ(g,s.localStore,l.M);let E=yield l.ma();for(;E;){const M=yield y.Fu(E);M&&d._updateProgress(M),E=yield l.ma()}const x=yield y.complete();return yield Yu(s,x.Lu,void 0),yield function(M,F){const B=Je(M);return B.persistence.runTransaction("Save bundle","readwrite",Q=>B._s.saveBundleMetadata(Q,F))}(s.localStore,g),d._completeWith(x.progress),Promise.resolve(x.Bu)}catch(g){return sb("SyncEngine",`Loading bundle failed with ${g}`),d._failWith(g),Promise.resolve(new Set)}var M}),function(s,l,d){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield qF(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function h7(n,e){return function JZ(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,i){const r=Je(t);return r.persistence.runTransaction("Get named query","readonly",s=>r._s.getNamedQuery(s,i))}(yield zF(n),e)}))}(Xi(n=nn(n,ai)),e).then(t=>t?new _s(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Gs(this,t):null)}}class nA extends tP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hb(new kc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return La.forKey(t,this.firestore,null)}}class uG{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nA(e)}get(e){const t=Yp(e);return this._delegate.get(t).then(i=>new Gb(this._firestore,new Zu(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Yp(e);return i?(iP("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Yp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Yp(e);return this._delegate.delete(t),this}}class dG{constructor(e){this._delegate=e}set(e,t,i){const r=Yp(e);return i?(iP("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Yp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Yp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wp{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Ub(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $b(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Wp.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Wp(e,new nA(e),t),r.set(t,s)),s}}Wp.INSTANCES=new WeakMap;class La{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nA(e)}static forPath(e,t,i){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new La(t,new ei(t._delegate,i,new Ke(e)))}static forKey(e,t,i){return new La(t,new ei(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new $_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $_(this.firestore,FH(this._delegate,e))}catch(t){throw Hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.m9)(e))instanceof ei&&PH(this._delegate,e)}set(e,t){t=iP("DocumentReference.set",t);try{return t?iG(this._delegate,e,t):iG(this._delegate,e)}catch(i){throw Hs(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?rG(this._delegate,e):rG(this._delegate,e,t,...i)}catch(r){throw Hs(r,"updateDoc()","DocumentReference.update()")}}delete(){return function U7(n){return G_(nn(n.firestore,ai),[new yb(n._key,Zi.none())])}(this._delegate)}onSnapshot(...e){const t=hG(e),i=fG(e,r=>new Gb(this.firestore,new Zu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return sG(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function P7(n){n=nn(n,ei);const e=nn(n.firestore,ai),t=Xi(e),i=new qp(e);return function YZ(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,l){try{const d=yield function(g,y){const E=Je(g);return E.persistence.runTransaction("read document","readonly",x=>E.fi.Ls(x,y))}(r,s);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new ke(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const g=B_(d,`Failed to get document '${s} from cache`);l.reject(g)}}),function(r,s,l){return i.apply(this,arguments)})(yield zF(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Zu(e,i,n._key,r,new zp(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function N7(n){n=nn(n,ei);const e=nn(n.firestore,ai);return SH(Xi(e),n._key,{source:"server"}).then(t=>nP(e,n,t))}(this._delegate):function F7(n){n=nn(n,ei);const e=nn(n.firestore,ai);return SH(Xi(e),n._key).then(t=>nP(e,n,t))}(this._delegate),t.then(i=>new Gb(this.firestore,new Zu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new La(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}function Hs(n,e,t){return n.message=n.message.replace(e,t),n}function hG(n){for(const e of n)if("object"==typeof e&&!rP(e))return e;return{}}function fG(n,e){var t,i;let r;return r=rP(n[0])?n[0]:rP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Gb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new La(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return WH(this._delegate,e._delegate)}}class $b extends Gb{data(e){const t=this._delegate.data(e);return function X8(n,e){n||lt()}(void 0!==t),t}}class Gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nA(e)}where(e,t,i){try{return new Gs(this.firestore,Ph(this._delegate,function E7(n,e,t){const i=e,r=eA("where",n);return new C7(r,i,t)}(e,t,i)))}catch(r){throw Hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Gs(this.firestore,Ph(this._delegate,function x7(n,e="asc"){const t=e,i=eA("orderBy",n);return new D7(i,t)}(e,t)))}catch(i){throw Hs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Gs(this.firestore,Ph(this._delegate,function S7(n){return kH("limit",n),new KH("limit",n,"F")}(e)))}catch(t){throw Hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Gs(this.firestore,Ph(this._delegate,function A7(n){return kH("limitToLast",n),new KH("limitToLast",n,"L")}(e)))}catch(t){throw Hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Gs(this.firestore,Ph(this._delegate,function I7(...n){return new ZH("startAt",n,!0)}(...e)))}catch(t){throw Hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Gs(this.firestore,Ph(this._delegate,function T7(...n){return new ZH("startAfter",n,!1)}(...e)))}catch(t){throw Hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Gs(this.firestore,Ph(this._delegate,function M7(...n){return new QH("endBefore",n,!1)}(...e)))}catch(t){throw Hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Gs(this.firestore,Ph(this._delegate,function R7(...n){return new QH("endAt",n,!0)}(...e)))}catch(t){throw Hs(t,"endAt()","Query.endAt()")}}isEqual(e){return NH(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function B7(n){n=nn(n,_s);const e=nn(n.firestore,ai),t=Xi(e),i=new qp(e);return function KZ(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,l){try{const d=yield VS(r,s,!0),g=new fH(s,d._i),y=g.Wu(d.documents),E=g.applyChanges(y,!1);l.resolve(E.snapshot)}catch(d){const g=B_(d,`Failed to execute query '${s} against cache`);l.reject(g)}}),function(r,s,l){return i.apply(this,arguments)})(yield zF(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Fh(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function V7(n){n=nn(n,_s);const e=nn(n.firestore,ai),t=Xi(e),i=new qp(e);return AH(t,n._query,{source:"server"}).then(r=>new Fh(e,i,n,r))}(this._delegate):function L7(n){n=nn(n,_s);const e=nn(n.firestore,ai),t=Xi(e),i=new qp(e);return YH(n._query),AH(t,n._query).then(r=>new Fh(e,i,n,r))}(this._delegate),t.then(i=>new sP(this.firestore,new Fh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=hG(e),i=fG(e,r=>new sP(this.firestore,new Fh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return sG(this._delegate,t,i)}withConverter(e){return new Gs(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}class tQ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $b(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class sP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $b(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new tQ(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new $b(this._firestore,i))})}isEqual(e){return WH(this._delegate,e._delegate)}}class $_ extends Gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new La(this.firestore,e):null}doc(e){try{return new La(this.firestore,void 0===e?YS(this._delegate):YS(this._delegate,e))}catch(t){throw Hs(t,"doc()","CollectionReference.doc()")}}add(e){return function j7(n,e){const t=nn(n.firestore,ai),i=YS(n),r=tA(n.converter,e);return G_(t,[QS(Gp(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Zi.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new La(this.firestore,t))}isEqual(e){return PH(this._delegate,e._delegate)}withConverter(e){return new $_(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}function Yp(n){return nn(n,ei)}class oP{constructor(...e){this._delegate=new Ku(...e)}static documentId(){return new oP(ar.keyField().canonicalString())}isEqual(e){return(e=(0,N.m9)(e))instanceof Ku&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function q7(){return new ZF("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Kp(e)}static delete(){const e=function z7(){return new Bb("deleteField")}();return e._methodName="FieldValue.delete",new Kp(e)}static arrayUnion(...e){const t=function W7(...n){return new m7("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Kp(t)}static arrayRemove(...e){const t=function Y7(...n){return new _7("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Kp(t)}static increment(e){const t=function K7(n){return new y7("increment",n)}(e);return t._methodName="FieldValue.increment",new Kp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const nQ={Firestore:cG,GeoPoint:KS,Timestamp:Fi,Blob:Hb,Transaction:uG,WriteBatch:dG,DocumentReference:La,DocumentSnapshot:Gb,Query:Gs,QueryDocumentSnapshot:$b,QuerySnapshot:sP,CollectionReference:$_,FieldPath:oP,FieldValue:Kp,setLogLevel:function eQ(n){!function Q8(n){Eh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function rQ(n){(function iQ(n,e){n.INTERNAL.registerComponent(new Hu.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},nQ)))})(n,(e,t)=>new cG(e,t,new J7)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(GV.Z);var iA=P(5363),sQ=P(6063);class oQ extends ft.x{constructor(e=1/0,t=1/0,i=sQ.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;t||(i.push(e),!r&&i.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!e.closed;l+=i?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const l=t.now();let d=0;for(let g=1;g<i.length&&i[g]<=l;g+=2)d=g;d&&i.splice(0,d+1)}}}function pG(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=null!=n?n:1/0,(0,Au.B)({connector:()=>new oQ(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function gG(n,e){return(0,Sn.m)(e)?qi(()=>n,e):qi(()=>n)}var aP=P(9468);P(5867);const _G=new Map,dQ={activated:!1,tokenObservers:[]},hQ={initialized:!1,enabled:!1};function Ir(n){return _G.get(n)||dQ}function Nl(n,e){_G.set(n,e)}function sA(){return hQ}class _Q{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function yQ(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $s=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vG(n){if(!Ir(n).activated)throw $s.create("use-before-activation",{appName:n.name})}function dP(n,e){return hP.apply(this,arguments)}function hP(){return hP=(0,Ee.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const x=yield r.getHeartbeatsHeader();x&&(i["X-Firebase-Client"]=x)}const s={method:"POST",body:JSON.stringify(e),headers:i};let l,d;try{l=yield fetch(n,s)}catch(x){throw $s.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==l.status)throw $s.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(x){throw $s.create("fetch-parse-error",{originalErrorMessage:x.message})}const g=d.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw $s.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(g[1]),E=Date.now();return{token:d.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}}),hP.apply(this,arguments)}function EQ(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const zb="firebase-app-check-store";let lA=null;function bG(){return lA||(lA=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e($s.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(zb,{keyPath:"compositeKey"})}}catch(t){e($s.create("storage-open",{originalErrorMessage:t.message}))}}),lA)}function fP(){return fP=(0,Ee.Z)(function*(n,e){const i=(yield bG()).transaction(zb,"readwrite"),s=i.objectStore(zb).put({compositeKey:n,value:e});return new Promise((l,d)=>{s.onsuccess=g=>{l()},i.onerror=g=>{var y;d($s.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})}),fP.apply(this,arguments)}const qb=new Ol.Yd("@firebase/app-check");function xG(n,e){return(0,N.hl)()?function AQ(n,e){return function CG(n,e){return fP.apply(this,arguments)}(function DG(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{qb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function SG(){return sA().enabled}function AG(){return _P.apply(this,arguments)}function _P(){return _P=(0,Ee.Z)(function*(){const n=sA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),_P.apply(this,arguments)}const OQ={error:"UNKNOWN_ERROR"};function FQ(n){return N.US.encodeString(JSON.stringify(n),!1)}function cA(n){return yP.apply(this,arguments)}function yP(){return yP=(0,Ee.Z)(function*(n,e=!1){const t=n.app;vG(t);const i=Ir(t);let s,r=i.token;if(!r){const g=yield i.cachedTokenPromise;g&&uA(g)&&(r=g)}if(!e&&r&&uA(r))return{token:r.token};let d,l=!1;if(SG()){i.exchangeTokenPromise||(i.exchangeTokenPromise=dP(EQ(t,yield AG()),n.heartbeatServiceProvider).then(y=>(i.exchangeTokenPromise=void 0,y)),l=!0);const g=yield i.exchangeTokenPromise;return yield xG(t,g),Nl(t,Object.assign(Object.assign({},i),{token:g})),{token:g.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(g=>(i.exchangeTokenPromise=void 0,g)),l=!0),r=yield i.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?qb.warn(g.message):qb.error(g),s=g}return r?(d={token:r.token},Nl(t,Object.assign(Object.assign({},i),{token:r})),yield xG(t,r)):d=NQ(s),l&&TG(t,d),d}),yP.apply(this,arguments)}function wP(n,e){const t=Ir(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Nl(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function IG(n){const{app:e}=n,t=Ir(e);let i=t.tokenRefresher;i||(i=function PQ(n){const{app:e}=n;return new _Q((0,Ee.Z)(function*(){let i;if(i=Ir(e).token?yield cA(n,!0):yield cA(n),i.error)throw i.error}),()=>!0,()=>{const t=Ir(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),Nl(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function TG(n,e){const t=Ir(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function uA(n){return n.expireTimeMillis-Date.now()>0}function NQ(n){return{token:FQ(OQ),error:n}}class LQ{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ir(this.app);for(const t of e)wP(this.app,t.next);return Promise.resolve()}}const LG="app-check-internal";!function QQ(){(0,kl._registerComponent)(new Hu.wA("app-check",n=>function BQ(n,e){return new LQ(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(LG).initialize()})),(0,kl._registerComponent)(new Hu.wA(LG,n=>function VQ(n){return{getToken:e=>cA(n,e),addTokenListener:e=>function vP(n,e,t,i){const{app:r}=n,s=Ir(r),l={next:t,error:i,type:e};if(Nl(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,l]})),s.token&&uA(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),IG(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>IG(n))}(n,"INTERNAL",e),removeTokenListener:e=>wP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,kl.registerVersion)("@firebase/app-check","0.5.8")}();class hA{constructor(){return(0,$n.vb)("app-check")}}"undefined"!=typeof window&&window;var xP=P(127);const SP=new c.OlP("angularfire2.auth.use-emulator"),AP=new c.OlP("angularfire2.auth.settings"),IP=new c.OlP("angularfire2.auth.tenant-id"),TP=new c.OlP("angularfire2.auth.langugage-code"),MP=new c.OlP("angularfire2.auth.use-device-language"),RP=new c.OlP("angularfire.auth.persistence"),kP=(n,e,t,i,r,s,l,d)=>(0,Ls.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),i&&(g.tenantId=i),g.languageCode=r,s&&g.useDeviceLanguage(),l)for(const[y,E]of Object.entries(l))g.settings[y]=E;return d&&g.setPersistence(d),g},[t,i,r,s,l,d]);let fA=(()=>{class n{constructor(t,i,r,s,l,d,g,y,E,x,M,F){const B=new ft.x,Q=ze(void 0).pipe((0,iA.Q)(l.outsideAngular),qi(()=>s.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,7092)))),(0,Be.U)(()=>(0,Ls.on)(t,s,i)),(0,Be.U)(ye=>kP(ye,s,d,y,E,x,g,M)),pG({bufferSize:1,refCount:!1}));if(pr(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ze(null);else{Q.pipe(xc()).subscribe();const Oe=Q.pipe(qi(st=>st.getRedirectResult().then(Nt=>Nt,()=>null)),$n.iC,pG({bufferSize:1,refCount:!1})),Ze=Q.pipe(qi(st=>new xn.y(Nt=>({unsubscribe:s.runOutsideAngular(()=>st.onAuthStateChanged(jt=>Nt.next(jt),jt=>Nt.error(jt),()=>Nt.complete()))})))),ct=Q.pipe(qi(st=>new xn.y(Nt=>({unsubscribe:s.runOutsideAngular(()=>st.onIdTokenChanged(jt=>Nt.next(jt),jt=>Nt.error(jt),()=>Nt.complete()))}))));this.authState=Oe.pipe(gG(Ze),(0,aP.R)(l.outsideAngular),(0,iA.Q)(l.insideAngular)),this.user=Oe.pipe(gG(ct),(0,aP.R)(l.outsideAngular),(0,iA.Q)(l.insideAngular)),this.idToken=this.user.pipe(qi(st=>st?(0,gn.D)(st.getIdToken()):ze(null))),this.idTokenResult=this.user.pipe(qi(st=>st?(0,gn.D)(st.getIdTokenResult()):ze(null))),this.credential=(0,vr.T)(Oe,B,this.authState.pipe(An(st=>!st))).pipe((0,Be.U)(st=>(null==st?void 0:st.user)?st:null),(0,aP.R)(l.outsideAngular),(0,iA.Q)(l.insideAngular))}return(0,Ls.pX)(this,Q,s,{spy:{apply:(ye,Oe,Ze)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&Ze.then(ct=>B.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ls.Dh),c.LFG(Ls.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG($n.HU),c.LFG(SP,8),c.LFG(AP,8),c.LFG(IP,8),c.LFG(TP,8),c.LFG(MP,8),c.LFG(RP,8),c.LFG(hA,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),i9=(()=>{class n{constructor(){xP.Z.registerVersion("angularfire",$n.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[fA]}),n})();function VG(n,e){return function r9(n,e=Ci.z){return new xn.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function OP(n,e){return VG(n,e).pipe((0,Be.U)(t=>({payload:t,type:"query"})))}function pA(n,e){return OP(n,e).pipe(at(void 0),uk(),(0,Be.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,d)=>{const g=r.find(E=>E.doc.ref.isEqual(l.ref)),y=null==t?void 0:t.payload.docs.find(E=>E.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function UG(n,e,t){return pA(n,t).pipe(Dc((i,r)=>function o9(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function a9(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FP(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),Ny(),(0,Be.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function FP(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function jG(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class HG{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=pA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Be.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(at(void 0),uk(),An(([i,r])=>r.length>0||!i),(0,Be.U)(([i,r])=>r),$n.iC)}auditTrail(e){return this.stateChanges(e).pipe(Dc((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=jG(e);return UG(this.query,t,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(e={}){return OP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),$n.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe($n.iC)}add(e){return this.ref.add(e)}doc(e){return new GG(this.ref.doc(e),this.afs)}}class GG{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=qG(i,t);return new HG(r,s,this.afs)}snapshotChanges(){return function s9(n,e){return VG(n,e).pipe(at(void 0),uk(),(0,Be.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Be.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,gn.D)(this.ref.get(e)).pipe($n.iC)}}class l9{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?pA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),An(t=>t.length>0),$n.iC):pA(this.query,this.afs.schedulers.outsideAngular).pipe($n.iC)}auditTrail(e){return this.stateChanges(e).pipe(Dc((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=jG(e);return UG(this.query,t,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(e={}){return OP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),$n.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe($n.iC)}}const $G=new c.OlP("angularfire2.enableFirestorePersistence"),zG=new c.OlP("angularfire2.firestore.persistenceSettings"),c9=new c.OlP("angularfire2.firestore.settings"),u9=new c.OlP("angularfire2.firestore.use-emulator");function qG(n,e=(t=>t)){return{query:e(n),ref:n}}let WG=(()=>{class n{constructor(t,i,r,s,l,d,g,y,E,x,M,F,B,Q,ye,Oe,Ze){this.schedulers=g;const ct=(0,Ls.on)(t,d,i),st=E;x&&kP(ct,d,M,B,Q,ye,F,Oe),[this.firestore,this.persistenceEnabled$]=(0,Ls.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const Nt=d.runOutsideAngular(()=>ct.firestore());if(s&&Nt.settings(s),st&&Nt.useEmulator(...st),r&&!pr(l)){const jt=()=>{try{return(0,gn.D)(Nt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(pn){return"undefined"!=typeof console&&console.warn(pn),ze(!1)}};return[Nt,d.runOutsideAngular(jt)]}return[Nt,ze(!1)]},[s,st,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=qG(r,i),d=this.schedulers.ngZone.run(()=>s);return new HG(d,l,this)}collectionGroup(t,i){const r=i||(l=>l),s=this.firestore.collectionGroup(t);return new l9(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new GG(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ls.Dh),c.LFG(Ls.xv,8),c.LFG($G,8),c.LFG(c9,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG($n.HU),c.LFG(zG,8),c.LFG(u9,8),c.LFG(fA,8),c.LFG(SP,8),c.LFG(AP,8),c.LFG(IP,8),c.LFG(TP,8),c.LFG(MP,8),c.LFG(RP,8),c.LFG(hA,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),d9=(()=>{class n{constructor(){xP.Z.registerVersion("angularfire",$n.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:$G,useValue:!0},{provide:zG,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[WG]}),n})(),PP=(()=>{class n{constructor(t){this.AFireStore=t,this.NOME_COLECAO="reserva",this.colecaoReservas=t.collection(this.NOME_COLECAO)}cadastrar(t){return delete t.id,(0,gn.D)(this.colecaoReservas.add(Object.assign({},t)))}listar(){return this.colecaoReservas.valueChanges({idField:"id"})}pesquisarPorId(t){return this.colecaoReservas.doc(t).get().pipe((0,Be.U)(i=>new HV(i.id,i.data())))}remover(t){return(0,gn.D)(this.colecaoReservas.doc(t).delete())}atualizar(t){return(0,gn.D)(this.colecaoReservas.doc(t.id).update(Object.assign({},t)))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(WG))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YG=(()=>{class n{transform(t){return t&&11===t.length?`${t.substr(0,3)}.${t.substr(3,3)}.${t.substr(6,3)}-${t.substr(9,2)}`:t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"cpf",type:n,pure:!0}),n})();function h9(n,e){1&n&&c._UZ(0,"mat-header-row")}function f9(n,e){1&n&&c._UZ(0,"mat-row")}function p9(n,e){1&n&&(c.TgZ(0,"mat-header-cell"),c._uU(1,"Id"),c.qZA())}function g9(n,e){if(1&n&&(c.TgZ(0,"mat-cell"),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t.id)}}function m9(n,e){1&n&&(c.TgZ(0,"mat-header-cell"),c._uU(1,"Nome"),c.qZA())}function _9(n,e){if(1&n&&(c.TgZ(0,"mat-cell"),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t.nome)}}function y9(n,e){1&n&&(c.TgZ(0,"mat-header-cell"),c._uU(1,"CPF"),c.qZA())}function v9(n,e){if(1&n&&(c.TgZ(0,"mat-cell"),c._uU(1),c.ALo(2,"cpf"),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,t.cpf))}}function w9(n,e){1&n&&(c.TgZ(0,"mat-header-cell"),c._uU(1,"Mesa"),c.qZA())}function b9(n,e){if(1&n&&(c.TgZ(0,"mat-cell"),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t.mesa)}}function C9(n,e){1&n&&(c.TgZ(0,"mat-header-cell"),c._uU(1,"Hor\xe1rio"),c.qZA())}function E9(n,e){if(1&n&&(c.TgZ(0,"mat-cell"),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t.horario)}}function D9(n,e){1&n&&(c.TgZ(0,"mat-header-cell"),c._uU(1,"Data"),c.qZA())}function x9(n,e){if(1&n&&(c.TgZ(0,"mat-cell"),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t.data)}}function S9(n,e){1&n&&(c.TgZ(0,"mat-header-cell"),c._uU(1,"A\xe7\xf5es"),c.qZA())}function A9(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"mat-cell")(1,"button",14),c.NdJ("click",function(){const s=c.CHM(t).$implicit;return c.oxw().editar(s)}),c.TgZ(2,"mat-icon"),c._uU(3,"edit"),c.qZA()(),c.TgZ(4,"button",14),c.NdJ("click",function(){const s=c.CHM(t).$implicit;return c.oxw().apagar(s.id)}),c.TgZ(5,"mat-icon"),c._uU(6,"delete"),c.qZA()()()}}let I9=(()=>{class n{constructor(t,i){this.reservaService=t,this.roteador=i,this.colunas=["id","nome","cpf","mesa","horario","data","acoes"],this.reservas=new tk}ngOnInit(){this.reservaService.listar().subscribe(t=>this.reservas=new tk(t))}filtrar(t){this.reservas.filter=t.trim().toLowerCase()}apagar(t){this.reservaService.remover(t).subscribe(i=>{const r=this.reservas.data.findIndex(s=>s.id===t);r>-1&&(this.reservas.data.splice(r,1),this.reservas=new tk(this.reservas.data))})}editar(t){this.roteador.navigate(["cadastrarreserva",t.id])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(PP),c.Y36(Cr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tabela-reserva"]],decls:29,vars:3,consts:[["matInput","","placeholder","Filtro por qualquer valor",3,"keyup"],["inputFiltro",""],[3,"dataSource"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["matColumnDef","id"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nome"],["matColumnDef","cpf"],["matColumnDef","mesa"],["matColumnDef","horario"],["matColumnDef","data"],["matColumnDef","acoes"],["mat-icon-button","",3,"click"]],template:function(t,i){if(1&t){const r=c.EpF();c.TgZ(0,"mat-form-field")(1,"mat-label"),c._uU(2,"Filtro"),c.qZA(),c.TgZ(3,"input",0,1),c.NdJ("keyup",function(){c.CHM(r);const l=c.MAs(4);return i.filtrar(l.value)}),c.qZA()(),c.TgZ(5,"mat-table",2),c.YNc(6,h9,1,0,"mat-header-row",3),c.YNc(7,f9,1,0,"mat-row",4),c.ynx(8,5),c.YNc(9,p9,2,0,"mat-header-cell",6),c.YNc(10,g9,2,1,"mat-cell",7),c.BQk(),c.ynx(11,8),c.YNc(12,m9,2,0,"mat-header-cell",6),c.YNc(13,_9,2,1,"mat-cell",7),c.BQk(),c.ynx(14,9),c.YNc(15,y9,2,0,"mat-header-cell",6),c.YNc(16,v9,3,3,"mat-cell",7),c.BQk(),c.ynx(17,10),c.YNc(18,w9,2,0,"mat-header-cell",6),c.YNc(19,b9,2,1,"mat-cell",7),c.BQk(),c.ynx(20,11),c.YNc(21,C9,2,0,"mat-header-cell",6),c.YNc(22,E9,2,1,"mat-cell",7),c.BQk(),c.ynx(23,12),c.YNc(24,D9,2,0,"mat-header-cell",6),c.YNc(25,x9,2,1,"mat-cell",7),c.BQk(),c.ynx(26,13),c.YNc(27,S9,2,0,"mat-header-cell",6),c.YNc(28,A9,7,0,"mat-cell",7),c.BQk(),c.qZA()}2&t&&(c.xp6(5),c.Q6J("dataSource",i.reservas),c.xp6(1),c.Q6J("matHeaderRowDef",i.colunas),c.xp6(1),c.Q6J("matRowDefColumns",i.colunas))},directives:[$e,f,KB,iV,rV,oV,sV,aV,XR,QR,JR,ZR,ek,Jd,YT],pipes:[YG],styles:[""]}),n})();function T9(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"mat-card",3)(1,"mat-card-header",4)(2,"mat-card-title",5),c._uU(3),c.ALo(4,"cpf"),c.qZA()(),c.TgZ(5,"mat-card-content",6)(6,"span"),c._uU(7),c.qZA(),c.TgZ(8,"span"),c._uU(9),c.qZA()(),c.TgZ(10,"mat-card-footer",7)(11,"button",8),c.NdJ("click",function(){c.CHM(t);const r=c.oxw().$implicit;return c.oxw().editar(r)}),c._uU(12," Editar "),c.qZA(),c.TgZ(13,"button",9),c.NdJ("click",function(){c.CHM(t);const r=c.oxw().$implicit;return c.oxw().cancelar(r)}),c._uU(14," Cancelar "),c.qZA()()()}if(2&n){const t=c.oxw().$implicit;c.xp6(3),c.AsE(" ",t.nome," - ",c.lcZ(4,5,t.cpf||"")," "),c.xp6(4),c.hij(" Mesa ",t.mesa," "),c.xp6(2),c.AsE("",t.data," - ",t.horario,"")}}function M9(n,e){if(1&n&&(c.TgZ(0,"div"),c.YNc(1,T9,15,7,"mat-card",2),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf",t.nome)}}let KG=(()=>{class n{constructor(t,i){this.reservaService=t,this.roteador=i,this.reservas=new Array}ngOnInit(){this.reservaService.listar().subscribe(t=>this.reservas=t)}editar(t){this.roteador.navigate(["cadastrarreserva",t.id])}cancelar(t){this.reservaService.remover(t.id||"").subscribe(i=>{const r=this.reservas.findIndex(s=>s.cpf===t.cpf);r>-1&&this.reservas.splice(r,1)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(PP),c.Y36(Cr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-listar-reserva"]],decls:2,vars:1,consts:[[1,"lista-usuarios"],[4,"ngFor","ngForOf"],["class","card-usuario",4,"ngIf"],[1,"card-usuario"],[1,"usuario-header"],[1,"usu-title"],[1,"usu-content"],[1,"usu-footer"],["mat-flat-button","",1,"usu-edit",3,"click"],["mat-flat-button","",1,"usu-cancel",3,"click"]],template:function(t,i){1&t&&(c.TgZ(0,"div",0),c.YNc(1,M9,2,1,"div",1),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngForOf",i.reservas))},directives:[di,Un,_x,cR,r_,i_,s_,Jd],pipes:[YG],styles:["*[_ngcontent-%COMP%]{font-family:sans-serif}.lista-usuarios[_ngcontent-%COMP%]{padding:10px;display:flex}.card-usuario[_ngcontent-%COMP%]{width:230px;height:280px;padding:0;margin-left:10px;border-radius:10px;overflow:hidden;display:flex;flex-direction:column}.usuario-header[_ngcontent-%COMP%]{display:flex;justify-content:center;background:#7c10ad;padding:8px;color:#fff}.usuario-header[_ngcontent-%COMP%]   .usu-title[_ngcontent-%COMP%]{margin:8px 0;display:flex;align-items:center}.usu-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background:#f88500;height:100%;margin:0;padding-bottom:10px;font-weight:600;font-size:15px}.usu-content[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{font-size:50px;font-weight:700;margin:auto 0}.usu-footer[_ngcontent-%COMP%]{background:#7c10ad;margin:0;padding:10px}.usu-footer[_ngcontent-%COMP%]   .usu-edit[_ngcontent-%COMP%]{background:#f88500;font-weight:600}.usu-footer[_ngcontent-%COMP%]   .usu-cancel[_ngcontent-%COMP%]{font-weight:600;background:#f88500;margin-left:10px}"]}),n})(),R9=[{nome:"Messias",cpf:"123456",mesa:"26",horario:"20:30",data:"12/04/2022"}];function k9(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"Registar reserva"),c.qZA())}function O9(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"Editar reserva"),c.qZA())}function F9(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"Reservar"),c.qZA())}function P9(n,e){1&n&&(c.TgZ(0,"span"),c._uU(1,"Editar"),c.qZA())}let ZG=(()=>{class n{constructor(t,i,r,s){if(this.reservaService=t,this.rotaAtual=i,this.roteador=r,this.mensagemService=s,this.reservas=R9,this.operacaoCadastro=!0,this.reserva=new HV,this.rotaAtual.snapshot.paramMap.has("id")){this.operacaoCadastro=!1;const l=this.rotaAtual.snapshot.paramMap.get("id");this.reservaService.pesquisarPorId(l).subscribe(d=>this.reserva=d)}}ngOnInit(){}marcarReserva(){this.reserva.id?this.reservaService.atualizar(this.reserva).subscribe(t=>{this.mensagemService.success("Reservada atualizada com sucesso!"),console.log("Usuario atualizado!!"),this.roteador.navigate(["listarreservas"])}):this.reservaService.cadastrar(this.reserva).subscribe(t=>{console.log(`Reserva de ${t} realizada com sucesso!`),this.mensagemService.success("Mesa reservada com sucesso!"),this.roteador.navigate(["listarreservas"])})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(PP),c.Y36(ka),c.Y36(Cr),c.Y36(qf))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-cadastrar-reserva"]],decls:29,vars:9,consts:[[1,"usu-cadastro"],[1,"titulo-card"],[4,"ngIf"],[1,"cadastro-conteudo"],["appearance","fill",1,"mat-input"],["matInput","","type","text",3,"ngModel","ngModelChange"],["matInput","","type","number",3,"ngModel","ngModelChange"],["matInput","","type","time",3,"ngModel","ngModelChange"],["matInput","","type","date",3,"ngModel","ngModelChange"],[1,"cadastro-footer"],["mat-raised-button","",3,"click"]],template:function(t,i){1&t&&(c.TgZ(0,"mat-card",0)(1,"mat-card-title",1),c.YNc(2,k9,2,0,"span",2),c.YNc(3,O9,2,0,"span",2),c.qZA(),c.TgZ(4,"mat-card-content",3)(5,"mat-form-field",4)(6,"mat-label"),c._uU(7,"Nome*"),c.qZA(),c.TgZ(8,"input",5),c.NdJ("ngModelChange",function(s){return i.reserva.nome=s}),c.qZA()(),c.TgZ(9,"mat-form-field",4)(10,"mat-label"),c._uU(11,"CPF"),c.qZA(),c.TgZ(12,"input",5),c.NdJ("ngModelChange",function(s){return i.reserva.cpf=s}),c.qZA()(),c.TgZ(13,"mat-form-field",4)(14,"mat-label"),c._uU(15,"Mesa"),c.qZA(),c.TgZ(16,"input",6),c.NdJ("ngModelChange",function(s){return i.reserva.mesa=s}),c.qZA()(),c.TgZ(17,"mat-form-field",4)(18,"mat-label"),c._uU(19,"Horario"),c.qZA(),c.TgZ(20,"input",7),c.NdJ("ngModelChange",function(s){return i.reserva.horario=s}),c.qZA()(),c.TgZ(21,"mat-form-field",4)(22,"mat-label"),c._uU(23,"Data"),c.qZA(),c.TgZ(24,"input",8),c.NdJ("ngModelChange",function(s){return i.reserva.data=s}),c.qZA()()(),c.TgZ(25,"mat-card-footer",9)(26,"button",10),c.NdJ("click",function(){return i.marcarReserva()}),c.YNc(27,F9,2,0,"span",2),c.YNc(28,P9,2,0,"span",2),c.qZA()()()),2&t&&(c.xp6(2),c.Q6J("ngIf",i.operacaoCadastro),c.xp6(1),c.Q6J("ngIf",!i.operacaoCadastro),c.xp6(5),c.Q6J("ngModel",i.reserva.nome),c.xp6(4),c.Q6J("ngModel",i.reserva.cpf),c.xp6(4),c.Q6J("ngModel",i.reserva.mesa),c.xp6(4),c.Q6J("ngModel",i.reserva.horario),c.xp6(4),c.Q6J("ngModel",i.reserva.data),c.xp6(3),c.Q6J("ngIf",i.operacaoCadastro),c.xp6(1),c.Q6J("ngIf",!i.operacaoCadastro))},directives:[_x,r_,Un,i_,$e,f,KB,wh,fB,kR,OR,s_,Jd],styles:[".usu-cadastro[_ngcontent-%COMP%]{width:400px;height:auto;background:rgba(123,16,173,.733);margin:auto;position:relative;top:45%;transform:translateY(-50%)}.usu-cadastro[_ngcontent-%COMP%]   .titulo-card[_ngcontent-%COMP%]{margin-bottom:20px}.usu-cadastro[_ngcontent-%COMP%]   .cadastro-conteudo[_ngcontent-%COMP%]{margin:0}.usu-cadastro[_ngcontent-%COMP%]   .mat-input[_ngcontent-%COMP%]{margin-right:10px;border-radius:5px;overflow:hidden;width:100%}.usu-cadastro[_ngcontent-%COMP%]   .cadastro-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:0 10px 10px}.usu-cadastro[_ngcontent-%COMP%]   .cadastro-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%;background:#f88500}"]}),n})();const N9=[{path:"",component:KG},{path:"cadastrarreserva",component:ZG},{path:"cadastrarreserva/:id",component:ZG},{path:"listarreservas",component:KG},{path:"listarreservastabela",component:I9}];let L9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[t_.forRoot(N9)],t_]}),n})();const B9=function(){return["/cadastrarreserva"]},V9=function(){return["/listarreservas"]},U9=function(){return["/listarreservastabela"]};let j9=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-menu"]],decls:11,vars:7,consts:[[1,"menu-bar"],["mat-button","",1,"menu-button",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"routerLink"]],template:function(t,i){if(1&t&&(c.TgZ(0,"div",0)(1,"button",1),c._uU(2,"Menu"),c.qZA(),c.TgZ(3,"mat-menu",null,2)(5,"button",3),c._uU(6,"Cadastrar reserva"),c.qZA(),c.TgZ(7,"button",3),c._uU(8,"Listar reservas"),c.qZA(),c.TgZ(9,"button",3),c._uU(10,"Tabela de reservas"),c.qZA()()()),2&t){const r=c.MAs(4);c.xp6(1),c.Q6J("matMenuTriggerFor",r),c.xp6(4),c.Q6J("routerLink",c.DdM(4,B9)),c.xp6(2),c.Q6J("routerLink",c.DdM(5,V9)),c.xp6(2),c.Q6J("routerLink",c.DdM(6,U9))}},directives:[Jd,aD,iM,sh,gp],styles:[".menu-bar[_ngcontent-%COMP%]{background:#7c10ad;padding:5px}.menu-button[_ngcontent-%COMP%]{background:#f88500}"]}),n})(),H9=(()=>{class n{constructor(){this.title="at-angular-menu"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,i){1&t&&c._UZ(0,"app-menu")(1,"router-outlet")},directives:[j9,ph],styles:[""]}),n})();const G9_firebase={apiKey:"AIzaSyDx6ivNSne4sUQgZTWh22WTukibttDPKH4",authDomain:"reserva-mesa-8e414.firebaseapp.com",projectId:"reserva-mesa-8e414",storageBucket:"reserva-mesa-8e414.appspot.com",messagingSenderId:"249259907773",appId:"1:249259907773:web:13b07bc92938e65f0e35d4",measurementId:"G-1X80ZGXMS5"},QG="@firebase/database";let NP="";function JG(n){NP=n}class q9{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class W9{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const e$=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new q9(e)}}catch(e){}return new W9},Zp=e$("localStorage"),LP=e$("sessionStorage"),z_=new Ol.Yd("@firebase/database"),t$=function(){let n=1;return function(){return n++}}(),n$=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const i=t.digest();return N.US.encodeByteArray(i)},Wb=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=Wb.apply(null,i):e+="object"==typeof i?(0,N.Pz)(i):i,e+=" "}return e};let Qp=null,i$=!0;const r$=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(z_.logLevel=Ol.in.VERBOSE,Qp=z_.log.bind(z_),e&&LP.set("logging_enabled",!0)):"function"==typeof n?Qp=n:(Qp=null,LP.remove("logging_enabled"))},Tr=function(...n){if(!0===i$&&(i$=!1,null===Qp&&!0===LP.get("logging_enabled")&&r$(!0)),Qp){const e=Wb.apply(null,n);Qp(e)}},Yb=function(n){return function(...e){Tr(n,...e)}},BP=function(...n){const e="FIREBASE INTERNAL ERROR: "+Wb(...n);z_.error(e)},Oc=function(...n){const e=`FIREBASE FATAL ERROR: ${Wb(...n)}`;throw z_.error(e),new Error(e)},ys=function(...n){const e="FIREBASE WARNING: "+Wb(...n);z_.warn(e)},gA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Qu="[MIN_NAME]",Fc="[MAX_NAME]",Xp=function(n,e){if(n===e)return 0;if(n===Qu||e===Fc)return-1;if(e===Qu||n===Fc)return 1;{const t=mA(n),i=mA(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},Z9=function(n,e){return n===e?0:n<e?-1:1},Kb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Pz)(e))},VP=function(n){if("object"!=typeof n||null===n)return(0,N.Pz)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,N.Pz)(e[i]),t+=":",t+=VP(n[e[i]]);return t+="}",t},s$=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Mr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const o$=function(n){(0,N.hu)(!gA(n),"Invalid JSON number");const i=1023;let r,s,l,d,g;0===n?(s=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const E=y.join("");let x="";for(g=0;g<64;g+=8){let M=parseInt(E.substr(g,8),2).toString(16);1===M.length&&(M="0"+M),x+=M}return x.toLowerCase()},eX=new RegExp("^-?(0*)\\d{1,10}$"),a$=-2147483648,UP=2147483647,mA=function(n){if(eX.test(n)){const e=Number(n);if(e>=a$&&e<=UP)return e}return null},q_=function(n){try{n()}catch(e){setTimeout(()=>{throw ys("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Zb=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class nX{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ys(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class iX{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Tr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ys(e)}}let Qb=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const h$=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,g$="websocket",m$="long_polling";class HP{constructor(e,t,i,r,s=!1,l="",d=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function _$(n,e,t){let i;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===g$)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==m$)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function rX(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Mr(t,(s,l)=>{r.push(s+"="+l)}),i+r.join("&")}class sX{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const GP={},$P={};function zP(n){const e=n.toString();return GP[e]||(GP[e]=new sX),GP[e]}class aX{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&q_(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Lh{constructor(e,t,i,r,s,l,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yb(e),this.stats_=zP(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),_$(t,m$,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new aX(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qP((...s)=>{const[l,d,g,y,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&h$.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Lh.forceAllow_=!0}static forceDisallow(){Lh.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!Lh.forceAllow_&&(Lh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,N.h$)(t),r=s$(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class qP{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=t$(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=qP.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){Tr("frame writing exception"),d.stack&&Tr(d.stack),Tr(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Tr("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Tr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let yA=null;"undefined"!=typeof MozWebSocket?yA=MozWebSocket:"undefined"!=typeof WebSocket&&(yA=WebSocket);let W_=(()=>{class n{constructor(t,i,r,s,l,d,g){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yb(this.connId),this.stats_=zP(i),this.connURL=n.connectionURL_(i,d,g,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,l){const d={v:"5"};return!(0,N.Yr)()&&"undefined"!=typeof location&&location.hostname&&h$.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),l&&(d.p=l),_$(t,g$,d)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zp.set("previous_websocket_failure",!0);try{let r;if((0,N.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${NP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,g=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;g&&(l.proxy={origin:g})}this.mySock=new yA(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==yA&&!n.forceDisallow_}static previouslyFailed(){return Zp.isInMemoryStorage||!0===Zp.get("previous_websocket_failure")}markConnectionHealthy(){Zp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,N.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,N.Pz)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=s$(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),D$=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Lh,W_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=W_&&W_.isAvailable();let r=i&&!W_.previouslyFailed();if(t.webSocketOnly&&(i||ys("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[W_];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class R${constructor(e,t,i,r,s,l,d,g,y,E){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yb("c:"+this.id+":"),this.transportManager_=new D$(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Zb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Kb("t",e),i=Kb("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Kb("t",e),i=Kb("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Kb("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?BP("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):BP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&ys("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Zb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class k${put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class O${constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class vA extends O${constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new vA}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class bn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function fn(){return new bn("")}function Wt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Bh(n){return n.pieces_.length-n.pieceNum_}function Pn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new bn(n.pieces_,e)}function YP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Xb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function N$(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new bn(e,0)}function li(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof bn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new bn(t,0)}function Yt(n){return n.pieceNum_>=n.pieces_.length}function zs(n,e){const t=Wt(n),i=Wt(e);if(null===t)return e;if(t===i)return zs(Pn(n),Pn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function TX(n,e){const t=Xb(n,0),i=Xb(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=Xp(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function KP(n,e){if(Bh(n)!==Bh(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Ba(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Bh(n)>Bh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class MX{constructor(e,t){this.errorPrefix_=t,this.parts_=Xb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,N.ug)(this.parts_[i]);L$(this)}}function L$(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Jp(n))}function Jp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ZP extends O${constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new ZP}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Jb=1e3;let bA,eg=(()=>{class n extends k${constructor(t,i,r,s,l,d,g,y){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Yb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ZP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&vA.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,l={r:s,a:t,b:i};this.log_((0,N.Pz)(l)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new N.BH,r={p:t._path.toString(),q:t._queryObject},s={action:"g",request:r,onComplete:d=>{const g=d.d;"ok"===d.s?(this.onDataUpdate_(r.p,g,!1,null),i.resolve(g)):i.reject(g)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[l];void 0===d||s!==d||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),i.promise}listen(t,i,r,s){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const g={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(d).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const l={p:r};t.tag&&(l.q=i._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const y=g.d,E=g.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",g),"ok"!==E&&this.removeListen_(r,s),t.onComplete&&t.onComplete(E,y))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const r=(0,N.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();ys(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,N.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const l=s.s,d=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const l={p:t};s&&(l.q=r,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const l={p:i,d:r};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,l){this.initConnection_();const d={p:i,d:r};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Pz)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):BP("Unrecognized action received from server: "+(0,N.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Jb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Jb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let g=!1,y=null;const E=function(){y?y.close():(g=!0,s())};t.realtime_={close:E,sendRequest:function(F){(0,N.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(F)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,B]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);g?Tr("getToken() completed but was canceled"):(Tr("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=B&&B.token,y=new R$(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,Q=>{ys(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(F){t.log_("Failed to get token: "+F),g||(t.repoInfo_.nodeAdmin&&ys(F),E())}}})()}interrupt(t){Tr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Tr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Jb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(l=>VP(l)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new bn(t).toString();let s;if(this.listens.has(r)){const l=this.listens.get(r);s=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Tr("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Tr("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,N.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+NP.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=vA.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Zt(e,t)}}class wA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Zt(Qu,e),r=new Zt(Qu,t);return 0!==this.compare(i,r)}minPost(){return Zt.MIN}}class U$ extends wA{static get __EMPTY_NODE(){return bA}static set __EMPTY_NODE(e){bA=e}compare(e,t){return Xp(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(Fc,bA)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Zt(e,bA)}toString(){return".key"}}const Pc=new U$;class CA{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?i(e.key,t):1,r&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let XP,Ll=(()=>{class n{constructor(t,i,r,s,l){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:bo.EMPTY_NODE,this.right=null!=l?l:bo.EMPTY_NODE}copy(t,i,r,s,l){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const l=r(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===l?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return bo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return bo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class bo{constructor(e,t=bo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new bo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ll.BLACK,null,null))}remove(e){return new bo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ll.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new CA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new CA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new CA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new CA(this.root_,null,this.comparator_,!0,e)}}function VX(n,e){return Xp(n.name,e.name)}function QP(n,e){return Xp(n,e)}bo.EMPTY_NODE=new class BX{copy(e,t,i,r,s){return this}insert(e,t,i){return new Ll(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const j$=function(n){return"number"==typeof n?"number:"+o$(n):"string:"+n},H$=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===XP||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===XP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let G$,$$,z$,Y_=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),H$(this.priorityNode_)}static set __childrenNodeConstructor(t){G$=t}static get __childrenNodeConstructor(){return G$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Yt(t)?this:".priority"===Wt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Wt(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,N.hu)(".priority"!==r||1===Bh(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+j$(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?o$(this.value_):this.value_,this.lazyHash_=n$(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,N.hu)(s>=0,"Unknown leaf type: "+i),(0,N.hu)(l>=0,"Unknown leaf type: "+r),s===l?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const qn=new class GX extends wA{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?Xp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(Fc,new Y_("[PRIORITY-POST]",z$))}makePost(e,t){const i=$$(e);return new Zt(t,new Y_("[PRIORITY-POST]",i))}toString(){return".priority"}},$X=Math.log(2);class zX{constructor(e){this.count=parseInt(Math.log(e+1)/$X,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const EA=function(n,e,t,i){n.sort(e);const r=function(g,y){const E=y-g;let x,M;if(0===E)return null;if(1===E)return x=n[g],M=t?t(x):x,new Ll(M,x.node,Ll.BLACK,null,null);{const F=parseInt(E/2,10)+g,B=r(g,F),Q=r(F+1,y);return x=n[F],M=t?t(x):x,new Ll(M,x.node,Ll.BLACK,B,Q)}},d=function(g){let y=null,E=null,x=n.length;const M=function(B,Q){const ye=x-B,Oe=x;x-=B;const Ze=r(ye+1,Oe),ct=n[ye],st=t?t(ct):ct;F(new Ll(st,ct.node,Q,null,Ze))},F=function(B){y?(y.left=B,y=B):(E=B,y=B)};for(let B=0;B<g.count;++B){const Q=g.nextBitIsOne(),ye=Math.pow(2,g.count-(B+1));Q?M(ye,Ll.BLACK):(M(ye,Ll.BLACK),M(ye,Ll.RED))}return E}(new zX(n.length));return new bo(i||e,d)};let JP;const K_={};class Xu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(K_&&qn,"ChildrenNode.ts has not been loaded"),JP=JP||new Xu({".priority":K_},{".priority":qn}),JP}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bo?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==Pc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Zt.Wrap);let d,l=s.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=s.getNext();d=r?EA(i,e.getCompare()):K_;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const E=Object.assign({},this.indexes_);return E[g]=d,new Xu(E,y)}addToIndexes(e,t){const i=(0,N.UI)(this.indexes_,(r,s)=>{const l=(0,N.DV)(this.indexSet_,s);if((0,N.hu)(l,"Missing index implementation for "+s),r===K_){if(l.isDefinedOn(e.node)){const d=[],g=t.getIterator(Zt.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&d.push(y),y=g.getNext();return d.push(e),EA(d,l.getCompare())}return K_}{const d=t.get(e.name);let g=r;return d&&(g=g.remove(new Zt(e.name,d))),g.insert(e,e.node)}});return new Xu(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,N.UI)(this.indexes_,r=>{if(r===K_)return r;{const s=t.get(e.name);return s?r.remove(new Zt(e.name,s)):r}});return new Xu(i,this.indexSet_)}}let eC,Bt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&H$(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return eC||(eC=new n(new bo(QP),null,Xu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?eC:i}}getChild(t){const i=Wt(t);return null===i?this:this.getImmediateChild(i).getChild(Pn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,N.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Zt(t,i);let s,l;i.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),l=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?eC:this.priorityNode_;return new n(s,d,l)}}updateChild(t,i){const r=Wt(t);if(null===r)return i;{(0,N.hu)(".priority"!==Wt(t)||1===Bh(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Pn(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,l=!0;if(this.forEachChild(qn,(d,g)=>{i[d]=g.val(t),r++,l&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):l=!1}),!t&&l&&s<2*r){const d=[];for(const g in i)d[g]=i[g];return d}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+j$(this.getPriority().val())+":"),this.forEachChild(qn,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":n$(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const l=s.getPredecessorKey(new Zt(t,i));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Zt(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Zt(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Zt.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Zt.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===tC?-1:0}withIndex(t){if(t===Pc||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Pc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(qn),s=i.getIterator(qn);let l=r.getNext(),d=s.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=r.getNext(),d=s.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===Pc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const tC=new class qX extends Bt{constructor(){super(new bo(QP),Bt.EMPTY_NODE,Xu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Bt.EMPTY_NODE}isEmpty(){return!1}};function mi(n,e=null){if(null===n)return Bt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Y_(n,mi(e));if(n instanceof Array){let t=Bt.EMPTY_NODE;return Mr(n,(i,r)=>{if((0,N.r3)(n,i)&&"."!==i.substring(0,1)){const s=mi(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(mi(e))}{const t=[];let i=!1;if(Mr(n,(l,d)=>{if("."!==l.substring(0,1)){const g=mi(d);g.isEmpty()||(i=i||!g.getPriority().isEmpty(),t.push(new Zt(l,g)))}}),0===t.length)return Bt.EMPTY_NODE;const s=EA(t,VX,l=>l.name,QP);if(i){const l=EA(t,qn.getCompare());return new Bt(s,mi(e),new Xu({".priority":l},{".priority":qn}))}return new Bt(s,mi(e),Xu.Default)}}Object.defineProperties(Zt,{MIN:{value:new Zt(Qu,Bt.EMPTY_NODE)},MAX:{value:new Zt(Fc,tC)}}),U$.__EMPTY_NODE=Bt.EMPTY_NODE,Y_.__childrenNodeConstructor=Bt,function UX(n){XP=n}(tC),function HX(n){z$=n}(tC),function jX(n){$$=n}(mi);class eN extends wA{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!Yt(e)&&".priority"!==Wt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?Xp(e.name,t.name):s}makePost(e,t){const i=mi(e),r=Bt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Zt(t,r)}maxPost(){const e=Bt.EMPTY_NODE.updateChild(this.indexPath_,tC);return new Zt(Fc,e)}toString(){return Xb(this.indexPath_,0).join("/")}}const tN=new class YX extends wA{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Xp(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(e,t){const i=mi(e);return new Zt(t,i)}toString(){return".value"}},Z_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",KX=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Z_.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)l+=Z_.charAt(e[r]);return(0,N.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),Y$=function(n){if(n===""+UP)return"-";const e=mA(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return Fc;const s=Z_.charAt(Z_.indexOf(t[i])+1);return t[i]=s,t.slice(0,i+1).join("")},K$=function(n){if(n===""+a$)return Qu;const e=mA(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+UP:(delete t[t.length-1],t.join("")):(t[t.length-1]=Z_.charAt(Z_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Z$(n){return{type:"value",snapshotNode:n}}function Q_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function nC(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function iC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class iN{constructor(e){this.index_=e}updateChild(e,t,i,r,s,l){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?e.hasChild(t)?l.trackChildChange(nC(t,d)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(Q_(t,i)):l.trackChildChange(iC(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(qn,(r,s)=>{t.hasChild(r)||i.trackChildChange(nC(r,s))}),t.isLeafNode()||t.forEachChild(qn,(r,s)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(s)||i.trackChildChange(iC(r,s,l))}else i.trackChildChange(Q_(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Bt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class rC{constructor(e){this.indexedFilter_=new iN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=rC.getStartPost_(e),this.endPost_=rC.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,s,l){return this.matches(new Zt(t,i))||(i=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,l)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Bt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Bt.EMPTY_NODE);const s=this;return t.forEachChild(qn,(l,d)=>{s.matches(new Zt(l,d))||(r=r.updateImmediateChild(l,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class QX{constructor(e){this.rangedFilter_=new rC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,s,l){return this.rangedFilter_.matches(new Zt(t,i))||(i=Bt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,l):this.fullLimitUpdateChild_(e,t,i,s,l)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=Bt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const d=s.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!g)break;r=r.updateImmediateChild(d.name,d.node),l++}}else{let s,l,d,g;if(r=t.withIndex(this.index_),r=r.updatePriority(Bt.EMPTY_NODE),this.reverse_){g=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();d=(M,F)=>x(F,M)}else g=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,E=!1;for(;g.hasNext();){const x=g.getNext();!E&&d(s,x)<=0&&(E=!0),E&&y<this.limit_&&d(x,l)<=0?y++:r=r.updateImmediateChild(x.name,Bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let l;if(this.reverse_){const x=this.index_.getCompare();l=(M,F)=>x(F,M)}else l=this.index_.getCompare();const d=e;(0,N.hu)(d.numChildren()===this.limit_,"");const g=new Zt(t,i),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),E=this.rangedFilter_.matches(g);if(d.hasChild(t)){const x=d.getImmediateChild(t);let M=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===t||d.hasChild(M.name));)M=r.getChildAfterChild(this.index_,M,this.reverse_);const F=null==M?1:l(M,g);if(E&&!i.isEmpty()&&F>=0)return null!=s&&s.trackChildChange(iC(t,i,x)),d.updateImmediateChild(t,i);{null!=s&&s.trackChildChange(nC(t,x));const Q=d.updateImmediateChild(t,Bt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=s&&s.trackChildChange(Q_(M.name,M.node)),Q.updateImmediateChild(M.name,M.node)):Q}}return i.isEmpty()?e:E&&l(y,g)>=0?(null!=s&&(s.trackChildChange(nC(y.name,y.node)),s.trackChildChange(Q_(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(y.name,Bt.EMPTY_NODE)):e}}class DA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qn}copy(){const e=new DA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function rN(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function sN(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function xA(n,e){const t=n.copy();return t.index_=e,t}function Q$(n){const e={};if(n.isDefault())return e;let t;return n.index_===qn?t="$priority":n.index_===tN?t="$value":n.index_===Pc?t="$key":((0,N.hu)(n.index_ instanceof eN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Pz)(t),n.startSet_&&(e.startAt=(0,N.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,N.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,N.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,N.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function X$(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==qn&&(e.i=n.index_.toString()),e}class SA extends k${constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Yb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=SA.getListenId_(e,i),d={};this.listens_[l]=d;const g=Q$(e._queryParams);this.restRequest_(s+".json",g,(y,E)=>{let x=E;if(404===y&&(x=null,y=null),null===y&&this.onDataUpdate_(s,x,!1,i),(0,N.DV)(this.listens_,l)===d){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(M,null)}})}unlisten(e,t){const i=SA.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Q$(e._queryParams),i=e._path.toString(),r=new N.BH;return this.restRequest_(i+".json",t,(s,l)=>{let d=l;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let g=null;if(d.status>=200&&d.status<300){try{g=(0,N.cI)(d.responseText)}catch(y){ys("Failed to parse JSON response for "+l+": "+d.responseText)}i(null,g)}else 401!==d.status&&404!==d.status&&ys("Got unsuccessful REST response for "+l+" Status: "+d.status),i(d.status);i=null}},d.open("GET",l,!0),d.send()})}}class iJ{constructor(){this.rootNode_=Bt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function AA(){return{value:null,children:new Map}}function X_(n,e,t){if(Yt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Wt(e);n.children.has(i)||n.children.set(i,AA()),X_(n.children.get(i),e=Pn(e),t)}}function oN(n,e){if(Yt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(qn,(i,r)=>{X_(n,new bn(i),r)}),oN(n,e)}}if(n.children.size>0){const t=Wt(e);return e=Pn(e),n.children.has(t)&&oN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function aN(n,e,t){null!==n.value?t(e,n.value):function rJ(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{aN(r,new bn(e.toString()+"/"+i),t)})}class sJ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mr(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class lJ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new sJ(e);const i=1e4+2e4*Math.random();Zb(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Mr(e,(r,s)=>{s>0&&(0,N.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),Zb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Va=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Va||(Va={})),Va))();function uN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class IA{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Va.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Yt(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new bn(e));return new IA(fn(),t,this.revert)}}return(0,N.hu)(Wt(this.path)===e,"operationForChild called for unrelated child."),new IA(Pn(this.path),this.affectedTree,this.revert)}}class sC{constructor(e,t){this.source=e,this.path=t,this.type=Va.LISTEN_COMPLETE}operationForChild(e){return Yt(this.path)?new sC(this.source,fn()):new sC(this.source,Pn(this.path))}}class tg{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Va.OVERWRITE}operationForChild(e){return Yt(this.path)?new tg(this.source,fn(),this.snap.getImmediateChild(e)):new tg(this.source,Pn(this.path),this.snap)}}class J_{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Va.MERGE}operationForChild(e){if(Yt(this.path)){const t=this.children.subtree(new bn(e));return t.isEmpty()?null:t.value?new tg(this.source,fn(),t.value):new J_(this.source,fn(),t)}return(0,N.hu)(Wt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new J_(this.source,Pn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Vh{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Yt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Wt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class cJ{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function oC(n,e,t,i,r,s){const l=i.filter(d=>d.type===t);l.sort((d,g)=>function hJ(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const i=new Zt(e.childName,e.snapshotNode),r=new Zt(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,d,g)),l.forEach(d=>{const g=function dJ(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);r.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(g,n.query_))})})}function TA(n,e){return{eventCache:n,serverCache:e}}function aC(n,e,t,i){return TA(new Vh(e,t,i),n.serverCache)}function e3(n,e,t,i){return TA(n.eventCache,new Vh(e,t,i))}function MA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ng(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let dN;class Wn{constructor(e,t=(()=>(dN||(dN=new bo(Z9)),dN))()){this.value=e,this.children=t}static fromObject(e){let t=new Wn(null);return Mr(e,(i,r)=>{t=t.set(new bn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:fn(),value:this.value};if(Yt(e))return null;{const i=Wt(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Pn(e),t);return null!=s?{path:li(new bn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Yt(e))return this;{const t=Wt(e),i=this.children.get(t);return null!==i?i.subtree(Pn(e)):new Wn(null)}}set(e,t){if(Yt(e))return new Wn(t,this.children);{const i=Wt(e),s=(this.children.get(i)||new Wn(null)).set(Pn(e),t),l=this.children.insert(i,s);return new Wn(this.value,l)}}remove(e){if(Yt(e))return this.children.isEmpty()?new Wn(null):new Wn(null,this.children);{const t=Wt(e),i=this.children.get(t);if(i){const r=i.remove(Pn(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new Wn(null):new Wn(this.value,s)}return this}}get(e){if(Yt(e))return this.value;{const t=Wt(e),i=this.children.get(t);return i?i.get(Pn(e)):null}}setTree(e,t){if(Yt(e))return t;{const i=Wt(e),s=(this.children.get(i)||new Wn(null)).setTree(Pn(e),t);let l;return l=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Wn(this.value,l)}}fold(e){return this.fold_(fn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(li(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,fn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Yt(e))return null;{const s=Wt(e),l=this.children.get(s);return l?l.findOnPath_(Pn(e),li(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,fn(),t)}foreachOnPath_(e,t,i){if(Yt(e))return this;{this.value&&i(t,this.value);const r=Wt(e),s=this.children.get(r);return s?s.foreachOnPath_(Pn(e),li(t,r),i):new Wn(null)}}foreach(e){this.foreach_(fn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(li(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Bl{constructor(e){this.writeTree_=e}static empty(){return new Bl(new Wn(null))}}function lC(n,e,t){if(Yt(e))return new Bl(new Wn(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const l=zs(r,e);return s=s.updateChild(l,t),new Bl(n.writeTree_.set(r,s))}{const r=new Wn(t),s=n.writeTree_.setTree(e,r);return new Bl(s)}}}function hN(n,e,t){let i=n;return Mr(t,(r,s)=>{i=lC(i,li(e,r),s)}),i}function t3(n,e){if(Yt(e))return Bl.empty();{const t=n.writeTree_.setTree(e,new Wn(null));return new Bl(t)}}function fN(n,e){return null!=ig(n,e)}function ig(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(zs(t.path,e)):null}function n3(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(qn,(i,r)=>{e.push(new Zt(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Zt(i,r.value))}),e}function Uh(n,e){if(Yt(e))return n;{const t=ig(n,e);return new Bl(null!=t?new Wn(t):n.writeTree_.subtree(e))}}function pN(n){return n.writeTree_.isEmpty()}function ey(n,e){return r3(fn(),n.writeTree_,e)}function r3(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,N.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=r3(li(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(li(n,".priority"),i)),t}}function RA(n,e){return c3(e,n)}function yJ(n,e){if(n.snap)return Ba(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ba(li(n.path,t),e))return!0;return!1}function wJ(n){return n.visible}function s3(n,e,t){let i=Bl.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const l=s.path;let d;if(s.snap)Ba(t,l)?(d=zs(t,l),i=lC(i,d,s.snap)):Ba(l,t)&&(d=zs(l,t),i=lC(i,fn(),s.snap.getChild(d)));else{if(!s.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(Ba(t,l))d=zs(t,l),i=hN(i,d,s.children);else if(Ba(l,t))if(d=zs(l,t),Yt(d))i=hN(i,fn(),s.children);else{const g=(0,N.DV)(s.children,Wt(d));if(g){const y=g.getChild(Pn(d));i=lC(i,fn(),y)}}}}}return i}function o3(n,e,t,i,r){if(i||r){const s=Uh(n.visibleWrites,e);return!r&&pN(s)?t:r||null!=t||fN(s,fn())?ey(s3(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(Ba(y.path,e)||Ba(e,y.path))},e),t||Bt.EMPTY_NODE):null}{const s=ig(n.visibleWrites,e);if(null!=s)return s;{const l=Uh(n.visibleWrites,e);return pN(l)?t:null!=t||fN(l,fn())?ey(l,t||Bt.EMPTY_NODE):null}}}function kA(n,e,t,i){return o3(n.writeTree,n.treePath,e,t,i)}function gN(n,e){return function bJ(n,e,t){let i=Bt.EMPTY_NODE;const r=ig(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(qn,(s,l)=>{i=i.updateImmediateChild(s,l)}),i;if(t){const s=Uh(n.visibleWrites,e);return t.forEachChild(qn,(l,d)=>{const g=ey(Uh(s,new bn(l)),d);i=i.updateImmediateChild(l,g)}),n3(s).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return n3(Uh(n.visibleWrites,e)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,e)}function a3(n,e,t,i){return function CJ(n,e,t,i,r){(0,N.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=li(e,t);if(fN(n.visibleWrites,s))return null;{const l=Uh(n.visibleWrites,s);return pN(l)?r.getChild(t):ey(l,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function OA(n,e){return function DJ(n,e){return ig(n.visibleWrites,e)}(n.writeTree,li(n.treePath,e))}function mN(n,e,t){return function EJ(n,e,t,i){const r=li(e,t),s=ig(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?ey(Uh(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function l3(n,e){return c3(li(n.treePath,e),n.writeTree)}function c3(n,e){return{treePath:n,writeTree:e}}class IJ{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,iC(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,nC(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,Q_(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,iC(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const u3=new class TJ{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class _N{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Vh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mN(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ng(this.viewCache_),s=function AJ(n,e,t,i,r,s){return function xJ(n,e,t,i,r,s,l){let d;const g=Uh(n.visibleWrites,e),y=ig(g,fn());if(null!=y)d=y;else{if(null==t)return[];d=ey(g,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const E=[],x=l.getCompare(),M=s?d.getReverseIteratorFrom(i,l):d.getIteratorFrom(i,l);let F=M.getNext();for(;F&&E.length<r;)0!==x(F,i)&&E.push(F),F=M.getNext();return E}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function d3(n,e,t,i,r,s){const l=e.eventCache;if(null!=OA(i,t))return e;{let d,g;if(Yt(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=ng(e),x=gN(i,y instanceof Bt?y:Bt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),x,s)}else{const y=kA(i,ng(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Wt(t);if(".priority"===y){(0,N.hu)(1===Bh(t),"Can't have a priority with additional path components");const E=l.getNode();g=e.serverCache.getNode();const x=a3(i,t,E,g);d=null!=x?n.filter.updatePriority(E,x):l.getNode()}else{const E=Pn(t);let x;if(l.isCompleteForChild(y)){g=e.serverCache.getNode();const M=a3(i,t,l.getNode(),g);x=null!=M?l.getNode().getImmediateChild(y).updateChild(E,M):l.getNode().getImmediateChild(y)}else x=mN(i,y,e.serverCache);d=null!=x?n.filter.updateChild(l.getNode(),y,x,E,r,s):l.getNode()}}return aC(e,d,l.isFullyInitialized()||Yt(t),n.filter.filtersNodes())}}function FA(n,e,t,i,r,s,l,d){const g=e.serverCache;let y;const E=l?n.filter:n.filter.getIndexedFilter();if(Yt(t))y=E.updateFullNode(g.getNode(),i,null);else if(E.filtersNodes()&&!g.isFiltered()){const F=g.getNode().updateChild(t,i);y=E.updateFullNode(g.getNode(),F,null)}else{const F=Wt(t);if(!g.isCompleteForPath(t)&&Bh(t)>1)return e;const B=Pn(t),ye=g.getNode().getImmediateChild(F).updateChild(B,i);y=".priority"===F?E.updatePriority(g.getNode(),ye):E.updateChild(g.getNode(),F,ye,B,u3,null)}const x=e3(e,y,g.isFullyInitialized()||Yt(t),E.filtersNodes());return d3(n,x,t,r,new _N(r,x,s),d)}function yN(n,e,t,i,r,s,l){const d=e.eventCache;let g,y;const E=new _N(r,e,s);if(Yt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),i,l),g=aC(e,y,!0,n.filter.filtersNodes());else{const x=Wt(t);if(".priority"===x)y=n.filter.updatePriority(e.eventCache.getNode(),i),g=aC(e,y,d.isFullyInitialized(),d.isFiltered());else{const M=Pn(t),F=d.getNode().getImmediateChild(x);let B;if(Yt(M))B=i;else{const Q=E.getCompleteChild(x);B=null!=Q?".priority"===YP(M)&&Q.getChild(N$(M)).isEmpty()?Q:Q.updateChild(M,i):Bt.EMPTY_NODE}g=F.equals(B)?e:aC(e,n.filter.updateChild(d.getNode(),x,B,M,E,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return g}function h3(n,e){return n.eventCache.isCompleteForChild(e)}function f3(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function vN(n,e,t,i,r,s,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=Yt(t)?i:new Wn(null).setTree(t,i);const E=e.serverCache.getNode();return y.children.inorderTraversal((x,M)=>{if(E.hasChild(x)){const B=f3(0,e.serverCache.getNode().getImmediateChild(x),M);g=FA(n,g,new bn(x),B,r,s,l,d)}}),y.children.inorderTraversal((x,M)=>{const F=!e.serverCache.isCompleteForChild(x)&&void 0===M.value;if(!E.hasChild(x)&&!F){const Q=f3(0,e.serverCache.getNode().getImmediateChild(x),M);g=FA(n,g,new bn(x),Q,r,s,l,d)}}),g}class BJ{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new iN(i.getIndex()),s=function XX(n){return n.loadsAllData()?new iN(n.getIndex()):n.hasLimit()?new QX(n):new rC(n)}(i);this.processor_=function MJ(n){return{filter:n}}(s);const l=t.serverCache,d=t.eventCache,g=r.updateFullNode(Bt.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode(Bt.EMPTY_NODE,d.getNode(),null),E=new Vh(g,l.isFullyInitialized(),r.filtersNodes()),x=new Vh(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=TA(x,E),this.eventGenerator_=new cJ(this.query_)}get query(){return this.query_}}function jJ(n,e){const t=ng(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Yt(e)&&!t.getImmediateChild(Wt(e)).isEmpty())?t.getChild(e):null}function p3(n){return 0===n.eventRegistrations_.length}function g3(n,e,t){const i=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,r);l&&i.push(l)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(l)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function m3(n,e,t,i){e.type===Va.MERGE&&null!==e.source.queryId&&((0,N.hu)(ng(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(MA(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function kJ(n,e,t,i,r){const s=new IJ;let l,d;if(t.type===Va.OVERWRITE){const y=t;y.source.fromUser?l=yN(n,e,y.path,y.snap,i,r,s):((0,N.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!Yt(y.path),l=FA(n,e,y.path,y.snap,i,r,d,s))}else if(t.type===Va.MERGE){const y=t;y.source.fromUser?l=function FJ(n,e,t,i,r,s,l){let d=e;return i.foreach((g,y)=>{const E=li(t,g);h3(e,Wt(E))&&(d=yN(n,d,E,y,r,s,l))}),i.foreach((g,y)=>{const E=li(t,g);h3(e,Wt(E))||(d=yN(n,d,E,y,r,s,l))}),d}(n,e,y.path,y.children,i,r,s):((0,N.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),l=vN(n,e,y.path,y.children,i,r,d,s))}else if(t.type===Va.ACK_USER_WRITE){const y=t;l=y.revert?function LJ(n,e,t,i,r,s){let l;if(null!=OA(i,t))return e;{const d=new _N(i,e,r),g=e.eventCache.getNode();let y;if(Yt(t)||".priority"===Wt(t)){let E;if(e.serverCache.isFullyInitialized())E=kA(i,ng(e));else{const x=e.serverCache.getNode();(0,N.hu)(x instanceof Bt,"serverChildren would be complete if leaf node"),E=gN(i,x)}E=E,y=n.filter.updateFullNode(g,E,s)}else{const E=Wt(t);let x=mN(i,E,e.serverCache);null==x&&e.serverCache.isCompleteForChild(E)&&(x=g.getImmediateChild(E)),y=null!=x?n.filter.updateChild(g,E,x,Pn(t),d,s):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(g,E,Bt.EMPTY_NODE,Pn(t),d,s):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=kA(i,ng(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=OA(i,fn()),aC(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,i,r,s):function PJ(n,e,t,i,r,s,l){if(null!=OA(r,t))return e;const d=e.serverCache.isFiltered(),g=e.serverCache;if(null!=i.value){if(Yt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return FA(n,e,t,g.getNode().getChild(t),r,s,d,l);if(Yt(t)){let y=new Wn(null);return g.getNode().forEachChild(Pc,(E,x)=>{y=y.set(new bn(E),x)}),vN(n,e,t,y,r,s,d,l)}return e}{let y=new Wn(null);return i.foreach((E,x)=>{const M=li(t,E);g.isCompleteForPath(M)&&(y=y.set(E,g.getNode().getChild(M)))}),vN(n,e,t,y,r,s,d,l)}}(n,e,y.path,y.affectedTree,i,r,s)}else{if(t.type!==Va.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);l=function NJ(n,e,t,i,r){const s=e.serverCache;return d3(n,e3(e,s.getNode(),s.isFullyInitialized()||Yt(t),s.isFiltered()),t,i,u3,r)}(n,e,t.path,i,s)}const g=s.getChanges();return function OJ(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=MA(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(Z$(MA(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,r,e,t,i);return function RJ(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,N.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,_3(n,s.changes,s.viewCache.eventCache.getNode(),null)}function _3(n,e,t,i){return function uJ(n,e,t,i){const r=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function ZX(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),oC(n,r,"child_removed",e,i,t),oC(n,r,"child_added",e,i,t),oC(n,r,"child_moved",s,i,t),oC(n,r,"child_changed",e,i,t),oC(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let PA,LA;class y3{constructor(){this.views=new Map}}function wN(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,N.hu)(null!=s,"SyncTree gave us an op for an invalid query."),m3(s,e,t,i)}{let s=[];for(const l of n.views.values())s=s.concat(m3(l,e,t,i));return s}}function v3(n,e,t,i,r){const l=n.views.get(e._queryIdentifier);if(!l){let d=kA(t,r?i:null),g=!1;d?g=!0:i instanceof Bt?(d=gN(t,i),g=!1):(d=Bt.EMPTY_NODE,g=!1);const y=TA(new Vh(d,g,!1),new Vh(i,r,!1));return new BJ(e,y)}return l}function w3(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function jh(n,e){let t=null;for(const i of n.views.values())t=t||jJ(i,e);return t}function b3(n,e){return e._queryParams.loadsAllData()?NA(n):n.views.get(e._queryIdentifier)}function C3(n,e){return null!=b3(n,e)}function Hh(n){return null!=NA(n)}function NA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let QJ=1;class E3{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Wn(null),this.pendingWriteTree_=function SJ(){return{visibleWrites:Bl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bN(n,e,t,i,r){return function pJ(n,e,t,i,r){(0,N.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=lC(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?ty(n,new tg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Gh(n,e,t=!1){const i=function mJ(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function _J(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&yJ(d,i.path)?r=!1:Ba(i.path,d.path)&&(s=!0)),l--}return!!r&&(s?(function vJ(n){n.visibleWrites=s3(n.allWrites,wJ,fn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=t3(n.visibleWrites,i.path):Mr(i.children,g=>{n.visibleWrites=t3(n.visibleWrites,li(i.path,g))}),!0))}(n.pendingWriteTree_,e)){let s=new Wn(null);return null!=i.snap?s=s.set(fn(),!0):Mr(i.children,l=>{s=s.set(new bn(l),!0)}),ty(n,new IA(i.path,s,t))}return[]}function cC(n,e,t){return ty(n,new tg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function CN(n,e,t,i){const r=e._path,s=n.syncPointTree_.get(r);let l=[];if(s&&("default"===e._queryIdentifier||C3(s,e))){const d=function YJ(n,e,t,i){const r=e._queryIdentifier,s=[];let l=[];const d=Hh(n);if("default"===r)for(const[g,y]of n.views.entries())l=l.concat(g3(y,t,i)),p3(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||s.push(y.query));else{const g=n.views.get(r);g&&(l=l.concat(g3(g,t,i)),p3(g)&&(n.views.delete(r),g.query._queryParams.loadsAllData()||s.push(g.query)))}return d&&!Hh(n)&&s.push(new(function zJ(){return(0,N.hu)(PA,"Reference.ts has not been loaded"),PA}())(e._repo,e._path)),{removed:s,events:l}}(s,e,t,i);(function qJ(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const g=d.removed;l=d.events;const y=-1!==g.findIndex(x=>x._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(r,(x,M)=>Hh(M));if(y&&!E){const x=n.syncPointTree_.subtree(r);if(!x.isEmpty()){const M=function see(n){return n.fold((e,t,i)=>{if(t&&Hh(t))return[NA(t)];{let r=[];return t&&(r=w3(t)),Mr(i,(s,l)=>{r=r.concat(l)}),r}})}(x);for(let F=0;F<M.length;++F){const B=M[F],Q=B.query,ye=A3(n,B);n.listenProvider_.startListening(uC(Q),VA(n,Q),ye.hashFn,ye.onComplete)}}}!E&&g.length>0&&!i&&(y?n.listenProvider_.stopListening(uC(e),null):g.forEach(x=>{const M=n.queryToTagMap.get(UA(x));n.listenProvider_.stopListening(uC(x),M)})),function oee(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=UA(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,g)}return l}function D3(n,e,t){const i=e._path;let r=null,s=!1;n.syncPointTree_.foreachOnPath(i,(x,M)=>{const F=zs(x,i);r=r||jh(M,F),s=s||Hh(M)});let d,l=n.syncPointTree_.get(i);l?(s=s||Hh(l),r=r||jh(l,fn())):(l=new y3,n.syncPointTree_=n.syncPointTree_.set(i,l)),null!=r?d=!0:(d=!1,r=Bt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((M,F)=>{const B=jh(F,fn());B&&(r=r.updateImmediateChild(M,B))}));const g=C3(l,e);if(!g&&!e._queryParams.loadsAllData()){const x=UA(e);(0,N.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const M=function aee(){return QJ++}();n.queryToTagMap.set(x,M),n.tagToQueryMap.set(M,x)}let E=function WJ(n,e,t,i,r,s){const l=v3(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function HJ(n,e){n.eventRegistrations_.push(e)}(l,t),function GJ(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(qn,(s,l)=>{i.push(Q_(s,l))}),t.isFullyInitialized()&&i.push(Z$(t.getNode())),_3(n,i,t.getNode(),e)}(l,t)}(l,e,t,RA(n.pendingWriteTree_,i),r,d);if(!g&&!s){const x=b3(l,e);E=E.concat(function lee(n,e,t){const i=e._path,r=VA(n,e),s=A3(n,t),l=n.listenProvider_.startListening(uC(e),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,N.hu)(!Hh(d.value),"If we're adding a query, it shouldn't be shadowed");else{const g=d.fold((y,E,x)=>{if(!Yt(y)&&E&&Hh(E))return[NA(E).query];{let M=[];return E&&(M=M.concat(w3(E).map(F=>F.query))),Mr(x,(F,B)=>{M=M.concat(B)}),M}});for(let y=0;y<g.length;++y){const E=g[y];n.listenProvider_.stopListening(uC(E),VA(n,E))}}return l}(n,e,x))}return E}function BA(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,d)=>{const y=jh(d,zs(l,e));if(y)return y});return o3(r,e,s,t,!0)}function ty(n,e){return x3(e,n.syncPointTree_,null,RA(n.pendingWriteTree_,fn()))}function x3(n,e,t,i){if(Yt(n.path))return S3(n,e,t,i);{const r=e.get(fn());null==t&&null!=r&&(t=jh(r,fn()));let s=[];const l=Wt(n.path),d=n.operationForChild(l),g=e.children.get(l);if(g&&d){const y=t?t.getImmediateChild(l):null,E=l3(i,l);s=s.concat(x3(d,g,y,E))}return r&&(s=s.concat(wN(r,n,i,t))),s}}function S3(n,e,t,i){const r=e.get(fn());null==t&&null!=r&&(t=jh(r,fn()));let s=[];return e.children.inorderTraversal((l,d)=>{const g=t?t.getImmediateChild(l):null,y=l3(i,l),E=n.operationForChild(l);E&&(s=s.concat(S3(E,d,g,y)))}),r&&(s=s.concat(wN(r,n,i,t))),s}function A3(n,e){const t=e.query,i=VA(n,t);return{hashFn:()=>(function VJ(n){return n.viewCache_.serverCache.getNode()}(e)||Bt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function tee(n,e,t){const i=EN(n,t);if(i){const r=DN(i),s=r.path,l=r.queryId,d=zs(s,e);return xN(n,s,new sC(uN(l),d))}return[]}(n,t._path,i):function eee(n,e){return ty(n,new sC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function J9(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return CN(n,t,null,s)}}}}function VA(n,e){const t=UA(e);return n.queryToTagMap.get(t)}function UA(n){return n._path.toString()+"$"+n._queryIdentifier}function EN(n,e){return n.tagToQueryMap.get(e)}function DN(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new bn(n.substr(0,e))}}function xN(n,e,t){const i=n.syncPointTree_.get(e);return(0,N.hu)(i,"Missing sync point for query tag that we're tracking"),wN(i,t,RA(n.pendingWriteTree_,e),null)}function uC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function ZJ(){return(0,N.hu)(LA,"Reference.ts has not been loaded"),LA}())(n._repo,n._path):n}class SN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new SN(t)}node(){return this.node_}}class AN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=li(this.path_,e);return new AN(this.syncTree_,t)}node(){return BA(this.syncTree_,this.path_)}}const I3=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?uee(n[".sv"],e,t):"object"==typeof n[".sv"]?dee(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},uee=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},dee=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,N.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,N.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},T3=function(n,e,t,i){return TN(e,new AN(t,n),i)},IN=function(n,e,t){return TN(n,new SN(e),t)};function TN(n,e,t){const i=n.getPriority().val(),r=I3(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,d=I3(l.getValue(),e,t);return d!==l.getValue()||r!==l.getPriority().val()?new Y_(d,mi(r)):n}{const l=n;return s=l,r!==l.getPriority().val()&&(s=s.updatePriority(new Y_(r))),l.forEachChild(qn,(d,g)=>{const y=TN(g,e.getImmediateChild(d),t);y!==g&&(s=s.updateImmediateChild(d,y))}),s}}class MN{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function jA(n,e){let t=e instanceof bn?e:new bn(e),i=n,r=Wt(t);for(;null!==r;){const s=(0,N.DV)(i.node.children,r)||{children:{},childCount:0};i=new MN(r,i,s),t=Pn(t),r=Wt(t)}return i}function rg(n){return n.node.value}function RN(n,e){n.node.value=e,kN(n)}function M3(n){return n.node.childCount>0}function HA(n,e){Mr(n.node.children,(t,i)=>{e(new MN(t,n,i))})}function R3(n,e,t,i){t&&!i&&e(n),HA(n,r=>{R3(r,e,!0,i)}),t&&i&&e(n)}function dC(n){return new bn(null===n.parent?n.name:dC(n.parent)+"/"+n.name)}function kN(n){null!==n.parent&&function pee(n,e,t){const i=function hee(n){return void 0===rg(n)&&!M3(n)}(t),r=(0,N.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,kN(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,kN(n))}(n.parent,n.name,n)}const gee=/[\[\].#$\/\u0000-\u001F\u007F]/,mee=/[\[\].#$\u0000-\u001F\u007F]/,ON=10485760,GA=function(n){return"string"==typeof n&&0!==n.length&&!gee.test(n)},k3=function(n){return"string"==typeof n&&0!==n.length&&!mee.test(n)},hC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!gA(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},Nc=function(n,e,t,i){i&&void 0===e||fC((0,N.gK)(n,"value"),e,t)},fC=function(n,e,t){const i=t instanceof bn?new MX(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Jp(i));if("function"==typeof e)throw new Error(n+"contains a function "+Jp(i)+" with contents = "+e.toString());if(gA(e))throw new Error(n+"contains "+e.toString()+" "+Jp(i));if("string"==typeof e&&e.length>ON/3&&(0,N.ug)(e)>ON)throw new Error(n+"contains a string greater than "+ON+" utf8 bytes "+Jp(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Mr(e,(l,d)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!GA(l)))throw new Error(n+" contains an invalid key ("+l+") "+Jp(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function RX(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),L$(n)})(i,l),fC(n,d,i),function kX(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Jp(i)+" in addition to actual children.")}},O3=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];Mr(e,(l,d)=>{const g=new bn(l);if(fC(r,d,li(t,g)),".priority"===YP(g)&&!hC(d))throw new Error(r+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(g)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=Xb(i);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!GA(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(TX);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&Ba(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},FN=function(n,e,t){if(!t||void 0!==e){if(gA(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!hC(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pC=function(n,e,t,i){if(!(i&&void 0===t||GA(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gC=function(n,e,t,i){if(!(i&&void 0===t||k3(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ua=function(n,e){if(".info"===Wt(e))throw new Error(n+" failed = Can't modify data under /.info/")},F3=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!GA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),k3(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class wee{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $A(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!KP(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function PN(n,e,t){$A(n,t),P3(n,i=>KP(i,e))}function ja(n,e,t){$A(n,t),P3(n,i=>Ba(i,e)||Ba(e,i))}function P3(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(bee(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function bee(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Qp&&Tr("event: "+t.toString()),q_(i)}}}const N3="repo_interrupt";class Eee{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wee,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=AA(),this.transactionQueueTree_=new MN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function L3(n){const t=n.infoData_.getNode(new bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function mC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:L3(n)})}function B3(n,e,t,i,r){n.dataUpdateCount++;const s=new bn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(r)if(i){const g=(0,N.UI)(t,y=>mi(y));l=function iee(n,e,t,i){const r=EN(n,i);if(r){const s=DN(r),l=s.path,d=s.queryId,g=zs(l,e),y=Wn.fromObject(t);return xN(n,l,new J_(uN(d),g,y))}return[]}(n.serverSyncTree_,s,g,r)}else{const g=mi(t);l=function nee(n,e,t,i){const r=EN(n,i);if(null!=r){const s=DN(r),l=s.path,d=s.queryId,g=zs(l,e);return xN(n,l,new tg(uN(d),g,t))}return[]}(n.serverSyncTree_,s,g,r)}else if(i){const g=(0,N.UI)(t,y=>mi(y));l=function JJ(n,e,t){const i=Wn.fromObject(t);return ty(n,new J_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,g)}else{const g=mi(t);l=cC(n.serverSyncTree_,s,g)}let d=s;l.length>0&&(d=iy(n,s)),ja(n.eventQueue_,d,l)}function V3(n,e){NN(n,"connected",e),!1===e&&function Iee(n){ny(n,"onDisconnectEvents");const e=mC(n),t=AA();aN(n.onDisconnect_,fn(),(r,s)=>{const l=T3(r,s,n.serverSyncTree_,e);X_(t,r,l)});let i=[];aN(t,fn(),(r,s)=>{i=i.concat(cC(n.serverSyncTree_,r,s));const l=UN(n,r);iy(n,l)}),n.onDisconnect_=AA(),ja(n.eventQueue_,fn(),i)}(n)}function NN(n,e,t){const i=new bn("/.info/"+e),r=mi(t);n.infoData_.updateSnapshot(i,r);const s=cC(n.infoSyncTree_,i,r);ja(n.eventQueue_,i,s)}function zA(n){return n.nextWriteId_++}function LN(n,e,t,i,r){ny(n,"set",{path:e.toString(),value:t,priority:i});const s=mC(n),l=mi(t,i),d=BA(n.serverSyncTree_,e),g=IN(l,d,s),y=zA(n),E=bN(n.serverSyncTree_,e,g,y,!0);$A(n.eventQueue_,E),n.server_.put(e.toString(),l.val(!0),(M,F)=>{const B="ok"===M;B||ys("set at "+e+" failed: "+M);const Q=Gh(n.serverSyncTree_,y,!B);ja(n.eventQueue_,e,Q),$h(0,r,M,F)});const x=UN(n,e);iy(n,x),ja(n.eventQueue_,x,[])}function Tee(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&oN(n.onDisconnect_,e),$h(0,t,i,r)})}function U3(n,e,t,i){const r=mi(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,l)=>{"ok"===s&&X_(n.onDisconnect_,e,r),$h(0,i,s,l)})}function BN(n,e,t){let i;i=".info"===Wt(e._path)?CN(n.infoSyncTree_,e,t):CN(n.serverSyncTree_,e,t),PN(n.eventQueue_,e._path,i)}function j3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(N3)}function ny(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Tr(t,...e)}function $h(n,e,t,i){e&&q_(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const l=new Error(s);l.code=r,e(l)}})}function VN(n,e,t){return BA(n.serverSyncTree_,e,t)||Bt.EMPTY_NODE}function qA(n,e=n.transactionQueueTree_){if(e||WA(n,e),rg(e)){const t=G3(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function Pee(n,e,t){const i=t.map(y=>y.currentWriteId),r=VN(n,e,i);let s=r;const l=r.hash();for(let y=0;y<t.length;y++){const E=t[y];(0,N.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const x=zs(e,E.path);s=s.updateChild(x,E.currentOutputSnapshotRaw)}const d=s.val(!0),g=e;n.server_.put(g.toString(),d,y=>{ny(n,"transaction put response",{path:g.toString(),status:y});let E=[];if("ok"===y){const x=[];for(let M=0;M<t.length;M++)t[M].status=2,E=E.concat(Gh(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&x.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();WA(n,jA(n.transactionQueueTree_,e)),qA(n,n.transactionQueueTree_),ja(n.eventQueue_,e,E);for(let M=0;M<x.length;M++)q_(x[M])}else{if("datastale"===y)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{ys("transaction at "+g.toString()+" failed: "+y);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=y}iy(n,e)}},l)}(n,dC(e),t)}else M3(e)&&HA(e,t=>{qA(n,t)})}function iy(n,e){const t=H3(n,e),i=dC(t);return function Nee(n,e,t){if(0===e.length)return;const i=[];let r=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const g=e[d],y=zs(t,g.path);let x,E=!1;if((0,N.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)E=!0,x=g.abortReason,r=r.concat(Gh(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)E=!0,x="maxretry",r=r.concat(Gh(n.serverSyncTree_,g.currentWriteId,!0));else{const M=VN(n,g.path,l);g.currentInputSnapshot=M;const F=e[d].update(M.val());if(void 0!==F){fC("transaction failed: Data returned ",F,g.path);let B=mi(F);"object"==typeof F&&null!=F&&(0,N.r3)(F,".priority")||(B=B.updatePriority(M.getPriority()));const ye=g.currentWriteId,Oe=mC(n),Ze=IN(B,M,Oe);g.currentOutputSnapshotRaw=B,g.currentOutputSnapshotResolved=Ze,g.currentWriteId=zA(n),l.splice(l.indexOf(ye),1),r=r.concat(bN(n.serverSyncTree_,g.path,Ze,g.currentWriteId,g.applyLocally)),r=r.concat(Gh(n.serverSyncTree_,ye,!0))}else E=!0,x="nodata",r=r.concat(Gh(n.serverSyncTree_,g.currentWriteId,!0))}ja(n.eventQueue_,t,r),r=[],E&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&i.push("nodata"===x?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(x),!1,null)))}WA(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)q_(i[d]);qA(n,n.transactionQueueTree_)}(n,G3(n,t),i),i}function H3(n,e){let t,i=n.transactionQueueTree_;for(t=Wt(e);null!==t&&void 0===rg(i);)i=jA(i,t),t=Wt(e=Pn(e));return i}function G3(n,e){const t=[];return $3(n,e,t),t.sort((i,r)=>i.order-r.order),t}function $3(n,e,t){const i=rg(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);HA(e,r=>{$3(n,r,t)})}function WA(n,e){const t=rg(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,RN(e,t.length>0?t:void 0)}HA(e,i=>{WA(n,i)})}function UN(n,e){const t=dC(H3(n,e)),i=jA(n.transactionQueueTree_,e);return function fee(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{jN(n,r)}),jN(n,i),R3(i,r=>{jN(n,r)}),t}function jN(n,e){const t=rg(e);if(t){const i=[];let r=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,N.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,N.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),r=r.concat(Gh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?RN(e,void 0):t.length=s+1,ja(n.eventQueue_,dC(e),r);for(let l=0;l<i.length;l++)q_(i[l])}}const HN=function(n,e){const t=Vee(n),i=t.namespace;return"firebase.com"===t.domain&&Oc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Oc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ys("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new HP(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new bn(t.pathString)}},Vee=function(n){let e="",t="",i="",r="",s="",l=!0,d="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(E,x)),E<x&&(r=function Lee(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}e+="/"+r}return e}(n.substring(E,x)));const M=function Bee(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ys(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));y=e.indexOf(":"),y>=0?(l="https"===d||"wss"===d,g=parseInt(e.substring(y+1),10)):y=e.length;const F=e.slice(0,y);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const B=e.indexOf(".");i=e.substring(0,B).toLowerCase(),t=e.substring(B+1),s=i}"ns"in M&&(s=M.ns)}return{host:e,port:g,domain:t,subdomain:i,secure:l,scheme:d,pathString:r,namespace:s}};class z3{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Pz)(this.snapshot.exportVal())}}class q3{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class W3{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Y3{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return Tee(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ua("OnDisconnect.remove",this._path);const e=new N.BH;return U3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ua("OnDisconnect.set",this._path),Nc("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return U3(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ua("OnDisconnect.setWithPriority",this._path),Nc("OnDisconnect.setWithPriority",e,this._path,!1),FN("OnDisconnect.setWithPriority",t,!1);const i=new N.BH;return function Mee(n,e,t,i,r){const s=mi(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,d)=>{"ok"===l&&X_(n.onDisconnect_,e,s),$h(0,r,l,d)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Ua("OnDisconnect.update",this._path),O3("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function Ree(n,e,t,i){if((0,N.xb)(t))return Tr("onDisconnect().update() called with empty data.  Don't do anything."),void $h(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&Mr(t,(l,d)=>{const g=mi(d);X_(n.onDisconnect_,li(e,l),g)}),$h(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Co{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Yt(this._path)?null:YP(this._path)}get ref(){return new Ha(this._repo,this._path)}get _queryIdentifier(){const e=X$(this._queryParams),t=VP(e);return"{}"===t?"default":t}get _queryObject(){return X$(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof Co))return!1;const t=this._repo===e._repo,i=KP(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function IX(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function YA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function zh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Pc){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Qu)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Fc)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===qn){if(null!=e&&!hC(e)||null!=t&&!hC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof eN||n.getIndex()===tN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function KA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ha extends Co{constructor(e,t){super(e,t,new DA,!1)}get parent(){const e=N$(this._path);return null===e?null:new Ha(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class sg{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new bn(e),i=og(this.ref,e);return new sg(this._node.getChild(t),i,qn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new sg(r,og(this.ref,i),qn)))}hasChild(e){const t=new bn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function K3(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?og(n._root,e):n._root}function Z3(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=HN(e,n._repo.repoInfo_.nodeAdmin);F3("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Oc("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),K3(n,t.path.toString())}function og(n,e){return null===Wt((n=(0,N.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),gC("child","path",t,!1)):gC("child","path",e,!1),new Ha(n._repo,li(n._path,e));var t}function GN(n,e){n=(0,N.m9)(n),Ua("set",n._path),Nc("set",e,n._path,!1);const t=new N.BH;return LN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function $ee(n,e){O3("update",e,n._path,!1);const t=new N.BH;return function Aee(n,e,t,i){ny(n,"update",{path:e.toString(),value:t});let r=!0;const s=mC(n),l={};if(Mr(t,(d,g)=>{r=!1,l[d]=T3(li(e,d),mi(g),n.serverSyncTree_,s)}),r)Tr("update() called with empty data.  Don't do anything."),$h(0,i,"ok",void 0);else{const d=zA(n),g=function XJ(n,e,t,i){!function gJ(n,e,t,i){(0,N.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=hN(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=Wn.fromObject(t);return ty(n,new J_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,l,d);$A(n.eventQueue_,g),n.server_.merge(e.toString(),t,(y,E)=>{const x="ok"===y;x||ys("update at "+e+" failed: "+y);const M=Gh(n.serverSyncTree_,d,!x),F=M.length>0?iy(n,e):e;ja(n.eventQueue_,F,M),$h(0,i,y,E)}),Mr(t,y=>{const E=UN(n,li(e,y));iy(n,E)}),ja(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function zee(n){return function See(n,e){const t=function ree(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(y,E)=>{const x=zs(y,t);i=i||jh(E,x)});let r=n.syncPointTree_.get(t);r?i=i||jh(r,fn()):(r=new y3,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,l=s?new Vh(i,!0,!1):null;return function UJ(n){return MA(n.viewCache_)}(v3(r,e,RA(n.pendingWriteTree_,e._path),s?l.getNode():Bt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(i=>{const r=mi(i).withIndex(e._queryParams.getIndex()),s=cC(n.serverSyncTree_,e._path,r);return PN(n.eventQueue_,e._path,s),Promise.resolve(r)},i=>(ny(n,"get for query "+(0,N.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,N.m9)(n))._repo,n).then(e=>new sg(e,new Ha(n._repo,n._path),n._queryParams.getIndex()))}class ZA{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new z3("value",this,new sg(e.snapshotNode,new Ha(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new q3(this,e,t):null}matches(e){return e instanceof ZA&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class QA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new q3(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const i=og(new Ha(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new z3(e.type,this,new sg(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof QA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function _C(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const g=t,y=(E,x)=>{BN(n._repo,n,d),g(E,x)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new W3(t,s||void 0),d="value"===e?new ZA(l):new QA(e,l);return function kee(n,e,t){let i;i=".info"===Wt(e._path)?D3(n.infoSyncTree_,e,t):D3(n.serverSyncTree_,e,t),PN(n.eventQueue_,e._path,i)}(n._repo,n,d),()=>BN(n._repo,n,d)}function $N(n,e,t,i){return _C(n,"value",e,t,i)}function Q3(n,e,t,i){return _C(n,"child_added",e,t,i)}function X3(n,e,t,i){return _C(n,"child_changed",e,t,i)}function J3(n,e,t,i){return _C(n,"child_moved",e,t,i)}function ez(n,e,t,i){return _C(n,"child_removed",e,t,i)}function tz(n,e,t){let i=null;const r=t?new W3(t):null;"value"===e?i=new ZA(r):e&&(i=new QA(e,r)),BN(n._repo,n,i)}class Vl{}class nz extends Vl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("endAt",this._value,e._path,!0);const t=sN(e._queryParams,this._value,this._key);if(KA(t),zh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class Wee extends Vl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("endBefore",this._value,e._path,!1);const t=function nJ(n,e,t){let i,r;return n.index_===Pc?("string"==typeof e&&(e=K$(e)),r=sN(n,e,t)):(i=null==t?Qu:K$(t),r=sN(n,e,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(KA(t),zh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class iz extends Vl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("startAt",this._value,e._path,!0);const t=rN(e._queryParams,this._value,this._key);if(KA(t),zh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class Zee extends Vl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("startAfter",this._value,e._path,!1);const t=function tJ(n,e,t){let i;if(n.index_===Pc)"string"==typeof e&&(e=Y$(e)),i=rN(n,e,t);else{let r;r=null==t?Fc:Y$(t),i=rN(n,e,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(KA(t),zh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class Xee extends Vl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(e._repo,e._path,function JX(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class ete extends Vl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(e._repo,e._path,function eJ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class nte extends Vl{constructor(e){super(),this._path=e}_apply(e){YA(e,"orderByChild");const t=new bn(this._path);if(Yt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new eN(t),r=xA(e._queryParams,i);return zh(r),new Co(e._repo,e._path,r,!0)}}class rte extends Vl{_apply(e){YA(e,"orderByKey");const t=xA(e._queryParams,Pc);return zh(t),new Co(e._repo,e._path,t,!0)}}class ote extends Vl{_apply(e){YA(e,"orderByPriority");const t=xA(e._queryParams,qn);return zh(t),new Co(e._repo,e._path,t,!0)}}class lte extends Vl{_apply(e){YA(e,"orderByValue");const t=xA(e._queryParams,tN);return zh(t),new Co(e._repo,e._path,t,!0)}}class ute extends Vl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Nc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new nz(this._value,this._key)._apply(new iz(this._value,this._key)._apply(e))}}function Ul(n,...e){let t=(0,N.m9)(n);for(const i of e)t=i._apply(t);return t}(function $J(n){(0,N.hu)(!PA,"__referenceConstructor has already been defined"),PA=n})(Ha),function KJ(n){(0,N.hu)(!LA,"__referenceConstructor has already been defined"),LA=n}(Ha);const zN={};function sz(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Oc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,l=HN(s,r),d=l.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,s=`http://${y}?ns=${d.namespace}`,l=HN(s,r),d=l.repoInfo):g=!l.repoInfo.secure;const E=r&&g?new Qb(Qb.OWNER):new iX(n.name,n.options,e);F3("Invalid Firebase Database URL",l),Yt(l.path)||Oc("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function gte(n,e,t,i){let r=zN[e.name];r||(r={},zN[e.name]=r);let s=r[n.toURLString()];return s&&Oc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Eee(n,false,t,i),r[n.toURLString()]=s,s}(d,n,E,new nX(n.name,t));return new _te(x,n)}class _te{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Dee(n,e,t){if(n.stats_=zP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new SA(n.repoInfo_,(i,r,s,l)=>{B3(n,i,r,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>V3(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Pz)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new eg(n.repoInfo_,e,(i,r,s,l)=>{B3(n,i,r,s,l)},i=>{V3(n,i)},i=>{!function xee(n,e){Mr(e,(t,i)=>{NN(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function oX(n,e){const t=n.toString();return $P[t]||($P[t]=e()),$P[t]}(n.repoInfo_,()=>new lJ(n.stats_,n.server_)),n.infoData_=new iJ,n.infoSyncTree_=new E3({startListening:(i,r,s,l)=>{let d=[];const g=n.infoData_.getNode(i._path);return g.isEmpty()||(d=cC(n.infoSyncTree_,i._path,g),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),NN(n,"connected",!1),n.serverSyncTree_=new E3({startListening:(i,r,s,l)=>(n.server_.listen(i,s,r,(d,g)=>{const y=l(d,g);ja(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ha(this._repo,fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function pte(n,e){const t=zN[e];(!t||t[n.key]!==n)&&Oc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),j3(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Oc("Cannot call "+e+" on a deleted database.")}}function oz(){D$.IS_TRANSPORT_INITIALIZED&&ys("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function yte(){oz(),Lh.forceDisallow()}function vte(){oz(),W_.forceDisallow(),Lh.forceAllow()}function Ete(n,e){r$(n,e)}const xte={".sv":"timestamp"};class Ite{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}eg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},eg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Dte(n){JG(kl.SDK_VERSION),(0,kl._registerComponent)(new Hu.wA("database",(e,{instanceIdentifier:t})=>sz(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,kl.registerVersion)(QG,"0.13.0",n),(0,kl.registerVersion)(QG,"0.13.0","esm2017")}();const kte=new Ol.Yd("@firebase/database-compat"),az=function(n){kte.warn("FIREBASE WARNING: "+n)};class Pte{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,az("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class Nte{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class qh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),gC("DataSnapshot.child","path",e,!1),new qh(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),gC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new qh(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new Zo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Yr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const l=Yr.getCancelAndContextArgs_("Query.on",i,r),d=(y,E)=>{t.call(l.context,new qh(this.database,y),E)};d.userCallback=t,d.context=l.context;const g=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return $N(this._delegate,d,g),t;case"child_added":return Q3(this._delegate,d,g),t;case"child_removed":return ez(this._delegate,d,g),t;case"child_changed":return X3(this._delegate,d,g),t;case"child_moved":return J3(this._delegate,d,g),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,tz(this._delegate,e,r)}else tz(this._delegate,e)}get(){return zee(this._delegate).then(e=>new qh(this.database,e))}once(e,t,i,r){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const s=Yr.getCancelAndContextArgs_("Query.once",i,r),l=new N.BH,d=(y,E)=>{const x=new qh(this.database,y);t&&t.call(s.context,x,E),l.resolve(x)};d.userCallback=t,d.context=s.context;const g=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":$N(this._delegate,d,g,{onlyOnce:!0});break;case"child_added":Q3(this._delegate,d,g,{onlyOnce:!0});break;case"child_removed":ez(this._delegate,d,g,{onlyOnce:!0});break;case"child_changed":X3(this._delegate,d,g,{onlyOnce:!0});break;case"child_moved":J3(this._delegate,d,g,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new Yr(this.database,Ul(this._delegate,function Jee(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Xee(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new Yr(this.database,Ul(this._delegate,function tte(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ete(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new Yr(this.database,Ul(this._delegate,function ite(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return gC("orderByChild","path",n,!1),new nte(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new Yr(this.database,Ul(this._delegate,function ste(){return new rte}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new Yr(this.database,Ul(this._delegate,function ate(){return new ote}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new Yr(this.database,Ul(this._delegate,function cte(){return new lte}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new Yr(this.database,Ul(this._delegate,function Kee(n=null,e){return pC("startAt","key",e,!0),new iz(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new Yr(this.database,Ul(this._delegate,function Qee(n,e){return pC("startAfter","key",e,!0),new Zee(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new Yr(this.database,Ul(this._delegate,function qee(n,e){return pC("endAt","key",e,!0),new nz(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new Yr(this.database,Ul(this._delegate,function Yee(n,e){return pC("endBefore","key",e,!0),new Wee(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new Yr(this.database,Ul(this._delegate,function dte(n,e){return pC("equalTo","key",e,!0),new ute(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Yr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,N.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,N.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Zo(this.database,new Ha(this._delegate._repo,this._delegate._path))}}class Zo extends Yr{constructor(e,t){super(e,new Co(t._repo,t._path,new DA,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Zo(this.database,og(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Zo(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new Zo(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const i=GN(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,az("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ua("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const i=$ee(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function Gee(n,e,t){if(Ua("setWithPriority",n._path),Nc("setWithPriority",e,n._path,!1),FN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new N.BH;return LN(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function jee(n){return Ua("remove",n._path),GN(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function Tte(n,e,t){var i;if(n=(0,N.m9)(n),Ua("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==t?void 0:t.applyLocally)||void 0===i||i,s=new N.BH,d=$N(n,()=>{});return function Fee(n,e,t,i,r,s){ny(n,"transaction on "+e);const l={path:e,update:t,onComplete:i,status:null,order:t$(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=VN(n,e,void 0);l.currentInputSnapshot=d;const g=l.update(d.val());if(void 0===g)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{fC("transaction failed: Data returned ",g,l.path),l.status=0;const y=jA(n.transactionQueueTree_,e),E=rg(y)||[];let x;E.push(l),RN(y,E),"object"==typeof g&&null!==g&&(0,N.r3)(g,".priority")?(x=(0,N.DV)(g,".priority"),(0,N.hu)(hC(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(BA(n.serverSyncTree_,e)||Bt.EMPTY_NODE).getPriority().val();const M=mC(n),F=mi(g,x),B=IN(F,d,M);l.currentOutputSnapshotRaw=F,l.currentOutputSnapshotResolved=B,l.currentWriteId=zA(n);const Q=bN(n.serverSyncTree_,e,B,l.currentWriteId,l.applyLocally);ja(n.eventQueue_,e,Q),qA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,y,E)=>{let x=null;g?s.reject(g):(x=new sg(E,new Ha(n._repo,n._path),qn),s.resolve(new Ite(y,x)))},d,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new Nte(s.committed,new qh(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const i=function Hee(n,e){n=(0,N.m9)(n),Ua("setPriority",n._path),FN("setPriority",e,!1);const t=new N.BH;return LN(n._repo,li(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const i=function Uee(n,e){n=(0,N.m9)(n),Ua("push",n._path),Nc("push",e,n._path,!0);const t=L3(n._repo),i=KX(t),r=og(n,i),s=og(n,i);let l;return l=null!=e?GN(s,e).then(()=>s):Promise.resolve(s),r.then=l.then.bind(l),r.catch=l.then.bind(l,void 0),r}(this._delegate,e),r=i.then(l=>new Zo(this.database,l));t&&r.then(()=>t(null),l=>t(l));const s=new Zo(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Ua("Reference.onDisconnect",this._delegate._path),new Pte(new Y3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class yC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:yte,forceLongPolling:vte}}useEmulator(e,t,i={}){!function wte(n,e,t,i={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Oc("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Oc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Qb(Qb.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,N.Sg)(i.mockUserToken,n.app.options.projectId);s=new Qb(l)}!function fte(n,e,t,i){n.repoInfo_=new HP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof Zo){const t=Z3(this._delegate,e.toString());return new Zo(this,t)}{const t=K3(this._delegate,e);return new Zo(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const i=Z3(this._delegate,e);return new Zo(this,i)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function bte(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),j3(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function Cte(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function Oee(n){n.persistentConnection_&&n.persistentConnection_.resume(N3)}(n._repo)}(this._delegate)}}yC.ServerValue={TIMESTAMP:function Ste(){return xte}(),increment:n=>function Ate(n){return{".sv":{increment:n}}}(n)};var Bte=Object.freeze({__proto__:null,initStandalone:function Lte({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){JG(t);const l=new Hu.zt("auth-internal",new Hu.H0("database-standalone"));return l.setComponent(new Hu.wA("auth-internal",()=>i,"PRIVATE")),{instance:new yC(sz(n,l,void 0,e,s),n),namespace:r}}});const Vte=yC.ServerValue;function lz(n){return null==n}function cz(n){return"function"==typeof n.set}function uz(n,e){return cz(e)?e:n.ref(e)}function dz(n,e){if(function jte(n){return"string"==typeof n}(n))return e.stringCase();if(cz(n))return e.firebaseCase();if(function Hte(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function vC(n,e,t="on",i=Ci.z){return new xn.y(r=>{let s=null;return s=n[t](e,(l,d)=>{i.schedule(()=>{r.next({snapshot:l,prevKey:d})}),"once"===t&&i.schedule(()=>r.complete())},l=>{i.schedule(()=>r.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,Be.U)(r=>{const{snapshot:s,prevKey:l}=r;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:l,key:d}}),(0,Au.B)())}function hz(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function zte(n,e){const{payload:t,prevKey:i,key:r}=e,s=hz(n,r),l=function $te(n,e){if(lz(e))return 0;{const t=hz(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:d,key:g.key};return d=g.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(g=>g.payload.key!==t.key)).splice(l,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===r?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function fz(n){return(lz(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function pz(n,e,t){return function Gte(n,e,t){return vC(n,"value","once",t).pipe(qi(i=>{const r=[ze(i)];return e.forEach(s=>r.push(vC(n,s,"on",t))),(0,vr.T)(...r).pipe(Dc(zte,[]))}),Ny())}(n,e=fz(e),t)}function gz(n,e,t){const i=(e=fz(e)).map(r=>vC(n,r,"on",t));return(0,vr.T)(...i)}function mz(n,e){return function(i,r){return dz(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function Kte(n){return function(t){return t?dz(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function _z(n,e){return function(){return vC(n,"value","on",e)}}!function Ute(n){n.INTERNAL.registerComponent(new Hu.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new yC(r,i)},"PUBLIC").setServiceProps({Reference:Zo,Query:Yr,Database:yC,DataSnapshot:qh,enableLogging:Ete,INTERNAL:Bte,ServerValue:Vte}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(GV.Z);const Xte=new c.OlP("angularfire2.realtimeDatabaseURL"),Jte=new c.OlP("angularfire2.database.use-emulator");let ene=(()=>{class n{constructor(t,i,r,s,l,d,g,y,E,x,M,F,B,Q,ye){this.schedulers=d;const Oe=g,Ze=(0,Ls.on)(t,l,i);y&&kP(Ze,l,E,M,F,B,x,Q),this.database=(0,Ls.cc)(`${Ze.name}.database.${r}`,"AngularFireDatabase",Ze.name,()=>{const ct=l.runOutsideAngular(()=>Ze.database(r||void 0));return Oe&&ct.useEmulator(...Oe),ct},[Oe])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>uz(this.database,t));let s=r;return i&&(s=i(r)),function Zte(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:mz(i,"update"),set:mz(i,"set"),push:r=>i.push(r),remove:Kte(i),snapshotChanges:r=>pz(n,r,t).pipe($n.iC),stateChanges:r=>gz(n,r,t).pipe($n.iC),auditTrail:r=>function qte(n,e,t){return function Yte(n,e,t){return function Wte(n,e){return vC(n,"value","on",e).pipe((0,Be.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function $9(...n){const e=(0,ha.jO)(n);return(0,Hn.e)((t,i)=>{const r=n.length,s=new Array(r);let l=n.map(()=>!1),d=!1;for(let g=0;g<r;g++)(0,Zn.Xf)(n[g]).subscribe((0,Qt.x)(i,y=>{s[g]=y,!d&&!l[g]&&(l[g]=!0,(d=l.every(pu.y))&&(l=null))},Bd.Z));t.subscribe((0,Qt.x)(i,g=>{if(d){const y=[g,...s];i.next(e?e(...y):y)}}))})}(e),(0,Be.U)(([r,s])=>{const l=r.lastKeyToLoad,d=s.map(g=>g.key);return{actions:s,lastKeyToLoad:l,loadedKeys:d}}),function z9(n){return(0,Hn.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,Qt.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,Be.U)(r=>r.actions))}(n,gz(n,e).pipe(Dc((r,s)=>[...r,s],[])),t)}(n,r,t).pipe($n.iC),valueChanges:(r,s)=>pz(n,r,t).pipe((0,Be.U)(d=>d.map(g=>s&&s.idField?Object.assign(Object.assign({},g.payload.val()),{[s.idField]:g.key}):g.payload.val())),$n.iC)}}(s,this)}object(t){return function Qte(n,e){return{query:n,snapshotChanges:()=>_z(n,e.schedulers.outsideAngular)().pipe($n.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>_z(n,e.schedulers.outsideAngular)().pipe($n.iC,(0,Be.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>uz(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ls.Dh),c.LFG(Ls.xv,8),c.LFG(Xte,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG($n.HU),c.LFG(Jte,8),c.LFG(fA,8),c.LFG(SP,8),c.LFG(AP,8),c.LFG(IP,8),c.LFG(TP,8),c.LFG(MP,8),c.LFG(RP,8),c.LFG(hA,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tne=(()=>{class n{constructor(){xP.Z.registerVersion("angularfire",$n.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[ene]}),n})(),nne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[H9]}),n.\u0275inj=c.cJS({providers:[],imports:[[aa,L9,GK,kL,gE,KE,Bo,UE,HE,Ls.hO.initializeApp(G9_firebase),d9,i9,tne]]}),n})();(0,c.G48)(),Jl().bootstrapModule(nne).catch(n=>console.error(n))},5867:(et,ve,P)=>{P.d(ve,{Mq:()=>c.getApp,C6:()=>c.getApps});var c=P(9681);(0,c.registerVersion)("firebase","9.8.1","app")},127:(et,ve,P)=>{P.d(ve,{Z:()=>c.Z});var c=P(3942);c.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(et,ve,P)=>{P.r(ve);var c=P(5861),te=P(3942),L=P(2090),de=P(9681),oe=P(655),me=P(1877),ie=P(4859);const Pe=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new me.Yd("@firebase/auth");function Qe(v,...p){We.logLevel<=me.in.ERROR&&We.error(`Auth (${de.SDK_VERSION}): ${v}`,...p)}function Se(v,...p){throw Ge(v,...p)}function be(v,...p){return Ge(v,...p)}function Ce(v,p,_){const b=Object.assign(Object.assign({},Ue()),{[p]:_});return new L.LL("auth","Firebase",b).create(p,{appName:v.name})}function He(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Se(v,"argument-error"),Ce(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(v,...p){if("string"!=typeof v){const _=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=v.name),v._errorFactory.create(_,...b)}return pe.create(v,...p)}function z(v,p,..._){if(!v)throw Ge(p,..._)}function H(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Qe(p),new Error(p)}function X(v,p){v||H(p)}const ue=new Map;function se(v){X(v instanceof Function,"Expected a class definition");let p=ue.get(v);return p?(X(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,ue.set(v,p),p)}function _t(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ot(){return"http:"===Nn()||"https:"===Nn()}function Nn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Rn{constructor(p,_){this.shortDelay=p,this.longDelay=_,X(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function it(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ot()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xt(v,p){X(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class ci{static initialize(p,_,b){this.fetchImpl=p,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void H("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void H("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void H("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const an={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},cr=new Rn(3e4,6e4);function Jt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Vt(v,p,_,b){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,c.Z)(function*(v,p,_,b,I={}){return ur(v,I,(0,c.Z)(function*(){let O={},Z={};b&&("GET"===p?Z=b:O={body:JSON.stringify(b)});const _e=(0,L.xO)(Object.assign({key:v.config.apiKey},Z)).slice(1),Ve=yield v._getAdditionalHeaders();return Ve["Content-Type"]="application/json",v.languageCode&&(Ve["X-Firebase-Locale"]=v.languageCode),ci.fetch()(Ys(v,v.config.apiHost,_,_e),Object.assign({method:p,headers:Ve,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function ur(v,p,_){return Si.apply(this,arguments)}function Si(){return(Si=(0,c.Z)(function*(v,p,_){v._canInitEmulator=!1;const b=Object.assign(Object.assign({},an),p);try{const I=new Ji(v),O=yield Promise.race([_(),I.promise]);I.clearNetworkTimeout();const Z=yield O.json();if("needConfirmation"in Z)throw Qr(v,"account-exists-with-different-credential",Z);if(O.ok&&!("errorMessage"in Z))return Z;{const _e=O.ok?Z.errorMessage:Z.error.message,[Ve,Xe]=_e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Qr(v,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Ve)throw Qr(v,"email-already-in-use",Z);const vt=b[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Ce(v,vt,Xe);Se(v,vt)}}catch(I){if(I instanceof L.ZR)throw I;Se(v,"network-request-failed")}})).apply(this,arguments)}function Ni(v,p,_,b){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,c.Z)(function*(v,p,_,b,I={}){const O=yield Vt(v,p,_,b,I);return"mfaPendingCredential"in O&&Se(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Ys(v,p,_,b){const I=`${p}${_}?${b}`;return v.config.emulator?Xt(v.config,I):`${v.config.apiScheme}://${I}`}class Ji{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(be(this.auth,"network-request-failed")),cr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qr(v,p,_){const b={appName:v.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const I=be(v,p,b);return I.customData._tokenResponse=_,I}function dr(){return(dr=(0,c.Z)(function*(v,p){return Vt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function kn(v,p){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,c.Z)(function*(v,p){return Vt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ks(v,p){return er.apply(this,arguments)}function er(){return(er=(0,c.Z)(function*(v,p){return Vt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function ui(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Eo(){return(Eo=(0,c.Z)(function*(v,p=!1){const _=(0,L.m9)(v),b=yield _.getIdToken(p),I=ot(b);z(I&&I.exp&&I.auth_time&&I.iat,_.auth,"internal-error");const O="object"==typeof I.firebase?I.firebase:void 0,Z=null==O?void 0:O.sign_in_provider;return{claims:I,token:b,authTime:ui(zt(I.auth_time)),issuedAtTime:ui(zt(I.iat)),expirationTime:ui(zt(I.exp)),signInProvider:Z||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function zt(v){return 1e3*Number(v)}function ot(v){const[p,_,b]=v.split(".");if(void 0===p||void 0===_||void 0===b)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const I=(0,L.tV)(_);return I?JSON.parse(I):(Qe("Failed to decode base64 JWT payload"),null)}catch(I){return Qe("Caught error parsing JWT payload as JSON",I),null}}function Ai(v,p){return fr.apply(this,arguments)}function fr(){return(fr=(0,c.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(b){throw b instanceof L.ZR&&Ht(b)&&v.auth.currentUser===v&&(yield v.auth.signOut()),b}})).apply(this,arguments)}function Ht({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Do{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const I=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,I)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,c.Z)(function*(){yield _.iteration()}),b)}iteration(){var p=this;return(0,c.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&p.schedule(!0))}p.schedule()})()}}class Ii{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ui(this.lastLoginAt),this.creationTime=ui(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ti(v){return j.apply(this,arguments)}function j(){return(j=(0,c.Z)(function*(v){var p;const _=v.auth,b=yield v.getIdToken(),I=yield Ai(v,Ks(_,{idToken:b}));z(null==I?void 0:I.users.length,_,"internal-error");const O=I.users[0];v._notifyReloadListener(O);const Z=(null===(p=O.providerUserInfo)||void 0===p?void 0:p.length)?W(O.providerUserInfo):[],_e=De(v.providerData,Z),vt=!!v.isAnonymous&&!(v.email&&O.passwordHash||(null==_e?void 0:_e.length)),pt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:_e,metadata:new Ii(O.createdAt,O.lastLoginAt),isAnonymous:vt};Object.assign(v,pt)})).apply(this,arguments)}function K(){return(K=(0,c.Z)(function*(v){const p=(0,L.m9)(v);yield Ti(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function De(v,p){return[...v.filter(b=>!p.some(I=>I.providerId===b.providerId)),...p]}function W(v){return v.map(p=>{var{providerId:_}=p,b=(0,oe._T)(p,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Re(){return(Re=(0,c.Z)(function*(v,p){const _=yield ur(v,{},(0,c.Z)(function*(){const b=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:I,apiKey:O}=v.config,Z=Ys(v,I,"/v1/token",`key=${O}`),_e=yield v._getAdditionalHeaders();return _e["Content-Type"]="application/x-www-form-urlencoded",ci.fetch()(Z,{method:"POST",headers:_e,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){z(p.idToken,"internal-error"),z(void 0!==p.idToken,"internal-error"),z(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function bt(v){const p=ot(v);return z(p,"internal-error"),z(void 0!==p.exp,"internal-error"),z(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var b=this;return(0,c.Z)(function*(){return z(!b.accessToken||b.refreshToken,p,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var b=this;return(0,c.Z)(function*(){const{accessToken:I,refreshToken:O,expiresIn:Z}=yield function ne(v,p){return Re.apply(this,arguments)}(p,_);b.updateTokensAndExpiration(I,O,Number(Z))})()}updateTokensAndExpiration(p,_,b){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,_){const{refreshToken:b,accessToken:I,expirationTime:O}=_,Z=new tt;return b&&(z("string"==typeof b,"internal-error",{appName:p}),Z.refreshToken=b),I&&(z("string"==typeof I,"internal-error",{appName:p}),Z.accessToken=I),O&&(z("number"==typeof O,"internal-error",{appName:p}),Z.expirationTime=O),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new tt,this.toJSON())}_performRefresh(){return H("not implemented")}}function gt(v,p){z("string"==typeof v||void 0===v,"internal-error",{appName:p})}class St{constructor(p){var{uid:_,auth:b,stsTokenManager:I}=p,O=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Do(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=I,this.accessToken=I.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Ii(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,c.Z)(function*(){const b=yield Ai(_,_.stsTokenManager.getToken(_.auth,p));return z(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(p){return function hr(v){return Eo.apply(this,arguments)}(this,p)}reload(){return function Y(v){return K.apply(this,arguments)}(this)}_assign(p){this!==p&&(z(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new St(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var b=this;return(0,c.Z)(function*(){let I=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),I=!0),_&&(yield Ti(b)),yield b.auth._persistUserIfCurrent(b),I&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,c.Z)(function*(){const _=yield p.getIdToken();return yield Ai(p,function yt(v,p){return dr.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var b,I,O,Z,_e,Ve,Xe,vt;const pt=null!==(b=_.displayName)&&void 0!==b?b:void 0,ri=null!==(I=_.email)&&void 0!==I?I:void 0,hs=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Hd=null!==(Z=_.photoURL)&&void 0!==Z?Z:void 0,NC=null!==(_e=_.tenantId)&&void 0!==_e?_e:void 0,yl=null!==(Ve=_._redirectEventId)&&void 0!==Ve?Ve:void 0,bf=null!==(Xe=_.createdAt)&&void 0!==Xe?Xe:void 0,zg=null!==(vt=_.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Cf,emailVerified:Ef,isAnonymous:xy,providerData:qg,stsTokenManager:Sy}=_;z(Cf&&Sy,p,"internal-error");const Ay=tt.fromJSON(this.name,Sy);z("string"==typeof Cf,p,"internal-error"),gt(pt,p.name),gt(ri,p.name),z("boolean"==typeof Ef,p,"internal-error"),z("boolean"==typeof xy,p,"internal-error"),gt(hs,p.name),gt(Hd,p.name),gt(NC,p.name),gt(yl,p.name),gt(bf,p.name),gt(zg,p.name);const Wg=new St({uid:Cf,auth:p,email:ri,emailVerified:Ef,displayName:pt,isAnonymous:xy,photoURL:Hd,phoneNumber:hs,tenantId:NC,stsTokenManager:Ay,createdAt:bf,lastLoginAt:zg});return qg&&Array.isArray(qg)&&(Wg.providerData=qg.map(LC=>Object.assign({},LC))),yl&&(Wg._redirectEventId=yl),Wg}static _fromIdTokenResponse(p,_,b=!1){return(0,c.Z)(function*(){const I=new tt;I.updateFromServerResponse(_);const O=new St({uid:_.localId,auth:p,stsTokenManager:I,isAnonymous:b});return yield Ti(O),O})()}}const Et=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(_,b){var I=this;return(0,c.Z)(function*(){I.storage[_]=b})()}_get(_){var b=this;return(0,c.Z)(function*(){const I=b.storage[_];return void 0===I?null:I})()}_remove(_){var b=this;return(0,c.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return v.type="NONE",v})();function ti(v,p,_){return`firebase:${v}:${p}:${_}`}class Li{constructor(p,_,b){this.persistence=p,this.auth=_,this.userKey=b;const{config:I,name:O}=this.auth;this.fullUserKey=ti(this.userKey,I.apiKey,O),this.fullPersistenceKey=ti("persistence",I.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,c.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?St._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,c.Z)(function*(){if(_.persistence===p)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,b="authUser"){return(0,c.Z)(function*(){if(!_.length)return new Li(se(Et),p,b);const I=(yield Promise.all(_.map(function(){var Xe=(0,c.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let O=I[0]||se(Et);const Z=ti(b,p.config.apiKey,p.name);let _e=null;for(const Xe of _)try{const vt=yield Xe._get(Z);if(vt){const pt=St._fromJSON(p,vt);Xe!==O&&(_e=pt),O=Xe;break}}catch(vt){}const Ve=I.filter(Xe=>Xe._shouldAllowMigration);return O._shouldAllowMigration&&Ve.length?(O=Ve[0],_e&&(yield O._set(Z,_e.toJSON())),yield Promise.all(_.map(function(){var Xe=(0,c.Z)(function*(vt){if(vt!==O)try{yield vt._remove(Z)}catch(pt){}});return function(vt){return Xe.apply(this,arguments)}}())),new Li(O,p,b)):new Li(O,p,b)})()}}function jl(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(ni(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ga(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(vs(p))return"Blackberry";if(ii(p))return"Webos";if(Hl(p))return"Safari";if((p.includes("chrome/")||$a(p))&&!p.includes("edge/"))return"Chrome";if(Bi(p))return"Android";{const b=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Ga(v=(0,L.z$)()){return/firefox\//i.test(v)}function Hl(v=(0,L.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function $a(v=(0,L.z$)()){return/crios\//i.test(v)}function ni(v=(0,L.z$)()){return/iemobile/i.test(v)}function Bi(v=(0,L.z$)()){return/android/i.test(v)}function vs(v=(0,L.z$)()){return/blackberry/i.test(v)}function ii(v=(0,L.z$)()){return/webos/i.test(v)}function tr(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)}function Zs(v=(0,L.z$)()){return tr(v)||Bi(v)||ii(v)||vs(v)||/windows phone/i.test(v)||ni(v)}function Xo(v,p=[]){let _;switch(v){case"Browser":_=jl((0,L.z$)());break;case"Worker":_=`${jl((0,L.z$)())}-${v}`;break;default:_=v}const b=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${de.SDK_VERSION}/${b}`}class nr{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const b=O=>new Promise((Z,_e)=>{try{Z(p(O))}catch(Ve){_e(Ve)}});b.onAbort=_,this.queue.push(b);const I=this.queue.length-1;return()=>{this.queue[I]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,c.Z)(function*(){if(_.auth.currentUser===p)return;const b=[];try{for(const I of _.queue)yield I(p),I.onAbort&&b.push(I.onAbort)}catch(I){b.reverse();for(const O of b)try{O()}catch(Z){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:I.message})}})()}}class Ye{constructor(p,_,b){this.app=p,this.heartbeatServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ln(this),this.idTokenSubscription=new ln(this),this.beforeStateQueue=new nr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(p,_){var b=this;return _&&(this._popupRedirectResolver=se(_)),this._initializationPromise=this.queue((0,c.Z)(function*(){var I,O;if(!b._deleted&&(b.persistenceManager=yield Li.create(b,p),!b._deleted)){if(null===(I=b._popupRedirectResolver)||void 0===I?void 0:I._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(Z){}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(O=b.currentUser)||void 0===O?void 0:O.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,c.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,c.Z)(function*(){var b;const I=yield _.assertedPersistence.getCurrentUser();let O=I,Z=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const _e=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,Ve=null==O?void 0:O._redirectEventId,Xe=yield _.tryRedirectSignIn(p);(!_e||_e===Ve)&&(null==Xe?void 0:Xe.user)&&(O=Xe.user,Z=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(Z)try{yield _.beforeStateQueue.runMiddleware(O)}catch(_e){O=I,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(_e))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return z(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var _=this;return(0,c.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(I){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,c.Z)(function*(){try{yield Ti(p)}catch(b){if("auth/network-request-failed"!==b.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function xt(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,c.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,c.Z)(function*(){const b=p?(0,L.m9)(p):null;return b&&z(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(p,_=!1){var b=this;return(0,c.Z)(function*(){if(!b._deleted)return p&&z(b.tenantId===p.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(p)),b.queue((0,c.Z)(function*(){yield b.directlySetCurrentUser(p),b.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,c.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,c.Z)(function*(){yield _.assertedPersistence.setPersistence(se(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,_,b){return this.registerStateListener(this.authStateSubscription,p,_,b)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,b){return this.registerStateListener(this.idTokenSubscription,p,_,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var b=this;return(0,c.Z)(function*(){const I=yield b.getOrInitRedirectPersistenceManager(_);return null===p?I.removeCurrentUser():I.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,c.Z)(function*(){if(!_.redirectPersistenceManager){const b=p&&se(p)||_._popupRedirectResolver;z(b,_,"argument-error"),_.redirectPersistenceManager=yield Li.create(_,[se(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,c.Z)(function*(){var b,I;return _._isInitialized&&(yield _.queue((0,c.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===p?_._currentUser:(null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,c.Z)(function*(){if(p===_.currentUser)return _.queue((0,c.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,b,I){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return z(Z,this,"internal-error"),Z.then(()=>O(this.currentUser)),"function"==typeof _?p.addObserver(_,b,I):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,c.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Xo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,c.Z)(function*(){var _;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const I=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return I&&(b["X-Firebase-Client"]=I),b})()}}function ht(v){return(0,L.m9)(v)}class ln{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xr(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Jr(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class kr{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return H("not implemented")}_getIdTokenResponse(p){return H("not implemented")}_linkToIdToken(p,_){return H("not implemented")}_getReauthenticationResolver(p){return H("not implemented")}}function Vn(v,p){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,c.Z)(function*(v,p){return Vt(v,"POST","/v1/accounts:resetPassword",Jt(v,p))})).apply(this,arguments)}function Jo(v,p){return Or.apply(this,arguments)}function Or(){return(Or=(0,c.Z)(function*(v,p){return Vt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Gl(v,p){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,c.Z)(function*(v,p){return Vt(v,"POST","/v1/accounts:update",Jt(v,p))})).apply(this,arguments)}function So(){return(So=(0,c.Z)(function*(v,p){return Ni(v,"POST","/v1/accounts:signInWithPassword",Jt(v,p))})).apply(this,arguments)}function Xs(v,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,c.Z)(function*(v,p){return Vt(v,"POST","/v1/accounts:sendOobCode",Jt(v,p))})).apply(this,arguments)}function dn(v,p){return $l.apply(this,arguments)}function $l(){return($l=(0,c.Z)(function*(v,p){return Xs(v,p)})).apply(this,arguments)}function qa(v,p){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,c.Z)(function*(v,p){return Xs(v,p)})).apply(this,arguments)}function Fr(v,p){return zl.apply(this,arguments)}function zl(){return(zl=(0,c.Z)(function*(v,p){return Xs(v,p)})).apply(this,arguments)}function nd(v,p){return es.apply(this,arguments)}function es(){return(es=(0,c.Z)(function*(v,p){return Xs(v,p)})).apply(this,arguments)}function Wa(){return(Wa=(0,c.Z)(function*(v,p){return Ni(v,"POST","/v1/accounts:signInWithEmailLink",Jt(v,p))})).apply(this,arguments)}function id(){return(id=(0,c.Z)(function*(v,p){return Ni(v,"POST","/v1/accounts:signInWithEmailLink",Jt(v,p))})).apply(this,arguments)}class Mi extends kr{constructor(p,_,b,I=null){super("password",b),this._email=p,this._password=_,this._tenantId=I}static _fromEmailAndPassword(p,_){return new Mi(p,_,"password")}static _fromEmailAndCode(p,_,b=null){return new Mi(p,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,c.Z)(function*(){switch(_.signInMethod){case"password":return function di(v,p){return So.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ts(v,p){return Wa.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Se(p,"internal-error")}})()}_linkToIdToken(p,_){var b=this;return(0,c.Z)(function*(){switch(b.signInMethod){case"password":return Jo(p,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function ug(v,p){return id.apply(this,arguments)}(p,{idToken:_,email:b._email,oobCode:b._password});default:Se(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Js(v,p){return rd.apply(this,arguments)}function rd(){return(rd=(0,c.Z)(function*(v,p){return Ni(v,"POST","/v1/accounts:signInWithIdp",Jt(v,p))})).apply(this,arguments)}class ws extends kr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new ws(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Se("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:I}=_,O=(0,oe._T)(_,["providerId","signInMethod"]);if(!b||!I)return null;const Z=new ws(b,I);return Z.idToken=O.idToken||void 0,Z.accessToken=O.accessToken||void 0,Z.secret=O.secret,Z.nonce=O.nonce,Z.pendingToken=O.pendingToken||null,Z}_getIdTokenResponse(p){return Js(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,Js(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Js(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,L.xO)(_)}return p}}function hg(v,p){return sd.apply(this,arguments)}function sd(){return(sd=(0,c.Z)(function*(v,p){return Vt(v,"POST","/v1/accounts:sendVerificationCode",Jt(v,p))})).apply(this,arguments)}function eo(){return(eo=(0,c.Z)(function*(v,p){return Ni(v,"POST","/v1/accounts:signInWithPhoneNumber",Jt(v,p))})).apply(this,arguments)}function od(){return(od=(0,c.Z)(function*(v,p){const _=yield Ni(v,"POST","/v1/accounts:signInWithPhoneNumber",Jt(v,p));if(_.temporaryProof)throw Qr(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const pg={USER_NOT_FOUND:"user-not-found"};function ad(){return(ad=(0,c.Z)(function*(v,p){return Ni(v,"POST","/v1/accounts:signInWithPhoneNumber",Jt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),pg)})).apply(this,arguments)}class ea extends kr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new ea({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new ea({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Bc(v,p){return eo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function fg(v,p){return od.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function gg(v,p){return ad.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:b,verificationCode:I}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:b,code:I}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:b,phoneNumber:I,temporaryProof:O}=p;return b||_||I||O?new ea({verificationId:_,verificationCode:b,phoneNumber:I,temporaryProof:O}):null}}class ql{constructor(p){var _,b,I,O,Z,_e;const Ve=(0,L.zd)((0,L.pd)(p)),Xe=null!==(_=Ve.apiKey)&&void 0!==_?_:null,vt=null!==(b=Ve.oobCode)&&void 0!==b?b:null,pt=function Kh(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(I=Ve.mode)&&void 0!==I?I:null);z(Xe&&vt&&pt,"argument-error"),this.apiKey=Xe,this.operation=pt,this.code=vt,this.continueUrl=null!==(O=Ve.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Z=Ve.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(_e=Ve.tenantId)&&void 0!==_e?_e:null}static parseLink(p){const _=function Ya(v){const p=(0,L.zd)((0,L.pd)(v)).link,_=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,b=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(b?(0,L.zd)((0,L.pd)(b)).link:null)||b||_||p||v}(p);try{return new ql(_)}catch(b){return null}}}let cd=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,b){return Mi._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const I=ql.parseLink(b);return z(I,"argument-error"),Mi._fromEmailAndCode(_,I.code,I.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ri{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ao extends Ri{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ns extends Ao{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return z("providerId"in _&&"signInMethod"in _,"argument-error"),ws._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return z(p.idToken||p.accessToken,"argument-error"),ws._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ns.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ns.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:I,pendingToken:O,nonce:Z,providerId:_e}=p;if(!b&&!I&&!_&&!O||!_e)return null;try{return new ns(_e)._credential({idToken:_,accessToken:b,nonce:Z,pendingToken:O})}catch(Ve){return null}}}let ta=(()=>{class v extends Ao{constructor(){super("facebook.com")}static credential(_){return ws._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(b){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ud=(()=>{class v extends Ao{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return ws._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:I}=_;if(!b&&!I)return null;try{return v.credential(b,I)}catch(O){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Zh=(()=>{class v extends Ao{constructor(){super("github.com")}static credential(_){return ws._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(b){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Io extends kr{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Js(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,Js(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Js(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:I,pendingToken:O}=_;return b&&I&&O&&b===I?new Io(b,O):null}static _create(p,_){return new Io(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ui extends Ri{constructor(p){z(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Ui.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Ui.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=Io.fromJSON(p);return z(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:b}=p;if(!_||!b)return null;try{return Io._create(b,_)}catch(I){return null}}}let dd=(()=>{class v extends Ao{constructor(){super("twitter.com")}static credential(_,b){return ws._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:I}=_;if(!b||!I)return null;try{return v.credential(b,I)}catch(O){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function On(v,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,c.Z)(function*(v,p){return Ni(v,"POST","/v1/accounts:signUp",Jt(v,p))})).apply(this,arguments)}class gr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,b,I=!1){return(0,c.Z)(function*(){const O=yield St._fromIdTokenResponse(p,b,I),Z=Vc(b);return new gr({user:O,providerId:Z,_tokenResponse:b,operationType:_})})()}static _forOperation(p,_,b){return(0,c.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const I=Vc(b);return new gr({user:p,providerId:I,_tokenResponse:b,operationType:_})})()}}function Vc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Uc(){return(Uc=(0,c.Z)(function*(v){var p;const _=ht(v);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new gr({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield On(_,{returnSecureToken:!0}),I=yield gr._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(I.user),I})).apply(this,arguments)}class ia extends L.ZR{constructor(p,_,b,I){var O;super(_.code,_.message),this.operationType=b,this.user=I,Object.setPrototypeOf(this,ia.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,_,b,I){return new ia(p,_,b,I)}}function jc(v,p,_,b){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?ia._fromErrorAndOperation(v,O,p,b):O})}function is(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function cn(){return(cn=(0,c.Z)(function*(v,p){const _=(0,L.m9)(v);yield tn(!0,_,p);const{providerUserInfo:b}=yield kn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),I=is(b||[]);return _.providerData=_.providerData.filter(O=>I.has(O.providerId)),I.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Ka(v,p){return To.apply(this,arguments)}function To(){return(To=(0,c.Z)(function*(v,p,_=!1){const b=yield Ai(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return gr._forOperation(v,"link",b)})).apply(this,arguments)}function tn(v,p,_){return Za.apply(this,arguments)}function Za(){return(Za=(0,c.Z)(function*(v,p,_){yield Ti(p);const I=!1===v?"provider-already-linked":"no-such-provider";z(is(p.providerData).has(_)===v,p.auth,I)})).apply(this,arguments)}function Wl(v,p){return to.apply(this,arguments)}function to(){return(to=(0,c.Z)(function*(v,p,_=!1){const{auth:b}=v,I="reauthenticate";try{const O=yield Ai(v,jc(b,I,p,v),_);z(O.idToken,b,"internal-error");const Z=ot(O.idToken);z(Z,b,"internal-error");const{sub:_e}=Z;return z(v.uid===_e,b,"user-mismatch"),gr._forOperation(v,I,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Se(b,"user-mismatch"),O}})).apply(this,arguments)}function vi(v,p){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,c.Z)(function*(v,p,_=!1){const b="signIn",I=yield jc(v,b,p),O=yield gr._fromIdTokenResponse(v,b,I);return _||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Dn(v,p){return rs.apply(this,arguments)}function rs(){return(rs=(0,c.Z)(function*(v,p){return vi(ht(v),p)})).apply(this,arguments)}function wi(v,p){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,c.Z)(function*(v,p){const _=(0,L.m9)(v);return yield tn(!1,_,p.providerId),Ka(_,p)})).apply(this,arguments)}function Cs(v,p){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,c.Z)(function*(v,p){return Wl((0,L.m9)(v),p)})).apply(this,arguments)}function Pr(v,p){return ss.apply(this,arguments)}function ss(){return(ss=(0,c.Z)(function*(v,p){return Ni(v,"POST","/v1/accounts:signInWithCustomToken",Jt(v,p))})).apply(this,arguments)}function mt(){return(mt=(0,c.Z)(function*(v,p){const _=ht(v),b=yield Pr(_,{token:p,returnSecureToken:!0}),I=yield gr._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(I.user),I})).apply(this,arguments)}class sa{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Yl._fromServerResponse(p,_):Se(p,"internal-error")}}class Yl extends sa{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Yl(_)}}function Xa(v,p,_){var b;z((null===(b=_.url)||void 0===b?void 0:b.length)>0,v,"invalid-continue-uri"),z(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(z(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(z(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Ja(){return(Ja=(0,c.Z)(function*(v,p,_){const b=(0,L.m9)(v),I={requestType:"PASSWORD_RESET",email:p};_&&Xa(b,I,_),yield qa(b,I)})).apply(this,arguments)}function zc(){return(zc=(0,c.Z)(function*(v,p,_){yield Vn((0,L.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Lt(){return(Lt=(0,c.Z)(function*(v,p){yield Gl((0,L.m9)(v),{oobCode:p})})).apply(this,arguments)}function Kl(v,p){return yn.apply(this,arguments)}function yn(){return(yn=(0,c.Z)(function*(v,p){const _=(0,L.m9)(v),b=yield Vn(_,{oobCode:p}),I=b.requestType;switch(z(I,_,"internal-error"),I){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(b.mfaInfo,_,"internal-error");default:z(b.email,_,"internal-error")}let O=null;return b.mfaInfo&&(O=sa._fromServerResponse(ht(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:O},operation:I}})).apply(this,arguments)}function Ro(){return(Ro=(0,c.Z)(function*(v,p){const{data:_}=yield Kl((0,L.m9)(v),p);return _.email})).apply(this,arguments)}function el(){return(el=(0,c.Z)(function*(v,p,_){const b=ht(v),I=yield On(b,{returnSecureToken:!0,email:p,password:_}),O=yield gr._fromIdTokenResponse(b,"signIn",I);return yield b._updateCurrentUser(O.user),O})).apply(this,arguments)}function Zl(){return(Zl=(0,c.Z)(function*(v,p,_){const b=(0,L.m9)(v),I={requestType:"EMAIL_SIGNIN",email:p};z(_.handleCodeInApp,b,"argument-error"),_&&Xa(b,I,_),yield Fr(b,I)})).apply(this,arguments)}function jn(){return(jn=(0,c.Z)(function*(v,p,_){const b=(0,L.m9)(v),I=cd.credentialWithLink(p,_||_t());return z(I._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Dn(b,I)})).apply(this,arguments)}function Es(v,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,c.Z)(function*(v,p){return Vt(v,"POST","/v1/accounts:createAuthUri",Jt(v,p))})).apply(this,arguments)}function Nr(){return(Nr=(0,c.Z)(function*(v,p){const b={identifier:p,continueUri:Ot()?_t():"http://localhost"},{signinMethods:I}=yield Es((0,L.m9)(v),b);return I||[]})).apply(this,arguments)}function Xl(){return(Xl=(0,c.Z)(function*(v,p){const _=(0,L.m9)(v),I={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Xa(_.auth,I,p);const{email:O}=yield dn(_.auth,I);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function Jl(){return(Jl=(0,c.Z)(function*(v,p,_){const b=(0,L.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&Xa(b.auth,O,_);const{email:Z}=yield nd(b.auth,O);Z!==v.email&&(yield v.reload())})).apply(this,arguments)}function il(v,p){return aa.apply(this,arguments)}function aa(){return(aa=(0,c.Z)(function*(v,p){return Vt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function rl(){return(rl=(0,c.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const b=(0,L.m9)(v),O={idToken:yield b.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Z=yield Ai(b,il(b.auth,O));b.displayName=Z.displayName||null,b.photoURL=Z.photoUrl||null;const _e=b.providerData.find(({providerId:Ve})=>"password"===Ve);_e&&(_e.displayName=b.displayName,_e.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Z)})).apply(this,arguments)}function la(v,p,_){return sl.apply(this,arguments)}function sl(){return(sl=(0,c.Z)(function*(v,p,_){const{auth:b}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(O.email=p),_&&(O.password=_);const Z=yield Ai(v,Jo(b,O));yield v._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class ca{constructor(p,_,b={}){this.isNewUser=p,this.providerId=_,this.profile=b}}class pd extends ca{constructor(p,_,b,I){super(p,_,b),this.username=I}}class ua extends ca{constructor(p,_){super(p,"facebook.com",_)}}class os extends pd{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Xh extends ca{constructor(p,_){super(p,"google.com",_)}}class hi extends pd{constructor(p,_,b){super(p,"twitter.com",_,b)}}function as(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function fd(v){var p,_;if(!v)return null;const{providerId:b}=v,I=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!b&&(null==v?void 0:v.idToken)){const Z=null===(_=null===(p=ot(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Z)return new ca(O,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!b)return null;switch(b){case"facebook.com":return new ua(O,I);case"github.com":return new os(O,I);case"google.com":return new Xh(O,I);case"twitter.com":return new hi(O,I,v.screenName||null);case"custom":case"anonymous":return new ca(O,null);default:return new ca(O,b,I)}}(_)}class Ds{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new Ds("enroll",p)}static _fromMfaPendingCredential(p){return new Ds("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,b;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Ds._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(b=p.multiFactorSession)||void 0===b?void 0:b.idToken)return Ds._fromIdtoken(p.multiFactorSession.idToken)}return null}}class da{constructor(p,_,b){this.session=p,this.hints=_,this.signInResolver=b}static _fromError(p,_){const b=ht(p),I=_.customData._serverResponse,O=(I.mfaInfo||[]).map(_e=>sa._fromServerResponse(b,_e));z(I.mfaPendingCredential,b,"internal-error");const Z=Ds._fromMfaPendingCredential(I.mfaPendingCredential);return new da(Z,O,function(){var _e=(0,c.Z)(function*(Ve){const Xe=yield Ve._process(b,Z);delete I.mfaInfo,delete I.mfaPendingCredential;const vt=Object.assign(Object.assign({},I),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(_.operationType){case"signIn":const pt=yield gr._fromIdTokenResponse(b,_.operationType,vt);return yield b._updateCurrentUser(pt.user),pt;case"reauthenticate":return z(_.user,b,"internal-error"),gr._forOperation(_.user,_.operationType,vt);default:Se(b,"internal-error")}});return function(Ve){return _e.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,c.Z)(function*(){return _.signInResolver(p)})()}}function ef(v,p){return Vt(v,"POST","/v2/accounts/mfaEnrollment:start",Jt(v,p))}class _d{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>sa._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new _d(p)}getSession(){var p=this;return(0,c.Z)(function*(){return Ds._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var b=this;return(0,c.Z)(function*(){const I=p,O=yield b.getSession(),Z=yield Ai(b.user,I._process(b.user.auth,O,_));return yield b.user._updateTokensIfNecessary(Z),b.user.reload()})()}unenroll(p){var _=this;return(0,c.Z)(function*(){const b="string"==typeof p?p:p.uid,I=yield _.user.getIdToken(),O=yield Ai(_.user,function ec(v,p){return Vt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(v,p))}(_.user.auth,{idToken:I,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Z})=>Z!==b),yield _.user._updateTokensIfNecessary(O);try{yield _.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const tc=new WeakMap,ro="__sak";class Qc{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ro,"1"),this.storage.removeItem(ro),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const xn=(()=>{class v extends Qc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vg(){const v=(0,L.z$)();return Hl(v)||tr(v)}()&&function yi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Zs(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const I=this.storage.getItem(b),O=this.localCache[b];I!==O&&_(b,O,I)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((_e,Ve,Xe)=>{this.notifyListeners(_e,Xe)});const I=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _e=this.storage.getItem(I);if(_.newValue!==_e)null!==_.newValue?this.storage.setItem(I,_.newValue):this.storage.removeItem(I);else if(this.localCache[I]===_.newValue&&!b)return}const O=()=>{const _e=this.storage.getItem(I);!b&&this.localCache[I]===_e||this.notifyListeners(I,_e)},Z=this.storage.getItem(I);!function za(){return(0,L.w1)()&&10===document.documentMode}()||Z===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,b){this.localCache[_]=b;const I=this.listeners[_];if(I)for(const O of Array.from(I))O(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,I)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:I}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var I=()=>super._set,O=this;return(0,c.Z)(function*(){yield I().call(O,_,b),O.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,I=this;return(0,c.Z)(function*(){const O=yield b().call(I,_);return I.localCache[_]=JSON.stringify(O),O})()}_remove(_){var b=()=>super._remove,I=this;return(0,c.Z)(function*(){yield b().call(I,_),delete I.localCache[_]})()}}return v.type="LOCAL",v})(),Sn=(()=>{class v extends Qc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return v.type="SESSION",v})();let Hn=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(O=>O.isListeningto(_));if(b)return b;const I=new v(_);return this.receivers.push(I),I}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,c.Z)(function*(){const I=_,{eventId:O,eventType:Z,data:_e}=I.data,Ve=b.handlersMap[Z];if(!(null==Ve?void 0:Ve.size))return;I.ports[0].postMessage({status:"ack",eventId:O,eventType:Z});const Xe=Array.from(Ve).map(function(){var pt=(0,c.Z)(function*(ri){return ri(I.origin,_e)});return function(ri){return pt.apply(this,arguments)}}()),vt=yield function so(v){return Promise.all(v.map(function(){var p=(0,c.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return p.apply(this,arguments)}}()))}(Xe);I.ports[0].postMessage({status:"done",eventId:O,eventType:Z,response:vt})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Qt(v="",p=10){let _="";for(let b=0;b<p;b++)_+=Math.floor(10*Math.random());return v+_}class An{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,b=50){var I=this;return(0,c.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Z,_e;return new Promise((Ve,Xe)=>{const vt=Qt("",20);O.port1.start();const pt=setTimeout(()=>{Xe(new Error("unsupported_event"))},b);_e={messageChannel:O,onMessage(ri){const hs=ri;if(hs.data.eventId===vt)switch(hs.data.status){case"ack":clearTimeout(pt),Z=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Ve(hs.data.response);break;default:clearTimeout(pt),clearTimeout(Z),Xe(new Error("invalid_response"))}}},I.handlers.add(_e),O.port1.addEventListener("message",_e.onMessage),I.target.postMessage({eventType:p,eventId:vt,data:_},[O.port2])}).finally(()=>{_e&&I.removeMessageHandler(_e)})})()}}function Be(){return window}function oo(){return void 0!==Be().WorkerGlobalScope&&"function"==typeof Be().importScripts}function nc(){return(nc=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const vd="firebaseLocalStorageDb",Oo="firebaseLocalStorage",rr="fbase_key";class Fo{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ki(v,p){return v.transaction([Oo],p?"readwrite":"readonly").objectStore(Oo)}function pa(){const v=indexedDB.open(vd,1);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const b=v.result;try{b.createObjectStore(Oo,{keyPath:rr})}catch(I){_(I)}}),v.addEventListener("success",(0,c.Z)(function*(){const b=v.result;b.objectStoreNames.contains(Oo)?p(b):(b.close(),yield function wd(){const v=indexedDB.deleteDatabase(vd);return new Fo(v).toPromise()}(),p(yield pa()))}))})}function Po(v,p,_){return ga.apply(this,arguments)}function ga(){return(ga=(0,c.Z)(function*(v,p,_){const b=ki(v,!0).put({[rr]:p,value:_});return new Fo(b).toPromise()})).apply(this,arguments)}function Lr(){return(Lr=(0,c.Z)(function*(v,p){const _=ki(v,!1).get(p),b=yield new Fo(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Cn(v,p){const _=ki(v,!0).delete(p);return new Fo(_).toPromise()}const xs=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,c.Z)(function*(){return _.db||(_.db=yield pa()),_.db})()}_withRetries(_){var b=this;return(0,c.Z)(function*(){let I=0;for(;;)try{const O=yield b._openDb();return yield _(O)}catch(O){if(I++>3)throw O;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,c.Z)(function*(){return oo()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,c.Z)(function*(){_.receiver=Hn._getInstance(function tf(){return oo()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,c.Z)(function*(I,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(I,O){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,c.Z)(function*(I,O){return["keyChanged"]});return function(I,O){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,c.Z)(function*(){var b,I;if(_.activeServiceWorker=yield function ls(){return nc.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new An(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(b=O[0])||void 0===b?void 0:b.fulfilled)&&(null===(I=O[0])||void 0===I?void 0:I.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,c.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function yd(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(I){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const _=yield pa();return yield Po(_,ro,"1"),yield Cn(_,ro),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,c.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var I=this;return(0,c.Z)(function*(){return I._withPendingWrite((0,c.Z)(function*(){return yield I._withRetries(O=>Po(O,_,b)),I.localCache[_]=b,I.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,c.Z)(function*(){const I=yield b._withRetries(O=>function Xc(v,p){return Lr.apply(this,arguments)}(O,_));return b.localCache[_]=I,I})()}_remove(_){var b=this;return(0,c.Z)(function*(){return b._withPendingWrite((0,c.Z)(function*(){return yield b._withRetries(I=>Cn(I,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,c.Z)(function*(){const b=yield _._withRetries(Z=>{const _e=ki(Z,!1).getAll();return new Fo(_e).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const I=[],O=new Set;for(const{fbase_key:Z,value:_e}of b)O.add(Z),JSON.stringify(_.localCache[Z])!==JSON.stringify(_e)&&(_.notifyListeners(Z,_e),I.push(Z));for(const Z of Object.keys(_.localCache))_.localCache[Z]&&!O.has(Z)&&(_.notifyListeners(Z,null),I.push(Z));return I})()}notifyListeners(_,b){this.localCache[_]=b;const I=this.listeners[_];if(I)for(const O of Array.from(I))O(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function ma(v,p){return Vt(v,"POST","/v2/accounts/mfaSignIn:start",Jt(v,p))}function Lo(){return(Lo=(0,c.Z)(function*(v){return(yield Vt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _a(v){return new Promise((p,_)=>{const b=document.createElement("script");b.setAttribute("src",v),b.onload=p,b.onerror=I=>{const O=be("internal-error");O.customData=I,_(O)},b.type="text/javascript",b.charset="UTF-8",function cl(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(b)})}function co(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ic=1e12;class dl{constructor(p){this.auth=p,this.counter=ic,this._widgets=new Map}render(p,_){const b=this.counter;return this._widgets.set(b,new oy(p,this.auth.name,_||{})),this.counter++,b}reset(p){var _;const b=p||ic;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(p){var _;return(null===(_=this._widgets.get(p||ic))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,c.Z)(function*(){var b;return null===(b=_._widgets.get(p||ic))||void 0===b||b.execute(),""})()}}class oy{constructor(p,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const I="string"==typeof p?document.getElementById(p):p;z(I,"argument-error",{appName:_}),this.container=I,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function bd(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<v;b++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const In=co("rcb"),wg=new Rn(3e4,6e4);class nf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Be().grecaptcha}load(p,_=""){return z(function Cd(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Be().grecaptcha):new Promise((b,I)=>{const O=Be().setTimeout(()=>{I(be(p,"network-request-failed"))},wg.get());Be()[In]=()=>{Be().clearTimeout(O),delete Be()[In];const _e=Be().grecaptcha;if(!_e)return void I(be(p,"internal-error"));const Ve=_e.render;_e.render=(Xe,vt)=>{const pt=Ve(Xe,vt);return this.counter++,pt},this.hostLanguage=_,b(_e)},_a(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:In,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),I(be(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Be().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ed{load(p){return(0,c.Z)(function*(){return new dl(p)})()}clearedOneInstance(){}}const Dd="recaptcha",xd={theme:"light",type:"image"};class hl{constructor(p,_=Object.assign({},xd),b){this.parameters=_,this.type=Dd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ht(b),this.isInvisible="invisible"===this.parameters.size,z("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const I="string"==typeof p?document.getElementById(p):p;z(I,this.auth,"argument-error"),this.container=I,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ed:new nf,this.validateStartingState()}verify(){var p=this;return(0,c.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(_)||new Promise(O=>{const Z=_e=>{!_e||(p.tokenChangeListeners.delete(Z),O(_e))};p.tokenChangeListeners.add(Z),p.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof p)p(_);else if("string"==typeof p){const b=Be()[p];"function"==typeof b&&b(_)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,c.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,c.Z)(function*(){z(Ot()&&!oo(),p.auth,"internal-error"),yield function ay(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function ll(v){return Lo.apply(this,arguments)}(p.auth);z(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gn{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=ea._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Bo(){return(Bo=(0,c.Z)(function*(v,p,_){const b=ht(v),I=yield ji(b,p,(0,L.m9)(_));return new Gn(I,O=>Dn(b,O))})).apply(this,arguments)}function Sd(){return(Sd=(0,c.Z)(function*(v,p,_){const b=(0,L.m9)(v);yield tn(!1,b,"phone");const I=yield ji(b.auth,p,(0,L.m9)(_));return new Gn(I,O=>wi(b,O))})).apply(this,arguments)}function Zn(){return(Zn=(0,c.Z)(function*(v,p,_){const b=(0,L.m9)(v),I=yield ji(b.auth,p,(0,L.m9)(_));return new Gn(I,O=>Cs(b,O))})).apply(this,arguments)}function ji(v,p,_){return Br.apply(this,arguments)}function Br(){return(Br=(0,c.Z)(function*(v,p,_){var b;const I=yield _.verify();try{let O;if(z("string"==typeof I,v,"argument-error"),z(_.type===Dd,v,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const Z=O.session;if("phoneNumber"in O)return z("enroll"===Z.type,v,"internal-error"),(yield ef(v,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:I}})).phoneSessionInfo.sessionInfo;{z("signin"===Z.type,v,"internal-error");const _e=(null===(b=O.multiFactorHint)||void 0===b?void 0:b.uid)||O.multiFactorUid;return z(_e,v,"missing-multi-factor-info"),(yield ma(v,{mfaPendingCredential:Z.credential,mfaEnrollmentId:_e,phoneSignInInfo:{recaptchaToken:I}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield hg(v,{phoneNumber:O.phoneNumber,recaptchaToken:I});return Z}}finally{_._reset()}})).apply(this,arguments)}function ya(){return(ya=(0,c.Z)(function*(v,p){yield Ka((0,L.m9)(v),p)})).apply(this,arguments)}let uo=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=ht(_)}verifyPhoneNumber(_,b){return ji(this.auth,_,(0,L.m9)(b))}static credential(_,b){return ea._fromVerification(_,b)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:I}=_;return b&&I?ea._fromTokenResponse(b,I):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function _r(v,p){return p?se(p):(z(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class En extends kr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Js(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Js(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Js(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function cs(v){return vi(v.auth,new En(v),v.bypassAuthState)}function nu(v){const{auth:p,user:_}=v;return z(_,p,"internal-error"),Wl(_,new En(v),v.bypassAuthState)}function ft(v){return rc.apply(this,arguments)}function rc(){return(rc=(0,c.Z)(function*(v){const{auth:p,user:_}=v;return z(_,p,"internal-error"),Ka(_,new En(v),v.bypassAuthState)})).apply(this,arguments)}class va{constructor(p,_,b,I,O=!1){this.auth=p,this.resolver=b,this.user=I,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,c.Z)(function*(b,I){p.pendingPromise={resolve:b,reject:I};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(b,I){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,c.Z)(function*(){const{urlResponse:b,sessionId:I,postBody:O,tenantId:Z,error:_e,type:Ve}=p;if(_e)return void _.reject(_e);const Xe={auth:_.auth,requestUri:b,sessionId:I,tenantId:Z||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ve)(Xe))}catch(vt){_.reject(vt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return cs;case"linkViaPopup":case"linkViaRedirect":return ft;case"reauthViaPopup":case"reauthViaRedirect":return nu;default:Se(this.auth,"internal-error")}}resolve(p){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Cg=new Rn(2e3,1e4);function ho(){return(ho=(0,c.Z)(function*(v,p,_){const b=ht(v);He(v,p,Ri);const I=_r(b,_);return new ac(b,"signInViaPopup",p,I).executeNotNull()})).apply(this,arguments)}function iu(){return(iu=(0,c.Z)(function*(v,p,_){const b=(0,L.m9)(v);He(b.auth,p,Ri);const I=_r(b.auth,_);return new ac(b.auth,"reauthViaPopup",p,I,b).executeNotNull()})).apply(this,arguments)}function us(){return(us=(0,c.Z)(function*(v,p,_){const b=(0,L.m9)(v);He(b.auth,p,Ri);const I=_r(b.auth,_);return new ac(b.auth,"linkViaPopup",p,I,b).executeNotNull()})).apply(this,arguments)}let ac=(()=>{class v extends va{constructor(_,b,I,O,Z){super(_,b,O,Z),this.provider=I,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,c.Z)(function*(){const b=yield _.execute();return z(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,c.Z)(function*(){X(1===_.filter.length,"Popup operations only handle one event");const b=Qt();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(I=>{_.reject(I)}),_.resolver._isIframeWebStorageSupported(_.auth,I=>{I||_.reject(be(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,I;this.pollId=(null===(I=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===I?void 0:I.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Cg.get())};_()}}return v.currentPopupAction=null,v})();const Vo=new Map;class Eg extends va{constructor(p,_,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,c.Z)(function*(){let b=Vo.get(_.auth._key());if(!b){try{const O=(yield function bi(v,p){return As.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;b=()=>Promise.resolve(O)}catch(I){b=()=>Promise.reject(I)}Vo.set(_.auth._key(),b)}return _.bypassAuthState||Vo.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,b=this;return(0,c.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(b,p);if("unknown"!==p.type){if(p.eventId){const I=yield b.auth._redirectUserForId(p.eventId);if(I)return b.user=I,_().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function As(){return(As=(0,c.Z)(function*(v,p){const _=U(p),b=k(v);if(!(yield b._isAvailable()))return!1;const I="true"===(yield b._get(_));return yield b._remove(_),I})).apply(this,arguments)}function wa(v,p){return ru.apply(this,arguments)}function ru(){return(ru=(0,c.Z)(function*(v,p){return k(v)._set(U(p),"true")})).apply(this,arguments)}function A(v,p){Vo.set(v._key(),p)}function k(v){return se(v._redirectPersistence)}function U(v){return ti("pendingRedirect",v.config.apiKey,v.name)}function Fe(){return(Fe=(0,c.Z)(function*(v,p,_){const b=ht(v);He(v,p,Ri);const I=_r(b,_);return yield wa(I,b),I._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function Ct(){return(Ct=(0,c.Z)(function*(v,p,_){const b=(0,L.m9)(v);He(b.auth,p,Ri);const I=_r(b.auth,_);yield wa(I,b.auth);const O=yield Is(b);return I._openRedirect(b.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function Hi(){return(Hi=(0,c.Z)(function*(v,p,_){const b=(0,L.m9)(v);He(b.auth,p,Ri);const I=_r(b.auth,_);yield tn(!1,b,p.providerId),yield wa(I,b.auth);const O=yield Is(b);return I._openRedirect(b.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function fo(){return(fo=(0,c.Z)(function*(v,p){return yield ht(v)._initializationPromise,po(v,p,!1)})).apply(this,arguments)}function po(v,p){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,c.Z)(function*(v,p,_=!1){const b=ht(v),I=_r(b,p),Z=yield new Eg(b,I,_).execute();return Z&&!_&&(delete Z.user._redirectEventId,yield b._persistUserIfCurrent(Z.user),yield b._setRedirectUser(null,p)),Z})).apply(this,arguments)}function Is(v){return yr.apply(this,arguments)}function yr(){return(yr=(0,c.Z)(function*(v){const p=Qt(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Td{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(_=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Gi(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fl(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var b;if(p.error&&!fl(p)){const I=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(be(this.auth,I))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const b=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(su(p))}saveEventToCache(p){this.cachedEventUids.add(su(p)),this.lastProcessedEventTime=Date.now()}}function su(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function fl({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function ly(v){return ba.apply(this,arguments)}function ba(){return(ba=(0,c.Z)(function*(v,p={}){return Vt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const pl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lc=/^https?/;function Dg(){return(Dg=(0,c.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield ly(v);for(const _ of p)try{if(cc(_))return}catch(b){}Se(v,"unauthorized-domain")})).apply(this,arguments)}function cc(v){const p=_t(),{protocol:_,hostname:b}=new URL(p);if(v.startsWith("chrome-extension://")){const Z=new URL(v);return""===Z.hostname&&""===b?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Z.hostname===b}if(!lc.test(_))return!1;if(pl.test(v))return b===v;const I=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+I+"|"+I+")$","i").test(b)}const Md=new Rn(3e4,6e4);function gl(){const v=Be().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let rf=null;function sf(v){return rf=rf||function cy(v){return new Promise((p,_)=>{var b,I,O;function Z(){gl(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{gl(),_(be(v,"network-request-failed"))},timeout:Md.get()})}if(null===(I=null===(b=Be().gapi)||void 0===b?void 0:b.iframes)||void 0===I?void 0:I.Iframe)p(gapi.iframes.getContext());else{if(!(null===(O=Be().gapi)||void 0===O?void 0:O.load)){const _e=co("iframefcb");return Be()[_e]=()=>{gapi.load?Z():_(be(v,"network-request-failed"))},_a(`https://apis.google.com/js/api.js?onload=${_e}`).catch(Ve=>_(Ve))}Z()}}).catch(p=>{throw rf=null,p})}(v),rf}const Rd=new Rn(5e3,15e3),ml={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EC(v){const p=v.config;z(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?Xt(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:v.name,v:de.SDK_VERSION},I=lf.get(v.config.apiHost);I&&(b.eid=I);const O=v._getFrameworks();return O.length&&(b.fw=O.join(",")),`${_}?${(0,L.xO)(b).slice(1)}`}function lu(){return lu=(0,c.Z)(function*(v){const p=yield sf(v),_=Be().gapi;return z(_,v,"internal-error"),p.open({where:document.body,url:EC(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ml,dontclear:!0},b=>new Promise(function(){var I=(0,c.Z)(function*(O,Z){yield b.restyle({setHideOnLeave:!1});const _e=be(v,"network-request-failed"),Ve=Be().setTimeout(()=>{Z(_e)},Rd.get());function Xe(){Be().clearTimeout(Ve),O(b)}b.ping(Xe).then(Xe,()=>{Z(_e)})});return function(O,Z){return I.apply(this,arguments)}}()))}),lu.apply(this,arguments)}const xg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dy{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Ea(v,p,_,b,I,O){z(v.config.authDomain,v,"auth-domain-config-required"),z(v.config.apiKey,v,"invalid-api-key");const Z={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:b,v:de.SDK_VERSION,eventId:I};if(p instanceof Ri){p.setDefaultLanguage(v.languageCode),Z.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||(Z.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ve,Xe]of Object.entries(O||{}))Z[Ve]=Xe}if(p instanceof Ao){const Ve=p.getScopes().filter(Xe=>""!==Xe);Ve.length>0&&(Z.scopes=Ve.join(","))}v.tenantId&&(Z.tid=v.tenantId);const _e=Z;for(const Ve of Object.keys(_e))void 0===_e[Ve]&&delete _e[Ve];return`${function Sg({config:v}){return v.emulator?Xt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(_e).slice(1)}`}const Ag="webStorageSupport";class Ig extends class IC{constructor(p){this.factorId=p}_process(p,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,b);case"signin":return this._finalizeSignIn(p,_.credential);default:return H("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ig(p)}_finalizeEnroll(p,_,b){return function ko(v,p){return Vt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(v,p))}(p,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function lo(v,p){return Vt(v,"POST","/v2/accounts/mfaSignIn:finalize",Jt(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fy=(()=>{class v{constructor(){}static assertion(_){return Ig._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var py="@firebase/auth";class cf{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,c.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(b=>{var I;p((null===(I=b)||void 0===I?void 0:I.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function go(){return window}function uc(){return(uc=(0,c.Z)(function*(v,p,_){var b;const{BuildInfo:I}=go();X(p.sessionId,"AuthEvent did not contain a session ID");const O=yield df(p.sessionId),Z={};return tr()?Z.ibi=I.packageName:Bi()?Z.apn=I.packageName:Se(v,"operation-not-supported-in-this-environment"),I.displayName&&(Z.appDisplayName=I.displayName),Z.sessionId=O,Ea(v,_,p.type,void 0,null!==(b=p.eventId)&&void 0!==b?b:void 0,Z)})).apply(this,arguments)}function dc(){return(dc=(0,c.Z)(function*(v){const{BuildInfo:p}=go(),_={};tr()?_.iosBundleId=p.packageName:Bi()?_.androidPackageName=p.packageName:Se(v,"operation-not-supported-in-this-environment"),yield ly(v,_)})).apply(this,arguments)}function Nd(){return(Nd=(0,c.Z)(function*(v,p,_){const{cordova:b}=go();let I=()=>{};try{yield new Promise((O,Z)=>{let _e=null;function Ve(){var pt;O();const ri=null===(pt=b.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof ri&&ri(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function Xe(){_e||(_e=window.setTimeout(()=>{Z(be(v,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===(null==document?void 0:document.visibilityState)&&Xe()}p.addPassiveListener(Ve),document.addEventListener("resume",Xe,!1),Bi()&&document.addEventListener("visibilitychange",vt,!1),I=()=>{p.removePassiveListener(Ve),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",vt,!1),_e&&window.clearTimeout(_e)}})}finally{I()}})).apply(this,arguments)}function df(v){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,c.Z)(function*(v){const p=Tg(v),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(I=>I.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Tg(v){if(X(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),_=new Uint8Array(p);for(let b=0;b<v.length;b++)_[b]=v.charCodeAt(b);return _}!function XA(v){(0,de._registerComponent)(new ie.wA("auth",(p,{options:_})=>{const b=p.getProvider("app").getImmediate(),I=p.getProvider("heartbeat"),{apiKey:O,authDomain:Z}=b.options;return((_e,Ve)=>{z(O&&!O.includes(":"),"invalid-api-key",{appName:_e.name}),z(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:_e.name});const Xe={apiKey:O,authDomain:Z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xo(v)},vt=new Ye(_e,Ve,Xe);return function ae(v,p){const _=(null==p?void 0:p.persistence)||[],b=(Array.isArray(_)?_:[_]).map(se);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(b,null==p?void 0:p.popupRedirectResolver)}(vt,_),vt})(b,I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,b)=>{p.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new ie.wA("auth-internal",p=>{const _=ht(p.getProvider("auth").getImmediate());return new cf(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(py,"0.20.1",function uf(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,de.registerVersion)(py,"0.20.1","esm2017")}("Browser");class _y extends Td{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,c.Z)(function*(){yield p.initPromise})()}}function vy(v){return vr.apply(this,arguments)}function vr(){return(vr=(0,c.Z)(function*(v){const p=yield vn()._get(cu(v));return p&&(yield vn()._remove(cu(v))),p})).apply(this,arguments)}function Bd(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const b=Math.floor(Math.random()*p.length);v.push(p.charAt(b))}return v.join("")}function vn(){return se(xn)}function cu(v){return ti("authEvent",v.config.apiKey,v.name)}function Tn(v){if(!(null==v?void 0:v.includes("?")))return{};const[p,..._]=v.split("?");return(0,L.zd)(_.join("?"))}function pf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:be("no-auth-event")}}function Ud(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function OC(v=(0,L.z$)()){return!("file:"!==Ud()&&"ionic:"!==Ud()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function mf(){try{const v=self.localStorage,p=Qt();if(v)return v.setItem(p,"1"),v.removeItem(p),!function kg(v=(0,L.z$)()){return function $i(){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)}()||function jd(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch(v){return Mn()&&(0,L.hl)()}return!1}function Mn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Da(){return(function nI(){return"http:"===Ud()||"https:"===Ud()}()||(0,L.ru)()||OC())&&!function uu(){return(0,L.b$)()||(0,L.UG)()}()&&mf()&&!Mn()}function du(){return OC()&&"undefined"!=typeof document}function _f(){return(_f=(0,c.Z)(function*(){return!!du()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const wr={LOCAL:"local",NONE:"none",SESSION:"session"},hc=z,Pg="persistence";function xa(v){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,c.Z)(function*(v){yield v._initializationPromise;const p=by(),_=ti(Pg,v.config.apiKey,v.name);p&&p.setItem(_,v._getPersistence())})).apply(this,arguments)}function by(){var v;try{return(null===(v=function Fg(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(p){return null}}const FC=z;class mo{constructor(){this.browserResolver=se(class hy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sn,this._completeRedirectFn=po,this._overrideRedirectResult=A}_openPopup(p,_,b,I){var O=this;return(0,c.Z)(function*(){var Z;X(null===(Z=O.eventManagers[p._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const _e=Ea(p,_,b,_t(),I);return function xC(v,p,_,b=500,I=600){const O=Math.max((window.screen.availHeight-I)/2,0).toString(),Z=Math.max((window.screen.availWidth-b)/2,0).toString();let _e="";const Ve=Object.assign(Object.assign({},xg),{width:b.toString(),height:I.toString(),top:O,left:Z}),Xe=(0,L.z$)().toLowerCase();_&&(_e=$a(Xe)?"_blank":_),Ga(Xe)&&(p=p||"http://localhost",Ve.scrollbars="yes");const vt=Object.entries(Ve).reduce((ri,[hs,Hd])=>`${ri}${hs}=${Hd},`,"");if(function xo(v=(0,L.z$)()){var p;return tr(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Xe)&&"_self"!==_e)return function SC(v,p){const _=document.createElement("a");_.href=v,_.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(p||"",_e),new dy(null);const pt=window.open(p||"",_e,vt);z(pt,v,"popup-blocked");try{pt.focus()}catch(ri){}return new dy(pt)}(p,_e,Qt())})()}_openRedirect(p,_,b,I){var O=this;return(0,c.Z)(function*(){return yield O._originValidation(p),function fa(v){Be().location.href=v}(Ea(p,_,b,_t(),I)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:I,promise:O}=this.eventManagers[_];return I?Promise.resolve(I):(X(O,"If manager is not set, promise should be"),O)}const b=this.initAndGetManager(p);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(p){var _=this;return(0,c.Z)(function*(){const b=yield function kd(v){return lu.apply(this,arguments)}(p),I=new Td(p);return b.register("authEvent",O=>(z(null==O?void 0:O.authEvent,p,"invalid-auth-event"),{status:I.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:I},_.iframes[p._key()]=b,I})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Ag,{type:Ag},I=>{var O;const Z=null===(O=null==I?void 0:I[0])||void 0===O?void 0:O[Ag];void 0!==Z&&_(!!Z),Se(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ou(v){return Dg.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Zs()||Hl()||tr()}}),this.cordovaResolver=se(class ff{constructor(){this._redirectPersistence=Sn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=po,this._overrideRedirectResult=A}_initialize(p){var _=this;return(0,c.Z)(function*(){const b=p._key();let I=_.eventManagers.get(b);return I||(I=new _y(p),_.eventManagers.set(b,I),_.attachCallbackListeners(p,I)),I})()}_openPopup(p){Se(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,b,I){var O=this;return(0,c.Z)(function*(){!function eI(v){var p,_,b,I,O,Z,_e,Ve,Xe,vt;const pt=go();z("function"==typeof(null===(p=null==pt?void 0:pt.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(void 0!==(null===(_=null==pt?void 0:pt.BuildInfo)||void 0===_?void 0:_.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z("function"==typeof(null===(O=null===(I=null===(b=null==pt?void 0:pt.cordova)||void 0===b?void 0:b.plugins)||void 0===I?void 0:I.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(Ve=null===(_e=null===(Z=null==pt?void 0:pt.cordova)||void 0===Z?void 0:Z.plugins)||void 0===_e?void 0:_e.browsertab)||void 0===Ve?void 0:Ve.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(vt=null===(Xe=null==pt?void 0:pt.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===vt?void 0:vt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Z=yield O._initialize(p);yield Z.initialized(),Z.resetRedirect(),function S(){Vo.clear()}(),yield O._originValidation(p);const _e=function yy(v,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:Bd(),postBody:null,tenantId:v.tenantId,error:be(v,"no-auth-event")}}(p,b,I);yield function Mg(v,p){return vn()._set(cu(v),p)}(p,_e);const Ve=yield function Uo(v,p,_){return uc.apply(this,arguments)}(p,_e,_),Xe=yield function Pd(v){const{cordova:p}=go();return new Promise(_=>{p.plugins.browsertab.isAvailable(b=>{let I=null;b?p.plugins.browsertab.openUrl(v):I=p.InAppBrowser.open(v,function td(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(I)})})}(Ve);return function TC(v,p,_){return Nd.apply(this,arguments)}(p,Z,Xe)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Fd(v){return dc.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:b,handleOpenURL:I,BuildInfo:O}=go(),Z=setTimeout((0,c.Z)(function*(){yield vy(p),_.onEvent(pf())}),500),_e=function(){var vt=(0,c.Z)(function*(pt){clearTimeout(Z);const ri=yield vy(p);let hs=null;ri&&(null==pt?void 0:pt.url)&&(hs=function sr(v,p){var _,b;const I=function MC(v){const p=Tn(v),_=p.link?decodeURIComponent(p.link):void 0,b=Tn(_).link,I=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Tn(I).link||I||b||_||v}(p);if(I.includes("/__/auth/callback")){const O=Tn(I),Z=O.firebaseError?function hf(v){try{return JSON.parse(v)}catch(p){return null}}(decodeURIComponent(O.firebaseError)):null,_e=null===(b=null===(_=null==Z?void 0:Z.code)||void 0===_?void 0:_.split("auth/"))||void 0===b?void 0:b[1],Ve=_e?be(_e):null;return Ve?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:I,postBody:null}}return null}(ri,pt.url)),_.onEvent(hs||pf())});return function(ri){return vt.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,_e);const Ve=I,Xe=`${O.packageName.toLowerCase()}://`;go().handleOpenURL=function(){var vt=(0,c.Z)(function*(pt){if(pt.toLowerCase().startsWith(Xe)&&_e({url:pt}),"function"==typeof Ve)try{Ve(pt)}catch(ri){console.error(ri)}});return function(pt){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Sn,this._completeRedirectFn=po,this._overrideRedirectResult=A}_initialize(p){var _=this;return(0,c.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,b,I){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(p,_,b,I)})()}_openRedirect(p,_,b,I){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(p,_,b,I)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return du()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return FC(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,c.Z)(function*(){if(p.underlyingResolver)return;const _=yield function Og(){return _f.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function Bg(v){return v.unwrap()}function vf(v){return Ei(v)}function Ei(v){const{_tokenResponse:p}=v instanceof L.ZR?v.customData:v;if(!p)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return uo.credentialFromResult(v);const _=p.providerId;if(!_||"password"===_)return null;let b;switch(_){case"google.com":b=ud;break;case"facebook.com":b=ta;break;case"github.com":b=Zh;break;case"twitter.com":b=dd;break;default:const{oauthIdToken:I,oauthAccessToken:O,oauthTokenSecret:Z,pendingToken:_e,nonce:Ve}=p;return O||Z||I||_e?_e?_.startsWith("saml.")?Io._create(_,_e):ws._fromParams({providerId:_,signInMethod:_,pendingToken:_e,idToken:I,accessToken:O}):new ns(_).credential({idToken:I,accessToken:O,rawNonce:Ve}):null}return v instanceof L.ZR?b.credentialFromError(v):b.credentialFromResult(v)}function Vr(v,p){return p.catch(_=>{throw _ instanceof L.ZR&&function Ug(v,p){var _;const b=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new Cy(v,function fi(v,p){var _;const b=(0,L.m9)(v),I=p;return z(p.customData.operationType,b,"argument-error"),z(null===(_=I.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),da._fromError(b,I)}(v,p));else if(b){const I=Ei(p),O=p;I&&(O.credential=I,O.tenantId=b.tenantId||void 0,O.email=b.email||void 0,O.phoneNumber=b.phoneNumber||void 0)}}(v,_),_}).then(_=>{const I=_.user;return{operationType:_.operationType,credential:vf(_),additionalUserInfo:as(_),user:jo.getOrCreate(I)}})}function jg(v,p){return wf.apply(this,arguments)}function wf(){return(wf=(0,c.Z)(function*(v,p){const _=yield p;return{verificationId:_.verificationId,confirm:b=>Vr(v,_.confirm(b))}})).apply(this,arguments)}class Cy{constructor(p,_){this.resolver=_,this.auth=function Vg(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Vr(Bg(this.auth),this.resolver.resolveSignIn(p))}}class jo{constructor(p){this._delegate=p,this.multiFactor=function io(v){const p=(0,L.m9)(v);return tc.has(p)||tc.set(p,_d._fromUser(p)),tc.get(p)}(p)}static getOrCreate(p){return jo.USER_MAP.has(p)||jo.USER_MAP.set(p,new jo(p)),jo.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,c.Z)(function*(){return Vr(_.auth,wi(_._delegate,p))})()}linkWithPhoneNumber(p,_){var b=this;return(0,c.Z)(function*(){return jg(b.auth,function CC(v,p,_){return Sd.apply(this,arguments)}(b._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,c.Z)(function*(){return Vr(_.auth,function oc(v,p,_){return us.apply(this,arguments)}(_._delegate,p,mo))})()}linkWithRedirect(p){var _=this;return(0,c.Z)(function*(){return yield xa(ht(_.auth)),function $t(v,p,_){return function wt(v,p,_){return Hi.apply(this,arguments)}(v,p,_)}(_._delegate,p,mo)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,c.Z)(function*(){return Vr(_.auth,Cs(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return jg(this.auth,function en(v,p,_){return Zn.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return Vr(this.auth,function Ad(v,p,_){return iu.apply(this,arguments)}(this._delegate,p,mo))}reauthenticateWithRedirect(p){var _=this;return(0,c.Z)(function*(){return yield xa(ht(_.auth)),function je(v,p,_){return function At(v,p,_){return Ct.apply(this,arguments)}(v,p,_)}(_._delegate,p,mo)})()}sendEmailVerification(p){return function Wc(v,p){return Xl.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,c.Z)(function*(){return yield function Qh(v,p){return cn.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function _g(v,p){return la((0,L.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function Zc(v,p){return la((0,L.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function rn(v,p){return ya.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Kc(v,p){return rl.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Yc(v,p,_){return Jl.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jo.USER_MAP=new WeakMap;const hu=z;let Hg=(()=>{class v{constructor(_,b){if(this.app=_,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:I}=_.options;hu(I,"invalid-api-key",{appName:_.name}),hu(I,"invalid-api-key",{appName:_.name});const O="undefined"!=typeof window?mo:void 0;this._delegate=b.initialize({options:{persistence:PC(I,_.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Pe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,b){!function ir(v,p,_){const b=ht(v);z(b._canInitEmulator,b,"emulator-config-failed"),z(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const I=!!(null==_?void 0:_.disableWarnings),O=Xr(p),{host:Z,port:_e}=function Yn(v){const p=Xr(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",I=/^(\[[^\]]+\])(:|$)/.exec(b);if(I){const O=I[1];return{host:O,port:Jr(b.substr(O.length+1))}}{const[O,Z]=b.split(":");return{host:O,port:Jr(Z)}}}(p);b.config.emulator={url:`${O}//${Z}${null===_e?"":`:${_e}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Z,port:_e,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:I})}),I||function _n(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,b)}applyActionCode(_){return function Ae(v,p){return Lt.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Kl(this._delegate,_)}confirmPasswordReset(_,b){return function $c(v,p,_){return zc.apply(this,arguments)}(this._delegate,_,b)}createUserWithEmailAndPassword(_,b){var I=this;return(0,c.Z)(function*(){return Vr(I._delegate,function mr(v,p,_){return el.apply(this,arguments)}(I._delegate,_,b))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function no(v,p){return Nr.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function tl(v,p){const _=ql.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,c.Z)(function*(){hu(Da(),_._delegate,"operation-not-supported-in-this-environment");const b=yield function pi(v,p){return fo.apply(this,arguments)}(_._delegate,mo);return b?Vr(_._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function wy(v,p){ht(v)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,b,I){const{next:O,error:Z,complete:_e}=Gg(_,b,I);return this._delegate.onAuthStateChanged(O,Z,_e)}onIdTokenChanged(_,b,I){const{next:O,error:Z,complete:_e}=Gg(_,b,I);return this._delegate.onIdTokenChanged(O,Z,_e)}sendSignInLinkToEmail(_,b){return function mg(v,p,_){return Zl.apply(this,arguments)}(this._delegate,_,b)}sendPasswordResetEmail(_,b){return function Gc(v,p,_){return Ja.apply(this,arguments)}(this._delegate,_,b||void 0)}setPersistence(_){var b=this;return(0,c.Z)(function*(){let I;switch(function Ng(v,p){hc(Object.values(wr).includes(p),v,"invalid-persistence-type"),(0,L.b$)()?hc(p!==wr.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?hc(p===wr.NONE,v,"unsupported-persistence-type"):Mn()?hc(p===wr.NONE||p===wr.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):hc(p===wr.NONE||mf(),v,"unsupported-persistence-type")}(b._delegate,_),_){case wr.SESSION:I=Sn;break;case wr.LOCAL:I=(yield se(xs)._isAvailable())?xs:xn;break;case wr.NONE:I=Et;break;default:return Se("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(I)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Vr(this._delegate,function hd(v){return Uc.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Vr(this._delegate,Dn(this._delegate,_))}signInWithCustomToken(_){return Vr(this._delegate,function ra(v,p){return mt.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,b){return Vr(this._delegate,function qc(v,p,_){return Dn((0,L.m9)(v),cd.credential(p,_))}(this._delegate,_,b))}signInWithEmailLink(_,b){return Vr(this._delegate,function Ql(v,p,_){return jn.apply(this,arguments)}(this._delegate,_,b))}signInWithPhoneNumber(_,b){return jg(this._delegate,function tu(v,p,_){return Bo.apply(this,arguments)}(this._delegate,_,b))}signInWithPopup(_){var b=this;return(0,c.Z)(function*(){return hu(Da(),b._delegate,"operation-not-supported-in-this-environment"),Vr(b._delegate,function sc(v,p,_){return ho.apply(this,arguments)}(b._delegate,_,mo))})()}signInWithRedirect(_){var b=this;return(0,c.Z)(function*(){return hu(Da(),b._delegate,"operation-not-supported-in-this-environment"),yield xa(b._delegate),function J(v,p,_){return function le(v,p,_){return Fe.apply(this,arguments)}(v,p,_)}(b._delegate,_,mo)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function oa(v,p){return Ro.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=wr,v})();function Gg(v,p,_){let b=v;"function"!=typeof v&&({next:b,error:p,complete:_}=v);const I=b;return{next:Z=>I(Z&&jo.getOrCreate(Z)),error:p,complete:_}}function PC(v,p){const _=function yf(v,p){const _=by();if(!_)return[];const b=ti(Pg,v,p);switch(_.getItem(b)){case wr.NONE:return[Et];case wr.LOCAL:return[xs,Sn];case wr.SESSION:return[Sn];default:return[]}}(v,p);if("undefined"!=typeof self&&!_.includes(xs)&&_.push(xs),"undefined"!=typeof window)for(const b of[xn,Sn])_.includes(b)||_.push(b);return _.includes(Et)||_.push(Et),_}class $g{constructor(){this.providerId="phone",this._delegate=new uo(Bg(te.Z.auth()))}static credential(p,_){return uo.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}$g.PHONE_SIGN_IN_METHOD=uo.PHONE_SIGN_IN_METHOD,$g.PROVIDER_ID=uo.PROVIDER_ID;const Ey=z;class Dy{constructor(p,_,b=te.Z.app()){var I;Ey(null===(I=b.options)||void 0===I?void 0:I.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new hl(p,_,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ho(v){v.INTERNAL.registerComponent(new ie.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),b=p.getProvider("auth");return new Hg(_,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:cd,FacebookAuthProvider:ta,GithubAuthProvider:Zh,GoogleAuthProvider:ud,OAuthProvider:ns,SAMLAuthProvider:Ui,PhoneAuthProvider:$g,PhoneMultiFactorGenerator:fy,RecaptchaVerifier:Dy,TwitterAuthProvider:dd,Auth:Hg,AuthCredential:kr,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.14")}(te.Z)},8306:(et,ve,P)=>{P.d(ve,{y:()=>q});var c=P(930),te=P(727),L=P(8822),de=P(4671);var ie=P(2416),ce=P(576),he=P(2806);let q=(()=>{class Te{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const pe=new Te;return pe.source=this,pe.operator=Ue,pe}subscribe(Ue,pe,xe){const We=function qe(Te){return Te&&Te instanceof c.Lv||function re(Te){return Te&&(0,ce.m)(Te.next)&&(0,ce.m)(Te.error)&&(0,ce.m)(Te.complete)}(Te)&&(0,te.Nn)(Te)}(Ue)?Ue:new c.Hp(Ue,pe,xe);return(0,he.x)(()=>{const{operator:Qe,source:Se}=this;We.add(Qe?Qe.call(We,Se):Se?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(pe){Ue.error(pe)}}forEach(Ue,pe){return new(pe=$(pe))((xe,We)=>{const Qe=new c.Hp({next:Se=>{try{Ue(Se)}catch(be){We(be),Qe.unsubscribe()}},error:We,complete:xe});this.subscribe(Qe)})}_subscribe(Ue){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Ue)}[L.L](){return this}pipe(...Ue){return function me(Te){return 0===Te.length?de.y:1===Te.length?Te[0]:function(Ue){return Te.reduce((pe,xe)=>xe(pe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=$(Ue))((pe,xe)=>{let We;this.subscribe(Qe=>We=Qe,Qe=>xe(Qe),()=>pe(We))})}}return Te.create=Pe=>new Te(Pe),Te})();function $(Te){var Pe;return null!==(Pe=null!=Te?Te:ie.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(et,ve,P)=>{P.d(ve,{x:()=>ie});var c=P(8306),te=P(727);const de=(0,P(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=P(8737),me=P(2806);let ie=(()=>{class he extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const re=new ce(this,this);return re.operator=$,re}_throwIfClosed(){if(this.closed)throw new de}next($){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next($)}})}error($){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:re}=this;for(;re.length;)re.shift().error($)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:re,isStopped:qe,observers:Te}=this;return re||qe?te.Lc:(this.currentObservers=null,Te.push($),new te.w0(()=>{this.currentObservers=null,(0,oe.P)(Te,$)}))}_checkFinalizedStatuses($){const{hasError:re,thrownError:qe,isStopped:Te}=this;re?$.error(qe):Te&&$.complete()}asObservable(){const $=new c.y;return $.source=this,$}}return he.create=(q,$)=>new ce(q,$),he})();class ce extends ie{constructor(q,$){super(),this.destination=q,this.source=$}next(q){var $,re;null===(re=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===re||re.call($,q)}error(q){var $,re;null===(re=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===re||re.call($,q)}complete(){var q,$;null===($=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===$||$.call(q)}_subscribe(q){var $,re;return null!==(re=null===($=this.source)||void 0===$?void 0:$.subscribe(q))&&void 0!==re?re:te.Lc}}},930:(et,ve,P)=>{P.d(ve,{Hp:()=>Ue,Lv:()=>re});var c=P(576),te=P(727),L=P(2416),de=P(7849),oe=P(5032);const me=he("C",void 0,void 0);function he(Se,be,Ce){return{kind:Se,value:be,error:Ce}}var q=P(3410),$=P(2806);class re extends te.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,te.Nn)(be)&&be.add(this)):this.destination=Qe}static create(be,Ce,He){return new Ue(be,Ce,He)}next(be){this.isStopped?We(function ce(Se){return he("N",Se,void 0)}(be),this):this._next(be)}error(be){this.isStopped?We(function ie(Se){return he("E",void 0,Se)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?We(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Te(Se,be){return qe.call(Se,be)}class Pe{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(be)}catch(He){pe(He)}}error(be){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(be)}catch(He){pe(He)}else pe(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Ce){pe(Ce)}}}class Ue extends re{constructor(be,Ce,He){let Ge;if(super(),(0,c.m)(be)||!be)Ge={next:null!=be?be:void 0,error:null!=Ce?Ce:void 0,complete:null!=He?He:void 0};else{let z;this&&L.v.useDeprecatedNextContext?(z=Object.create(be),z.unsubscribe=()=>this.unsubscribe(),Ge={next:be.next&&Te(be.next,z),error:be.error&&Te(be.error,z),complete:be.complete&&Te(be.complete,z)}):Ge=be}this.destination=new Pe(Ge)}}function pe(Se){L.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Se):(0,de.h)(Se)}function We(Se,be){const{onStoppedNotification:Ce}=L.v;Ce&&q.z.setTimeout(()=>Ce(Se,be))}const Qe={closed:!0,next:oe.Z,error:function xe(Se){throw Se},complete:oe.Z}},727:(et,ve,P)=>{P.d(ve,{Lc:()=>me,w0:()=>oe,Nn:()=>ie});var c=P(576);const L=(0,P(3888).d)(he=>function($){he(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((re,qe)=>`${qe+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var de=P(8737);class oe{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Te of $)Te.remove(this);else $.remove(this);const{initialTeardown:re}=this;if((0,c.m)(re))try{re()}catch(Te){q=Te instanceof L?Te.errors:[Te]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Te of qe)try{ce(Te)}catch(Pe){q=null!=q?q:[],Pe instanceof L?q=[...q,...Pe.errors]:q.push(Pe)}}if(q)throw new L(q)}}add(q){var $;if(q&&q!==this)if(this.closed)ce(q);else{if(q instanceof oe){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(q)}}_hasParent(q){const{_parentage:$}=this;return $===q||Array.isArray($)&&$.includes(q)}_addParent(q){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(q),$):$?[$,q]:q}_removeParent(q){const{_parentage:$}=this;$===q?this._parentage=null:Array.isArray($)&&(0,de.P)($,q)}remove(q){const{_finalizers:$}=this;$&&(0,de.P)($,q),q instanceof oe&&q._removeParent(this)}}oe.EMPTY=(()=>{const he=new oe;return he.closed=!0,he})();const me=oe.EMPTY;function ie(he){return he instanceof oe||he&&"closed"in he&&(0,c.m)(he.remove)&&(0,c.m)(he.add)&&(0,c.m)(he.unsubscribe)}function ce(he){(0,c.m)(he)?he():he.unsubscribe()}},2416:(et,ve,P)=>{P.d(ve,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(et,ve,P)=>{P.d(ve,{E:()=>te});const te=new(P(8306).y)(oe=>oe.complete())},8996:(et,ve,P)=>{P.d(ve,{D:()=>be});var c=P(8421),te=P(5363),L=P(9468),me=P(8306),ce=P(2202),he=P(576),q=P(9672);function re(Ce,He){if(!Ce)throw new Error("Iterable cannot be null");return new me.y(Ge=>{(0,q.f)(Ge,He,()=>{const z=Ce[Symbol.asyncIterator]();(0,q.f)(Ge,He,()=>{z.next().then(H=>{H.done?Ge.complete():Ge.next(H.value)})},0,!0)})})}var qe=P(3670),Te=P(8239),Pe=P(1144),Ue=P(6495),pe=P(2206),xe=P(4532),We=P(3260);function be(Ce,He){return He?function Se(Ce,He){if(null!=Ce){if((0,qe.c)(Ce))return function de(Ce,He){return(0,c.Xf)(Ce).pipe((0,L.R)(He),(0,te.Q)(He))}(Ce,He);if((0,Pe.z)(Ce))return function ie(Ce,He){return new me.y(Ge=>{let z=0;return He.schedule(function(){z===Ce.length?Ge.complete():(Ge.next(Ce[z++]),Ge.closed||this.schedule())})})}(Ce,He);if((0,Te.t)(Ce))return function oe(Ce,He){return(0,c.Xf)(Ce).pipe((0,L.R)(He),(0,te.Q)(He))}(Ce,He);if((0,pe.D)(Ce))return re(Ce,He);if((0,Ue.T)(Ce))return function $(Ce,He){return new me.y(Ge=>{let z;return(0,q.f)(Ge,He,()=>{z=Ce[ce.h](),(0,q.f)(Ge,He,()=>{let H,X;try{({value:H,done:X}=z.next())}catch(ue){return void Ge.error(ue)}X?Ge.complete():Ge.next(H)},0,!0)}),()=>(0,he.m)(null==z?void 0:z.return)&&z.return()})}(Ce,He);if((0,We.L)(Ce))return function Qe(Ce,He){return re((0,We.Q)(Ce),He)}(Ce,He)}throw(0,xe.z)(Ce)}(Ce,He):(0,c.Xf)(Ce)}},8421:(et,ve,P)=>{P.d(ve,{Xf:()=>qe});var c=P(655),te=P(1144),L=P(8239),de=P(8306),oe=P(3670),me=P(2206),ie=P(4532),ce=P(6495),he=P(3260),q=P(576),$=P(7849),re=P(8822);function qe(Se){if(Se instanceof de.y)return Se;if(null!=Se){if((0,oe.c)(Se))return function Te(Se){return new de.y(be=>{const Ce=Se[re.L]();if((0,q.m)(Ce.subscribe))return Ce.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,te.z)(Se))return function Pe(Se){return new de.y(be=>{for(let Ce=0;Ce<Se.length&&!be.closed;Ce++)be.next(Se[Ce]);be.complete()})}(Se);if((0,L.t)(Se))return function Ue(Se){return new de.y(be=>{Se.then(Ce=>{be.closed||(be.next(Ce),be.complete())},Ce=>be.error(Ce)).then(null,$.h)})}(Se);if((0,me.D)(Se))return xe(Se);if((0,ce.T)(Se))return function pe(Se){return new de.y(be=>{for(const Ce of Se)if(be.next(Ce),be.closed)return;be.complete()})}(Se);if((0,he.L)(Se))return function We(Se){return xe((0,he.Q)(Se))}(Se)}throw(0,ie.z)(Se)}function xe(Se){return new de.y(be=>{(function Qe(Se,be){var Ce,He,Ge,z;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,c.KL)(Se);!(He=yield Ce.next()).done;)if(be.next(He.value),be.closed)return}catch(H){Ge={error:H}}finally{try{He&&!He.done&&(z=Ce.return)&&(yield z.call(Ce))}finally{if(Ge)throw Ge.error}}be.complete()})})(Se,be).catch(Ce=>be.error(Ce))})}},6451:(et,ve,P)=>{P.d(ve,{T:()=>me});var c=P(8189),te=P(8421),L=P(515),de=P(3269),oe=P(8996);function me(...ie){const ce=(0,de.yG)(ie),he=(0,de._6)(ie,1/0),q=ie;return q.length?1===q.length?(0,te.Xf)(q[0]):(0,c.J)(he)((0,oe.D)(q,ce)):L.E}},5403:(et,ve,P)=>{P.d(ve,{x:()=>te});var c=P(930);function te(de,oe,me,ie,ce){return new L(de,oe,me,ie,ce)}class L extends c.Lv{constructor(oe,me,ie,ce,he,q){super(oe),this.onFinalize=he,this.shouldUnsubscribe=q,this._next=me?function($){try{me($)}catch(re){oe.error(re)}}:super._next,this._error=ce?function($){try{ce($)}catch(re){oe.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch($){oe.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(et,ve,P)=>{P.d(ve,{U:()=>L});var c=P(4482),te=P(5403);function L(de,oe){return(0,c.e)((me,ie)=>{let ce=0;me.subscribe((0,te.x)(ie,he=>{ie.next(de.call(oe,he,ce++))}))})}},8189:(et,ve,P)=>{P.d(ve,{J:()=>L});var c=P(5577),te=P(4671);function L(de=1/0){return(0,c.z)(te.y,de)}},5577:(et,ve,P)=>{P.d(ve,{z:()=>ce});var c=P(4004),te=P(8421),L=P(4482),de=P(9672),oe=P(5403),ie=P(576);function ce(he,q,$=1/0){return(0,ie.m)(q)?ce((re,qe)=>(0,c.U)((Te,Pe)=>q(re,Te,qe,Pe))((0,te.Xf)(he(re,qe))),$):("number"==typeof q&&($=q),(0,L.e)((re,qe)=>function me(he,q,$,re,qe,Te,Pe,Ue){const pe=[];let xe=0,We=0,Qe=!1;const Se=()=>{Qe&&!pe.length&&!xe&&q.complete()},be=He=>xe<re?Ce(He):pe.push(He),Ce=He=>{Te&&q.next(He),xe++;let Ge=!1;(0,te.Xf)($(He,We++)).subscribe((0,oe.x)(q,z=>{null==qe||qe(z),Te?be(z):q.next(z)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(xe--;pe.length&&xe<re;){const z=pe.shift();Pe?(0,de.f)(q,Pe,()=>Ce(z)):Ce(z)}Se()}catch(z){q.error(z)}}))};return he.subscribe((0,oe.x)(q,be,()=>{Qe=!0,Se()})),()=>{null==Ue||Ue()}}(re,qe,he,$)))}},5363:(et,ve,P)=>{P.d(ve,{Q:()=>de});var c=P(9672),te=P(4482),L=P(5403);function de(oe,me=0){return(0,te.e)((ie,ce)=>{ie.subscribe((0,L.x)(ce,he=>(0,c.f)(ce,oe,()=>ce.next(he),me),()=>(0,c.f)(ce,oe,()=>ce.complete(),me),he=>(0,c.f)(ce,oe,()=>ce.error(he),me)))})}},3099:(et,ve,P)=>{P.d(ve,{B:()=>me});var c=P(8996),te=P(5698),L=P(7579),de=P(930),oe=P(4482);function me(ce={}){const{connector:he=(()=>new L.x),resetOnError:q=!0,resetOnComplete:$=!0,resetOnRefCountZero:re=!0}=ce;return qe=>{let Te=null,Pe=null,Ue=null,pe=0,xe=!1,We=!1;const Qe=()=>{null==Pe||Pe.unsubscribe(),Pe=null},Se=()=>{Qe(),Te=Ue=null,xe=We=!1},be=()=>{const Ce=Te;Se(),null==Ce||Ce.unsubscribe()};return(0,oe.e)((Ce,He)=>{pe++,!We&&!xe&&Qe();const Ge=Ue=null!=Ue?Ue:he();He.add(()=>{pe--,0===pe&&!We&&!xe&&(Pe=ie(be,re))}),Ge.subscribe(He),Te||(Te=new de.Hp({next:z=>Ge.next(z),error:z=>{We=!0,Qe(),Pe=ie(Se,q,z),Ge.error(z)},complete:()=>{xe=!0,Qe(),Pe=ie(Se,$),Ge.complete()}}),(0,c.D)(Ce).subscribe(Te))})(qe)}}function ie(ce,he,...q){return!0===he?(ce(),null):!1===he?null:he(...q).pipe((0,te.q)(1)).subscribe(()=>ce())}},9468:(et,ve,P)=>{P.d(ve,{R:()=>te});var c=P(4482);function te(L,de=0){return(0,c.e)((oe,me)=>{me.add(L.schedule(()=>oe.subscribe(me),de))})}},5698:(et,ve,P)=>{P.d(ve,{q:()=>de});var c=P(515),te=P(4482),L=P(5403);function de(oe){return oe<=0?()=>c.E:(0,te.e)((me,ie)=>{let ce=0;me.subscribe((0,L.x)(ie,he=>{++ce<=oe&&(ie.next(he),oe<=ce&&ie.complete())}))})}},8505:(et,ve,P)=>{P.d(ve,{b:()=>oe});var c=P(576),te=P(4482),L=P(5403),de=P(4671);function oe(me,ie,ce){const he=(0,c.m)(me)||ie||ce?{next:me,error:ie,complete:ce}:me;return he?(0,te.e)((q,$)=>{var re;null===(re=he.subscribe)||void 0===re||re.call(he);let qe=!0;q.subscribe((0,L.x)($,Te=>{var Pe;null===(Pe=he.next)||void 0===Pe||Pe.call(he,Te),$.next(Te)},()=>{var Te;qe=!1,null===(Te=he.complete)||void 0===Te||Te.call(he),$.complete()},Te=>{var Pe;qe=!1,null===(Pe=he.error)||void 0===Pe||Pe.call(he,Te),$.error(Te)},()=>{var Te,Pe;qe&&(null===(Te=he.unsubscribe)||void 0===Te||Te.call(he)),null===(Pe=he.finalize)||void 0===Pe||Pe.call(he)}))}):de.y}},4408:(et,ve,P)=>{P.d(ve,{o:()=>oe});var c=P(727);class te extends c.w0{constructor(ie,ce){super()}schedule(ie,ce=0){return this}}const L={setInterval(me,ie,...ce){const{delegate:he}=L;return(null==he?void 0:he.setInterval)?he.setInterval(me,ie,...ce):setInterval(me,ie,...ce)},clearInterval(me){const{delegate:ie}=L;return((null==ie?void 0:ie.clearInterval)||clearInterval)(me)},delegate:void 0};var de=P(8737);class oe extends te{constructor(ie,ce){super(ie,ce),this.scheduler=ie,this.work=ce,this.pending=!1}schedule(ie,ce=0){if(this.closed)return this;this.state=ie;const he=this.id,q=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(q,he,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(q,this.id,ce),this}requestAsyncId(ie,ce,he=0){return L.setInterval(ie.flush.bind(ie,this),he)}recycleAsyncId(ie,ce,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ce;L.clearInterval(ce)}execute(ie,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ie,ce);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,ce){let q,he=!1;try{this.work(ie)}catch($){he=!0,q=$||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:ie,scheduler:ce}=this,{actions:he}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(he,this),null!=ie&&(this.id=this.recycleAsyncId(ce,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(et,ve,P)=>{P.d(ve,{v:()=>L});var c=P(6063);class te{constructor(oe,me=te.now){this.schedulerActionCtor=oe,this.now=me}schedule(oe,me=0,ie){return new this.schedulerActionCtor(this,oe).schedule(ie,me)}}te.now=c.l.now;class L extends te{constructor(oe,me=te.now){super(oe,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(oe){const{actions:me}=this;if(this._active)return void me.push(oe);let ie;this._active=!0;do{if(ie=oe.execute(oe.state,oe.delay))break}while(oe=me.shift());if(this._active=!1,ie){for(;oe=me.shift();)oe.unsubscribe();throw ie}}}},4986:(et,ve,P)=>{P.d(ve,{z:()=>L,P:()=>de});var c=P(4408);const L=new(P(7565).v)(c.o),de=L},6063:(et,ve,P)=>{P.d(ve,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(et,ve,P)=>{P.d(ve,{z:()=>c});const c={setTimeout(te,L,...de){const{delegate:oe}=c;return(null==oe?void 0:oe.setTimeout)?oe.setTimeout(te,L,...de):setTimeout(te,L,...de)},clearTimeout(te){const{delegate:L}=c;return((null==L?void 0:L.clearTimeout)||clearTimeout)(te)},delegate:void 0}},2202:(et,ve,P)=>{P.d(ve,{h:()=>te});const te=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(et,ve,P)=>{P.d(ve,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(et,ve,P)=>{P.d(ve,{jO:()=>de,yG:()=>oe,_6:()=>me});var c=P(576),te=P(3532);function L(ie){return ie[ie.length-1]}function de(ie){return(0,c.m)(L(ie))?ie.pop():void 0}function oe(ie){return(0,te.K)(L(ie))?ie.pop():void 0}function me(ie,ce){return"number"==typeof L(ie)?ie.pop():ce}},8737:(et,ve,P)=>{function c(te,L){if(te){const de=te.indexOf(L);0<=de&&te.splice(de,1)}}P.d(ve,{P:()=>c})},3888:(et,ve,P)=>{function c(te){const de=te(oe=>{Error.call(oe),oe.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}P.d(ve,{d:()=>c})},2806:(et,ve,P)=>{P.d(ve,{x:()=>L,O:()=>de});var c=P(2416);let te=null;function L(oe){if(c.v.useDeprecatedSynchronousErrorHandling){const me=!te;if(me&&(te={errorThrown:!1,error:null}),oe(),me){const{errorThrown:ie,error:ce}=te;if(te=null,ie)throw ce}}else oe()}function de(oe){c.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=oe)}},9672:(et,ve,P)=>{function c(te,L,de,oe=0,me=!1){const ie=L.schedule(function(){de(),me?te.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(te.add(ie),!me)return ie}P.d(ve,{f:()=>c})},4671:(et,ve,P)=>{function c(te){return te}P.d(ve,{y:()=>c})},1144:(et,ve,P)=>{P.d(ve,{z:()=>c});const c=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(et,ve,P)=>{P.d(ve,{D:()=>te});var c=P(576);function te(L){return Symbol.asyncIterator&&(0,c.m)(null==L?void 0:L[Symbol.asyncIterator])}},576:(et,ve,P)=>{function c(te){return"function"==typeof te}P.d(ve,{m:()=>c})},3670:(et,ve,P)=>{P.d(ve,{c:()=>L});var c=P(8822),te=P(576);function L(de){return(0,te.m)(de[c.L])}},6495:(et,ve,P)=>{P.d(ve,{T:()=>L});var c=P(2202),te=P(576);function L(de){return(0,te.m)(null==de?void 0:de[c.h])}},8239:(et,ve,P)=>{P.d(ve,{t:()=>te});var c=P(576);function te(L){return(0,c.m)(null==L?void 0:L.then)}},3260:(et,ve,P)=>{P.d(ve,{Q:()=>L,L:()=>de});var c=P(655),te=P(576);function L(oe){return(0,c.FC)(this,arguments,function*(){const ie=oe.getReader();try{for(;;){const{value:ce,done:he}=yield(0,c.qq)(ie.read());if(he)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(ce)}}finally{ie.releaseLock()}})}function de(oe){return(0,te.m)(null==oe?void 0:oe.getReader)}},3532:(et,ve,P)=>{P.d(ve,{K:()=>te});var c=P(576);function te(L){return L&&(0,c.m)(L.schedule)}},4482:(et,ve,P)=>{P.d(ve,{A:()=>te,e:()=>L});var c=P(576);function te(de){return(0,c.m)(null==de?void 0:de.lift)}function L(de){return oe=>{if(te(oe))return oe.lift(function(me){try{return de(me,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(et,ve,P)=>{function c(){}P.d(ve,{Z:()=>c})},7849:(et,ve,P)=>{P.d(ve,{h:()=>L});var c=P(2416),te=P(3410);function L(de){te.z.setTimeout(()=>{const{onUnhandledError:oe}=c.v;if(!oe)throw de;oe(de)})}},4532:(et,ve,P)=>{function c(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(ve,{z:()=>c})},655:(et,ve,P)=>{function de(H,X){var ue={};for(var se in H)Object.prototype.hasOwnProperty.call(H,se)&&X.indexOf(se)<0&&(ue[se]=H[se]);if(null!=H&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(se=Object.getOwnPropertySymbols(H);Me<se.length;Me++)X.indexOf(se[Me])<0&&Object.prototype.propertyIsEnumerable.call(H,se[Me])&&(ue[se[Me]]=H[se[Me]])}return ue}function ce(H,X,ue,se){return new(ue||(ue=Promise))(function(ae,_t){function Ot(xt){try{it(se.next(xt))}catch(Rn){_t(Rn)}}function Nn(xt){try{it(se.throw(xt))}catch(Rn){_t(Rn)}}function it(xt){xt.done?ae(xt.value):function Me(ae){return ae instanceof ue?ae:new ue(function(_t){_t(ae)})}(xt.value).then(Ot,Nn)}it((se=se.apply(H,X||[])).next())})}function pe(H){return this instanceof pe?(this.v=H,this):new pe(H)}function xe(H,X,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,se=ue.apply(H,X||[]),ae=[];return Me={},_t("next"),_t("throw"),_t("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function _t(Xt){se[Xt]&&(Me[Xt]=function(ci){return new Promise(function(an,cr){ae.push([Xt,ci,an,cr])>1||Ot(Xt,ci)})})}function Ot(Xt,ci){try{!function Nn(Xt){Xt.value instanceof pe?Promise.resolve(Xt.value.v).then(it,xt):Rn(ae[0][2],Xt)}(se[Xt](ci))}catch(an){Rn(ae[0][3],an)}}function it(Xt){Ot("next",Xt)}function xt(Xt){Ot("throw",Xt)}function Rn(Xt,ci){Xt(ci),ae.shift(),ae.length&&Ot(ae[0][0],ae[0][1])}}function Qe(H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,X=H[Symbol.asyncIterator];return X?X.call(H):(H=function re(H){var X="function"==typeof Symbol&&Symbol.iterator,ue=X&&H[X],se=0;if(ue)return ue.call(H);if(H&&"number"==typeof H.length)return{next:function(){return H&&se>=H.length&&(H=void 0),{value:H&&H[se++],done:!H}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(H),ue={},se("next"),se("throw"),se("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function se(ae){ue[ae]=H[ae]&&function(_t){return new Promise(function(Ot,Nn){!function Me(ae,_t,Ot,Nn){Promise.resolve(Nn).then(function(it){ae({value:it,done:Ot})},_t)}(Ot,Nn,(_t=H[ae](_t)).done,_t.value)})}}}P.d(ve,{_T:()=>de,mG:()=>ce,qq:()=>pe,FC:()=>xe,KL:()=>Qe})},5e3:(et,ve,P)=>{P.d(ve,{deG:()=>wg,tb:()=>pw,AFp:()=>QD,ip1:()=>ZD,CZH:()=>hw,hGG:()=>mR,z2F:()=>Ml,sBO:()=>tR,Sil:()=>ix,_Vd:()=>jm,EJc:()=>BM,SBq:()=>ep,qLn:()=>vf,vpe:()=>qo,tBr:()=>po,XFs:()=>yt,OlP:()=>In,zs3:()=>yo,ZZ4:()=>Sw,aQg:()=>Aw,soG:()=>gw,YKP:()=>vD,h0i:()=>ah,PXZ:()=>ww,R0b:()=>vo,FiY:()=>Ci,Lbi:()=>ex,g9A:()=>JD,n_E:()=>ch,Qsj:()=>fM,FYo:()=>hD,JOm:()=>I,q3G:()=>Tn,tp0:()=>yr,Rgc:()=>Fs,dDg:()=>sx,q4F:()=>pD,GfV:()=>Gt,s_b:()=>ka,ifc:()=>zt,eFA:()=>cx,G48:()=>JM,Gpc:()=>$,f3M:()=>Ct,X6Q:()=>XM,_c5:()=>gR,VLi:()=>ax,c2e:()=>tx,zSh:()=>Xy,wAp:()=>at,vHH:()=>Pe,EiD:()=>cu,mCW:()=>go,qzn:()=>Ea,JVY:()=>Ag,pB0:()=>Ig,eBb:()=>Od,L6k:()=>hy,LAX:()=>IC,cg1:()=>Rv,kL8:()=>$f,yhl:()=>Sg,dqk:()=>Ht,sIi:()=>Nf,CqO:()=>rE,QGY:()=>_v,F4k:()=>yv,RDi:()=>jc,AaK:()=>ce,z3N:()=>Ca,qOj:()=>om,TTD:()=>ns,_Bn:()=>xc,xp6:()=>bI,uIk:()=>P0,ekj:()=>yE,Suo:()=>PD,Xpm:()=>gt,lG2:()=>Hl,Yz7:()=>an,cJS:()=>Jt,oAB:()=>Li,Yjl:()=>$a,Y36:()=>Du,_UZ:()=>mv,GkF:()=>bc,BQk:()=>Ur,ynx:()=>Uf,qZA:()=>xu,TgZ:()=>bm,EpF:()=>iE,n5z:()=>ll,Ikx:()=>Tv,LFG:()=>je,$8M:()=>cl,$Z:()=>tE,NdJ:()=>Cm,CRH:()=>Jv,O4$:()=>ry,oxw:()=>wv,ALo:()=>Gv,lcZ:()=>xD,Hsn:()=>aE,F$t:()=>oE,Q6J:()=>gv,DdM:()=>qt,iGM:()=>OD,MAs:()=>Bf,CHM:()=>Kl,LSH:()=>Vd,Udp:()=>_E,WFA:()=>Qd,d8E:()=>Mv,YNc:()=>fm,_uU:()=>CE,Oqu:()=>Sm,hij:()=>Am,AsE:()=>Gf,Gf:()=>FD});var c=P(7579),te=P(727),L=P(8306),de=P(6451),oe=P(3099);function me(o){for(let a in o)if(o[a]===me)return a;throw Error("Could not find renamed property on target object.")}function ie(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function ce(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ce).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function he(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const q=me({__forward_ref__:me});function $(o){return o.__forward_ref__=$,o.toString=function(){return ce(this())},o}function re(o){return qe(o)?o():o}function qe(o){return"function"==typeof o&&o.hasOwnProperty(q)&&o.__forward_ref__===$}class Pe extends Error{constructor(a,u){super(function Ue(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,u)),this.code=a}}function pe(o){return"string"==typeof o?o:null==o?"":String(o)}function xe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():pe(o)}function be(o,a){const u=a?` in ${a}`:"";throw new Pe(-201,`No provider for ${xe(o)} found${u}`)}function it(o,a){null==o&&function xt(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function an(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Jt(o){return{providers:o.providers||[],imports:o.imports||[]}}function Vt(o){return Kr(o,Zr)||Kr(o,Ji)}function Kr(o,a){return o.hasOwnProperty(a)?o[a]:null}function Ni(o){return o&&(o.hasOwnProperty(Ys)||o.hasOwnProperty(Qr))?o[Ys]:null}const Zr=me({\u0275prov:me}),Ys=me({\u0275inj:me}),Ji=me({ngInjectableDef:me}),Qr=me({ngInjectorDef:me});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let dr;function Ln(o){const a=dr;return dr=o,a}function Ks(o,a,u){const h=Vt(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&yt.Optional?null:void 0!==a?a:void be(ce(o),"Injector")}function ui(o){return{toString:o}.toString()}var Bn=(()=>((Bn=Bn||{})[Bn.OnPush=0]="OnPush",Bn[Bn.Default=1]="Default",Bn))(),zt=(()=>{return(o=zt||(zt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",zt;var o})();const ot="undefined"!=typeof globalThis&&globalThis,bt="undefined"!=typeof window&&window,Ai="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=ot||"undefined"!=typeof global&&global||bt||Ai,Ti={},j=[],Y=me({\u0275cmp:me}),K=me({\u0275dir:me}),De=me({\u0275pipe:me}),W=me({\u0275mod:me}),ne=me({\u0275fac:me}),Re=me({__NG_ELEMENT_ID__:me});let tt=0;function gt(o){return ui(()=>{const u={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Bn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||j,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||zt.Emulated,id:"c",styles:o.styles||j,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,m=o.features,w=o.pipes;return h.id+=tt++,h.inputs=Ga(o.inputs,u),h.outputs=Ga(o.outputs),m&&m.forEach(C=>C(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(mn):null,h.pipeDefs=w?()=>("function"==typeof w?w():w).map(Et):null,h})}function mn(o){return ni(o)||function Bi(o){return o[K]||null}(o)}function Et(o){return function vs(o){return o[De]||null}(o)}const ti={};function Li(o){return ui(()=>{const a={type:o.type,bootstrap:o.bootstrap||j,declarations:o.declarations||j,imports:o.imports||j,exports:o.exports||j,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(ti[o.id]=o.type),a})}function Ga(o,a){if(null==o)return Ti;const u={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=h,a&&(a[f]=m)}return u}const Hl=gt;function $a(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function ni(o){return o[Y]||null}function ii(o,a){const u=o[W]||null;if(!u&&!0===a)throw new Error(`Type ${ce(o)} does not have '\u0275mod' property.`);return u}function Vi(o){return Array.isArray(o)&&"object"==typeof o[1]}function Fr(o){return Array.isArray(o)&&!0===o[1]}function zl(o){return 0!=(8&o.flags)}function nd(o){return 2==(2&o.flags)}function es(o){return 1==(1&o.flags)}function ts(o){return null!==o.template}function Wa(o){return 0!=(512&o[2])}function Ri(o,a){return o.hasOwnProperty(ne)?o[ne]:null}class Ao{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function ns(){return ta}function ta(o){return o.type.prototype.ngOnChanges&&(o.setInput=Zh),ud}function ud(){const o=Io(this),a=null==o?void 0:o.current;if(a){const u=o.previous;if(u===Ti)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function Zh(o,a,u,h){const f=Io(o)||function na(o,a){return o[bs]=a}(o,{previous:Ti,current:null}),m=f.current||(f.current={}),w=f.previous,C=this.declaredInputs[u],D=w[C];m[C]=new Ao(D&&D.currentValue,a,w===Ti),o[h]=a}ns.ngInherit=!0;const bs="__ngSimpleChanges__";function Io(o){return o[bs]||null}let ia;function jc(o){ia=o}function cn(o){return!!o.listen}const Ka={createRenderer:(o,a)=>function is(){return void 0!==ia?ia:"undefined"!=typeof document?document:void 0}()};function tn(o){for(;Array.isArray(o);)o=o[0];return o}function to(o,a){return tn(a[o])}function vi(o,a){return tn(a[o.index])}function Dn(o,a){return o.data[a]}function rs(o,a){return o[a]}function wi(o,a){const u=a[o];return Vi(u)?u:u[0]}function Mo(o){return 4==(4&o[2])}function Cs(o){return 128==(128&o[2])}function Pr(o,a){return null==a?null:o[a]}function ss(o){o[18]=0}function ra(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const mt={lFrame:fd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ja(){return mt.bindingsEnabled}function Ae(){return mt.lFrame.lView}function Lt(){return mt.lFrame.tView}function Kl(o){return mt.lFrame.contextLView=o,o[8]}function yn(){let o=oa();for(;null!==o&&64===o.type;)o=o.parent;return o}function oa(){return mt.lFrame.currentTNode}function mr(o,a){const u=mt.lFrame;u.currentTNode=o,u.isParent=a}function el(){return mt.lFrame.isParent}function qc(){mt.lFrame.isParent=!1}function tl(){return mt.isInCheckNoChangesMode}function Ql(o){mt.isInCheckNoChangesMode=o}function jn(){const o=mt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function no(){return mt.lFrame.bindingIndex++}function Nr(o){const a=mt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function Yc(o,a){const u=mt.lFrame;u.bindingIndex=u.bindingRootIndex=o,il(a)}function il(o){mt.lFrame.currentDirectiveIndex=o}function aa(o){const a=mt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Kc(){return mt.lFrame.currentQueryIndex}function rl(o){mt.lFrame.currentQueryIndex=o}function _g(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Zc(o,a,u){if(u&yt.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||u&yt.Host||(f=_g(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=mt.lFrame=sl();return h.currentTNode=a,h.lView=o,!0}function la(o){const a=sl(),u=o[1];mt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function sl(){const o=mt.lFrame,a=null===o?null:o.child;return null===a?fd(o):a}function fd(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function ca(){const o=mt.lFrame;return mt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const pd=ca;function ua(){const o=ca();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function hi(){return mt.lFrame.selectedIndex}function as(o){mt.lFrame.selectedIndex=o}function Fn(){const o=mt.lFrame;return Dn(o.tView,o.selectedIndex)}function ry(){mt.lFrame.currentNamespace="svg"}function md(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:T,ngOnDestroy:R}=m;w&&(o.contentHooks||(o.contentHooks=[])).push(-u,w),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),D&&(o.viewHooks||(o.viewHooks=[])).push(-u,D),T&&((o.viewHooks||(o.viewHooks=[])).push(u,T),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,T)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(u,R)}}function ol(o,a,u){fi(o,a,3,u)}function Ds(o,a,u,h){(3&o[2])===u&&fi(o,a,u,h)}function da(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function fi(o,a,u,h){const m=null!=h?h:-1,w=a.length-1;let C=0;for(let D=void 0!==h?65535&o[18]:0;D<w;D++)if("number"==typeof a[D+1]){if(C=a[D],null!=h&&C>=h)break}else a[D]<0&&(o[18]+=65536),(C<m||-1==m)&&(ef(o,u,a,D),o[18]=(4294901760&o[18])+D+2),D++}function ef(o,a,u,h){const f=u[h]<0,m=u[h+1],C=o[f?-u[h]:u[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class ec{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function ze(o,a,u){const h=cn(o);let f=0;for(;f<u.length;){const m=u[f];if("number"==typeof m){if(0!==m)break;f++;const w=u[f++],C=u[f++],D=u[f++];h?o.setAttribute(a,C,D,w):a.setAttributeNS(w,C,D)}else{const w=m,C=u[++f];Kn(w)?h&&o.setProperty(a,w,C):h?o.setAttribute(a,w,C):a.setAttribute(w,C),f++}}return f}function xn(o){return 3===o||4===o||6===o}function Kn(o){return 64===o.charCodeAt(0)}function Sn(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||so(o,u,f,null,-1===u||2===u?a[++h]:null)}}return o}function so(o,a,u,h,f){let m=0,w=o.length;if(-1===a)w=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===a){w=-1;break}if(C>a){w=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==w&&(o.splice(w,0,a),m=w+1),o.splice(m++,0,u),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function Hn(o){return-1!==o}function Qt(o){return 32767&o}function Be(o,a){let u=function An(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let fa=!0;function oo(o){const a=fa;return fa=o,a}let tf=0;function ao(o,a){const u=rr(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,Oo(h.data,o),Oo(a,null),Oo(h.blueprint,null));const f=Fo(o,a),m=o.injectorIndex;if(Hn(f)){const w=Qt(f),C=Be(f,a),D=C[1].data;for(let T=0;T<8;T++)a[m+T]=C[w+T]|D[w+T]}return a[m+8]=f,m}function Oo(o,a){o.push(0,0,0,0,0,0,0,0,a)}function rr(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Fo(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){const m=f[1],w=m.type;if(h=2===w?m.declTNode:1===w?f[6]:null,null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function ki(o,a,u){!function vd(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Re)&&(h=u[Re]),null==h&&(h=u[Re]=tf++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function pa(o,a,u){if(u&yt.Optional)return o;be(a,"NodeInjector")}function Po(o,a,u,h){if(u&yt.Optional&&void 0===h&&(h=null),0==(u&(yt.Self|yt.Host))){const f=o[9],m=Ln(void 0);try{return f?f.get(a,h,u&yt.Optional):Ks(a,h,u&yt.Optional)}finally{Ln(m)}}return pa(h,a,u)}function ga(o,a,u,h=yt.Default,f){if(null!==o){const m=function Jc(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Re)?o[Re]:void 0;return"number"==typeof a?a>=0?255&a:Lr:a}(u);if("function"==typeof m){if(!Zc(a,o,h))return h&yt.Host?pa(f,u,h):Po(a,u,h,f);try{const w=m(h);if(null!=w||h&yt.Optional)return w;be(u)}finally{pd()}}else if("number"==typeof m){let w=null,C=rr(o,a),D=-1,T=h&yt.Host?a[16][6]:null;for((-1===C||h&yt.SkipSelf)&&(D=-1===C?Fo(o,a):a[C+8],-1!==D&&ma(h,!1)?(w=a[1],C=Qt(D),a=Be(D,a)):C=-1);-1!==C;){const R=a[1];if(xs(m,C,R.data)){const V=Cn(C,a,u,w,h,T);if(V!==Xc)return V}D=a[C+8],-1!==D&&ma(h,a[1].data[C+8]===T)&&xs(m,C,a)?(w=R,C=Qt(D),a=Be(D,a)):C=-1}}}return Po(a,u,h,f)}const Xc={};function Lr(){return new lo(yn(),Ae())}function Cn(o,a,u,h,f,m){const w=a[1],C=w.data[o+8],R=al(C,w,u,null==h?nd(C)&&fa:h!=w&&0!=(3&C.type),f&yt.Host&&m===C);return null!==R?No(a,w,R,C):Xc}function al(o,a,u,h,f){const m=o.providerIndexes,w=a.data,C=1048575&m,D=o.directiveStart,R=m>>20,G=f?C+R:o.directiveEnd;for(let ee=h?C:C+R;ee<G;ee++){const we=w[ee];if(ee<D&&u===we||ee>=D&&we.type===u)return ee}if(f){const ee=w[D];if(ee&&ts(ee)&&ee.type===u)return D}return null}function No(o,a,u,h){let f=o[u];const m=a.data;if(function _d(o){return o instanceof ec}(f)){const w=f;w.resolving&&function We(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${o}${u}`)}(xe(m[u]));const C=oo(w.canSeeViewProviders);w.resolving=!0;const D=w.injectImpl?Ln(w.injectImpl):null;Zc(o,h,yt.Default);try{f=o[u]=w.factory(void 0,m,o,h),a.firstCreatePass&&u>=h.directiveStart&&function yg(o,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const w=ta(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,w),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,w)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==D&&Ln(D),oo(C),w.resolving=!1,pd()}}return f}function xs(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function ma(o,a){return!(o&yt.Self||o&yt.Host&&a)}class lo{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return ga(this._tNode,this._lView,a,h,u)}}function ll(o){return ui(()=>{const a=o.prototype.constructor,u=a[ne]||Lo(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[ne]||Lo(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Lo(o){return qe(o)?()=>{const a=Lo(re(o));return a&&a()}:Ri(o)}function cl(o){return function wd(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const m=u[f];if(xn(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(yn(),o)}const co="__parameters__";function dl(o,a,u){return ui(()=>{const h=function ic(o){return function(...u){if(o){const h=o(...u);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const w=new f(...m);return C.annotation=w,C;function C(D,T,R){const V=D.hasOwnProperty(co)?D[co]:Object.defineProperty(D,co,{value:[]})[co];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(w),D}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class In{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=an({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const wg=new In("AnalyzeForEntryComponents");function en(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),en(h,a)):a!==o&&a.push(h)}return a}function Zn(o,a){o.forEach(u=>Array.isArray(u)?Zn(u,a):a(u))}function ji(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Br(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function rn(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function ft(o,a,u){let h=va(o,a);return h>=0?o[1|h]=u:(h=~h,function _r(o,a,u,h){let f=o.length;if(f==a)o.push(u,h);else if(1===f)o.push(h,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function rc(o,a){const u=va(o,a);if(u>=0)return o[1|u]}function va(o,a){return function sc(o,a,u){let h=0,f=o.length>>u;for(;f!==h;){const m=h+(f-h>>1),w=o[m<<u];if(a===w)return m<<u;w>a?f=m:h=m+1}return~(f<<u)}(o,a,1)}const bi={},As="__NG_DI_FLAG__",wa="ngTempTokenPath",S=/\n/gm,k="__source",U=me({provide:String,useValue:me});let J;function le(o){const a=J;return J=o,a}function Fe(o,a=yt.Default){if(void 0===J)throw new Pe(203,"");return null===J?Ks(o,void 0,a):J.get(o,a&yt.Optional?null:void 0,a)}function je(o,a=yt.Default){return(function kn(){return dr}()||Fe)(re(o),a)}const Ct=je;function $t(o){const a=[];for(let u=0;u<o.length;u++){const h=re(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Pe(900,"");let f,m=yt.Default;for(let w=0;w<h.length;w++){const C=h[w],D=Hi(C);"number"==typeof D?-1===D?f=C.token:m|=D:f=C}a.push(je(f,m))}else a.push(je(h))}return a}function wt(o,a){return o[As]=a,o.prototype[As]=a,o}function Hi(o){return o[As]}const po=wt(dl("Inject",o=>({token:o})),-1),Ci=wt(dl("Optional"),8),yr=wt(dl("SkipSelf"),4);let Rd;function au(o){var a;return(null===(a=function af(){if(void 0===Rd&&(Rd=null,Ht.trustedTypes))try{Rd=Ht.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Rd}())||void 0===a?void 0:a.createHTML(o))||o}class ds{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class DC extends ds{getTypeName(){return"HTML"}}class dy extends ds{getTypeName(){return"Style"}}class xC extends ds{getTypeName(){return"Script"}}class SC extends ds{getTypeName(){return"URL"}}class AC extends ds{getTypeName(){return"ResourceURL"}}function Ca(o){return o instanceof ds?o.changingThisBreaksApplicationSecurity:o}function Ea(o,a){const u=Sg(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function Sg(o){return o instanceof ds&&o.getTypeName()||null}function Ag(o){return new DC(o)}function hy(o){return new dy(o)}function Od(o){return new xC(o)}function IC(o){return new SC(o)}function Ig(o){return new AC(o)}class py{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(au(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class gy{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=au(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=au(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const w=u.item(f).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&a.removeAttribute(w)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const uf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,JA=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function go(o){return(o=String(o)).match(uf)||o.match(JA)?o:"unsafe:"+o}function Uo(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function uc(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const Fd=Uo("area,br,col,hr,img,wbr"),dc=Uo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Pd=Uo("rp,rt"),df=uc(Fd,uc(dc,Uo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),uc(Pd,Uo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),uc(Pd,dc)),Ld=Uo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Tg=Uo("srcset"),yy=uc(Ld,Tg,Uo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Uo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Mg=Uo("script,style,template");class vy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!df.hasOwnProperty(u))return this.sanitizedSomething=!0,!Mg.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let f=0;f<h.length;f++){const m=h.item(f),w=m.name,C=w.toLowerCase();if(!yy.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let D=m.value;Ld[C]&&(D=go(D)),Tg[C]&&(o=D,D=(o=String(o)).split(",").map(a=>go(a.trim())).join(", ")),this.buf.push(" ",w,'="',Bd(D),'"')}var o;return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();df.hasOwnProperty(u)&&!Fd.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(Bd(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const vr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sr=/([^\#-~ |!])/g;function Bd(o){return o.replace(/&/g,"&amp;").replace(vr,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(sr,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vn;function cu(o,a){let u=null;try{vn=vn||function fy(o){const a=new gy(o);return function cf(){try{return!!(new window.DOMParser).parseFromString(au(""),"text/html")}catch(o){return!1}}()?new py(a):a}(o);let h=a?String(a):"";u=vn.getInertBodyElement(h);let f=5,m=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=m,m=u.innerHTML,u=vn.getInertBodyElement(h)}while(h!==m);return au((new vy).sanitizeChildren(hf(u)||u))}finally{if(u){const h=hf(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function hf(o){return"content"in o&&function MC(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Tn=(()=>((Tn=Tn||{})[Tn.NONE=0]="NONE",Tn[Tn.HTML=1]="HTML",Tn[Tn.STYLE=2]="STYLE",Tn[Tn.SCRIPT=3]="SCRIPT",Tn[Tn.URL=4]="URL",Tn[Tn.RESOURCE_URL=5]="RESOURCE_URL",Tn))();function Vd(o){const a=function uu(){const o=Ae();return o&&o[12]}();return a?a.sanitize(Tn.URL,o)||"":Ea(o,"URL")?Ca(o):go(pe(o))}const mf="__ngContext__";function Mn(o,a){o[mf]=a}function du(o){const a=function Da(o){return o[mf]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function mo(o){return o.ngOriginalError}function Vg(o,...a){o.error(...a)}class vf{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),h=function Bg(o){return o&&o.ngErrorLogger||Vg}(a);h(this._console,"ERROR",a),u&&h(this._console,"ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&mo(a);for(;u&&mo(u);)u=mo(u);return u||null}}const PC=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function Ho(o){return o instanceof Function?o():o}var I=(()=>((I=I||{})[I.Important=1]="Important",I[I.DashCase=2]="DashCase",I))();function Z(o,a){return undefined(o,a)}function Xe(o){const a=o[3];return Fr(a)?a[3]:a}function ri(o){return Hd(o[13])}function hs(o){return Hd(o[4])}function Hd(o){for(;null!==o&&!Fr(o);)o=o[4];return o}function yl(o,a,u,h,f){if(null!=h){let m,w=!1;Fr(h)?m=h:Vi(h)&&(w=!0,h=h[0]);const C=tn(h);0===o&&null!==u?null==f?aI(a,u,C):Gd(a,u,C,f||null,!0):1===o&&null!==u?Gd(a,u,C,f||null,!0):2===o?function jC(o,a,u){const h=Iy(o,a);h&&function KN(o,a,u,h){cn(o)?o.removeChild(a,u,h):a.removeChild(u)}(o,h,a,u)}(a,C,w):3===o&&a.destroyNode(C),null!=m&&function XN(o,a,u,h,f){const m=u[7];m!==tn(u)&&yl(a,o,h,m,f);for(let C=10;C<u.length;C++){const D=u[C];Yg(D[1],D,o,a,h,m)}}(a,o,m,u,f)}}function Ef(o,a,u){if(cn(o))return o.createElement(a,u);{const h=null!==u?function Uc(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(u):null;return null===h?o.createElement(a):o.createElementNS(h,a)}}function iI(o,a){const u=o[9],h=u.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,ra(f,-1)),u.splice(h,1)}function BC(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const f=h[17];null!==f&&f!==o&&iI(f,h),a>0&&(o[u-1][4]=h[4]);const m=Br(o,10+a);!function xy(o,a){Yg(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const w=m[19];null!==w&&w.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function rI(o,a){if(!(256&a[2])){const u=a[11];cn(u)&&u.destroyNode&&Yg(o,a,u,3,null,null),function Ay(o){let a=o[13];if(!a)return VC(o[1],o);for(;a;){let u=null;if(Vi(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)Vi(a)&&VC(a[1],a),a=a[3];null===a&&(a=o),Vi(a)&&VC(a[1],a),u=a&&a[4]}a=u}}(a)}}function VC(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function YN(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof ec)){const m=u[h+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const C=f[m[w]],D=m[w+1];try{D.call(C)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function WN(o,a){const u=o.cleanup,h=a[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const w=u[m+1],C="function"==typeof w?w(a):tn(a[w]),D=h[f=u[m+2]],T=u[m+3];"boolean"==typeof T?C.removeEventListener(u[m],D,T):T>=0?h[f=T]():h[f=-T].unsubscribe(),m+=2}else{const w=h[f=u[m+1]];u[m].call(w)}if(null!==h){for(let m=f+1;m<h.length;m++)h[m]();a[7]=null}}(o,a),1===a[1].type&&cn(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&Fr(a[3])){u!==a[3]&&iI(u,a);const h=a[19];null!==h&&h.detachView(o)}}}function sI(o,a,u){return function oI(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===zt.None||f===zt.Emulated)return null}return vi(h,u)}(o,a.parent,u)}function Gd(o,a,u,h,f){cn(o)?o.insertBefore(a,u,h,f):a.insertBefore(u,h,f)}function aI(o,a,u){cn(o)?o.appendChild(a,u):a.appendChild(u)}function lI(o,a,u,h,f){null!==h?Gd(o,a,u,h,f):aI(o,a,u)}function Iy(o,a){return cn(o)?o.parentNode(a):a.parentNode}function cI(o,a,u){return dI(o,a,u)}let dI=function uI(o,a,u){return 40&o.type?vi(o,u):null};function Ty(o,a,u,h){const f=sI(o,h,a),m=a[11],C=cI(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(u))for(let D=0;D<u.length;D++)lI(m,f,u[D],C,!1);else lI(m,f,u,C,!1)}function My(o,a){if(null!==a){const u=a.type;if(3&u)return vi(a,o);if(4&u)return Ry(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return My(o,h);{const f=o[a.index];return Fr(f)?Ry(-1,f):tn(f)}}if(32&u)return Z(a,o)()||tn(o[a.index]);{const h=fI(o,a);return null!==h?Array.isArray(h)?h[0]:My(Xe(o[16]),h):My(o,a.next)}}return null}function fI(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Ry(o,a){const u=10+o+1;if(u<a.length){const h=a[u],f=h[1].firstChild;if(null!==f)return My(h,f)}return a[7]}function HC(o,a,u,h,f,m,w){for(;null!=u;){const C=h[u.index],D=u.type;if(w&&0===a&&(C&&Mn(tn(C),h),u.flags|=4),64!=(64&u.flags))if(8&D)HC(o,a,u.child,h,f,m,!1),yl(a,o,f,C,m);else if(32&D){const T=Z(u,h);let R;for(;R=T();)yl(a,o,f,R,m);yl(a,o,f,C,m)}else 16&D?pI(o,a,h,u,f,m):yl(a,o,f,C,m);u=w?u.projectionNext:u.next}}function Yg(o,a,u,h,f,m){HC(u,h,o.firstChild,a,f,m,!1)}function pI(o,a,u,h,f,m){const w=u[16],D=w[6].projection[h.projection];if(Array.isArray(D))for(let T=0;T<D.length;T++)yl(a,o,f,D[T],m);else HC(o,a,D,w[3],f,m,!0)}function gI(o,a,u){cn(o)?o.setAttribute(a,"style",u):a.style.cssText=u}function GC(o,a,u){cn(o)?""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u):a.className=u}function mI(o,a,u){let h=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}u=f+1}}const _I="ng-template";function e1(o,a,u){let h=0;for(;h<o.length;){let f=o[h++];if(u&&"class"===f){if(f=o[h],-1!==mI(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function yI(o){return 4===o.type&&o.value!==_I}function t1(o,a,u){return a===(4!==o.type||u?o.value:_I)}function n1(o,a,u){let h=4;const f=o.attrs||[],m=function o1(o){for(let a=0;a<o.length;a++)if(xn(o[a]))return a;return o.length}(f);let w=!1;for(let C=0;C<a.length;C++){const D=a[C];if("number"!=typeof D){if(!w)if(4&h){if(h=2|1&h,""!==D&&!t1(o,D,u)||""===D&&1===a.length){if(Sa(h))return!1;w=!0}}else{const T=8&h?D:a[++C];if(8&h&&null!==o.attrs){if(!e1(o.attrs,T,u)){if(Sa(h))return!1;w=!0}continue}const V=r1(8&h?"class":D,f,yI(o),u);if(-1===V){if(Sa(h))return!1;w=!0;continue}if(""!==T){let G;G=V>m?"":f[V+1].toLowerCase();const ee=8&h?G:null;if(ee&&-1!==mI(ee,T,0)||2&h&&T!==G){if(Sa(h))return!1;w=!0}}}}else{if(!w&&!Sa(h)&&!Sa(D))return!1;if(w&&Sa(D))continue;w=!1,h=D|1&h}}return Sa(h)||w}function Sa(o){return 0==(1&o)}function r1(o,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let m=!1;for(;f<a.length;){const w=a[f];if(w===o)return f;if(3===w||6===w)m=!0;else{if(1===w||2===w){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=m?1:2}return-1}return function a1(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function vI(o,a,u=!1){for(let h=0;h<a.length;h++)if(n1(o,a[h],u))return!0;return!1}function l1(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function wI(o,a){return o?":not("+a.trim()+")":a}function c1(o){let a=o[0],u=1,h=2,f="",m=!1;for(;u<o.length;){let w=o[u];if("string"==typeof w)if(2&h){const C=o[++u];f+="["+w+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?f+="."+w:4&h&&(f+=" "+w);else""!==f&&!Sa(w)&&(a+=wI(m,f),f=""),h=w,m=m||!Sa(h);u++}return""!==f&&(a+=wI(m,f)),a}const Ft={};function bI(o){CI(Lt(),Ae(),hi()+o,tl())}function CI(o,a,u,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&ol(a,m,u)}else{const m=o.preOrderHooks;null!==m&&Ds(a,m,0,u)}as(u)}function ky(o,a){return o<<17|a<<2}function Aa(o){return o>>17&32767}function $C(o){return 2|o}function fc(o){return(131068&o)>>2}function zC(o,a){return-131069&o|a<<2}function qC(o){return 1|o}function Uy(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],m=u[h+1];if(-1!==m){const w=o.data[m];rl(f),w.contentQueries(2,a[m],m)}}}function Kg(o,a,u,h,f,m,w,C,D,T){const R=a.blueprint.slice();return R[0]=f,R[2]=140|h,ss(R),R[3]=R[15]=o,R[8]=u,R[10]=w||o&&o[10],R[11]=C||o&&o[11],R[12]=D||o&&o[12]||null,R[9]=T||o&&o[9]||null,R[6]=m,R[16]=2==a.type?o[16]:R,R}function Df(o,a,u,h,f){let m=o.data[a];if(null===m)m=function n0(o,a,u,h,f){const m=oa(),w=el(),D=o.data[a]=function NI(o,a,u,h,f,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,u,a,h,f);return null===o.firstChild&&(o.firstChild=D),null!==m&&(w?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D)),D}(o,a,u,h,f),function Wc(){return mt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=f;const w=function Ro(){const o=mt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return mr(m,!0),m}function xf(o,a,u,h){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function Zg(o,a,u){la(a);try{const h=o.viewQuery;null!==h&&Zy(1,h,u);const f=o.template;null!==f&&OI(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Uy(o,a),o.staticViewQueries&&Zy(2,o.viewQuery,u);const m=o.components;null!==m&&function E1(o,a){for(let u=0;u<a.length;u++)f0(o,a[u])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,ua()}}function Sf(o,a,u,h){const f=a[2];if(256==(256&f))return;la(a);const m=tl();try{ss(a),function nl(o){return mt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&OI(o,a,u,2,h);const w=3==(3&f);if(!m)if(w){const T=o.preOrderCheckHooks;null!==T&&ol(a,T,null)}else{const T=o.preOrderHooks;null!==T&&Ds(a,T,0,null),da(a,0)}if(function qy(o){for(let a=ri(o);null!==a;a=hs(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const f=u[h],m=f[3];0==(1024&f[2])&&ra(m,1),f[2]|=1024}}}(a),function h0(o){for(let a=ri(o);null!==a;a=hs(a))for(let u=10;u<a.length;u++){const h=a[u],f=h[1];Cs(h)&&Sf(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&Uy(o,a),!m)if(w){const T=o.contentCheckHooks;null!==T&&ol(a,T)}else{const T=o.contentHooks;null!==T&&Ds(a,T,1),da(a,1)}!function kI(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)as(~f);else{const m=f,w=u[++h],C=u[++h];Yc(w,m),C(2,a[m])}}}finally{as(-1)}}(o,a);const C=o.components;null!==C&&function C1(o,a){for(let u=0;u<a.length;u++)Kt(o,a[u])}(a,C);const D=o.viewQuery;if(null!==D&&Zy(2,D,h),!m)if(w){const T=o.viewCheckHooks;null!==T&&ol(a,T)}else{const T=o.viewHooks;null!==T&&Ds(a,T,2),da(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),m||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,ra(a[3],-1))}finally{ua()}}function D1(o,a,u,h){const f=a[10],m=!tl(),w=Mo(a);try{m&&!w&&f.begin&&f.begin(),w&&Zg(o,a,h),Sf(o,a,u,h)}finally{m&&!w&&f.end&&f.end()}}function OI(o,a,u,h,f){const m=hi(),w=2&h;try{as(-1),w&&a.length>20&&CI(o,a,20,tl()),u(h,f)}finally{as(m)}}function FI(o,a,u){if(zl(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const w=o.data[m];w.contentQueries&&w.contentQueries(1,u[m],m)}}}function r0(o,a,u){!Ja()||(function vl(o,a,u,h){const f=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||ao(u,a),Mn(h,a);const w=u.initialInputs;for(let C=f;C<m;C++){const D=o.data[C],T=ts(D);T&&A1(a,u,D);const R=No(a,o,C,u);Mn(R,a),null!==w&&I1(0,C-f,R,D,0,w),T&&(wi(u.index,a)[8]=R)}}(o,a,u,vi(u,a)),128==(128&u.flags)&&function em(o,a,u){const h=u.directiveStart,f=u.directiveEnd,w=u.index,C=function Jl(){return mt.lFrame.currentDirectiveIndex}();try{as(w);for(let D=h;D<f;D++){const T=o.data[D],R=a[D];il(D),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&mu(T,R)}}finally{as(-1),il(C)}}(o,a,u))}function Af(o,a,u=vi){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const w=h[m+1],C=-1===w?u(a,o):o[w];o[f++]=C}}}function Qg(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Xg(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Xg(o,a,u,h,f,m,w,C,D,T){const R=20+h,V=R+f,G=function PI(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:Ft);return u}(R,V),ee="function"==typeof T?T():T;return G[1]={type:o,blueprint:G,template:u,queries:null,viewQuery:C,declTNode:a,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:D,consts:ee,incompleteFirstPass:!1}}function o0(o,a,u,h){const f=g0(a);null===u?f.push(h):(f.push(u),o.firstCreatePass&&m0(o).push(h,f.length-1))}function a0(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,f):u[h]=[a,f]}return u}function Ts(o,a,u,h,f,m,w,C){const D=vi(a,u);let R,T=a.inputs;!C&&null!=T&&(R=T[h])?(v0(o,u,R,h,f),nd(a)&&function Jg(o,a){const u=wi(a,o);16&u[2]||(u[2]|=64)}(u,a.index)):3&a.type&&(h=function x1(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=w?w(f,a.value||"",h):f,cn(m)?m.setProperty(D,h,f):Kn(h)||(D.setProperty?D.setProperty(h,f):D[h]=f))}function u0(o,a,u,h){let f=!1;if(Ja()){const m=function S1(o,a,u){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const w=h[m];vI(u,w.selectors,!1)&&(f||(f=[]),ki(ao(u,a),o,w.type),ts(w)?(zy(o,u),f.unshift(w)):f.push(w))}return f}(o,a,u),w=null===h?null:{"":-1};if(null!==m){f=!0,UI(u,o.data.length,m.length);for(let R=0;R<m.length;R++){const V=m[R];V.providersResolver&&V.providersResolver(V)}let C=!1,D=!1,T=xf(o,a,m.length,null);for(let R=0;R<m.length;R++){const V=m[R];u.mergedAttrs=Sn(u.mergedAttrs,V.hostAttrs),_u(o,u,a,T,V),Tf(T,V,w),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const G=V.type.prototype;!C&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!D&&(G.ngOnChanges||G.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),D=!0),T++}!function l0(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,w=[];let C=null,D=null;for(let T=a.directiveStart;T<h;T++){const R=f[T],V=R.inputs,G=null===m||yI(a)?null:T1(V,m);w.push(G),C=a0(V,T,C),D=a0(R.outputs,T,D)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=w,a.inputs=C,a.outputs=D}(o,u)}w&&function _o(o,a,u){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new Pe(-301,!1);h.push(a[f],m)}}}(u,h,w)}return u.mergedAttrs=Sn(u.mergedAttrs,u.attrs),f}function $y(o,a,u,h,f,m){const w=m.hostBindings;if(w){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const D=~a.index;(function VI(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=D&&C.push(D),C.push(h,f,w)}}function mu(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function zy(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function Tf(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;ts(a)&&(u[""]=o)}}function UI(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function _u(o,a,u,h,f){o.data[h]=f;const m=f.factory||(f.factory=Ri(f.type)),w=new ec(m,ts(f),null);o.blueprint[h]=w,u[h]=w,$y(o,a,0,h,xf(o,u,f.hostVars,Ft),f)}function A1(o,a,u){const h=vi(a,o),f=Qg(u),m=o[10],w=tm(o,Kg(o,f,null,u.onPush?64:16,h,a,m,m.createRenderer(h,u),null,null));o[a.index]=w}function wl(o,a,u,h,f,m){const w=vi(o,a);!function d0(o,a,u,h,f,m,w){if(null==m)cn(o)?o.removeAttribute(a,f,u):a.removeAttribute(f);else{const C=null==w?pe(m):w(m,h||"",f);cn(o)?o.setAttribute(a,f,C,u):u?a.setAttributeNS(u,f,C):a.setAttribute(f,C)}}(a[11],w,m,o.value,u,h,f)}function I1(o,a,u,h,f,m){const w=m[a];if(null!==w){const C=h.setInput;for(let D=0;D<w.length;){const T=w[D++],R=w[D++],V=w[D++];null!==C?h.setInput(u,V,T,R):u[R]=V}}}function T1(o,a){let u=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return u}function $d(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function Kt(o,a){const u=wi(a,o);if(Cs(u)){const h=u[1];80&u[2]?Sf(h,u,h.template,u[8]):u[5]>0&&zd(u)}}function zd(o){for(let h=ri(o);null!==h;h=hs(h))for(let f=10;f<h.length;f++){const m=h[f];if(1024&m[2]){const w=m[1];Sf(w,m,w.template,m[8])}else m[5]>0&&zd(m)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=wi(u[h],o);Cs(f)&&f[5]>0&&zd(f)}}function f0(o,a){const u=wi(a,o),h=u[1];(function HI(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),Zg(h,u,u[8])}function tm(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Wy(o){for(;o;){o[2]|=64;const a=Xe(o);if(Wa(o)&&!a)return o;o=a}return null}function Ky(o,a,u){const h=a[10];h.begin&&h.begin();try{Sf(o,a,o.template,u)}catch(f){throw y0(a,f),f}finally{h.end&&h.end()}}function p0(o){!function Yy(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],h=du(u),f=h[1];D1(f,h,f.template,u)}}(o[8])}function Zy(o,a,u){rl(0),a(o,u)}const qI=(()=>Promise.resolve(null))();function g0(o){return o[7]||(o[7]=[])}function m0(o){return o.cleanup||(o.cleanup=[])}function _0(o,a,u){return(null===o||ts(o))&&(u=function Za(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(u[a.index])),u[11]}function y0(o,a){const u=o[9],h=u?u.get(vf,null):null;h&&h.handleError(a)}function v0(o,a,u,h,f){for(let m=0;m<u.length;){const w=u[m++],C=u[m++],D=a[w],T=o.data[w];null!==T.setInput?T.setInput(D,f,h,C):D[C]=f}}function bl(o,a,u){const h=to(a,o);!function zg(o,a,u){cn(o)?o.setValue(a,u):a.textContent=u}(o[11],h,u)}function nm(o,a,u){let h=u?o.styles:null,f=u?o.classes:null,m=0;if(null!==a)for(let w=0;w<a.length;w++){const C=a[w];"number"==typeof C?m=C:1==m?f=he(f,C):2==m&&(h=he(h,C+": "+a[++w]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=f:o.classesWithoutHost=f}const Qy=new In("INJECTOR",-1);class w0{get(a,u=bi){if(u===bi){const h=new Error(`NullInjectorError: No provider for ${ce(a)}!`);throw h.name="NullInjectorError",h}return u}}const Xy=new In("Set Injector scope."),Mf={},KI={};let Jy;function b0(){return void 0===Jy&&(Jy=new w0),Jy}function C0(o,a=null,u=null,h){const f=E0(o,a,u,h);return f._resolveInjectorDefTypes(),f}function E0(o,a=null,u=null,h){return new ZI(o,u,a||b0(),h)}class ZI{constructor(a,u,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&Zn(u,C=>this.processProvider(C,a,u)),Zn([a],C=>this.processInjectorType(C,[],m)),this.records.set(Qy,gc(void 0,this));const w=this.records.get(Xy);this.scope=null!=w?w.value:null,this.source=f||("object"==typeof a?null:ce(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=bi,h=yt.Default){this.assertNotDestroyed();const f=le(this),m=Ln(void 0);try{if(!(h&yt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const D=function iv(o){return"function"==typeof o||"object"==typeof o&&o instanceof In}(a)&&Vt(a);C=D&&this.injectableDefInScope(D)?gc(ev(a),Mf):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&yt.Self?b0():this.parent).get(a,u=h&yt.Optional&&u===bi?null:u)}catch(w){if("NullInjectorError"===w.name){if((w[wa]=w[wa]||[]).unshift(ce(a)),f)throw w;return function pi(o,a,u,h){const f=o[wa];throw a[k]&&f.unshift(a[k]),o.message=function fo(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=ce(a);if(Array.isArray(a))f=a.map(ce).join(" -> ");else if("object"==typeof a){let m=[];for(let w in a)if(a.hasOwnProperty(w)){let C=a[w];m.push(w+":"+("string"==typeof C?JSON.stringify(C):ce(C)))}f=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${o.replace(S,"\n  ")}`}("\n"+o.message,f,u,h),o.ngTokenPath=f,o[wa]=null,o}(w,a,"R3InjectorError",this.source)}throw w}finally{Ln(m),le(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,f)=>a.push(ce(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(a,u,h){if(!(a=re(a)))return!1;let f=Ni(a);const m=null==f&&a.ngModule||void 0,w=void 0===m?a:m,C=-1!==h.indexOf(w);if(void 0!==m&&(f=Ni(m)),null==f)return!1;if(null!=f.imports&&!C){let R;h.push(w);try{Zn(f.imports,V=>{this.processInjectorType(V,u,h)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:G,providers:ee}=R[V];Zn(ee,we=>this.processProvider(we,G,ee||j))}}this.injectorDefTypes.add(w);const D=Ri(w)||(()=>new w);this.records.set(w,gc(D,Mf));const T=f.providers;if(null!=T&&!C){const R=a;Zn(T,V=>this.processProvider(V,R,T))}return void 0!==m&&void 0!==a.providers}processProvider(a,u,h){let f=mc(a=re(a))?a:re(a&&a.provide);const m=function QI(o,a,u){return Cl(o)?gc(void 0,o.useValue):gc(D0(o),Mf)}(a);if(mc(a)||!0!==a.multi)this.records.get(f);else{let w=this.records.get(f);w||(w=gc(void 0,Mf,!0),w.factory=()=>$t(w.multi),this.records.set(f,w)),f=a,w.multi.push(a)}this.records.set(f,m)}hydrate(a,u){return u.value===Mf&&(u.value=KI,u.value=u.factory()),"object"==typeof u.value&&u.value&&function S0(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=re(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function ev(o){const a=Vt(o),u=null!==a?a.factory:Ri(o);if(null!==u)return u;if(o instanceof In)throw new Pe(204,!1);if(o instanceof Function)return function R1(o){const a=o.length;if(a>0)throw rn(a,"?"),new Pe(204,!1);const u=function ur(o){const a=o&&(o[Zr]||o[Ji]);if(a){const u=function Si(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Pe(204,!1)}function D0(o,a,u){let h;if(mc(o)){const f=re(o);return Ri(f)||ev(f)}if(Cl(o))h=()=>re(o.useValue);else if(function tv(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...$t(o.deps||[]));else if(function x0(o){return!(!o||!o.useExisting)}(o))h=()=>je(re(o.useExisting));else{const f=re(o&&(o.useClass||o.provide));if(!function Ms(o){return!!o.deps}(o))return Ri(f)||ev(f);h=()=>new f(...$t(o.deps))}return h}function gc(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function Cl(o){return null!==o&&"object"==typeof o&&U in o}function mc(o){return"function"==typeof o}let yo=(()=>{class o{static create(u,h){var f;if(Array.isArray(u))return C0({name:""},h,u,"");{const m=null!==(f=u.name)&&void 0!==f?f:"";return C0({name:m},u.parent,u.providers,m)}}}return o.THROW_IF_NOT_FOUND=bi,o.NULL=new w0,o.\u0275prov=an({token:o,providedIn:"any",factory:()=>je(Qy)}),o.__NG_ELEMENT_ID__=-1,o})();function O0(o,a){md(du(o)[1],yn())}function om(o){let a=function av(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let f;if(ts(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Pe(903,"");f=a.\u0275dir}if(f){if(u){h.push(f);const w=o;w.inputs=El(o.inputs),w.declaredInputs=El(o.declaredInputs),w.outputs=El(o.outputs);const C=f.hostBindings;C&&lv(o,C);const D=f.viewQuery,T=f.contentQueries;if(D&&Pf(o,D),T&&iT(o,T),ie(o.inputs,f.inputs),ie(o.declaredInputs,f.declaredInputs),ie(o.outputs,f.outputs),ts(f)&&f.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let w=0;w<m.length;w++){const C=m[w];C&&C.ngInherit&&C(o),C===om&&(u=!1)}}a=Object.getPrototypeOf(a)}!function Ia(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=Sn(f.hostAttrs,u=Sn(u,f.hostAttrs))}}(h)}function El(o){return o===Ti?{}:o===j?[]:o}function Pf(o,a){const u=o.viewQuery;o.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function iT(o,a){const u=o.contentQueries;o.contentQueries=u?(h,f,m)=>{a(h,f,m),u(h,f,m)}:a}function lv(o,a){const u=o.hostBindings;o.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}let cm=null;function yc(){if(!cm){const o=Ht.Symbol;if(o&&o.iterator)cm=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(cm=h)}}}return cm}function Nf(o){return!!um(o)&&(Array.isArray(o)||!(o instanceof Map)&&yc()in o)}function um(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Os(o,a,u){return o[a]=u}function br(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function P0(o,a,u,h){const f=Ae();return br(f,no(),a)&&(Lt(),wl(Fn(),f,o,a,u,h)),P0}function Yd(o,a,u,h,f,m){const C=function wu(o,a,u,h){const f=br(o,a,u);return br(o,a+1,h)||f}(o,function Es(){return mt.lFrame.bindingIndex}(),u,f);return Nr(2),C?a+pe(u)+h+pe(f)+m:Ft}function fm(o,a,u,h,f,m,w,C){const D=Ae(),T=Lt(),R=o+20,V=T.firstCreatePass?function Eu(o,a,u,h,f,m,w,C,D){const T=a.consts,R=Df(a,o,4,w||null,Pr(T,C));u0(a,u,R,Pr(T,D)),md(a,R);const V=R.tViews=Xg(2,R,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,T);return null!==a.queries&&(a.queries.template(a,R),V.queries=a.queries.embeddedTView(R)),R}(R,T,D,a,u,h,f,m,w):T.data[R];mr(V,!1);const G=D[11].createComment("");Ty(T,D,G,V),Mn(G,D),tm(D,D[R]=$d(G,D,G,V)),es(V)&&r0(T,D,V),null!=w&&Af(D,V,C)}function Bf(o){return rs(function Zl(){return mt.lFrame.contextLView}(),20+o)}function Du(o,a=yt.Default){const u=Ae();return null===u?je(o,a):ga(yn(),u,re(o),a)}function tE(){throw new Error("invalid")}function gv(o,a,u){const h=Ae();return br(h,no(),a)&&Ts(Lt(),Fn(),h,o,a,h[11],u,!1),gv}function Vf(o,a,u,h,f){const w=f?"class":"style";v0(o,u,a.inputs[w],w,h)}function bm(o,a,u,h){const f=Ae(),m=Lt(),w=20+o,C=f[11],D=f[w]=Ef(C,a,function gd(){return mt.lFrame.currentNamespace}()),T=m.firstCreatePass?function yT(o,a,u,h,f,m,w){const C=a.consts,T=Df(a,o,2,f,Pr(C,m));return u0(a,u,T,Pr(C,w)),null!==T.attrs&&nm(T,T.attrs,!1),null!==T.mergedAttrs&&nm(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(w,m,f,0,a,u,h):m.data[w];mr(T,!0);const R=T.mergedAttrs;null!==R&&ze(C,D,R);const V=T.classes;null!==V&&GC(C,D,V);const G=T.styles;return null!==G&&gI(C,D,G),64!=(64&T.flags)&&Ty(m,f,D,T),0===function Yl(){return mt.lFrame.elementDepthCount}()&&Mn(D,f),function Xa(){mt.lFrame.elementDepthCount++}(),es(T)&&(r0(m,f,T),FI(m,T,f)),null!==h&&Af(f,T),bm}function xu(){let o=yn();el()?qc():(o=o.parent,mr(o,!1));const a=o;!function Gc(){mt.lFrame.elementDepthCount--}();const u=Lt();return u.firstCreatePass&&(md(u,o),zl(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Qc(o){return 0!=(16&o.flags)}(a)&&Vf(u,a,Ae(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function vg(o){return 0!=(32&o.flags)}(a)&&Vf(u,a,Ae(),a.stylesWithoutHost,!1),xu}function mv(o,a,u,h){return bm(o,a,u,h),xu(),mv}function Uf(o,a,u){const h=Ae(),f=Lt(),m=o+20,w=f.firstCreatePass?function nE(o,a,u,h,f){const m=a.consts,w=Pr(m,h),C=Df(a,o,8,"ng-container",w);return null!==w&&nm(C,w,!0),u0(a,u,C,Pr(m,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(m,f,h,a,u):f.data[m];mr(w,!0);const C=h[m]=h[11].createComment("");return Ty(f,h,C,w),Mn(C,h),es(w)&&(r0(f,h,w),FI(f,w,h)),null!=u&&Af(h,w),Uf}function Ur(){let o=yn();const a=Lt();return el()?qc():(o=o.parent,mr(o,!1)),a.firstCreatePass&&(md(a,o),zl(o)&&a.queries.elementEnd(o)),Ur}function bc(o,a,u){return Uf(o,a,u),Ur(),bc}function iE(){return Ae()}function _v(o){return!!o&&"function"==typeof o.then}function yv(o){return!!o&&"function"==typeof o.subscribe}const rE=yv;function Cm(o,a,u,h){const f=Ae(),m=Lt(),w=yn();return sE(m,f,f[11],w,o,a,!!u,h),Cm}function Qd(o,a){const u=yn(),h=Ae(),f=Lt();return sE(f,h,_0(aa(f.data),u,h),u,o,a,!1),Qd}function sE(o,a,u,h,f,m,w,C){const D=es(h),R=o.firstCreatePass&&m0(o),V=a[8],G=g0(a);let ee=!0;if(3&h.type||C){const $e=vi(h,a),nt=C?C($e):$e,Ie=G.length,ut=C?Mt=>C(tn(Mt[h.index])):h.index;if(cn(u)){let Mt=null;if(!C&&D&&(Mt=function wT(o,a,u,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const w=f[m];if(w===u&&f[m+1]===h){const C=a[7],D=f[m+2];return C.length>D?C[D]:null}"string"==typeof w&&(m+=2)}return null}(o,a,f,h.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=m,Mt.__ngLastListenerFn__=m,ee=!1;else{m=vv(h,a,V,m,!1);const hn=u.listen(nt,f,m);G.push(m,hn),R&&R.push(f,ut,Ie,Ie+1)}}else m=vv(h,a,V,m,!0),nt.addEventListener(f,m,w),G.push(m),R&&R.push(f,ut,Ie,w)}else m=vv(h,a,V,m,!1);const we=h.outputs;let Ne;if(ee&&null!==we&&(Ne=we[f])){const $e=Ne.length;if($e)for(let nt=0;nt<$e;nt+=2){const ps=a[Ne[nt]][Ne[nt+1]].subscribe(m),Nu=G.length;G.push(m,ps),R&&R.push(f,h.index,Nu,-(Nu+1))}}}function Em(o,a,u,h){try{return!1!==u(h)}catch(f){return y0(o,f),!1}}function vv(o,a,u,h,f){return function m(w){if(w===Function)return h;const C=2&o.flags?wi(o.index,a):a;0==(32&a[2])&&Wy(C);let D=Em(a,0,h,w),T=m.__ngNextListenerFn__;for(;T;)D=Em(a,0,T,w)&&D,T=T.__ngNextListenerFn__;return f&&!1===D&&(w.preventDefault(),w.returnValue=!1),D}}function wv(o=1){return function os(o){return(mt.lFrame.contextLView=function Xh(o,a){for(;o>0;)a=a[15],o--;return a}(o,mt.lFrame.contextLView))[8]}(o)}function bT(o,a){let u=null;const h=function s1(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?vI(o,m,!0):l1(h,m))return f}else u=f}return u}function oE(o){const a=Ae()[16][6];if(!a.projection){const h=a.projection=rn(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const w=o?bT(m,o):0;null!==w&&(f[w]?f[w].projectionNext=m:h[w]=m,f[w]=m),m=m.next}}}function aE(o,a=0,u){const h=Ae(),f=Lt(),m=Df(f,20+o,16,null,u||null);null===m.projection&&(m.projection=a),qc(),64!=(64&m.flags)&&function QN(o,a,u){pI(a[11],0,a,u,sI(o,u,a),cI(u.parent||a[6],u,a))}(f,h,m)}function Ev(o,a,u,h,f){const m=o[u+1],w=null===a;let C=h?Aa(m):fc(m),D=!1;for(;0!==C&&(!1===D||w);){const R=o[C+1];pE(o[C],a)&&(D=!0,o[C+1]=h?qC(R):$C(R)),C=h?Aa(R):fc(R)}D&&(o[u+1]=h?$C(m):qC(m))}function pE(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&va(o,a)>=0}function _E(o,a,u){return zo(o,a,u,!1),_E}function yE(o,a){return zo(o,a,null,!0),yE}function zo(o,a,u,h){const f=Ae(),m=Lt(),w=Nr(2);m.firstUpdatePass&&function wE(o,a,u,h){const f=o.data;if(null===f[u+1]){const m=f[hi()],w=function AT(o,a){return a>=o.expandoStartIndex}(o,u);(function MT(o,a){return 0!=(o.flags&(a?16:32))})(m,h)&&null===a&&!w&&(a=!1),a=function j1(o,a,u,h){const f=aa(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=xm(u=bE(null,o,a,u,h),a.attrs,h),m=null);else{const w=a.directiveStylingLast;if(-1===w||o[w]!==f)if(u=bE(f,o,a,u,h),null===m){let D=function H1(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==fc(h))return o[Aa(h)]}(o,a,h);void 0!==D&&Array.isArray(D)&&(D=bE(null,o,a,D[1],h),D=xm(D,a.attrs,h),function G1(o,a,u,h){o[Aa(u?a.classBindings:a.styleBindings)]=h}(o,a,h,D))}else m=function $1(o,a,u){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=xm(h,o[m].hostAttrs,u);return xm(h,a.attrs,u)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,h),function CT(o,a,u,h,f,m){let w=m?a.classBindings:a.styleBindings,C=Aa(w),D=fc(w);o[h]=u;let R,T=!1;if(Array.isArray(u)){const V=u;R=V[1],(null===R||va(V,R)>0)&&(T=!0)}else R=u;if(f)if(0!==D){const G=Aa(o[C+1]);o[h+1]=ky(G,C),0!==G&&(o[G+1]=zC(o[G+1],h)),o[C+1]=function h1(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=ky(C,0),0!==C&&(o[C+1]=zC(o[C+1],h)),C=h;else o[h+1]=ky(D,0),0===C?C=h:o[D+1]=zC(o[D+1],h),D=h;T&&(o[h+1]=$C(o[h+1])),Ev(o,R,h,!0),Ev(o,R,h,!1),function Xd(o,a,u,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&va(m,a)>=0&&(u[h+1]=qC(u[h+1]))}(a,R,o,h,m),w=ky(C,D),m?a.classBindings=w:a.styleBindings=w}(f,m,a,u,w,h)}}(m,o,w,h),a!==Ft&&br(f,w,a)&&function xv(o,a,u,h,f,m,w,C){if(!(3&a.type))return;const D=o.data,T=D[C+1];Sv(function xI(o){return 1==(1&o)}(T)?TT(D,a,u,f,fc(T),w):void 0)||(Sv(m)||function DI(o){return 2==(2&o)}(T)&&(m=TT(D,null,u,f,C,w)),function JN(o,a,u,h,f){const m=cn(o);if(a)f?m?o.addClass(u,h):u.classList.add(h):m?o.removeClass(u,h):u.classList.remove(h);else{let w=-1===h.indexOf("-")?void 0:I.DashCase;if(null==f)m?o.removeStyle(u,h,w):u.style.removeProperty(h);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),w|=I.Important),m?o.setStyle(u,h,f,w):u.style.setProperty(h,f,C?"important":"")}}}(h,w,to(hi(),u),f,m))}(m,m.data[hi()],f,f[11],o,f[w+1]=function Hf(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ce(Ca(o)))),o}(a,u),h,w)}function bE(o,a,u,h,f){let m=null;const w=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<w&&(m=a[C],h=xm(h,m.hostAttrs,f),m!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function xm(o,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const w=a[m];"number"==typeof w?f=w:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),ft(o,w,!!u||a[++m]))}return void 0===o?null:o}function TT(o,a,u,h,f,m){const w=null===a;let C;for(;f>0;){const D=o[f],T=Array.isArray(D),R=T?D[1]:D,V=null===R;let G=u[f+1];G===Ft&&(G=V?j:void 0);let ee=V?rc(G,h):R===h?G:void 0;if(T&&!Sv(ee)&&(ee=rc(D,h)),Sv(ee)&&(C=ee,w))return C;const we=o[f+1];f=w?Aa(we):fc(we)}if(null!==a){let D=m?a.residualClasses:a.residualStyles;null!=D&&(C=rc(D,h))}return C}function Sv(o){return void 0!==o}function CE(o,a=""){const u=Ae(),h=Lt(),f=o+20,m=h.firstCreatePass?Df(h,f,1,a,null):h.data[f],w=u[f]=function bf(o,a){return cn(o)?o.createText(a):o.createTextNode(a)}(u[11],a);Ty(h,u,w,m),mr(m,!1)}function Sm(o){return Am("",o,""),Sm}function Am(o,a,u){const h=Ae(),f=function Wd(o,a,u,h){return br(o,no(),u)?a+pe(u)+h:Ft}(h,o,a,u);return f!==Ft&&bl(h,hi(),f),Am}function Gf(o,a,u,h,f){const m=Ae(),w=Yd(m,o,a,u,h,f);return w!==Ft&&bl(m,hi(),w),Gf}function Tv(o,a,u){const h=Ae();return br(h,no(),a)&&Ts(Lt(),Fn(),h,o,a,h[11],u,!0),Tv}function Mv(o,a,u){const h=Ae();if(br(h,no(),a)){const m=Lt(),w=Fn();Ts(m,w,h,o,a,_0(aa(m.data),w,h),u,!0)}return Mv}const Cc=void 0;var OE=["en",[["a","p"],["AM","PM"],Cc],[["AM","PM"],Cc,Cc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cc,"{1} 'at' {0}",Cc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function PT(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let eh={};function Rv(o){const a=function lL(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=FE(a);if(u)return u;const h=a.split("-")[0];if(u=FE(h),u)return u;if("en"===h)return OE;throw new Error(`Missing locale data for the locale "${o}".`)}function $f(o){return Rv(o)[at.PluralCase]}function FE(o){return o in eh||(eh[o]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[o]),eh[o]}var at=(()=>((at=at||{})[at.LocaleId=0]="LocaleId",at[at.DayPeriodsFormat=1]="DayPeriodsFormat",at[at.DayPeriodsStandalone=2]="DayPeriodsStandalone",at[at.DaysFormat=3]="DaysFormat",at[at.DaysStandalone=4]="DaysStandalone",at[at.MonthsFormat=5]="MonthsFormat",at[at.MonthsStandalone=6]="MonthsStandalone",at[at.Eras=7]="Eras",at[at.FirstDayOfWeek=8]="FirstDayOfWeek",at[at.WeekendRange=9]="WeekendRange",at[at.DateFormat=10]="DateFormat",at[at.TimeFormat=11]="TimeFormat",at[at.DateTimeFormat=12]="DateTimeFormat",at[at.NumberSymbols=13]="NumberSymbols",at[at.NumberFormats=14]="NumberFormats",at[at.CurrencyCode=15]="CurrencyCode",at[at.CurrencySymbol=16]="CurrencySymbol",at[at.CurrencyName=17]="CurrencyName",at[at.Currencies=18]="Currencies",at[at.Directionality=19]="Directionality",at[at.PluralCase=20]="PluralCase",at[at.ExtraData=21]="ExtraData",at))();const km="en-US";let NE=km;function Bv(o,a,u,h,f){if(o=re(o),Array.isArray(o))for(let m=0;m<o.length;m++)Bv(o[m],a,u,h,f);else{const m=Lt(),w=Ae();let C=mc(o)?o:re(o.provide),D=D0(o);const T=yn(),R=1048575&T.providerIndexes,V=T.directiveStart,G=T.providerIndexes>>20;if(mc(o)||!o.multi){const ee=new ec(D,f,Du),we=Xf(C,a,f?R:R+G,V);-1===we?(ki(ao(T,w),m,C),Vv(m,o,a.length),a.push(C),T.directiveStart++,T.directiveEnd++,f&&(T.providerIndexes+=1048576),u.push(ee),w.push(ee)):(u[we]=ee,w[we]=ee)}else{const ee=Xf(C,a,R+G,V),we=Xf(C,a,R,R+G),Ne=ee>=0&&u[ee],$e=we>=0&&u[we];if(f&&!$e||!f&&!Ne){ki(ao(T,w),m,C);const nt=function cM(o,a,u,h,f){const m=new ec(o,u,Du);return m.multi=[],m.index=a,m.componentProviders=0,Dc(m,f,h&&!u),m}(f?lM:uD,u.length,f,h,D);!f&&$e&&(u[we].providerFactory=nt),Vv(m,o,a.length,0),a.push(C),T.directiveStart++,T.directiveEnd++,f&&(T.providerIndexes+=1048576),u.push(nt),w.push(nt)}else Vv(m,o,ee>-1?ee:we,Dc(u[f?we:ee],D,!f&&h));!f&&h&&$e&&u[we].componentProviders++}}}function Vv(o,a,u,h){const f=mc(a),m=function nv(o){return!!o.useClass}(a);if(f||m){const D=(m?re(a.useClass):a).prototype.ngOnDestroy;if(D){const T=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const R=T.indexOf(u);-1===R?T.push(u,[h,D]):T[R+1].push(h,D)}else T.push(u,D)}}}function Dc(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function Xf(o,a,u,h){for(let f=u;f<h;f++)if(a[f]===o)return f;return-1}function uD(o,a,u,h){return Vm(this.multi,[])}function lM(o,a,u,h){const f=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,C=No(u,u[1],this.providerFactory.index,h);m=C.slice(0,w),Vm(f,m);for(let D=w;D<C.length;D++)m.push(C[D])}else m=[],Vm(f,m);return m}function Vm(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function xc(o,a=[]){return u=>{u.providersResolver=(h,f)=>function cD(o,a,u){const h=Lt();if(h.firstCreatePass){const f=ts(o);Bv(u,h.data,h.blueprint,f,!0),Bv(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class Um{}class uM{resolveComponentFactory(a){throw function Jf(o){const a=Error(`No component factory found for ${ce(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let jm=(()=>{class o{}return o.NULL=new uM,o})();function dM(){return oh(yn(),Ae())}function oh(o,a){return new ep(vi(o,a))}let ep=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=dM,o})();function dD(o){return o instanceof ep?o.nativeElement:o}class hD{}let fM=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function gM(){const o=Ae(),u=wi(yn().index,o);return function pM(o){return o[11]}(Vi(u)?u:o)}(),o})(),fD=(()=>{class o{}return o.\u0275prov=an({token:o,providedIn:"root",factory:()=>null}),o})();class Gt{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const pD=new Gt("13.2.7"),Sc={};function tp(o,a,u,h,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&h.push(tn(m)),Fr(m))for(let C=10;C<m.length;C++){const D=m[C],T=D[1].firstChild;null!==T&&tp(D[1],D,T,h)}const w=u.type;if(8&w)tp(o,a,u.child,h);else if(32&w){const C=Z(u,a);let D;for(;D=C();)h.push(D)}else if(16&w){const C=fI(a,u);if(Array.isArray(C))h.push(...C);else{const D=Xe(a[16]);tp(D[1],D,C,h,!0)}}u=f?u.projectionNext:u.next}return h}class Tu{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return tp(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Fr(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(BC(a,h),Br(u,h))}this._attachedToViewContainer=!1}rI(this._lView[1],this._lView)}onDestroy(a){o0(this._lView[1],this._lView,null,a)}markForCheck(){Wy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ky(this._lView[1],this._lView,this.context)}checkNoChanges(){!function $I(o,a,u){Ql(!0);try{Ky(o,a,u)}finally{Ql(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Sy(o,a){Yg(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=a}}class mM extends Tu{constructor(a){super(a),this._view=a}detectChanges(){p0(this._view)}checkNoChanges(){!function zI(o){Ql(!0);try{p0(o)}finally{Ql(!1)}}(this._view)}get context(){return null}}class gD extends jm{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=ni(a);return new Hm(u,this.ngModule)}}function mD(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class Hm extends Um{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function u1(o){return o.map(c1).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return mD(this.componentDef.inputs)}get outputs(){return mD(this.componentDef.outputs)}create(a,u,h,f){const m=(f=f||this.ngModule)?function _D(o,a){return{get:(u,h,f)=>{const m=o.get(u,Sc,f);return m!==Sc||h===Sc?m:a.get(u,h,f)}}}(a,f.injector):a,w=m.get(hD,Ka),C=m.get(fD,null),D=w.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",R=h?function s0(o,a,u){if(cn(o))return o.selectRootElement(a,u===zt.ShadowDom);let h="string"==typeof a?o.querySelector(a):a;return h.textContent="",h}(D,h,this.componentDef.encapsulation):Ef(w.createRenderer(null,this.componentDef),T,function Ma(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(T)),V=this.componentDef.onPush?576:528,G=function yu(o,a){return{components:[],scheduler:o||PC,clean:qI,playerHandler:a||null,flags:0}}(),ee=Xg(0,null,null,1,0,null,null,null,null,null),we=Kg(null,ee,G,V,null,null,w,D,C,m);let Ne,$e;la(we);try{const nt=function Ff(o,a,u,h,f,m){const w=u[1];u[20]=o;const D=Df(w,20,2,"#host",null),T=D.mergedAttrs=a.hostAttrs;null!==T&&(nm(D,T,!0),null!==o&&(ze(f,o,T),null!==D.classes&&GC(f,o,D.classes),null!==D.styles&&gI(f,o,D.styles)));const R=h.createRenderer(o,a),V=Kg(u,Qg(a),null,a.onPush?64:16,u[20],D,h,R,m||null,null);return w.firstCreatePass&&(ki(ao(D,u),w,a.type),zy(w,D),UI(D,u.length,1)),tm(u,V),u[20]=V}(R,this.componentDef,we,w,D);if(R)if(h)ze(D,R,["ng-version",pD.full]);else{const{attrs:Ie,classes:ut}=function d1(o){const a=[],u=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&u.push(m);else{if(!Sa(f))break;f=m}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Ie&&ze(D,R,Ie),ut&&ut.length>0&&GC(D,R,ut.join(" "))}if($e=Dn(ee,20),void 0!==u){const Ie=$e.projection=[];for(let ut=0;ut<this.ngContentSelectors.length;ut++){const Mt=u[ut];Ie.push(null!=Mt?Array.from(Mt):null)}}Ne=function k0(o,a,u,h,f){const m=u[1],w=function BI(o,a,u){const h=yn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),_u(o,h,a,xf(o,a,1,null),u));const f=No(a,o,h.directiveStart,h);Mn(f,a);const m=vi(h,a);return m&&Mn(m,a),f}(m,u,a);if(h.components.push(w),o[8]=w,f&&f.forEach(D=>D(w,a)),a.contentQueries){const D=yn();a.contentQueries(1,w,D.directiveStart)}const C=yn();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(as(C.index),$y(u[1],C,0,C.directiveStart,C.directiveEnd,a),mu(a,w)),w}(nt,this.componentDef,we,G,[O0]),Zg(ee,we,null)}finally{ua()}return new or(this.componentType,Ne,oh($e,we),we,$e)}}class or extends class Il{}{constructor(a,u,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new mM(f),this.componentType=a}get injector(){return new lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class ah{}class vD{}const Mu=new Map;class np extends ah{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new gD(this);const h=ii(a);this._bootstrapComponents=Ho(h.bootstrap),this._r3Injector=E0(a,u,[{provide:ah,useValue:this},{provide:jm,useValue:this.componentFactoryResolver}],ce(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=yo.THROW_IF_NOT_FOUND,h=yt.Default){return a===yo||a===ah||a===Qy?this:this._r3Injector.get(a,u,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Tl extends vD{constructor(a){super(),this.moduleType=a,null!==ii(a)&&function bD(o){const a=new Set;!function u(h){const f=ii(h,!0),m=f.id;null!==m&&(function wD(o,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${o} - ${ce(a)} vs ${ce(a.name)}`)}(m,Mu.get(m),h),Mu.set(m,h));const w=Ho(f.imports);for(const C of w)a.has(C)||(a.add(C),u(C))}(o)}(a)}create(a){return new np(this.moduleType,a)}}function qt(o,a,u){const h=jn()+o,f=Ae();return f[h]===Ft?Os(f,h,u?a.call(u):a()):function vc(o,a){return o[a]}(f,h)}function sp(o,a,u,h,f,m){const w=a+u;return br(o,w,f)?Os(o,w+1,m?h.call(m,f):h(f)):function lh(o,a){const u=o[a];return u===Ft?void 0:u}(o,w+1)}function Gv(o,a){const u=Lt();let h;const f=o+20;u.firstCreatePass?(h=function CM(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}}(a,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,h.onDestroy)):h=u.data[f];const m=h.factory||(h.factory=Ri(h.type)),w=Ln(Du);try{const C=oo(!1),D=m();return oo(C),function uv(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,Ae(),f,D),D}finally{Ln(w)}}function xD(o,a,u){const h=o+20,f=Ae(),m=rs(f,h);return function ap(o,a){return o[1].data[a].pure}(f,h)?sp(f,jn(),a,m.transform,u,m):m.transform(u)}function $v(o){return a=>{setTimeout(o,void 0,a)}}const qo=class SM extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){var f,m,w;let C=a,D=u||(()=>null),T=h;if(a&&"object"==typeof a){const V=a;C=null===(f=V.next)||void 0===f?void 0:f.bind(V),D=null===(m=V.error)||void 0===m?void 0:m.bind(V),T=null===(w=V.complete)||void 0===w?void 0:w.bind(V)}this.__isAsync&&(D=$v(D),C&&(C=$v(C)),T&&(T=$v(T)));const R=super.subscribe({next:C,error:D,complete:T});return a instanceof te.w0&&a.add(R),R}};function zv(){return this._results[yc()]()}class ch{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=yc(),h=ch.prototype;h[u]||(h[u]=zv)}get changes(){return this._changes||(this._changes=new qo)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=en(a);(this._changesDetected=!function Sd(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Fs=(()=>{class o{}return o.__NG_ELEMENT_ID__=AD,o})();const uh=Fs,SD=class extends uh{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a){const u=this._declarationTContainer.tViews,h=Kg(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(h[19]=m.createEmbeddedView(u)),Zg(u,h,a),new Tu(h)}};function AD(){return qm(yn(),Ae())}function qm(o,a){return 4&o.type?new SD(a,o,oh(o,a)):null}let ka=(()=>{class o{}return o.__NG_ELEMENT_ID__=ID,o})();function ID(){return Wv(yn(),Ae())}const AM=ka,lp=class extends AM{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return oh(this._hostTNode,this._hostLView)}get injector(){return new lo(this._hostTNode,this._hostLView)}get parentInjector(){const a=Fo(this._hostTNode,this._hostLView);if(Hn(a)){const u=Be(a,this._hostLView),h=Qt(a);return new lo(u[1].data[h+8],u)}return new lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=qv(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){const f=a.createEmbeddedView(u||{});return this.insert(f,h),f}createComponent(a,u,h,f,m){const w=a&&!function Bo(o){return"function"==typeof o}(a);let C;if(w)C=u;else{const V=u||{};C=V.index,h=V.injector,f=V.projectableNodes,m=V.ngModuleRef}const D=w?a:new Hm(ni(a)),T=h||this.parentInjector;if(!m&&null==D.ngModule){const G=(w?T:this.parentInjector).get(ah,null);G&&(m=G)}const R=D.create(T,f,void 0,m);return this.insert(R.hostView,C),R}insert(a,u){const h=a._lView,f=h[1];if(function Qa(o){return Fr(o[3])}(h)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const V=h[3],G=new lp(V,V[6],V[3]);G.detach(G.indexOf(a))}}const m=this._adjustIndex(u),w=this._lContainer;!function Wg(o,a,u,h){const f=10+h,m=u.length;h>0&&(u[f-1][4]=a),h<m-10?(a[4]=u[f],ji(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const w=a[17];null!==w&&u!==w&&function LC(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(w,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=128}(f,h,w,m);const C=Ry(m,w),D=h[11],T=Iy(D,w[7]);return null!==T&&function qg(o,a,u,h,f,m){h[0]=f,h[6]=a,Yg(o,h,u,1,f,m)}(f,w[6],D,h,T,C),a.attachToViewContainerRef(),ji(cp(w),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=qv(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=BC(this._lContainer,u);h&&(Br(cp(this._lContainer),u),rI(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=BC(this._lContainer,u);return h&&null!=Br(cp(this._lContainer),u)?new Tu(h):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function qv(o){return o[8]}function cp(o){return o[8]||(o[8]=[])}function Wv(o,a){let u;const h=a[o.index];if(Fr(h))u=h;else{let f;if(8&o.type)f=tn(h);else{const m=a[11];f=m.createComment("");const w=vi(o,a);Gd(m,Iy(m,w),f,function ZN(o,a){return cn(o)?o.nextSibling(a):a.nextSibling}(m,w),!1)}a[o.index]=u=$d(h,a,f,o),tm(a,u)}return new lp(u,o,a)}class ku{constructor(a){this.queryList=a,this.matches=null}clone(){return new ku(this.queryList)}setDirty(){this.queryList.setDirty()}}class Zv{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<h;m++){const w=u.getByIndex(m);f.push(this.queries[w.indexInDeclarationView].clone())}return new Zv(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==ew(a,u).matches&&this.queries[u].setDirty()}}class TD{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class Qv{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new Qv(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class dh{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new dh(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,u,up(u,m)),this.matchTNodeWithReadOption(a,u,al(u,a,m,!1,!1))}else h===Fs?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,al(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===ep||f===ka||f===Fs&&4&u.type)this.addMatch(u.index,-2);else{const m=al(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function up(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function MD(o,a,u,h){return-1===u?function Xv(o,a){return 11&o.type?oh(o,a):4&o.type?qm(o,a):null}(a,o):-2===u?function RD(o,a,u){return u===ep?oh(a,o):u===Fs?qm(a,o):u===ka?Wv(a,o):void 0}(o,a,h):No(o,o[1],u,a)}function kD(o,a,u,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,w=u.matches,C=[];for(let D=0;D<w.length;D+=2){const T=w[D];C.push(T<0?null:MD(a,m[T],w[D+1],u.metadata.read))}f.matches=C}return f.matches}function dp(o,a,u,h){const f=o.queries.getByIndex(u),m=f.matches;if(null!==m){const w=kD(o,a,f,u);for(let C=0;C<m.length;C+=2){const D=m[C];if(D>0)h.push(w[C/2]);else{const T=m[C+1],R=a[-D];for(let V=10;V<R.length;V++){const G=R[V];G[17]===G[3]&&dp(G[1],G,T,h)}if(null!==R[9]){const V=R[9];for(let G=0;G<V.length;G++){const ee=V[G];dp(ee[1],ee,T,h)}}}}}return h}function OD(o){const a=Ae(),u=Lt(),h=Kc();rl(h+1);const f=ew(u,h);if(o.dirty&&Mo(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?dp(u,a,h,[]):kD(u,a,f,h);o.reset(m,dD),o.notifyOnChanges()}return!0}return!1}function FD(o,a,u){const h=Lt();h.firstCreatePass&&(Ym(h,new TD(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),ND(h,Ae(),a)}function PD(o,a,u,h){const f=Lt();if(f.firstCreatePass){const m=yn();Ym(f,new TD(a,u,h),m.index),function IM(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}ND(f,Ae(),u)}function Jv(){return function Wm(o,a){return o[19].queries[a].queryList}(Ae(),Kc())}function ND(o,a,u){const h=new ch(4==(4&u));o0(o,a,h,h.destroy),null===a[19]&&(a[19]=new Zv),a[19].queries.push(new ku(h))}function Ym(o,a,u){null===o.queries&&(o.queries=new Qv),o.queries.track(new dh(a,u))}function ew(o,a){return o.queries.getByIndex(a)}function Ac(...o){}const ZD=new In("Application Initializer");let hw=(()=>{class o{constructor(u){this.appInits=u,this.resolve=Ac,this.reject=Ac,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(_v(m))u.push(m);else if(rE(m)){const w=new Promise((C,D)=>{m.subscribe({complete:C,error:D})});u.push(w)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(je(ZD,8))},o.\u0275prov=an({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const QD=new In("AppId",{providedIn:"root",factory:function XD(){return`${fw()}${fw()}${fw()}`}});function fw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const JD=new In("Platform Initializer"),ex=new In("Platform ID"),pw=new In("appBootstrapListener");let tx=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=an({token:o,factory:o.\u0275fac}),o})();const gw=new In("LocaleId",{providedIn:"root",factory:()=>Ct(gw,yt.Optional|yt.SkipSelf)||function LM(){return"undefined"!=typeof $localize&&$localize.locale||km}()}),BM=new In("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nx{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let ix=(()=>{class o{compileModuleSync(u){return new Tl(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=Ho(ii(u).declarations).reduce((w,C)=>{const D=ni(C);return D&&w.push(new Hm(D)),w},[]);return new nx(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=an({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const jM=(()=>Promise.resolve(0))();function mw(o){"undefined"==typeof Zone?jM.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class vo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qo(!1),this.onMicrotaskEmpty=new qo(!1),this.onStable=new qo(!1),this.onError=new qo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function HM(){let o=Ht.requestAnimationFrame,a=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function zM(o){const a=()=>{!function $M(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Ht,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,_w(o),o.isCheckStableRunning=!0,pp(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),_w(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,m,w,C)=>{try{return Jm(o),u.invokeTask(f,m,w,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),yw(o)}},onInvoke:(u,h,f,m,w,C,D)=>{try{return Jm(o),u.invoke(f,m,w,C,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),yw(o)}},onHasTask:(u,h,f,m)=>{u.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,_w(o),pp(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,f,m)=>(u.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(vo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+f,a,GM,Ac,Ac);try{return m.runTask(w,u,h)}finally{m.cancelTask(w)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const GM={};function pp(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function _w(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Jm(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function yw(o){o._nesting--,pp(o)}class qM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qo,this.onMicrotaskEmpty=new qo,this.onStable=new qo,this.onError=new qo}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}let sx=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vo.assertNotInAngularZone(),mw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,h,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(je(vo))},o.\u0275prov=an({token:o,factory:o.\u0275fac}),o})(),ox=(()=>{class o{constructor(){this._applications=new Map,vw.addToWindow(this)}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return vw.findTestabilityInTree(this,u,h)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=an({token:o,factory:o.\u0275fac}),o})();class WM{addToWindow(a){}findTestabilityInTree(a,u,h){return null}}function ax(o){vw=o}let Wo,vw=new WM;const gp=new In("AllowMultipleToken");class ww{constructor(a,u){this.name=a,this.token=u}}function cx(o,a,u=[]){const h=`Platform: ${a}`,f=new In(h);return(m=[])=>{let w=ux();if(!w||w.injector.get(gp,!1))if(o)o(u.concat(m).concat({provide:f,useValue:!0}));else{const C=u.concat(m).concat({provide:f,useValue:!0},{provide:Xy,useValue:"platform"});!function yh(o){if(Wo&&!Wo.destroyed&&!Wo.injector.get(gp,!1))throw new Pe(400,"");Wo=o.get(bw);const a=o.get(JD,null);a&&a.forEach(u=>u())}(yo.create({providers:C,name:h}))}return function YM(o){const a=ux();if(!a)throw new Pe(401,"");return a}()}}function ux(){return Wo&&!Wo.destroyed?Wo:null}let bw=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const C=function dx(o,a){let u;return u="noop"===o?new qM:("zone.js"===o?void 0:o)||new vo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),D=[{provide:vo,useValue:C}];return C.run(()=>{const T=yo.create({providers:D,parent:this.injector,name:u.moduleType.name}),R=u.create(T),V=R.injector.get(vf,null);if(!V)throw new Pe(402,"");return C.runOutsideAngular(()=>{const G=C.onError.subscribe({next:ee=>{V.handleError(ee)}});R.onDestroy(()=>{e_(this._modules,R),G.unsubscribe()})}),function Cw(o,a,u){try{const h=u();return _v(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(V,C,()=>{const G=R.injector.get(hw);return G.runInitializers(),G.donePromise.then(()=>(function BT(o){it(o,"Expected localeId to be defined"),"string"==typeof o&&(NE=o.toLowerCase().replace(/_/g,"-"))}(R.injector.get(gw,km)||km),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,h=[]){const f=ZM({},h);return function Cr(o,a,u){const h=new Tl(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const h=u.injector.get(Ml);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Pe(403,"");u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(je(yo))},o.\u0275prov=an({token:o,factory:o.\u0275fac}),o})();function ZM(o,a){return Array.isArray(a)?a.reduce(ZM,o):Object.assign(Object.assign({},o),a)}let Ml=(()=>{class o{constructor(u,h,f,m,w){this._zone=u,this._injector=h,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),D=new L.y(T=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{vo.assertNotInAngularZone(),mw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{vo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,de.T)(C,D.pipe((0,oe.B)()))}bootstrap(u,h){if(!this._initStatus.done)throw new Pe(405,"");let f;f=u instanceof Um?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(f.componentType);const m=function lx(o){return o.isBoundToModule}(f)?void 0:this._injector.get(ah),C=f.create(yo.NULL,[],h||f.selector,m),D=C.location.nativeElement,T=C.injector.get(sx,null),R=T&&C.injector.get(ox);return T&&R&&R.registerApplication(D,T),C.onDestroy(()=>{this.detachView(C.hostView),e_(this.components,C),R&&R.unregisterApplication(D)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;e_(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(pw,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(je(vo),je(yo),je(vf),je(jm),je(hw))},o.\u0275prov=an({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function e_(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let t_=!0,fx=!1;function XM(){return fx=!0,t_}function JM(){if(fx)throw new Error("Cannot enable prod mode after platform setup.");t_=!1}let tR=(()=>{class o{}return o.__NG_ELEMENT_ID__=Ew,o})();function Ew(o){return function nR(o,a,u){if(nd(o)&&!u){const h=wi(o.index,a);return new Tu(h,h)}return 47&o.type?new Tu(a[16],a):null}(yn(),Ae(),16==(16&o))}class lR{constructor(){}supports(a){return Nf(a)}create(a){return new cR(a)}}const _x=(o,a)=>a;class cR{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||_x}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,m=null;for(;u||h;){const w=!h||u&&u.currentIndex<yx(h,f,m)?u:h,C=yx(w,f,m),D=w.currentIndex;if(w===h)f--,h=h._nextRemoved;else if(u=u._next,null==w.previousIndex)f++;else{m||(m=[]);const T=C-f,R=D-f;if(T!=R){for(let G=0;G<T;G++){const ee=G<m.length?m[G]:m[G]=0,we=ee+G;R<=we&&we<T&&(m[G]=ee+1)}m[w.previousIndex]=R-T}}C!==D&&a(w,C,D)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Nf(a))throw new Pe(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,w,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],w=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,m,w,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,w,C),h=!0),u=u._next}else f=0,function ks(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[yc()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{w=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,C,w,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,w,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new FL(u,h),m,f),a}_verifyReinsertion(a,u,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new xw),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xw),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class FL{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uR{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class xw{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new uR,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yx(o,a,u){const h=o.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class vx{constructor(){}supports(a){return a instanceof Map||um(a)}create(){return new dR}}class dR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||um(a)))throw new Pe(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,w=f._next;return m&&(m._next=w),w&&(w._prev=m),f._next=null,f._prev=null,f}const h=new hR(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class hR{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function wx(){return new Sw([new lR])}let Sw=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||wx()),deps:[[o,new yr,new Ci]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Pe(901,"")}}return o.\u0275prov=an({token:o,providedIn:"root",factory:wx}),o})();function bx(){return new Aw([new vx])}let Aw=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||bx()),deps:[[o,new yr,new Ci]]}}find(u){const h=this.factories.find(m=>m.supports(u));if(h)return h;throw new Pe(901,"")}}return o.\u0275prov=an({token:o,providedIn:"root",factory:bx}),o})();const gR=cx(null,"core",[{provide:ex,useValue:"unknown"},{provide:bw,deps:[yo]},{provide:ox,deps:[]},{provide:tx,deps:[]}]);let mR=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(je(Ml))},o.\u0275mod=Li({type:o}),o.\u0275inj=Jt({}),o})()},3942:(et,ve,P)=>{P.d(ve,{Z:()=>Pe});var c=P(2090),te=P(4859),L=P(9681),de=P(1877);class oe{constructor(pe,xe){this._delegate=pe,this.firebase=xe,(0,L._addComponent)(pe,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(pe,xe=L._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(pe);return!Qe.isInitialized()&&"EXPLICIT"===(null===(We=Qe.getComponent())||void 0===We?void 0:We.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:xe})}_removeServiceInstance(pe,xe=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(xe)}_addComponent(pe){(0,L._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,L._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function he(){const Ue=function ce(Ue){const pe={},xe={__esModule:!0,initializeApp:function Se(Ge,z={}){const H=L.initializeApp(Ge,z);if((0,c.r3)(pe,H.name))return pe[H.name];const X=new Ue(H,xe);return pe[H.name]=X,X},app:Qe,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Ce(Ge){const z=Ge.name,H=z.replace("-compat","");if(L._registerComponent(Ge)&&"PUBLIC"===Ge.type){const X=(ue=Qe())=>{if("function"!=typeof ue[H])throw ie.create("invalid-app-argument",{appName:z});return ue[H]()};void 0!==Ge.serviceProps&&(0,c.ZB)(X,Ge.serviceProps),xe[H]=X,Ue.prototype[H]=function(...ue){return this._getService.bind(this,z).apply(this,Ge.multipleInstances?ue:[])}}return"PUBLIC"===Ge.type?xe[H]:null},removeApp:function We(Ge){delete pe[Ge]},useAsService:function He(Ge,z){return"serverAuth"===z?null:z},modularAPIs:L}};function Qe(Ge){if(!(0,c.r3)(pe,Ge=Ge||L._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:Ge});return pe[Ge]}return xe.default=xe,Object.defineProperty(xe,"apps",{get:function be(){return Object.keys(pe).map(Ge=>pe[Ge])}}),Qe.App=Ue,xe}(oe);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function pe(xe){(0,c.ZB)(Ue,xe)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Ue}(),$=new de.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=q;!function Te(Ue){(0,L.registerVersion)("@firebase/app-compat","0.1.25",Ue)}()},9681:(et,ve,P)=>{P.r(ve),P.d(ve,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>Zr,_DEFAULT_ENTRY_NAME:()=>it,_addComponent:()=>ci,_addOrOverwriteComponent:()=>an,_apps:()=>Rn,_clearComponents:()=>Kr,_components:()=>Xt,_getProvider:()=>Jt,_registerComponent:()=>cr,_removeServiceInstance:()=>Vt,deleteApp:()=>yt,getApp:()=>Ji,getApps:()=>Qr,initializeApp:()=>Ys,onLog:()=>Ln,registerVersion:()=>kn,setLogLevel:()=>Ks});var c=P(5861),te=P(4859),L=P(1877),de=P(2090),oe=P(8766);class me{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function ie(W){const ne=W.getComponent();return"VERSION"===(null==ne?void 0:ne.type)}(Re)){const tt=Re.getImmediate();return`${tt.library}/${tt.version}`}return null}).filter(Re=>Re).join(" ")}}const ce="@firebase/app",q=new L.Yd("@firebase/app"),it="[DEFAULT]",xt={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Rn=new Map,Xt=new Map;function ci(W,ne){try{W.container.addComponent(ne)}catch(Re){q.debug(`Component ${ne.name} failed to register with FirebaseApp ${W.name}`,Re)}}function an(W,ne){W.container.addOrOverwriteComponent(ne)}function cr(W){const ne=W.name;if(Xt.has(ne))return q.debug(`There were multiple attempts to register component ${ne}.`),!1;Xt.set(ne,W);for(const Re of Rn.values())ci(Re,W);return!0}function Jt(W,ne){const Re=W.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),W.container.getProvider(ne)}function Vt(W,ne,Re=it){Jt(W,ne).clearInstance(Re)}function Kr(){Xt.clear()}const Si=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ni{constructor(ne,Re,tt){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=tt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}}const Zr="9.8.1";function Ys(W,ne={}){"object"!=typeof ne&&(ne={name:ne});const Re=Object.assign({name:it,automaticDataCollectionEnabled:!1},ne),tt=Re.name;if("string"!=typeof tt||!tt)throw Si.create("bad-app-name",{appName:String(tt)});const gt=Rn.get(tt);if(gt){if((0,de.vZ)(W,gt.options)&&(0,de.vZ)(Re,gt.config))return gt;throw Si.create("duplicate-app",{appName:tt})}const St=new te.H0(tt);for(const Et of Xt.values())St.addComponent(Et);const mn=new Ni(W,Re,St);return Rn.set(tt,mn),mn}function Ji(W=it){const ne=Rn.get(W);if(!ne)throw Si.create("no-app",{appName:W});return ne}function Qr(){return Array.from(Rn.values())}function yt(W){return dr.apply(this,arguments)}function dr(){return(dr=(0,c.Z)(function*(W){const ne=W.name;Rn.has(ne)&&(Rn.delete(ne),yield Promise.all(W.container.getProviders().map(Re=>Re.delete())),W.isDeleted=!0)})).apply(this,arguments)}function kn(W,ne,Re){var tt;let gt=null!==(tt=xt[W])&&void 0!==tt?tt:W;Re&&(gt+=`-${Re}`);const St=gt.match(/\s|\//),mn=ne.match(/\s|\//);if(St||mn){const Et=[`Unable to register library "${gt}" with version "${ne}":`];return St&&Et.push(`library name "${gt}" contains illegal characters (whitespace or "/")`),St&&mn&&Et.push("and"),mn&&Et.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void q.warn(Et.join(" "))}cr(new te.wA(`${gt}-version`,()=>({library:gt,version:ne}),"VERSION"))}function Ln(W,ne){if(null!==W&&"function"!=typeof W)throw Si.create("invalid-log-argument");(0,L.Am)(W,ne)}function Ks(W){(0,L.Ub)(W)}const Bn="firebase-heartbeat-store";let hr=null;function Eo(){return hr||(hr=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(W,ne)=>{0===ne&&W.createObjectStore(Bn)}}).catch(W=>{throw Si.create("storage-open",{originalErrorMessage:W.message})})),hr}function ot(){return(ot=(0,c.Z)(function*(W){try{return(yield Eo()).transaction(Bn).objectStore(Bn).get(fr(W))}catch(ne){throw Si.create("storage-get",{originalErrorMessage:ne.message})}})).apply(this,arguments)}function bt(W,ne){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,c.Z)(function*(W,ne){try{const tt=(yield Eo()).transaction(Bn,"readwrite");return yield tt.objectStore(Bn).put(ne,fr(W)),tt.done}catch(Re){throw Si.create("storage-set",{originalErrorMessage:Re.message})}})).apply(this,arguments)}function fr(W){return`${W.name}!${W.options.appId}`}class Ii{constructor(ne){this.container=ne,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new Y(Re),this._heartbeatsCachePromise=this._storage.read().then(tt=>(this._heartbeatsCache=tt,tt))}triggerHeartbeat(){var ne=this;return(0,c.Z)(function*(){const tt=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gt=Ti();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==gt&&!ne._heartbeatsCache.heartbeats.some(St=>St.date===gt))return ne._heartbeatsCache.heartbeats.push({date:gt,agent:tt}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter(St=>{const mn=new Date(St.date).valueOf();return Date.now()-mn<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,c.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const Re=Ti(),{heartbeatsToSend:tt,unsentEntries:gt}=function j(W,ne=1024){const Re=[];let tt=W.slice();for(const gt of W){const St=Re.find(mn=>mn.agent===gt.agent);if(St){if(St.dates.push(gt.date),K(Re)>ne){St.dates.pop();break}}else if(Re.push({agent:gt.agent,dates:[gt.date]}),K(Re)>ne){Re.pop();break}tt=tt.slice(1)}return{heartbeatsToSend:Re,unsentEntries:tt}}(ne._heartbeatsCache.heartbeats),St=(0,de.L)(JSON.stringify({version:2,heartbeats:tt}));return ne._heartbeatsCache.lastSentHeartbeatDate=Re,gt.length>0?(ne._heartbeatsCache.heartbeats=gt,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),St})()}}function Ti(){return(new Date).toISOString().substring(0,10)}class Y{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,c.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function zt(W){return ot.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var Re=this;return(0,c.Z)(function*(){var tt;if(yield Re._canUseIndexedDBPromise){const St=yield Re.read();return bt(Re.app,{lastSentHeartbeatDate:null!==(tt=ne.lastSentHeartbeatDate)&&void 0!==tt?tt:St.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var Re=this;return(0,c.Z)(function*(){var tt;if(yield Re._canUseIndexedDBPromise){const St=yield Re.read();return bt(Re.app,{lastSentHeartbeatDate:null!==(tt=ne.lastSentHeartbeatDate)&&void 0!==tt?tt:St.lastSentHeartbeatDate,heartbeats:[...St.heartbeats,...ne.heartbeats]})}})()}}function K(W){return(0,de.L)(JSON.stringify({version:2,heartbeats:W})).length}!function De(W){cr(new te.wA("platform-logger",ne=>new me(ne),"PRIVATE")),cr(new te.wA("heartbeat",ne=>new Ii(ne),"PRIVATE")),kn(ce,"0.7.24",W),kn(ce,"0.7.24","esm2017"),kn("fire-js","")}("")},4859:(et,ve,P)=>{P.d(ve,{wA:()=>L,H0:()=>ce,zt:()=>oe});var c=P(5861),te=P(2090);class L{constructor(q,$,re){this.name=q,this.instanceFactory=$,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const de="[DEFAULT]";class oe{constructor(q,$){this.name=q,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const $=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has($)){const re=new te.BH;if(this.instancesDeferred.set($,re),this.isInitialized($)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:$});qe&&re.resolve(qe)}catch(qe){}}return this.instancesDeferred.get($).promise}getImmediate(q){var $;const re=this.normalizeInstanceIdentifier(null==q?void 0:q.identifier),qe=null!==($=null==q?void 0:q.optional)&&void 0!==$&&$;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Te){if(qe)return null;throw Te}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function ie(he){return"EAGER"===he.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:de})}catch($){}for(const[$,re]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier($);try{const Te=this.getOrInitializeService({instanceIdentifier:qe});re.resolve(Te)}catch(Te){}}}}clearInstance(q=de){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,c.Z)(function*(){const $=Array.from(q.instances.values());yield Promise.all([...$.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...$.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=de){return this.instances.has(q)}getOptions(q=de){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:$={}}=q,re=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:re,options:$});for(const[Te,Pe]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(Te)&&Pe.resolve(qe);return qe}onInit(q,$){var re;const qe=this.normalizeInstanceIdentifier($),Te=null!==(re=this.onInitCallbacks.get(qe))&&void 0!==re?re:new Set;Te.add(q),this.onInitCallbacks.set(qe,Te);const Pe=this.instances.get(qe);return Pe&&q(Pe,qe),()=>{Te.delete(q)}}invokeOnInitCallbacks(q,$){const re=this.onInitCallbacks.get($);if(re)for(const qe of re)try{qe(q,$)}catch(Te){}}getOrInitializeService({instanceIdentifier:q,options:$={}}){let re=this.instances.get(q);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(he=q,he===de?void 0:he),options:$}),this.instances.set(q,re),this.instancesOptions.set(q,$),this.invokeOnInitCallbacks(re,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,re)}catch(qe){}var he;return re||null}normalizeInstanceIdentifier(q=de){return this.component?this.component.multipleInstances?q:de:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const $=this.getProvider(q.name);if($.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);$.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const $=new oe(q,this);return this.providers.set(q,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(et,ve,P)=>{P.d(ve,{in:()=>te,Yd:()=>ie,Ub:()=>ce,Am:()=>he});const c=[];var te=(()=>{return(q=te||(te={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",te;var q})();const L={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},de=te.INFO,oe={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},me=(q,$,...re)=>{if($<q.logLevel)return;const qe=(new Date).toISOString(),Te=oe[$];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Te](`[${qe}]  ${q.name}:`,...re)};class ie{constructor($){this.name=$,this._logLevel=de,this._logHandler=me,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in te))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?L[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...$),this._logHandler(this,te.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...$),this._logHandler(this,te.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,te.INFO,...$),this._logHandler(this,te.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,te.WARN,...$),this._logHandler(this,te.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...$),this._logHandler(this,te.ERROR,...$)}}function ce(q){c.forEach($=>{$.setLogLevel(q)})}function he(q,$){for(const re of c){let qe=null;$&&$.level&&(qe=L[$.level]),re.userLogHandler=null===q?null:(Te,Pe,...Ue)=>{const pe=Ue.map(xe=>{if(null==xe)return null;if("string"==typeof xe)return xe;if("number"==typeof xe||"boolean"==typeof xe)return xe.toString();if(xe instanceof Error)return xe.message;try{return JSON.stringify(xe)}catch(We){return null}}).filter(xe=>xe).join(" ");Pe>=(null!=qe?qe:Te.logLevel)&&q({level:te[Pe].toLowerCase(),message:pe,args:Ue,type:Te.name})}}}},8766:(et,ve,P)=>{P.d(ve,{Lj:()=>Se,X3:()=>Qe});var c=P(5861);let L,de;const ie=new WeakMap,ce=new WeakMap,he=new WeakMap,q=new WeakMap,$=new WeakMap;let Te={get(z,H,X){if(z instanceof IDBTransaction){if("done"===H)return ce.get(z);if("objectStoreNames"===H)return z.objectStoreNames||he.get(z);if("store"===H)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return xe(z[H])},set:(z,H,X)=>(z[H]=X,!0),has:(z,H)=>z instanceof IDBTransaction&&("done"===H||"store"===H)||H in z};function pe(z){return"function"==typeof z?function Ue(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...H){return z.apply(We(this),H),xe(ie.get(this))}:function(...H){return xe(z.apply(We(this),H))}:function(H,...X){const ue=z.call(We(this),H,...X);return he.set(ue,H.sort?H.sort():[H]),xe(ue)}}(z):(z instanceof IDBTransaction&&function qe(z){if(ce.has(z))return;const H=new Promise((X,ue)=>{const se=()=>{z.removeEventListener("complete",Me),z.removeEventListener("error",ae),z.removeEventListener("abort",ae)},Me=()=>{X(),se()},ae=()=>{ue(z.error||new DOMException("AbortError","AbortError")),se()};z.addEventListener("complete",Me),z.addEventListener("error",ae),z.addEventListener("abort",ae)});ce.set(z,H)}(z),((z,H)=>H.some(X=>z instanceof X))(z,function oe(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,Te):z)}function xe(z){if(z instanceof IDBRequest)return function re(z){const H=new Promise((X,ue)=>{const se=()=>{z.removeEventListener("success",Me),z.removeEventListener("error",ae)},Me=()=>{X(xe(z.result)),se()},ae=()=>{ue(z.error),se()};z.addEventListener("success",Me),z.addEventListener("error",ae)});return H.then(X=>{X instanceof IDBCursor&&ie.set(X,z)}).catch(()=>{}),$.set(H,z),H}(z);if(q.has(z))return q.get(z);const H=pe(z);return H!==z&&(q.set(z,H),$.set(H,z)),H}const We=z=>$.get(z);function Qe(z,H,{blocked:X,upgrade:ue,blocking:se,terminated:Me}={}){const ae=indexedDB.open(z,H),_t=xe(ae);return ue&&ae.addEventListener("upgradeneeded",Ot=>{ue(xe(ae.result),Ot.oldVersion,Ot.newVersion,xe(ae.transaction))}),X&&ae.addEventListener("blocked",()=>X()),_t.then(Ot=>{Me&&Ot.addEventListener("close",()=>Me()),se&&Ot.addEventListener("versionchange",()=>se())}).catch(()=>{}),_t}function Se(z,{blocked:H}={}){const X=indexedDB.deleteDatabase(z);return H&&X.addEventListener("blocked",()=>H()),xe(X).then(()=>{})}const be=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],He=new Map;function Ge(z,H){if(!(z instanceof IDBDatabase)||H in z||"string"!=typeof H)return;if(He.get(H))return He.get(H);const X=H.replace(/FromIndex$/,""),ue=H!==X,se=Ce.includes(X);if(!(X in(ue?IDBIndex:IDBObjectStore).prototype)||!se&&!be.includes(X))return;const Me=function(){var ae=(0,c.Z)(function*(_t,...Ot){const Nn=this.transaction(_t,se?"readwrite":"readonly");let it=Nn.store;return ue&&(it=it.index(Ot.shift())),(yield Promise.all([it[X](...Ot),se&&Nn.done]))[0]});return function(Ot){return ae.apply(this,arguments)}}();return He.set(H,Me),Me}!function Pe(z){Te=z(Te)}(z=>xz(Dz({},z),{get:(H,X,ue)=>Ge(H,X)||z.get(H,X,ue),has:(H,X)=>!!Ge(H,X)||z.has(H,X)}))},5861:(et,ve,P)=>{function c(L,de,oe,me,ie,ce,he){try{var q=L[ce](he),$=q.value}catch(re){return void oe(re)}q.done?de($):Promise.resolve($).then(me,ie)}function te(L){return function(){var de=this,oe=arguments;return new Promise(function(me,ie){var ce=L.apply(de,oe);function he($){c(ce,me,ie,he,q,"next",$)}function q($){c(ce,me,ie,he,q,"throw",$)}he(void 0)})}}P.d(ve,{Z:()=>te})}},et=>{et(et.s=1238)}]);